<!DOCTYPE html>
<html lang="en-Us"><head>
  <meta charset="utf-8">
  <title>Substitution d&#39;objets - Hiérarchie de classes</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Semestre 7 de l&#39;ENSEIRB-MATEMECA">
  <meta name="author" content="Sébastien">
  <meta name="generator" content="Hugo 0.74.3" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/Ionicons/css/ionicons.min.css">
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/magnific-popup/magnific-popup.css">
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/slick/slick.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://Sdelpeuch.github.io/images/favicon.png" type="image/x-icon">
  <link rel="icon" href="https://Sdelpeuch.github.io/images/favicon.png" type="image/x-icon">

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->

<header class="navigation">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        
        <nav class="navbar">
          
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navigation">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
              <img src="https://Sdelpeuch.github.io/images/telechargement.png" alt="Semestre 8" width="65px" class="img-responsive">
            </a>
          </div>
          
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="nav navbar-nav navbar-right">
              
              
              <li><a href="/">Accueil</a></li>
              
              
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                  aria-expanded="false">Semestre 8 <span class="ion-ios-arrow-down"></span></a>
                <ul class="dropdown-menu">
                  
                  <li><a href="/semestre8/apptcp-ip">Applications TCP/IP</a></li>
                  
                  <li><a href="/semestre8/complex">Calculabilité</a></li>
                  
                  <li><a href="/semestre8/crypto">Cryptologie</a></li>
                  
                  <li><a href="/semestre8/ia">Intelligence artificielle</a></li>
                  
                  <li><a href="/semestre8/maker">Maker</a></li>
                  
                  <li><a href="/semestre8/robotique">Robotique</a></li>
                  
                  <li><a href="/semestre8/se">Sys Exploitation</a></li>
                  
                  <li><a href="/semestre8/jeux">Théorie des jeux</a></li>
                  
                </ul>
              </li>
              
              
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                  aria-expanded="false">Semestre 7 <span class="ion-ios-arrow-down"></span></a>
                <ul class="dropdown-menu">
                  
                  <li><a href="/semestre7/compilation/">Compilation</a></li>
                  
                  <li><a href="/semestre7/gl">Génie Logiciel</a></li>
                  
                  <li><a href="/semestre7/poo">POO</a></li>
                  
                  <li><a href="/semestre7/cpp">Programmation C&#43;&#43;</a></li>
                  
                  <li><a href="/semestre7/quantique">Quantique</a></li>
                  
                  <li><a href="/semestre7/bdd">SGBD</a></li>
                  
                  <li><a href="/semestre7/prog_sys/">Système</a></li>
                  
                  <li><a href="/semestre7/tcp">TCP/IP</a></li>
                  
                </ul>
              </li>
              
              
              
              <li><a href="/semestre6/semestre_6">Semestre 6</a></li>
              
              
              
              <li><a href="/semestre5/semestre_5">Semestre 5</a></li>
              
              
              
              <li><a href="/contact">Contact</a></li>
              
              
              
              <li><a href="/cpbx">CPBx</a></li>
              
              

              
            </ul>
          </div>
        </nav>
      </div>
    </div>
  </div>
</header>

<section class="page-title bg-2" style="background-image: url('https://Sdelpeuch.github.io/images/banner/java.jpg');">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="block">
          <h1>Substitution d&#39;objets - Hiérarchie de classes</h1>
          <p></p>
        </div>
      </div>
    </div>
  </div>
</section>


<section class="page-wrapper">
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<div class="post post-single">
					<h2 class="post-title">Substitution d&#39;objets - Hiérarchie de classes</h2>
					<div class="post-meta">
						<ul>
              <li><i class="ion-calendar"></i> October 5, 2020</li>
              
              
              
              
              
              
              <li><i class="ion-pricetags"></i> 
                
                <a href="/tags/poo">P o o</a>
								
              </li>
            </ul>
					</div>
					
					
					
					<div class="post-content post-excerpt">
						<p>La hiérarchie de classes correspond à une hiérarchie de type / sous type entre
classes. Elle organise les trois catégories de classe : concrète, abstraite et
abstraite pure. La construction de cette hiérarchie se fait au travers du
mécanisme d&rsquo;héritage.</p>
<h2 id="lhéritage-ou-lien-est-un">L&rsquo;héritage ou lien &ldquo;est-un&rdquo;</h2>
<p><strong>Définition :</strong> Le mécanisme d&rsquo;héritage inclut dans la construction d&rsquo;une
classe les informations de la construction/ définition d&rsquo;une autre classe
(existante).</p>
<p>Si une classe D hérite d&rsquo;une classe B, la définition de la classe D inclut
automatiquement le prototype des méthodes (d&rsquo;instance et de classe) et la
réalisation (code des méthodes, variables) de la classe B.</p>
<p>Toutes les modifications de la classe B se répercutent sur la classe B. La
classe D est appelée &ldquo;classe dérivée&rdquo;, &ldquo;sous-classe&rdquo;, &ldquo;classe fille&rdquo; et la
classe B est appelée &ldquo;classe de base&rdquo;, &ldquo;classe mère&rdquo;.</p>
<p>On distingue le mécanisme d&rsquo;héritage en :</p>
<ul>
<li><strong>Héritage simple</strong> si le mécanisme n&rsquo;accepte qu&rsquo;une seule classe de base
directe. La hiérarchie correspond à un arbre avec une seule racine.</li>
<li><strong>Héritage multiple</strong> si le mécanisme accepte plusieurs classes de base
directes. La hiérarchie correspond à une forêt avec plusieurs racines.</li>
</ul>
<h3 id="lien-est-un">Lien &ldquo;est-un&rdquo;</h3>
<p>L&rsquo;héritage est un lien entre classe/type nommé dans le cours &ldquo;est-un&rdquo; (&ldquo;is-a&rdquo;).
D hérite de B ou D est un B. Il y a au moins deux aspects à considérer avec le
lien &ldquo;est-un&rdquo;.</p>
<ul>
<li><strong>La relation de type/sous-type</strong> : La nouvelle classe inclut le prototype (et
la spécification) des méthodes de l&rsquo;ensemble des classes impliquées dans la
hiérarchie d&rsquo;héritage. Le mécanisme d&rsquo;héritage définit une relation de
type/sous-type. L&rsquo;intérêt est de permettre la substitution d&rsquo;objets. C&rsquo;est une
propriété pour le client de la hiérarchie.</li>
<li><strong>Réutilisation de la réalisation</strong> : La nouvelle classe inclut la réalisation
(corps des méthodes et variables) de l&rsquo;ensemble des classes impliquées dans la
hiérarchie des méthodes et variables) de l&rsquo;ensemble des classes impliquées
dans la hiérarchiser d&rsquo;héritage. L&rsquo;intérêt est de permettre de factoriser du
code. C&rsquo;est une propriété pour le développeur.</li>
</ul>
<p>Ces deux aspects ne sont pas forcément liés. Mais, en général, le mécanisme
d&rsquo;héritage ne les distingue pas. Il faut les gérer en même temps ce qui peut
introduire des incohérences dans la hiérarchie de classes. La hiérarchie doit
plutôt mettre l&rsquo;accent sur la relation de type/sous-type.</p>
<h3 id="en-java">En Java</h3>
<p>Dans la construction d&rsquo;une classe, le langage Java sépare une classe avec
réalisation et une classe sans réalisation. Du coup, le lien &ldquo;est-un&rdquo; correspond
à trois mécanismes d&rsquo;héritages :</p>
<ul>
<li>l&rsquo;héritage entre une classe et des interfaces</li>
<li>l&rsquo;héritage entre interfaces</li>
<li>l&rsquo;héritage entre classes</li>
</ul>
<h2 id="héritages-dinterfaces">Héritages d&rsquo;interfaces</h2>
<p>C&rsquo;est un mécanisme d&rsquo;héritage multiple</p>
<h3 id="héritage-entre-une-classe-et-des-interfaces">Héritage entre une classe et des interfaces</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">[</span><span style="color:#66d9ef">public</span><span style="color:#f92672">][</span><span style="color:#66d9ef">abstract</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NomClasse</span> <span style="color:#66d9ef">implements</span> UneInterface<span style="color:#f92672">,</span> UneAutreInterface<span style="color:#f92672">{</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Le mot-clé <code>implements</code> indique que la nouvelle classe correspond à une
réalisation des différentes interfaces de la liste.</p>
<h3 id="héritage-entre-interfaces">Héritage entre interfaces</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">[</span><span style="color:#66d9ef">public</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">NomInterface</span> <span style="color:#66d9ef">extends</span> UneInterface<span style="color:#f92672">,</span> UneAutreInterface<span style="color:#f92672">{</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>La nouvelle interface &ldquo;inclut&rdquo; toutes les déclarations contenues dans les
interfaces spécifiées par le mot-clé <code>extends</code>. Ce lien &ldquo;est-un&rdquo; permet à une
interface d&rsquo;étendre ou de réunir des fonctionnalités d&rsquo;autres interfaces.</p>
<h2 id="héritage-entre-classes">Héritage entre classes</h2>
<p>Le mot-clé <code>extends</code> définit la relation d&rsquo;héritage entre deux classes. C&rsquo;est un
héritage simple avec comme racine la classe <code>java.lang.Object</code>. Une même classe
peut avoir un héritage simple sur une construction <code>class</code> et un héritage
multiple sur des constructions <code>interface</code>.</p>
<h3 id="définition-dune-classe-avec-réalisation">Définition d&rsquo;une classe avec réalisation</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">[</span><span style="color:#66d9ef">public</span><span style="color:#f92672">]</span> <span style="color:#f92672">[</span><span style="color:#66d9ef">abstract</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">final</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NomClasse</span> <span style="color:#f92672">[</span> <span style="color:#66d9ef">extends</span> UneClasse <span style="color:#f92672">]</span> <span style="color:#f92672">[</span> <span style="color:#66d9ef">implements</span> UneInterface <span style="color:#f92672">,</span> UneAutreInterface <span style="color:#f92672">]</span> <span style="color:#f92672">{</span>
<span style="color:#75715e">// Membres: variables .
</span><span style="color:#75715e"></span><span style="color:#f92672">[</span><span style="color:#66d9ef">final</span><span style="color:#f92672">][</span><span style="color:#66d9ef">public</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">protected</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">private</span><span style="color:#f92672">]</span> type varInstance <span style="color:#f92672">[=</span> expression <span style="color:#f92672">];</span>
<span style="color:#66d9ef">static</span> 
<span style="color:#f92672">[</span><span style="color:#66d9ef">final</span><span style="color:#f92672">][</span><span style="color:#66d9ef">public</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">protected</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">private</span><span style="color:#f92672">]</span> type varClasse <span style="color:#f92672">[=</span> expression <span style="color:#f92672">];</span>

<span style="color:#75715e">// Membres méthodes
</span><span style="color:#75715e"></span><span style="color:#f92672">[</span><span style="color:#66d9ef">final</span><span style="color:#f92672">][</span><span style="color:#66d9ef">public</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">protected</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">private</span><span style="color:#f92672">]</span>
typeRetour <span style="color:#a6e22e">méthodeInstance</span> <span style="color:#f92672">([</span> liste de paramètres <span style="color:#f92672">])</span>
<span style="color:#f92672">{</span>
<span style="color:#75715e">// code
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
<span style="color:#66d9ef">abstract</span> <span style="color:#f92672">[</span><span style="color:#66d9ef">public</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">protected</span><span style="color:#f92672">]</span> typeRetour <span style="color:#a6e22e">méthodeInstance</span> <span style="color:#f92672">([</span> liste de paramètres <span style="color:#f92672">]);</span>
<span style="color:#66d9ef">static</span> <span style="color:#f92672">[</span><span style="color:#66d9ef">final</span><span style="color:#f92672">]</span> <span style="color:#f92672">[</span><span style="color:#66d9ef">public</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">protected</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">private</span><span style="color:#f92672">]</span> typeRetour <span style="color:#a6e22e">méthodeClasse</span> <span style="color:#f92672">([</span> liste de paramètres <span style="color:#f92672">])</span>
<span style="color:#f92672">{</span>
<span style="color:#75715e">// code
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>

<span style="color:#75715e">// Membres constructeurs .
</span><span style="color:#75715e"></span><span style="color:#f92672">[</span><span style="color:#66d9ef">public</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">protected</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">private</span><span style="color:#f92672">]</span> <span style="color:#a6e22e">constructeur</span> <span style="color:#f92672">([</span> liste de paramètres <span style="color:#f92672">])</span>
<span style="color:#f92672">{</span>
<span style="color:#75715e">//code
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Sans préence du mot-clé <code>extends</code>, une classe hérite par défaut de la classe
<code>java.lang.Object</code>. La classe <code>Object</code> contient des méthodes d&rsquo;instance communes
à tous les objets comme <code>toString(), equals()</code> ou <code>getClass()</code> le mot clé
<code>final</code> devant une classe bloque l&rsquo;héritage. Cette classe n&rsquo;admet pas de
sous-classe. Le mot clé <code>abstract</code> devant une classe indique une classe
abstraite c&rsquo;est à dire non instanciable. Une classe abstraite admet forcément
des sous-classes, elle ne peut pas être déclarée avec le mot clé &ldquo;final&rdquo;. Pour
notre cas d&rsquo;école : nous souhaitons ajouter un service de verrou à
l&rsquo;encapsulation <code>porte charnière</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> porte<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PorteVerrouCharniere</span> <span style="color:#66d9ef">extends</span> PorteCharniere<span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> estVerrouille<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PorteVerrouCharniere</span><span style="color:#f92672">(){</span>
        estVerrouille<span style="color:#f92672">=</span><span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">verrouiller</span><span style="color:#f92672">(){</span>
        estVerrouille<span style="color:#f92672">=</span><span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">deverrouiller</span><span style="color:#f92672">(){</span>
        estVerrouille<span style="color:#f92672">=</span><span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">estVerouille</span><span style="color:#f92672">(){</span>
        <span style="color:#66d9ef">return</span> estVerrouille<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

PorteVerrouCharniere verrou <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PorteVerrouCharniere<span style="color:#f92672">();</span>

verrou<span style="color:#f92672">.</span><span style="color:#a6e22e">fermer</span><span style="color:#f92672">();</span>
verrou<span style="color:#f92672">.</span><span style="color:#a6e22e">estFerme</span><span style="color:#f92672">();</span>
verrou<span style="color:#f92672">.</span><span style="color:#a6e22e">estVerrouille</span><span style="color:#f92672">();</span>
</code></pre></div><p>Les membres d&rsquo;une classe dérivée regroupent :</p>
<ul>
<li>les variables, méthodes et constructeurs définis dans la classe,</li>
<li>les membres hérités (variables et méthodes) définis dans les classes de base
(directe ou indirecte)</li>
</ul>
<h3 id="accès-pour-les-classes-dérivées">Accès pour les classes dérivées</h3>
<p>Une classe dérivée ne fait pas forcément partie du même paquetage que sa classe
de base. Le modificateur d&rsquo;accès <code>protected</code> permet un accès préférentiel par
classes dérivées aux membres de la classe de base et aux classes du paquetage.</p>
<p>Pour éviter les dépendances de réalisation entre la classe de base et ses
classes dérivées, il est nécessaire de respecter l&rsquo;encapsulation en évitant
d&rsquo;avoir des attributs en accès <code>protected</code>.</p>
<h3 id="variable-héritée">Variable héritée</h3>
<p>Les variables héritées d&rsquo;une classe correspondent à l&rsquo;ensemble des variables
d&rsquo;instance et des variables de classes définies dans la hiérarchie de classes (à
partir de sa classe de base).</p>
<p>L&rsquo;instanciation d&rsquo;une classe dérivée crée une seule zone mémoire. Toutes les
variables d&rsquo;instance héritées (accessibles ou non) se trouvent dans cette zone
mémoire.</p>
<p>Il n&rsquo;est pas possible de modifier la déclaration (type, portée) d&rsquo;une variable
héritée.</p>
<h3 id="constructeur">Constructeur</h3>
<p>Les constructeurs ne sont pas hérités. Il faut systématiquement les définir dans
la classe dérivée.</p>
<p>L&rsquo;instanciation d&rsquo;une classe dérivé est valide uniquement si les attributs
définis par les classes de base sont initialisés. Les attributs d&rsquo;une classe de
base sont initialisés avant ceux de la classe dérivée.</p>
<p>Le code du constructeurs de la classe dérivée ne peut s&rsquo;exécuter qu&rsquo;après celui
du constructeur de la classe de base. Cette ordre d&rsquo;initialisation impose un
chaînage d&rsquo;appel des constructeurs des classes de base. En général, le
programmeur déclenche explicitement l&rsquo;appel à un des constructeurs de la classe
de base directe en utilisant l&rsquo;instruction <code>super()</code>. Le choix du constructeur
se fait à partir du type des paramètres (mécanisme de surcharge). L&rsquo;instruction
<code>super()</code> doit se trouver <strong>en première ligne du code</strong> du constructeur.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PorteVerrouCoulissante</span> <span style="color:#66d9ef">extends</span> PorteCoulissante<span style="color:#f92672">{</span>
    <span style="color:#75715e">//...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PorteVerrouCoulissante</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> pasMax<span style="color:#f92672">){</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">(</span>pasMax<span style="color:#f92672">);</span>
        <span style="color:#75715e">//initialisation des attributs de la classe
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Lorsqu&rsquo;il n&rsquo;y a pas d&rsquo;instruction <code>super()</code> ou <code>this()</code> sur la première ligne du
code du constructeur, le compilateur fait appel au constructeur sans paramètre
de la classe de base (&ldquo;appel implicite&rdquo;).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PorteVerrouCharniere</span><span style="color:#f92672">(){</span>
    estVerrouille <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="méthode-héritée">Méthode héritée</h3>
<p>En fonction des portées, les méthodes d&rsquo;instance héritées sont applicables sur
l&rsquo;instance de la classe dérivée. Les méthodes de classe de la classe de base
sont applicables sur la classe dérivée.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">PorteVerrouCharniere v <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PorteVerrouCharniere<span style="color:#f92672">();</span>
v<span style="color:#f92672">.</span><span style="color:#a6e22e">fermer</span><span style="color:#f92672">();</span>
v<span style="color:#f92672">.</span><span style="color:#a6e22e">verrouiller</span><span style="color:#f92672">();</span>
</code></pre></div><h2 id="le-mécanisme-de-redéfinition-des-méthodes-dinstance">Le mécanisme de redéfinition des méthodes d&rsquo;instance</h2>
<p>Dans une classe dérivée, il est parfois nécessaire d&rsquo;adapter le code d&rsquo;une
méthode d&rsquo;instance héritée à la nouvelle réalisation. La redéfinition permet de
réécrire le code d&rsquo;une méthode héritée. Ce mécanisme n&rsquo;est applicable que sur
une méthode accessible et en respectant le prototype déclaré dans la classe de
base</p>
<ul>
<li>la portée peut être élargie (protégée en public, paquetage en protégé ou
public)</li>
<li>le type de retour peut-être un sous type du type de retour de la méthode</li>
</ul>
<p>Prenons l&rsquo;exemple de la classe <code>PorteVerrouCharniere</code>. Cette classe hérite de la
classe <code>PorteCharniere</code> et doit redéfinir le code de la méthode d&rsquo;instance
<code>ouvrir()</code> mais en réutilisant le code de cette méthode dans la classe de base.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PorteVerrouCharniere</span> <span style="color:#66d9ef">extends</span> porte<span style="color:#f92672">.</span><span style="color:#a6e22e">PorteCharniere</span><span style="color:#f92672">{</span>
    <span style="color:#75715e">//...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">ouvrir</span><span style="color:#f92672">(){</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(!</span>estVerrouille<span style="color:#f92672">())</span>
            ouvrir<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Dans ce cas, nous avons un appel récursif. Nous devons avoir un moyen de
désigner la définition de la méthode dans la classe de base directe :
<code>super.ouvrir()</code>. Par défaut, toutes les méthodes d&rsquo;instance accessibles par la
classe dérivée peuvent être redéfinies. Le mot clé <code>final</code> devant le prototype
de la méthode empêche la redéfinition de cette méthode dans les classes
dérivées.</p>
<h3 id="retour-sur-le-polymorphisme">Retour sur le polymorphisme</h3>
<p>Pour assurer la substitution d&rsquo;objets, l&rsquo;aiguillage vers la méthode doit se
faire à l&rsquo;exécution. Pour cela, la liaison dynamique est employée sur les
méthodes d&rsquo;instance.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">PorteVerrouCharniere v <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PorteVerrouCharniere<span style="color:#f92672">();</span>
v<span style="color:#f92672">.</span><span style="color:#a6e22e">fermer</span><span style="color:#f92672">();</span>
v<span style="color:#f92672">.</span><span style="color:#a6e22e">verrouiller</span><span style="color:#f92672">();</span>
v<span style="color:#f92672">.</span><span style="color:#a6e22e">ouvrir</span><span style="color:#f92672">;</span>
v<span style="color:#f92672">.</span><span style="color:#a6e22e">estFerme</span><span style="color:#f92672">();</span>

PorteCharniere c <span style="color:#f92672">=</span> v<span style="color:#f92672">;</span>
c<span style="color:#f92672">.</span><span style="color:#a6e22e">ouvrir</span><span style="color:#f92672">();</span> <span style="color:#75715e">// ??
</span><span style="color:#75715e"></span>c<span style="color:#f92672">.</span><span style="color:#a6e22e">estFerme</span><span style="color:#f92672">();</span> <span style="color:#75715e">// ??
</span></code></pre></div><p>Voici une version du même service verrou appliqué à l&rsquo;encapsulation <code>porte coulissante</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PorteVerrouCoulissante</span> <span style="color:#66d9ef">extends</span> PorteCoulissante <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> estDeVerrouille <span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PorteVerrouCoulissante</span> <span style="color:#f92672">(</span> <span style="color:#66d9ef">int</span> pasMax <span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">super</span> <span style="color:#f92672">(</span> pasMax <span style="color:#f92672">)</span> <span style="color:#f92672">;</span>
        estDeVerrouille <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">verrouiller</span><span style="color:#f92672">(){</span>
        estDeVerrouille <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">deverrouiller</span><span style="color:#f92672">(){</span>
        estDeVerrouille <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">estVerrouille</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">!</span> estDeVerrouille <span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">ouvrir</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>estDeVerrouille<span style="color:#f92672">)</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">ouvrir</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h4 id="au-sujet-des-méthodes-de-classe">Au sujet des méthodes de classe</h4>
<p>Le langage Java permet la modification du code des méthodes de classe héritées
(toujours en respectant le prototype défini dans la classe de base). Mais avec
une restriction forte, l&rsquo;aiguillage des méthodes de classe s&rsquo;effectue avec une
liaison statique. Nous avons affaire à un <strong>mécanisme de masquage</strong> et non à un
mécanisme de redéfinition. Comme en Java, il est possible de déclencher une
méthode de classe sur une instance. L&rsquo;envoi du message <code>a.m()</code> est ambigu par
rapport à l&rsquo;objectif de substitution d&rsquo;objets dans le code.</p>
<h2 id="classe-abstraite">Classe abstraite</h2>
<p>Une classe abstraite (<code>abstract class</code> en Java) n&rsquo;est pas instanciable mais
contient quand même du code (attributs et méthodes). Dans la hiérarchie de
classes, une classe abstraite va servir à factoriser le code utilisé dans les
classes dérivées. Pour respecter l&rsquo;encapsulation, une classe abstraite
définissant des attributs doit définir un ou plusieurs constructeurs. Dans une
classe, une méthode abstraite (sans corps) est déclarée avec le mot-clé
<code>abstract</code> et sans accolades. Le code d&rsquo;une méthode abstraite est défini dans
les classes dérivées. Une classe contenant une méthode abstraite est forcément
abstraite. La réalisation de cette classe abstraite peut faire appel à la
méthode abstraite. Par polymorphisme, l&rsquo;exécution de cet appel contiendra le code
d&rsquo;une des classes dérivées. La liaison statique pour les méthodes de classe
implique qu&rsquo;une méthode de classe ne peut pas être abstraite.</p>
<h3 id="factoriser-la-méthode-envoyercommande">Factoriser la méthode <code>envoyerCommande()</code>.</h3>
<p>Nous modifions l&rsquo;héritage de classes. Le code à factoriser est contenu dans une
classe abstraite <code>PorteAbstraite</code> qui devient la classe de base des classes
<code>PorteCharniere</code> et <code>PorteCouilissante</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> porte<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> matos.onde.DentBleu<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PorteAbstraite</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> DentBleu canal<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">protected</span> <span style="color:#a6e22e">PorteAbstraite</span><span style="color:#f92672">(</span>DentBleu d<span style="color:#f92672">){</span>
        canal <span style="color:#f92672">=</span> d<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">envoyerCommande</span><span style="color:#f92672">(</span>String <span style="color:#f92672">...</span> cmms<span style="color:#f92672">){</span>
        canal<span style="color:#f92672">.</span><span style="color:#a6e22e">connecter</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i<span style="color:#f92672">&lt;</span>cmms<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span>
            canal<span style="color:#f92672">.</span><span style="color:#a6e22e">envoyer</span><span style="color:#f92672">(</span>cmms<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
        canal<span style="color:#f92672">.</span><span style="color:#a6e22e">deconnecter</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Dans ce cas, le code factorisé est déclenché par les classes dérivées.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> porte<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PorteCharniere</span> <span style="color:#66d9ef">extends</span> PorteAbstraite<span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> estFerme<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">PorteCharniere</span><span style="color:#f92672">(){</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> matos<span style="color:#f92672">.</span><span style="color:#a6e22e">onde</span><span style="color:#f92672">.</span><span style="color:#a6e22e">DentBleu</span><span style="color:#f92672">());</span>
        _ouvrir_<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">estFerme</span><span style="color:#f92672">(){</span>
        <span style="color:#66d9ef">return</span> estFerme<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fermer</span><span style="color:#f92672">(){</span>
        envoyerCommande<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;pivoter_charniere&#34;</span><span style="color:#f92672">);</span>
        estFerme<span style="color:#f92672">=</span><span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">ouvrir</span><span style="color:#f92672">(){</span>
        _ouvrir_<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">_ouvrir_</span><span style="color:#f92672">(){</span>
        envoyerCommande<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;manoeuvrer_bec&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;pivoter_charniere&#34;</span><span style="color:#f92672">);</span>
        estFerme <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span> 
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Pour traiter la substitution d&rsquo;objet dans la classe <code>Telecommande</code>, la classe
abstraite <code>PorteAbstraite</code> doit posséder un lien &ldquo;est-un&rdquo; avec l&rsquo;interface
<code>Porte</code>.</p>
<h3 id="factoriser-le-traitement-du-verrou">Factoriser le traitement du verrou</h3>
<p>De la même façon, le code est factorisé dans une classe de base commune aux deux
classes. Le code de la méthode <code>ouvrir()</code> contient une partie de code à
factoriser et une partie de code dépendant de chaque réalisation de
l&rsquo;abstraction <code>porte</code>. La méthode <code>ouvrir()</code> est définie dans la classe de base
avec le code factorisé. Pour contenir le code dépendant des réalisations, nous
définissons une méthode abstraite. Cette fois, c&rsquo;est la classe abstraite qui
déclenche un traitement sur les classes dérivées.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> porte<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> matos.onde.DenBleu<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> abstact <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">PorteAbstraite</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> DentBleu canal<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">boolean</span> estDeVerrouille<span style="color:#f92672">;</span>
    
    <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">envoyerCommande</span><span style="color:#f92672">(</span>String <span style="color:#f92672">...</span> cmms<span style="color:#f92672">){</span>
        canal<span style="color:#f92672">.</span><span style="color:#a6e22e">connecter</span><span style="color:#f92672">();</span>
        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> cmms<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span>
            canal<span style="color:#f92672">.</span><span style="color:#a6e22e">envoyer</span><span style="color:#f92672">(</span>cmms<span style="color:#f92672">[</span>i<span style="color:#f92672">]);</span>
        canal<span style="color:#f92672">.</span><span style="color:#a6e22e">deconnecter</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">protected</span> <span style="color:#a6e22e">PorteAbstraite</span><span style="color:#f92672">(</span>DentBleu d<span style="color:#f92672">){</span>
        canal <span style="color:#f92672">=</span> d<span style="color:#f92672">;</span>
        estDeVerouille <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span> 
        envoyerCommande<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;mettre_verrou&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">verrouiller</span><span style="color:#f92672">(){</span>
        envoyerCommande<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;mettre_verrou&#34;</span><span style="color:#f92672">);</span>
        estDeVerrouille <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">deverrouiller</span><span style="color:#f92672">(){</span>
        envoyerCommande<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;enlever_verrou&#34;</span><span style="color:#f92672">);</span>
        estDeVerouille <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">estVerrouille</span><span style="color:#f92672">(){</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">!</span>estDeVerrouille<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#75715e">//code factorisé de la méthode ouvrir()
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">ouvrir</span><span style="color:#f92672">(){</span>
        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>estDeVerrouille<span style="color:#f92672">)</span>
            faireOuvrir<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#75715e">//code de la méthode ouvrir() dépendant des réalisations
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">faireOuvrir</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="substitution-dobjets-et-factorisation-de-code">Substitution d&rsquo;objets et factorisation de code</h2>
<p>Le cas de la factorisation du verrou peut s&rsquo;envisager d&rsquo;une autre manière. Nous
allons encapsuler le code à factoriser. C&rsquo;est à dire que le code factorisé dans
un objet séparé des instances de <code>PorteCharniere</code> et de <code>PorteCoulissante</code>. Nous
définissons une classe <code>Verrou</code> contenant la réalisation du verrou et les
méthodes définies dans l&rsquo;interface <code>Porte</code>. Le code factorisé est appliqué sur
les instances de <code>PorteCharniere</code> et de <code>PorteCoulissante</code>. La classe <code>Verrou</code>
possède un lien &ldquo;a-un&rdquo; pour déclencher les méthodes sur ces instances. Cette
solution nécessite une substitution des instances de <code>PorteCharniere</code> et de
<code>PorteCoulissante</code> dans le code de la classe <code>Verrou</code>. Nous avons besoin de
l&rsquo;interface <code>Porte</code> et de la relation de type / sous-type.</p>
<h2 id="héritage-multiple-et-choix-des-membres-hérités">Héritage multiple et choix des membres hérités</h2>
<p>Dans le cas de l&rsquo;héritage multiple, la déclaration / signature d&rsquo;une méthode
abstraite ou la définition d&rsquo;un membre hérité peut provenir de plusieurs classes
de base directes.</p>
<p>L&rsquo;héritage multiple de la déclaration / signature d&rsquo;une méthode abstraite ne
provoque pas de cas ambigu de choix. La déclaration / signature est unique même
si elle est répétée et un code est à fournir pour cette déclaration.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Allsage</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mrRobot</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Evilcorp</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mrRobot</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fsociety</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mrRobot</span><span style="color:#f92672">();</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Elliot</span> <span style="color:#66d9ef">extends</span> Fsociety <span style="color:#66d9ef">implements</span> AllSafe<span style="color:#f92672">,</span> Evilcorp<span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mrRobot</span><span style="color:#f92672">(){</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;hello&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Par contre l&rsquo;héritage multiple de définition (de code) peut aboutir à une
ambiguïté dans le choix de la définition à utiliser. Un exemple avec des
variables de classe constante :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Ulukai</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> MAX <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>999<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Adelpha</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> MAX <span style="color:#f92672">=</span> 666<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Outcast</span> <span style="color:#66d9ef">extends</span> Adelpha<span style="color:#f92672">,</span> Ulukai<span style="color:#f92672">{}</span>
</code></pre></div><p>L&rsquo;appel <code>Outcast.MAX</code> est ambigu; le compilateur provoque une erreur. Pour
l&rsquo;éviter dans <code>Outcast</code>, il est nécessaire de définir une autre variable <code>MAX</code>
qui va masquer les deux autres : <code>public static final MAX = Ulukai.MAX</code>;</p>
<h3 id="les-interfaces-en-java-8">Les interfaces en Java 8</h3>
<p>La version 8 du langage Java a modifié la construction <code>interface</code>. Elle peut
contenir la définition de méthodes de classe et le code par défaut de méthodes
d&rsquo;instances.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">[</span><span style="color:#66d9ef">public</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">NomInterface</span> <span style="color:#f92672">[</span><span style="color:#66d9ef">extends</span> interface1<span style="color:#f92672">,</span> interface2<span style="color:#f92672">]{</span>
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">public</span> type nom <span style="color:#f92672">=</span> valeur<span style="color:#f92672">;</span>
    
    <span style="color:#f92672">[</span><span style="color:#66d9ef">public</span><span style="color:#f92672">]</span> <span style="color:#66d9ef">static</span> type <span style="color:#a6e22e">methodeClasse</span><span style="color:#f92672">([</span>liste paramètre<span style="color:#f92672">]);</span>
    
    <span style="color:#66d9ef">default</span> <span style="color:#f92672">[</span><span style="color:#66d9ef">public</span><span style="color:#f92672">]</span> type <span style="color:#a6e22e">methodeInstanceAvecCode</span><span style="color:#f92672">([</span>liste paramètre<span style="color:#f92672">]){</span>
    
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Le code par défaut de la méthode d&rsquo;instance est uitlisé si la classe réalisant
cette interface ne redéfinit pas cette méthode.</p>
<p>Ce mécanisme de code par défaut (&ldquo;défault method&rdquo;) permet d&rsquo;ajouter de nouvelles
fonctionnalités à une interface sans régression du code binaire des sources
écrits avant la version précédent de cette interface. Le cas classique
d&rsquo;héritage multiple d&rsquo;interfaces :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Ulukai</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mClasse</span><span style="color:#f92672">(){</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Classe_Ulukai&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mInstance</span><span style="color:#f92672">(){</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Ulukai&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Adelpha</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mClasse</span><span style="color:#f92672">(){</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Classe_Adelpha&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mInstance</span><span style="color:#f92672">(){</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Adelpha&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Outcast</span> <span style="color:#66d9ef">extends</span> Adelpha<span style="color:#f92672">,</span> Ulukai<span style="color:#f92672">{</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>Pour éviter l&rsquo;ambiguïté, une méthode de classe définie dans une interface n&rsquo;est
pas héritée. Elle est accessible uniquement à travers l&rsquo;interface. Par contre
pour une méthode d&rsquo;instance, il y a ambiguïté sur le code par défaut à utiliser.
Le compilateur provoque une erreur.</p>
<pre><code>error : interface Outcast inherits unrelated defaults for mInstance() from types Adelpha and Ulukai 
</code></pre><p>Il faut redéfinir le code par défaut dans l&rsquo;interface <code>Outcast</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Outcast</span> <span style="color:#66d9ef">extends</span> Adelpha<span style="color:#f92672">,</span> Ulukai<span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mInstance</span><span style="color:#f92672">(){</span>
        Adelpha<span style="color:#f92672">.</span><span style="color:#a6e22e">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">mInstance</span><span style="color:#f92672">();</span>
        <span style="color:#75715e">//Ulukai.super.mInstance();
</span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>Comme l&rsquo;objectif est de fournir un code par défaut à une méthode d&rsquo;instance, un
algorithme de résolution a été ajouté pour éviter les cases les plus fréquents
d&rsquo;ambiguïté.</p>
<ul>
<li>L&rsquo;héritage de classe est prioritaire</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Allsafe</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mrRobot</span><span style="color:#f92672">(){</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Allsafe&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fsociety</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mrRobot</span><span style="color:#f92672">(){</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Fsociety&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Elliot</span> <span style="color:#66d9ef">extends</span> Fsociety <span style="color:#66d9ef">implements</span> Evilcorp<span style="color:#f92672">{</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>C&rsquo;est toujours la définition faite dans la hiérarchie de classes qui est
choisie.</p>
<ul>
<li>Sans définition de la méthode dans la hiérarchie de classes, c&rsquo;est la dernière
redéfinition dans la hiérarchie d&rsquo;interfaces qui est choisie.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Allsafe</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mrRobot</span><span style="color:#f92672">(){</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Allsafe&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fsociety</span><span style="color:#f92672">{</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mrRobot</span><span style="color:#f92672">(){</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Fsociety&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Fsociety</span> <span style="color:#66d9ef">implements</span> Evilcorp<span style="color:#f92672">{}</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Elliot</span> <span style="color:#66d9ef">extends</span> Fsociety <span style="color:#66d9ef">implements</span> Allsafe<span style="color:#f92672">{}</span>
</code></pre></div>
					</div>
					<div class="post-comments">
						
					</div>
				</div>
			</div>
      <div class="col-md-4">
        <aside class="sidebar">

































<div class="widget widget-latest-post">
    <h4 class="widget-title">Derniers cours</h4>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/complex/6/">Complexité</a></h4>
        <h5>[Calculabilité et complexité]</h5>
        <p>Rappels Fonctions, langages et problèmes Soit la …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/se/3/">Gestion mémoire</a></h4>
        <h5>[SE]</h5>
        <p>Programmation modulaire Le chargement des …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/apptcp/4/">Le routage dans les réseaux</a></h4>
        <h5>[Application TCP-IP]</h5>
        <p>Les réseaux sont reliés entre eux par des routeurs …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/apptcp/3/">Le protocole HTTP - Le courrier électronique</a></h4>
        <h5>[Application TCP-IP]</h5>
        <p>Le protocole HTTP HTTP (Hypertext Transfer …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/complex/4/">Indécidabilité</a></h4>
        <h5>[Calculabilité et complexité]</h5>
        <p>Arrêt des machines de Turing Soit $\text{HALT} : …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/apptcp/2/">DNS - Domain Name System</a></h4>
        <h5>[Application TCP-IP]</h5>
        <p>Les DNS sont utilisés pour la résolution de nom, …</p>
      </div>
    </div>
    
  </div>
</aside>


      </div>
		</div>
	</div>
</section>

<footer class="footer">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="footer-manu">
					<ul>
            
            <li><a href="https://Sdelpeuch.github.io/about">Semestre 7</a></li>
            
            <li><a href="https://Sdelpeuch.github.io/contact">Semestre 6</a></li>
            
            <li><a href="https://Sdelpeuch.github.io/project">Semestre 5</a></li>
            
            <li><a href="https://Sdelpeuch.github.io/cpbx">CPBx</a></li>
            
					</ul>
				</div>
				<p class="copyright">Copyright © 2020 <a href="https://themefisher.com">Themefisher</a> All Rights Reserved</p>
			</div>
		</div>
	</div>
</footer>



<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcABaamniA6OL5YvYSpB3pFMNrXwXnLwU&amp;libraries=places"></script>




<script src="https://Sdelpeuch.github.io/plugins/jQuery/jquery.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/slick/slick.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/magnific-popup/jquery.magnific-popup.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/shuffle/shuffle.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/google-map/gmap.js"></script>




<script src="https://Sdelpeuch.github.io/js/script.min.js"></script>







<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
<div id="js-cookie-box" class="cookie-box cookie-box-hide">
	This site uses cookies. By continuing to use this website, you agree to their use. <span id="js-cookie-button" class="btn btn-main btn-solid-border">I Accept</span>
</div>
<script>
	(function ($) {
		const cookieBox = document.getElementById('js-cookie-box');
		const cookieButton = document.getElementById('js-cookie-button');
		if (!Cookies.get('cookie-box')) {
			cookieBox.classList.remove('cookie-box-hide');
			cookieButton.onclick = function () {
				Cookies.set('cookie-box', true, {
					expires:  2 
				});
				cookieBox.classList.add('cookie-box-hide');
			};
		}
	})(jQuery);
</script>


<style>
.cookie-box {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  text-align: center;
  z-index: 9999;
  padding: 1rem 2rem;
  background: rgb(71, 71, 71);
  transition: all .75s cubic-bezier(.19, 1, .22, 1);
  color: #fdfdfd;
}

.cookie-box-hide {
  display: none;
}
</style>
</body>

</html>
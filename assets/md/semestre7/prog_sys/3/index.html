<!DOCTYPE html>
<html lang="en-Us"><head>
  <meta charset="utf-8">
  <title>Le Buffer Cache</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Semestre 9 de l&#39;ENSEIRB-MATEMECA">
  <meta name="author" content="Sébastien">
  <meta name="generator" content="Hugo 0.74.3" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/Ionicons/css/ionicons.min.css">
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/magnific-popup/magnific-popup.css">
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/slick/slick.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://Sdelpeuch.github.io/images/favicon.png" type="image/x-icon">
  <link rel="icon" href="https://Sdelpeuch.github.io/images/favicon.png" type="image/x-icon">

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->

<header class="navigation">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        
        <nav class="navbar">
          
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navigation">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
              <img src="https://Sdelpeuch.github.io/images/telechargement.png" alt="Semestre 9" width="65px" class="img-responsive">
            </a>
          </div>
          
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="nav navbar-nav navbar-right">
              
              
              <li><a href="/">Accueil</a></li>
              
              
              
              <li><a href="/ronoco">Ronoco (ROS no code)</a></li>
              
              
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                  aria-expanded="false">Semestre 9 <span class="ion-ios-arrow-down"></span></a>
                <ul class="dropdown-menu">
                  
                  <li><a href="/semestre9/controle">Contrôle commande</a></li>
                  
                  <li><a href="/semestre9/interaction">IHR</a></li>
                  
                  <li><a href="/semestre9/maths">Mathématiques</a></li>
                  
                  <li><a href="/semestre9/modelisation">Modélisation</a></li>
                  
                  <li><a href="/semestre9/mecatronique">Mécatronique</a></li>
                  
                  <li><a href="/semestre9/imagerie">Outils d&#39;imagerie</a></li>
                  
                  <li><a href="/semestre9/reachy">Reachy</a></li>
                  
                  <li><a href="/semestre9/energie">Énergétique</a></li>
                  
                </ul>
              </li>
              
              
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                  aria-expanded="false">ENSEIRB-MATMECA <span class="ion-ios-arrow-down"></span></a>
                <ul class="dropdown-menu">
                  
                  <li><a href="/semestre5/semestre_5">Semestre 5</a></li>
                  
                  <li><a href="/semestre6/semestre_6">Semestre 6</a></li>
                  
                  <li><a href="/semestre7/semestre_7">Semestre 7</a></li>
                  
                  <li><a href="/semestre8/semestre_8">Semestre 8</a></li>
                  
                </ul>
              </li>
              
              
              
              <li><a href="/cpbx">CPBx</a></li>
              
              
              
              <li><a href="/contact">Contact</a></li>
              
              

              
            </ul>
          </div>
        </nav>
      </div>
    </div>
  </div>
</header>

<section class="page-title bg-2" style="background-image: url('https://Sdelpeuch.github.io/images/banner/info.jpg');">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="block">
          <h1>Le Buffer Cache</h1>
          <p></p>
        </div>
      </div>
    </div>
  </div>
</section>


<section class="page-wrapper">
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<div class="post post-single">
					<h2 class="post-title">Le Buffer Cache</h2>
					<div class="post-meta">
						<ul>
              <li><i class="ion-calendar"></i> November 5, 2020</li>
              
              
              
              
              
              
              <li><i class="ion-pricetags"></i> 
                
                <a href="/tags/programmation%20syst%c3%a8me">Programmation système</a>
								
              </li>
            </ul>
					</div>
					
					
					
					<div class="post-content post-excerpt">
						<h2 id="introduction-au-buffer-cache">Introduction au buffer cache</h2>
<p>Le buffer cache est un ensemble de structures de données et d&rsquo;algorithme qui
permettent de minimiser le nombre des accès disque. Ce qui est très important
car les disque sont très lents relativement au CPU et un noyau qui se chargerait
de toutes les entrées/sorties serait d&rsquo;une grande lenteur et l&rsquo;unité de
traitement ne serait effectivement utilisé qu&rsquo;à un faible pourcentage. Deux
idées pour réduire le nombre des accès disques :</p>
<ol>
<li>bufferiser les différentes commandes d&rsquo;écriture et de lecture de façon à
faire un accès disque uniquement pour une quantité de données de taille
raisonnable</li>
<li>Éviter des écritures inutiles quand les données peuvent encore être changées</li>
</ol>
<h3 id="avantages-et-désavantages-du-buffer-cache">Avantages et désavantages du buffer cache</h3>
<ul>
<li>Un accès uniforme au disque. Le noyau n&rsquo;a pas à connaître la raison de
l&rsquo;entrée-sortie. Il copie les données depuis et vers des tampons (que ce
soient des données, des inodes ou le superbloc). Ce mécanisme est modulaire et
s&rsquo;intègre facilement à l&rsquo;ensemble du système qu&rsquo;il rend plus facile à écrire.</li>
<li>Rend l&rsquo;utilisation des entrées-sorties plus simple pour l&rsquo;utilisateur qui n&rsquo;ap
as à se soucier des problèmes d&rsquo;alignement, il rend les programmes portables
sur d&rsquo;autres UNIX.</li>
<li>Il réduit le trafic disque et de ce fait augmente la capacité du système.</li>
<li>L&rsquo;implémentation du buffer cache rotège contre certaines écritures
concurrentes</li>
<li>L&rsquo;écriture différée pose un problème dans le cas d&rsquo;un crash système. En effet
si votre machine s&rsquo;arrête et que un blocs est marqué &ldquo;à écrire&rdquo; il n&rsquo;ont pas
pas étés sauvegardes physiquement. L&rsquo;intégrité des données n&rsquo;est donc pas
assurée en cas de crash.</li>
<li>Le buffer cache nécessite que l&rsquo;on effectue une recopie pour toute
entrée-sortie. Dans le cas de transferts nombreux ceci ralentit les entrées
sorties.</li>
</ul>
<h2 id="le-buffer-cache-structures-de-données">Le buffer cache, structures de données</h2>
<p>Le statu d&rsquo;un bloc cache est une combinaison des états suivants :</p>
<ul>
<li><strong>verrouillé</strong> l&rsquo;accès est réservé à un processus</li>
<li><strong>valide</strong> (les données contenues dans le bloc sont valides)</li>
<li><strong>à écire</strong> les données du bloc doivent être écrites sur disque avant de
réallouer le bloc</li>
<li><strong>actif</strong> le noyau est en train d&rsquo;écrire/lire le bloc sur le disque</li>
<li><strong>attendu</strong> un processus attend la libération du bloc</li>
</ul>
<h3 id="la-liste-doublement-chaînes-des-blocs-libres">La liste doublement chaînes des blocs libres</h3>
<p>Les tampons libres appartiennent simultanément à deux lites doublement
chaînées : la liste des blocs libres et la hash-liste correspondant au dernier
bloc ayant été contenu dans ce tampon. L&rsquo;insertion dans la liste des tampons
libres se fait en fin de liste, la suppression se fait en début de liste, ainsi
le tampon alloué est le plus vieux tampon libéré. Ceci permet une réponse
immédiate si le bloc correspondant est réutilisé avant que le tampon ne soit
alloué à un autre bloc.</p>
<center>
<img src="/assets/images/prog_sys/SYS5.png" width="50%"></img>
</center>
<!-- ## Abstraction pour le processus et la mémoire  -->
<!-- Le **Processus** est un programme qui s'execute ainsi que son contexte (mémoire, -->
<!-- état des descripteurs de fichiers) -->
<!-- Dans les systèmes d'exploitation :  -->
<!-- + Support pour de multiples processus  -->
<!-- + Chaque processus a un espace d'adressage privé ce qui garenti le cloisonnement -->
<!--   entre processus (sécurité et protection), cela permet d'avoir une abstraction -->
<!--   de la mémoire et surtout cela cache le noyau et les autres processus. -->
<!--    <center> -->
<!-- <img src="/assets/images/prog_sys/6.png" width="50%"></img> -->
<!-- </center> -->
<!-- + Stack : pile où sont stockées les variables locales  -->
<!-- + Heap (tas) : allocation dynamique, par malloc -->
<!-- + Data : zone de données globales ou statiques -->
<!-- + Texte : zone de code, des instructions du programme -->
<!-- ## Gestion mémoire par l'OS -->
<!-- ### Lien entre mémoire virtuelle et mémoire réelle  -->
<!-- La traduction de la mémoire virtuelle en mémoire réelle est réalisée par le CPU -->
<!-- (MMU/TLB) via un mécanisme de pages. La mémoire est gérée par blocs de 2ko de -->
<!-- mémoire ce sont les **pages**. Chaque page virtuelle correspondà une page -->
<!-- réelle.  -->
<!-- La traduction s'appuie sur un **mapping** des pages (traduction par -->
<!-- dictionnaire). L'adresse virtuelle est composée de différents champs permettant -->
<!-- de construire l'adresse réelle. -->
<!--  <center> -->
<!-- <img src="/assets/images/prog_sys/7.png" width="50%"></img> -->
<!-- </center> -->
<!-- ### Allocation mémoire -->
<!-- Un ensemble de pages physiques sont allouée à un processus (pour les différentes -->
<!-- zones). L'allocation est une allocation paresseuse  -->
<!-- + L'allocation de la page est réellement faite que lorsqu'elle est réellement -->
<!--   accédée -->
<!-- + Permet une gestion plus économique de la mémoire (plutôt qu'une allocation -->
<!--   gloutonne) -->
<!-- + Rôle du swap : si plus de pages physiques, stocke sur disque les pages de -->
<!--   processus en attente -->
<!-- ## Interface de programmation pour la gestion mémoire -->
<!-- ```c -->
<!-- int brk(void *end_segment); -->
<!-- int skrb(intptr_t displacement); -->
<!-- ``` -->
<!-- Définit l'adresse virtuelle de la fin du tas  -->
<!-- + Soit directement avec brk -->
<!-- + Soit avec un déplacement avec sbrk  -->
<!-- Ces fonctions ne sont pas à utiliser directement, utiliser `malloc` plutôt -->
<!-- ```c -->
<!-- void *malloc(size_t size); -->
<!-- void *calloc(size_t count, size_t size); -->
<!-- void *realloc(void *p, size_t size); -->
<!-- ``` -->
<!-- Cela retourne un pointeur sur une nouvelle zone libre de size octets sur le cas, -->
<!-- NULL si erreur. Beaucoup d'OS font de l'allocation paresseuse. L'OS peut être -->
<!-- amené à terminer certains processus pour libérer de la place. -->
<!-- ### Libérer une zonne mémoire allouée sur le tas  -->
<!-- ```c -->
<!-- void free(void *ptr) -->
<!-- ``` -->
<!-- Libère une zone allouée avec `malloc`. Le comportement est indéfini si déjà -->
<!-- libéré ou si pas alloué avec `malloc`. Si `ptr` est NULL, aucune opération n'est effectuée -->

					</div>
					<div class="post-comments">
						
					</div>
				</div>
			</div>
      <div class="col-md-4">
        <aside class="sidebar">





















































<div class="widget widget-latest-post">
    <h4 class="widget-title">Derniers cours</h4>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/energie/2/">Généralités sur les machines tournantes</a></h4>
        <h5>[Énergie]</h5>
        <p>La constitution d&rsquo;une machine tournante est …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/energie/1/">Grandeurs éléectriques utiles, définition de l&#39;actionneur, plan mécanique couple-vitesse, transmission mécanique</a></h4>
        <h5>[Énergie]</h5>
        <p>Régime des grandeurs électriques rencontrées …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/imagerie/3/">Bases</a></h4>
        <h5>[Outils d&#39;imagerie]</h5>
        <p>Cours  MathJax.Hub.Config({ tex2jax: { inlineMath: …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/modelisation/1/">Mouvements, changements de coordonnées</a></h4>
        <h5>[Modélisation]</h5>
        <p>Repère affine $[O_i, R_i = {x_i, y_i z_i}]$ Une …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/imagerie/2/">Bases</a></h4>
        <h5>[Outils d&#39;imagerie]</h5>
        <p>Cours Traitements classiques couleur $$\{(A,B,C)= …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/interaction/1/">Introduction à la cobotique</a></h4>
        <h5>[Interactions homme robot]</h5>
        <p>Introduction Pourquoi fait on de la robotique ? …</p>
      </div>
    </div>
    
  </div>
</aside>


      </div>
		</div>
	</div>
</section>

<footer class="footer">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="footer-manu">
					<ul>
            
					</ul>
				</div>
				<p class="copyright">Copyright © 2020 <a href="https://themefisher.com">Themefisher</a> All Rights Reserved</p>
			</div>
		</div>
	</div>
</footer>



<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcABaamniA6OL5YvYSpB3pFMNrXwXnLwU&amp;libraries=places"></script>




<script src="https://Sdelpeuch.github.io/plugins/jQuery/jquery.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/slick/slick.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/magnific-popup/jquery.magnific-popup.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/shuffle/shuffle.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/google-map/gmap.js"></script>




<script src="https://Sdelpeuch.github.io/js/script.min.js"></script>







<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
<div id="js-cookie-box" class="cookie-box cookie-box-hide">
	This site uses cookies. By continuing to use this website, you agree to their use. <span id="js-cookie-button" class="btn btn-main btn-solid-border">I Accept</span>
</div>
<script>
	(function ($) {
		const cookieBox = document.getElementById('js-cookie-box');
		const cookieButton = document.getElementById('js-cookie-button');
		if (!Cookies.get('cookie-box')) {
			cookieBox.classList.remove('cookie-box-hide');
			cookieButton.onclick = function () {
				Cookies.set('cookie-box', true, {
					expires:  2 
				});
				cookieBox.classList.add('cookie-box-hide');
			};
		}
	})(jQuery);
</script>


<style>
.cookie-box {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  text-align: center;
  z-index: 9999;
  padding: 1rem 2rem;
  background: rgb(71, 71, 71);
  transition: all .75s cubic-bezier(.19, 1, .22, 1);
  color: #fdfdfd;
}

.cookie-box-hide {
  display: none;
}
</style>
</body>

</html>
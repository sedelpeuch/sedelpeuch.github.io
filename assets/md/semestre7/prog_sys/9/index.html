<!DOCTYPE html>
<html lang="en-Us"><head>
  <meta charset="utf-8">
  <title>Tubes et tubes nommés</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Semestre 9 de l&#39;ENSEIRB-MATEMECA">
  <meta name="author" content="Sébastien">
  <meta name="generator" content="Hugo 0.74.3" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/bootstrap/bootstrap.min.css">
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/Ionicons/css/ionicons.min.css">
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/magnific-popup/magnific-popup.css">
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/plugins/slick/slick.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://Sdelpeuch.github.io/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://Sdelpeuch.github.io/images/favicon.png" type="image/x-icon">
  <link rel="icon" href="https://Sdelpeuch.github.io/images/favicon.png" type="image/x-icon">

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->

<header class="navigation">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        
        <nav class="navbar">
          
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navigation">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
              <img src="https://Sdelpeuch.github.io/images/telechargement.png" alt="Semestre 9" width="65px" class="img-responsive">
            </a>
          </div>
          
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="nav navbar-nav navbar-right">
              
              
              <li><a href="/">Accueil</a></li>
              
              
              
              <li><a href="/ronoco">Ronoco (ROS no code)</a></li>
              
              
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                  aria-expanded="false">Semestre 9 <span class="ion-ios-arrow-down"></span></a>
                <ul class="dropdown-menu">
                  
                  <li><a href="/semestre9/controle">Contrôle commande</a></li>
                  
                  <li><a href="/semestre9/interaction">IHR</a></li>
                  
                  <li><a href="/semestre9/maths">Mathématiques</a></li>
                  
                  <li><a href="/semestre9/modelisation">Modélisation</a></li>
                  
                  <li><a href="/semestre9/mecatronique">Mécatronique</a></li>
                  
                  <li><a href="/semestre9/imagerie">Outils d&#39;imagerie</a></li>
                  
                  <li><a href="/semestre9/reachy">Reachy</a></li>
                  
                  <li><a href="/semestre9/energie">Énergétique</a></li>
                  
                </ul>
              </li>
              
              
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                  aria-expanded="false">ENSEIRB-MATMECA <span class="ion-ios-arrow-down"></span></a>
                <ul class="dropdown-menu">
                  
                  <li><a href="/semestre5/semestre_5">Semestre 5</a></li>
                  
                  <li><a href="/semestre6/semestre_6">Semestre 6</a></li>
                  
                  <li><a href="/semestre7/semestre_7">Semestre 7</a></li>
                  
                  <li><a href="/semestre8/semestre_8">Semestre 8</a></li>
                  
                </ul>
              </li>
              
              
              
              <li><a href="/cpbx">CPBx</a></li>
              
              
              
              <li><a href="/contact">Contact</a></li>
              
              

              
            </ul>
          </div>
        </nav>
      </div>
    </div>
  </div>
</header>

<section class="page-title bg-2" style="background-image: url('https://Sdelpeuch.github.io/images/banner/info.jpg');">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="block">
          <h1>Tubes et tubes nommés</h1>
          <p></p>
        </div>
      </div>
    </div>
  </div>
</section>


<section class="page-wrapper">
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<div class="post post-single">
					<h2 class="post-title">Tubes et tubes nommés</h2>
					<div class="post-meta">
						<ul>
              <li><i class="ion-calendar"></i> November 22, 2020</li>
              
              
              
              
              
              
              <li><i class="ion-pricetags"></i> 
                
                <a href="/tags/programmation%20syst%c3%a8me">Programmation système</a>
								
              </li>
            </ul>
					</div>
					
					
					
					<div class="post-content post-excerpt">
						<p>Les tubes sont un mécanisme de communication qui permet de réaliser des
communications entre processus osus forme d&rsquo;un flot continu d&rsquo;octets. Les tubes
sont un des éléments de l&rsquo;agrément d&rsquo;utilisation d&rsquo;UNIX. C&rsquo;est ce mécanisme qui
permet l&rsquo;approche filtre de la conception sous UNIX. Mécanisme de communication
lié au système de gestion de fichier, les tubes nommés ou non sont des paires
d&rsquo;entrées de la table des fichiers ouverts, associées à une inode en mémoire
gérée par un driver spécifique. Une entrée est utilisée par les processus qui
écrivent dans le tube une entrée pour les lecteurs du tube.</p>
<h2 id="les-tubes-ordinaires-pipe">Les tubes ordinaires (pipe)</h2>
<p>Un tube est matérialisé par deux entrées de la table des ouvertures de fichiers,
une de ces entrées est ouverte en écriture (l&rsquo;entrée du tube), l&rsquo;autre en
lecture (sortie du tube). Ces deux entrées de la table de fichiers ouverts nous
donnent le nombre de descripteurs qui pointent sur elles. Ces valeurs peuvent
être traduites comme :</p>
<ul>
<li>nombre de lecteurs = nombre de descripteurs associés à l&rsquo;entrée ouverte en
lecture. On ne peut pas écrire dans un tube sans lecteur.</li>
<li>nombre d&rsquo;écrivains = nombre de descripteurs associés à l&rsquo;entrée ouverte en
écriture. La nullité de ce nombre définit le comportement de la primitive
<code>read</code> lorsque le tube est vide.</li>
</ul>
<h2 id="création-de-tubes-ordinaires">Création de tubes ordinaires</h2>
<p>Un processus ne peut utiliser que les tubes qu&rsquo;il a créés lui-même par la
primitive <code>pipe</code> ou qu&rsquo;il a hérité de son père grâce à l&rsquo;héritage des
descripteurs à travers <code>fork</code> et <code>exec</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;unistd.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">pipe</span>(<span style="color:#66d9ef">int</span> p[<span style="color:#ae81ff">2</span>]);
</code></pre></div><p>On ne peut pas manipuler les descripteurs de tubes avec les fonctions et
primitives : <code>lseek, ioctl, tcsetattr</code> et <code>tcgetattr</code>, comme il n&rsquo;y a pas de
périphérique associé au tube (tout est fait en mémoire).</p>
<h2 id="lecture-dans-un-tube">Lecture dans un tube</h2>
<p>On utilise l&rsquo;appel système <code>read</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">int</span> nb_lu;
nb_lu <span style="color:#f92672">=</span> read(p[<span style="color:#ae81ff">0</span>],buffer, TAILLE_READ);
</code></pre></div><p>Remarquer que la lecture se fait dans le descripteur <code>p[0]</code>. Comportement de
l&rsquo;appel :
Si le tube n&rsquo;est pas vide et contient taille caractères :</p>
<pre><code>lecture de nb_lu = min(taille, TAILLE_READ) caractères
</code></pre><p>Si le tube est vide :</p>
<ul>
<li>Si le nombre d&rsquo;écrivains est nul</li>
</ul>
<pre><code>alors c'est la fin de fichier et nb_lu est nul
</code></pre><ul>
<li>Si le nombre d&rsquo;écrivains est non nul</li>
</ul>
<pre><code>Si lecture bloquante alors sommeil 
Si lecture non bloquante alors en fonction de l'indicateur
    O_NONBLOCK nb_lu = -1 et errno=EAGAIN
    O_NDELAY nb_lu = 0
</code></pre><h2 id="écriture-dans-un-tube">Écriture dans un tube</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">nb_ecrit <span style="color:#f92672">=</span> write(p[<span style="color:#ae81ff">1</span>],buf,n);
</code></pre></div><p>L&rsquo;écriture est atomique si le nombre de caractères à écrire est inférieur à
<code>PIPE_BUF</code>, la taille du tube du sur le système.</p>
<h2 id="interblocage-avec-des-tubes">Interblocage avec des tubes</h2>
<p>Un même processus a deux accès à un tube, un accès en lecture, un accès en
écriture et essai de lire sur le tube vide en mode non bloquante, le processus
est bloqué indéfiniment dans la primitive <code>read</code>. Avec deux processus : deux
tubes entre les deux processus, tous les deux bloqués en lecture ou tous les
deux bloqués en écriture, tous les deux en attente d&rsquo;une action de l&rsquo;autre
processus.</p>
<h2 id="les-tubes-nommés">Les tubes nommés</h2>
<p>Les tubes nommés sont des tubes qui existent dans le système de fichier et
peuvent être ouverts grâce à une référence. Il faut préalablement créer le tube
nommé dans le système de fichiers, grâce à la primitive <code>mknob</code>, avant de
pouvoir l&rsquo;ouvrir avec la primitive <code>open</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">mknob</span>(reference, mode <span style="color:#f92672">|</span> S_IFIFO,O);
</code></pre></div>
					</div>
					<div class="post-comments">
						
					</div>
				</div>
			</div>
      <div class="col-md-4">
        <aside class="sidebar">





















































<div class="widget widget-latest-post">
    <h4 class="widget-title">Derniers cours</h4>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/energie/2/">Généralités sur les machines tournantes</a></h4>
        <h5>[Énergie]</h5>
        <p>La constitution d&rsquo;une machine tournante est …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/energie/1/">Grandeurs éléectriques utiles, définition de l&#39;actionneur, plan mécanique couple-vitesse, transmission mécanique</a></h4>
        <h5>[Énergie]</h5>
        <p>Régime des grandeurs électriques rencontrées …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/imagerie/3/">Bases</a></h4>
        <h5>[Outils d&#39;imagerie]</h5>
        <p>Cours  MathJax.Hub.Config({ tex2jax: { inlineMath: …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/modelisation/1/">Mouvements, changements de coordonnées</a></h4>
        <h5>[Modélisation]</h5>
        <p>Repère affine $[O_i, R_i = {x_i, y_i z_i}]$ Une …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/imagerie/2/">Bases</a></h4>
        <h5>[Outils d&#39;imagerie]</h5>
        <p>Cours Traitements classiques couleur $$\{(A,B,C)= …</p>
      </div>
    </div>
    
    <div class="media">
      <div class="media-body">
        <h4 class="media-heading"><a href="https://Sdelpeuch.github.io/assets/md/semestre9/interaction/1/">Introduction à la cobotique</a></h4>
        <h5>[Interactions homme robot]</h5>
        <p>Introduction Pourquoi fait on de la robotique ? …</p>
      </div>
    </div>
    
  </div>
</aside>


      </div>
		</div>
	</div>
</section>

<footer class="footer">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="footer-manu">
					<ul>
            
					</ul>
				</div>
				<p class="copyright">Copyright © 2020 <a href="https://themefisher.com">Themefisher</a> All Rights Reserved</p>
			</div>
		</div>
	</div>
</footer>



<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcABaamniA6OL5YvYSpB3pFMNrXwXnLwU&amp;libraries=places"></script>




<script src="https://Sdelpeuch.github.io/plugins/jQuery/jquery.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/slick/slick.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/magnific-popup/jquery.magnific-popup.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/shuffle/shuffle.min.js"></script>

<script src="https://Sdelpeuch.github.io/plugins/google-map/gmap.js"></script>




<script src="https://Sdelpeuch.github.io/js/script.min.js"></script>







<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
<div id="js-cookie-box" class="cookie-box cookie-box-hide">
	This site uses cookies. By continuing to use this website, you agree to their use. <span id="js-cookie-button" class="btn btn-main btn-solid-border">I Accept</span>
</div>
<script>
	(function ($) {
		const cookieBox = document.getElementById('js-cookie-box');
		const cookieButton = document.getElementById('js-cookie-button');
		if (!Cookies.get('cookie-box')) {
			cookieBox.classList.remove('cookie-box-hide');
			cookieButton.onclick = function () {
				Cookies.set('cookie-box', true, {
					expires:  2 
				});
				cookieBox.classList.add('cookie-box-hide');
			};
		}
	})(jQuery);
</script>


<style>
.cookie-box {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  text-align: center;
  z-index: 9999;
  padding: 1rem 2rem;
  background: rgb(71, 71, 71);
  transition: all .75s cubic-bezier(.19, 1, .22, 1);
  color: #fdfdfd;
}

.cookie-box-hide {
  display: none;
}
</style>
</body>

</html>
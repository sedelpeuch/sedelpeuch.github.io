"use strict";(self.webpackChunksedelpeuch_net=self.webpackChunksedelpeuch_net||[]).push([[2767],{2895(e){e.exports=JSON.parse('{"permalink":"/blog/2025/12/09/09-scripting/ruff-linting-formatting","source":"@site/blog/09-scripting/2025-12-09-ruff-linting-formatting.md","title":"Python : Ruff","description":"D\xe9couvrir Ruff, l\'outil Python ultra-rapide \xe9crit en Rust pour remplacer flake8, black et isort.","date":"2025-12-09T00:00:00.000Z","tags":[{"inline":true,"label":"Python","permalink":"/blog/tags/python"},{"inline":true,"label":"Ruff","permalink":"/blog/tags/ruff"},{"inline":true,"label":"Linting","permalink":"/blog/tags/linting"},{"inline":true,"label":"Formatting","permalink":"/blog/tags/formatting"},{"inline":true,"label":"Tooling","permalink":"/blog/tags/tooling"}],"readingTime":2.84,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Python : Ruff","description":"D\xe9couvrir Ruff, l\'outil Python ultra-rapide \xe9crit en Rust pour remplacer flake8, black et isort.","tags":["Python","Ruff","Linting","Formatting","Tooling"]},"unlisted":false,"prevItem":{"title":"Python : uv","permalink":"/blog/2025/12/19/09-scripting/uv-python"},"nextItem":{"title":"Ansible : Vault","permalink":"/blog/2025/11/28/08-iac/ansible-vault"}}')},28453(e,n,i){i.d(n,{R:()=>s,x:()=>o});var r=i(96540);const t={},l=r.createContext(t);function s(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(l.Provider,{value:n},e.children)}},45417(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var r=i(2895),t=i(74848),l=i(28453);const s={title:"Python : Ruff",description:"D\xe9couvrir Ruff, l'outil Python ultra-rapide \xe9crit en Rust pour remplacer flake8, black et isort.",tags:["Python","Ruff","Linting","Formatting","Tooling"]},o="Ruff : Linting et Formatting Python",a={authorsImageUrls:[]},c=[{value:"Qu&#39;est-ce que Ruff ?",id:"quest-ce-que-ruff-",level:2},{value:"Installation",id:"installation",level:2},{value:"Configuration (<code>pyproject.toml</code>)",id:"configuration-pyprojecttoml",level:2},{value:"Utilisation en ligne de commande",id:"utilisation-en-ligne-de-commande",level:2},{value:"Int\xe9gration VSCode",id:"int\xe9gration-vscode",level:2},{value:"Installation de l&#39;extension",id:"installation-de-lextension",level:3},{value:"Configuration VSCode (<code>settings.json</code>)",id:"configuration-vscode-settingsjson",level:3},{value:"Fonctionnalit\xe9s",id:"fonctionnalit\xe9s",level:3},{value:"Pre-commit Hook",id:"pre-commit-hook",level:2},{value:"R\xe8gles courantes",id:"r\xe8gles-courantes",level:2},{value:"Workflow recommand\xe9",id:"workflow-recommand\xe9",level:2},{value:"\xc0 chaque sauvegarde (VSCode)",id:"\xe0-chaque-sauvegarde-vscode",level:3},{value:"Avant commit (pre-commit hook)",id:"avant-commit-pre-commit-hook",level:3},{value:"En CI/CD",id:"en-cicd",level:3},{value:"Exemple d&#39;utilisation",id:"exemple-dutilisation",level:2},{value:"Ressources",id:"ressources",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Ruff est un ",(0,t.jsx)(n.strong,{children:"linter et formatter Python ultra-rapide"})," \xe9crit en Rust. Il remplace plusieurs outils comme flake8, black, isort et pylint en \xe9tant 10 \xe0 100 fois plus rapide. Cet outil simplifie consid\xe9rablement la cha\xeene de qualit\xe9 du code Python."]}),"\n",(0,t.jsx)(n.h2,{id:"quest-ce-que-ruff-",children:"Qu'est-ce que Ruff ?"}),"\n",(0,t.jsx)(n.p,{children:"Ruff est un outil tout-en-un pour la qualit\xe9 du code Python :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"flake8"})," (linting)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"black"})," (formatting)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"isort"})," (import sorting)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"pylint"})," (linting avanc\xe9)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Le principal avantage : une performance exceptionnelle gr\xe2ce \xe0 son impl\xe9mentation en Rust."}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Avec pip\npip install ruff\n\n# Avec poetry\npoetry add --group dev ruff\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"configuration-pyprojecttoml",children:["Configuration (",(0,t.jsx)(n.code,{children:"pyproject.toml"}),")"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[tool.ruff]\nline-length = 88\ntarget-version = "py310"\n\n[tool.ruff.lint]\n# R\xe8gles activ\xe9es\nselect = [\n    "E",    # pycodestyle errors\n    "W",    # pycodestyle warnings\n    "F",    # Pyflakes\n    "I",    # isort (import sorting)\n    "N",    # pep8-naming\n    "C4",   # flake8-comprehensions\n    "UP",   # pyupgrade\n]\n\n# R\xe8gles ignor\xe9es\nignore = [\n    "E501",  # line-too-long (g\xe9r\xe9 par formatter)\n    "W503",  # line-break-before-binary-operator\n]\n\n[tool.ruff.format]\n# Identique \xe0 black\nquote-style = "double"\nindent-style = "space"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"utilisation-en-ligne-de-commande",children:"Utilisation en ligne de commande"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# V\xe9rifier les erreurs sans corriger\nruff check .\n# Analyse le r\xe9pertoire courant et affiche toutes les violations.\n\n# Auto-corriger les erreurs d\xe9tectables\nruff check --fix .\n# Corrige automatiquement les probl\xe8mes qui peuvent l'\xeatre (imports, formatting, etc.).\n\n# Formater le code\nruff format .\n# Applique les conventions de formatting \xe0 tous les fichiers Python.\n\n# Combiner v\xe9rification et formatting\nruff check --fix . && ruff format .\n# Workflow complet : correction des erreurs puis formatting.\n\n# V\xe9rifier le formatting sans modifier\nruff format --check .\n# Utile en CI/CD pour v\xe9rifier que le code est bien format\xe9.\n"})}),"\n",(0,t.jsx)(n.h2,{id:"int\xe9gration-vscode",children:"Int\xe9gration VSCode"}),"\n",(0,t.jsx)(n.h3,{id:"installation-de-lextension",children:"Installation de l'extension"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Ouvrir VSCode"}),"\n",(0,t.jsx)(n.li,{children:"Extensions (Ctrl+Shift+X)"}),"\n",(0,t.jsxs)(n.li,{children:["Chercher ",(0,t.jsx)(n.strong,{children:'"Ruff"'})," (par Astral)"]}),"\n",(0,t.jsx)(n.li,{children:"Installer l'extension"}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"configuration-vscode-settingsjson",children:["Configuration VSCode (",(0,t.jsx)(n.code,{children:"settings.json"}),")"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "[python]": {\n    "editor.defaultFormatter": "charliermarsh.ruff",\n    "editor.formatOnSave": true,\n    "editor.codeActionsOnSave": {\n      "source.fixAll.ruff": "explicit",\n      "source.organizeImports.ruff": "explicit"\n    }\n  },\n  "ruff.importStrategy": "fromEnvironment",\n  "ruff.showNotifications": "onWarning"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"fonctionnalit\xe9s",children:"Fonctionnalit\xe9s"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Diagnostic en temps r\xe9el"})," : Erreurs soulign\xe9es imm\xe9diatement dans l'\xe9diteur"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Auto-fix"})," : Appui sur Ctrl+S pour formater et corriger le fichier"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hover info"})," : Survoler une erreur pour acc\xe9der \xe0 la documentation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Command Palette"})," : ",(0,t.jsx)(n.code,{children:"Ruff: Fix all auto-fixable problems"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"pre-commit-hook",children:"Pre-commit Hook"}),"\n",(0,t.jsx)(n.p,{children:"Ajouter Ruff comme v\xe9rification automatique avant chaque commit :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# .pre-commit-config.yaml\nrepos:\n  - repo: https://github.com/astral-sh/ruff-pre-commit\n    rev: v0.5.0\n    hooks:\n      - id: ruff\n        args: [--fix]\n      - id: ruff-format\n"})}),"\n",(0,t.jsx)(n.p,{children:"Installation du hook :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pre-commit install\n"})}),"\n",(0,t.jsx)(n.h2,{id:"r\xe8gles-courantes",children:"R\xe8gles courantes"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Code"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"E"}),(0,t.jsx)(n.td,{children:"PEP 8 errors"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"W"}),(0,t.jsx)(n.td,{children:"PEP 8 warnings"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"F"}),(0,t.jsx)(n.td,{children:"Pyflakes (undefined names, unused imports)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"I"}),(0,t.jsx)(n.td,{children:"Import sorting"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"N"}),(0,t.jsx)(n.td,{children:"Naming conventions"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"C4"}),(0,t.jsx)(n.td,{children:"Comprehensions optimizations"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"UP"}),(0,t.jsx)(n.td,{children:"Modernize Python syntax"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"B"}),(0,t.jsx)(n.td,{children:"Bugbear (bugs courants)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"D"}),(0,t.jsx)(n.td,{children:"Docstring conventions"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"workflow-recommand\xe9",children:"Workflow recommand\xe9"}),"\n",(0,t.jsx)(n.h3,{id:"\xe0-chaque-sauvegarde-vscode",children:"\xc0 chaque sauvegarde (VSCode)"}),"\n",(0,t.jsx)(n.p,{children:"Format automatique et fix automatique gr\xe2ce \xe0 la configuration VSCode."}),"\n",(0,t.jsx)(n.h3,{id:"avant-commit-pre-commit-hook",children:"Avant commit (pre-commit hook)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ruff check --fix .\nruff format .\n"})}),"\n",(0,t.jsx)(n.h3,{id:"en-cicd",children:"En CI/CD"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ruff check .           # V\xe9rifier sans corriger\nruff format --check .  # V\xe9rifier le formatting\n"})}),"\n",(0,t.jsx)(n.h2,{id:"exemple-dutilisation",children:"Exemple d'utilisation"}),"\n",(0,t.jsxs)(n.p,{children:["Soit le fichier ",(0,t.jsx)(n.code,{children:"main.py"})," avec plusieurs probl\xe8mes :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import os\nimport sys\nimport json\n\ndef calculate(x,y):\n    result=x+y\n    return result\n\nunused_var = 42\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Apr\xe8s ",(0,t.jsx)(n.code,{children:"ruff check --fix . && ruff format ."})," :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import json\nimport os\nimport sys\n\ndef calculate(x, y):\n    result = x + y\n    return result\n"})}),"\n",(0,t.jsx)(n.p,{children:"Ruff a automatiquement :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Tri\xe9 les imports (isort)"}),"\n",(0,t.jsx)(n.li,{children:"Ajout\xe9 les espaces autour des op\xe9rateurs (black)"}),"\n",(0,t.jsxs)(n.li,{children:["Supprim\xe9 la variable non utilis\xe9e (avec ",(0,t.jsx)(n.code,{children:"--fix"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"ressources",children:"Ressources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.astral.sh/ruff/",children:"Documentation officielle Ruff"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff",children:"Extension VSCode"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.astral.sh/ruff/rules/",children:"Liste compl\xe8te des r\xe8gles"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Ruff repr\xe9sente une \xe9volution majeure dans l'\xe9cosyst\xe8me Python, combinant performance et simplicit\xe9. Son adoption am\xe9liore significativement la productivit\xe9 des d\xe9veloppeurs et la qualit\xe9 du code."})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);
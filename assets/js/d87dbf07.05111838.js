"use strict";(self.webpackChunksedelpeuch_net=self.webpackChunksedelpeuch_net||[]).push([[7609],{34865:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var s=t(74848),i=t(28453);const o={title:"Actions Composites",description:"Cr\xe9\xe9er une action r\xe9utilisable",tags:["CI/CD","GitHub","Devops"]},r=void 0,a={permalink:"/blog/2024/02/04/04-ci-cd/action",source:"@site/blog/04-ci-cd/2024-02-04-action.md",title:"Actions Composites",description:"Cr\xe9\xe9er une action r\xe9utilisable",date:"2024-02-04T00:00:00.000Z",tags:[{inline:!0,label:"CI/CD",permalink:"/blog/tags/ci-cd"},{inline:!0,label:"GitHub",permalink:"/blog/tags/git-hub"},{inline:!0,label:"Devops",permalink:"/blog/tags/devops"}],readingTime:4.075,hasTruncateMarker:!0,authors:[],frontMatter:{title:"Actions Composites",description:"Cr\xe9\xe9er une action r\xe9utilisable",tags:["CI/CD","GitHub","Devops"]},unlisted:!1,prevItem:{title:"Runner GitHub Self-Hosted",permalink:"/blog/2024/02/11/04-ci-cd/self-host-runner"},nextItem:{title:"Workflows",permalink:"/blog/2024/02/03/04-ci-cd/workflow"}},l={authorsImageUrls:[]},c=[{value:"Exemple de cr\xe9ation et d&#39;utilisation d&#39;une action GitHub",id:"exemple-de-cr\xe9ation-et-dutilisation-dune-action-github",level:2}];function u(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"exemple-de-cr\xe9ation-et-dutilisation-dune-action-github",children:"Exemple de cr\xe9ation et d'utilisation d'une action GitHub"}),"\n",(0,s.jsx)(n.p,{children:"Voici un exemple de cr\xe9ation et d'utilisation d'une action GitHub pour automatiser le d\xe9ploiement d'une application Node.js."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Cr\xe9ez un fichier ",(0,s.jsx)(n.code,{children:"action.yml"})," dans le r\xe9pertoire ",(0,s.jsx)(n.code,{children:".github/actions/deploy"})," de votre d\xe9p\xf4t avec le contenu suivant :"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"name: 'Deploy Node.js App'\ndescription: 'Deploy a Node.js application to a remote server'\ninputs:\n  server:\n    description: 'The remote server to deploy to'\n    required: true\n  username:\n    description: 'The username to use for the deployment'\n    required: true\n  password:\n    description: 'The password to use for the deployment'\n    required: true\nruns:\n  using: 'composite'\n  steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n    - name: Install dependencies\n      run: npm install\n    - name: Build application\n      run: npm run build\n    - name: Deploy application\n      run: |\n        sshpass -p ${{ inputs.password }} ssh ${{ inputs.username }}@${{ inputs.server }} 'mkdir -p /var/www/myapp'\n        sshpass -p ${{ inputs.password }} scp -r ./build/* ${{ inputs.username }}@${{ inputs.server }}:/var/www/myapp\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Cr\xe9ez un fichier ",(0,s.jsx)(n.code,{children:"deploy.yml"})," dans le r\xe9pertoire ",(0,s.jsx)(n.code,{children:".github/workflows"})," de votre d\xe9p\xf4t avec le contenu suivant :"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"name: Deploy Node.js App\n\non:\n  push:\n    branches:\n      - main\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Deploy application\n        uses: ./.github/actions/deploy\n        with:\n          server: ${{ secrets.DEPLOY_SERVER }}\n          username: ${{ secrets.DEPLOY_USERNAME }}\n          password: ${{ secrets.DEPLOY_PASSWORD }}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Dans cet exemple, l'action ",(0,s.jsx)(n.code,{children:"Deploy Node.js App"})," est utilis\xe9e pour d\xe9ployer une application Node.js sur un serveur distant. L'action est d\xe9clench\xe9e \xe0 chaque fois qu'un push est effectu\xe9 sur la branche ",(0,s.jsx)(n.code,{children:"main"}),". Les informations de d\xe9ploiement (serveur, nom d'utilisateur et mot de passe) sont stock\xe9es dans les secrets du d\xe9p\xf4t pour des raisons de s\xe9curit\xe9."]}),"\n",(0,s.jsx)(n.p,{children:"Les actions GitHub permettent d'automatiser, personnaliser et ex\xe9cuter un flux de travail directement depuis votre d\xe9p\xf4t. Avec les actions GitHub, il est possible de cr\xe9er des t\xe2ches personnalis\xe9es pour automatiser un flux de travail, partager et d\xe9couvrir des actions pour effectuer des t\xe2ches sp\xe9cifiques."})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(96540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);
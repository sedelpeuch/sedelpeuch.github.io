"use strict";(self.webpackChunksedelpeuch_net=self.webpackChunksedelpeuch_net||[]).push([[9795],{99779(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var s=i(83815),l=i(74848),t=i(28453);const r={title:"Python : Packaging",description:"Comprendre le packaging Python : qu'est-ce qu'un package, PyPI, wheel, distributions, setuptools, m\xe9tadonn\xe9es et versioning.",tags:["scripting","devops"]},a=void 0,o={authorsImageUrls:[]},c=[{value:"Qu&#39;est-ce qu&#39;un Package Python ?",id:"quest-ce-quun-package-python-",level:2},{value:"Diff\xe9rence : Module vs Package",id:"diff\xe9rence--module-vs-package",level:3},{value:"Structure simple",id:"structure-simple",level:3},{value:"D\xe9pendances du package",id:"d\xe9pendances-du-package",level:3},{value:"Distributions : Wheel vs Source",id:"distributions--wheel-vs-source",level:2},{value:"Source Distribution (sdist)",id:"source-distribution-sdist",level:3},{value:"Wheel Distribution (bdist_wheel)",id:"wheel-distribution-bdist_wheel",level:3},{value:"M\xe9tadonn\xe9es : D\xe9clarer un Package",id:"m\xe9tadonn\xe9es--d\xe9clarer-un-package",level:2},{value:"Configuration avec pyproject.toml (Modern)",id:"configuration-avec-pyprojecttoml-modern",level:3},{value:"Configuration avec setup.py (Legacy)",id:"configuration-avec-setuppy-legacy",level:3},{value:"Configuration avec setup.cfg (Alternative)",id:"configuration-avec-setupcfg-alternative",level:3},{value:"Building : Cr\xe9er les Distributions",id:"building--cr\xe9er-les-distributions",level:2},{value:"Installer les outils",id:"installer-les-outils",level:3},{value:"Cr\xe9er wheel + sdist",id:"cr\xe9er-wheel--sdist",level:3},{value:"V\xe9rifier la distribution",id:"v\xe9rifier-la-distribution",level:3},{value:"PyPI : La Registry Centrale",id:"pypi--la-registry-centrale",level:2},{value:"Qu&#39;est-ce que PyPI ?",id:"quest-ce-que-pypi-",level:3},{value:"Cr\xe9er un compte",id:"cr\xe9er-un-compte",level:3},{value:"TestPyPI : Sandbox",id:"testpypi--sandbox",level:3},{value:"Publication sur PyPI",id:"publication-sur-pypi",level:2},{value:"Installation du CLI",id:"installation-du-cli",level:3},{value:"Configuration des Credentials",id:"configuration-des-credentials",level:3},{value:"Publier sur TestPyPI",id:"publier-sur-testpypi",level:3},{value:"Tester l&#39;installation",id:"tester-linstallation",level:3},{value:"Publier sur PyPI Official",id:"publier-sur-pypi-official",level:3},{value:"Semantic Versioning",id:"semantic-versioning",level:2},{value:"Metadata compl\xe8tes",id:"metadata-compl\xe8tes",level:2},{value:"<strong>init</strong>.py",id:"initpy",level:3},{value:"Classifiers importants",id:"classifiers-importants",level:3},{value:"Checklist Avant Publication",id:"checklist-avant-publication",level:2},{value:"Workflow Complet avec setuptools",id:"workflow-complet-avec-setuptools",level:2},{value:"Bonnes Pratiques",id:"bonnes-pratiques",level:2},{value:"D\xe9pendances",id:"d\xe9pendances",level:3},{value:"Namespace packages",id:"namespace-packages",level:3},{value:"Entry points / Scripts CLI",id:"entry-points--scripts-cli",level:3},{value:"Extras / Optional dependencies",id:"extras--optional-dependencies",level:3},{value:"Alternatives Modernes (Optionnel)",id:"alternatives-modernes-optionnel",level:2},{value:"Poetry",id:"poetry",level:3},{value:"uv",id:"uv",level:3},{value:"R\xe9sources",id:"r\xe9sources",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"Publier son code Python sur PyPI c'est le rendre accessible \xe0 des milliers de d\xe9veloppeurs. Exploration des concepts fondamentaux du packaging Python."}),"\n",(0,l.jsx)(n.h2,{id:"quest-ce-quun-package-python-",children:"Qu'est-ce qu'un Package Python ?"}),"\n",(0,l.jsx)(n.h3,{id:"diff\xe9rence--module-vs-package",children:"Diff\xe9rence : Module vs Package"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Module"})," : Un fichier Python unique"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"calculator.py  # C'est un module\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Package"})," : Un dossier contenant des modules"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"calculator/\n\u251c\u2500\u2500 __init__.py        # Marque le dossier comme package\n\u251c\u2500\u2500 operations.py\n\u251c\u2500\u2500 utils.py\n\u2514\u2500\u2500 constants.py\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Le fichier ",(0,l.jsx)(n.code,{children:"__init__.py"}),' est crucial : c\'est ce qui dit \xe0 Python "je suis un package".']}),"\n",(0,l.jsx)(n.h3,{id:"structure-simple",children:"Structure simple"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"my_package/\n\u251c\u2500\u2500 my_package/           # Code source\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 core.py\n\u2502   \u2514\u2500\u2500 utils.py\n\u251c\u2500\u2500 tests/                # Tests\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 LICENSE\n\u2514\u2500\u2500 pyproject.toml        # Configuration de packaging\n"})}),"\n",(0,l.jsx)(n.h3,{id:"d\xe9pendances-du-package",children:"D\xe9pendances du package"}),"\n",(0,l.jsxs)(n.p,{children:["Un package peut d\xe9pendre d'autres packages (import\xe9s via ",(0,l.jsx)(n.code,{children:"pip install"}),")."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# Dans my_package/core.py\nimport requests  # D\xe9pendance externe\nfrom .utils import helper  # D\xe9pendance interne\n"})}),"\n",(0,l.jsx)(n.p,{children:"Ces d\xe9pendances externes doivent \xeatre d\xe9clar\xe9es lors du packaging."}),"\n",(0,l.jsx)(n.h2,{id:"distributions--wheel-vs-source",children:"Distributions : Wheel vs Source"}),"\n",(0,l.jsx)(n.p,{children:"Quand on publie un package, on cr\xe9e deux types de distribution :"}),"\n",(0,l.jsx)(n.h3,{id:"source-distribution-sdist",children:"Source Distribution (sdist)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Format"})," : ",(0,l.jsx)(n.code,{children:"my_package-1.0.0.tar.gz"})," (ou ",(0,l.jsx)(n.code,{children:".zip"}),")"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"my_package-1.0.0/\n\u251c\u2500\u2500 my_package/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 core.py\n\u2502   \u2514\u2500\u2500 utils.py\n\u251c\u2500\u2500 setup.py\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 pyproject.toml\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Avantages"})," \u2705"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Contient le code source complet"}),"\n",(0,l.jsx)(n.li,{children:"Portable sur tous les OS/architectures"}),"\n",(0,l.jsx)(n.li,{children:"Permet inspection du code"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Inconv\xe9nients"})," \u274c"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Installation lente (compilation n\xe9cessaire)"}),"\n",(0,l.jsx)(n.li,{children:"Requiert les build tools (compilateur C, etc.)"}),"\n",(0,l.jsx)(n.li,{children:"Plus volumineux"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"wheel-distribution-bdist_wheel",children:"Wheel Distribution (bdist_wheel)"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Format"})," : ",(0,l.jsx)(n.code,{children:"my_package-1.0.0-py3-none-any.whl"})," (archive ZIP)"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"my_package-1.0.0.dist-info/\n\u251c\u2500\u2500 METADATA\n\u251c\u2500\u2500 RECORD\n\u251c\u2500\u2500 entry_points.txt\n\u2514\u2500\u2500 top_level.txt\n\nmy_package/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 core.py\n\u2514\u2500\u2500 utils.py\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Avantages"})," \u2705"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Installation ultra-rapide (pas de compilation)"}),"\n",(0,l.jsx)(n.li,{children:"Ne requiert que pip"}),"\n",(0,l.jsx)(n.li,{children:"Coh\xe9rent sur tous les environnements"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Inconv\xe9nients"})," \u274c"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Sp\xe9cifique \xe0 une version Python/plateforme"}),"\n",(0,l.jsx)(n.li,{children:"Code pr\xe9-compil\xe9 (moins d'inspection)"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Verdict"})," : Toujours publier les deux. Wheel en priorit\xe9, source en fallback."]}),"\n",(0,l.jsx)(n.h2,{id:"m\xe9tadonn\xe9es--d\xe9clarer-un-package",children:"M\xe9tadonn\xe9es : D\xe9clarer un Package"}),"\n",(0,l.jsx)(n.p,{children:"Les m\xe9tadonn\xe9es c'est tout ce qu'on doit savoir sur un package : nom, version, d\xe9pendances, auteur, licence, etc."}),"\n",(0,l.jsx)(n.h3,{id:"configuration-avec-pyprojecttoml-modern",children:"Configuration avec pyproject.toml (Modern)"}),"\n",(0,l.jsx)(n.p,{children:"Depuis PEP 517/518 (2015+), c'est l'approche moderne :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[build-system]\nrequires = ["setuptools>=61.0", "wheel"]\nbuild-backend = "setuptools.build_meta"\n\n[project]\nname = "my-awesome-lib"\nversion = "1.0.0"\ndescription = "Une libraire incroyable"\nreadme = "README.md"\nrequires-python = ">=3.8"\nlicense = {text = "MIT"}\nauthors = [\n    {name = "John Doe", email = "john@example.com"}\n]\nkeywords = ["awesome", "library", "python"]\n\n# URLs\n[project.urls]\nHomepage = "https://github.com/user/my-awesome-lib"\nDocumentation = "https://my-awesome-lib.readthedocs.io"\nRepository = "https://github.com/user/my-awesome-lib"\n\n# D\xe9pendances\n[project.dependencies]\nrequests = ">=2.28.0"\npydantic = ">=1.10"\n\n# D\xe9pendances optionnelles\n[project.optional-dependencies]\ndatabase = ["sqlalchemy>=1.4", "psycopg2>=2.9"]\nemail = ["aiosmtplib>=2.0"]\n\n# Scripts CLI\n[project.scripts]\nmy-cli = "my_lib.cli:main"\n\n# Classifiers\n[project.classifiers]\n"Development Status :: 4 - Beta"\n"Intended Audience :: Developers"\n"License :: OSI Approved :: MIT License"\n"Programming Language :: Python :: 3"\n"Programming Language :: Python :: 3.8"\n"Programming Language :: Python :: 3.9"\n"Programming Language :: Python :: 3.10"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"configuration-avec-setuppy-legacy",children:"Configuration avec setup.py (Legacy)"}),"\n",(0,l.jsx)(n.p,{children:"Encore utilis\xe9, particuli\xe8rement pour les extensions C :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from setuptools import setup, find_packages\n\nsetup(\n    name="my-awesome-lib",\n    version="1.0.0",\n    description="Une libraire incroyable",\n    author="John Doe",\n    author_email="john@example.com",\n    url="https://github.com/user/my-awesome-lib",\n    long_description=open("README.md").read(),\n    long_description_content_type="text/markdown",\n    license="MIT",\n    packages=find_packages(),\n    python_requires=">=3.8",\n    install_requires=[\n        "requests>=2.28.0",\n        "pydantic>=1.10",\n    ],\n    extras_require={\n        "database": ["sqlalchemy>=1.4", "psycopg2>=2.9"],\n        "email": ["aiosmtplib>=2.0"],\n    },\n    entry_points={\n        "console_scripts": [\n            "my-cli=my_lib.cli:main",\n        ],\n    },\n    classifiers=[\n        "Development Status :: 4 - Beta",\n        "Intended Audience :: Developers",\n        "License :: OSI Approved :: MIT License",\n        "Programming Language :: Python :: 3.8",\n    ],\n)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"configuration-avec-setupcfg-alternative",children:"Configuration avec setup.cfg (Alternative)"}),"\n",(0,l.jsx)(n.p,{children:"Format INI, utile pour projects complexes :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"[metadata]\nname = my-awesome-lib\nversion = 1.0.0\ndescription = Une libraire incroyable\nauthor = John Doe\nauthor_email = john@example.com\nurl = https://github.com/user/my-awesome-lib\nlong_description = file: README.md\nlong_description_content_type = text/markdown\nlicense = MIT\n\n[options]\npackages = find:\npython_requires = >=3.8\ninstall_requires =\n    requests>=2.28.0\n    pydantic>=1.10\n\n[options.extras_require]\ndatabase =\n    sqlalchemy>=1.4\n    psycopg2>=2.9\nemail =\n    aiosmtplib>=2.0\n\n[options.entry_points]\nconsole_scripts =\n    my-cli = my_lib.cli:main\n"})}),"\n",(0,l.jsx)(n.h2,{id:"building--cr\xe9er-les-distributions",children:"Building : Cr\xe9er les Distributions"}),"\n",(0,l.jsx)(n.h3,{id:"installer-les-outils",children:"Installer les outils"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pip install setuptools wheel build\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"build"})," est l'outil moderne et recommand\xe9 pour cr\xe9er distributions."]}),"\n",(0,l.jsx)(n.h3,{id:"cr\xe9er-wheel--sdist",children:"Cr\xe9er wheel + sdist"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python -m build\n"})}),"\n",(0,l.jsxs)(n.p,{children:["G\xe9n\xe8re dans le dossier ",(0,l.jsx)(n.code,{children:"dist/"})," :"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"my_package-1.0.0-py3-none-any.whl"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"my_package-1.0.0.tar.gz"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"v\xe9rifier-la-distribution",children:"V\xe9rifier la distribution"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Lister le contenu du wheel\nunzip -l dist/my_package-1.0.0-py3-none-any.whl\n\n# Lister le contenu du sdist\ntar -tzf dist/my_package-1.0.0.tar.gz\n"})}),"\n",(0,l.jsx)(n.h2,{id:"pypi--la-registry-centrale",children:"PyPI : La Registry Centrale"}),"\n",(0,l.jsx)(n.h3,{id:"quest-ce-que-pypi-",children:"Qu'est-ce que PyPI ?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Python Package Index"})," : Registry centrale o\xf9 vivent tous les packages Python publics."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"URL"})," : ",(0,l.jsx)(n.a,{href:"https://pypi.org",children:"https://pypi.org"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Packages"})," : Environ 500k packages"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"T\xe9l\xe9chargements/jour"})," : Millions"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["C'est l\xe0 qu'on publie avec ",(0,l.jsx)(n.code,{children:"pip install le-package"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"cr\xe9er-un-compte",children:"Cr\xe9er un compte"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Aller sur ",(0,l.jsx)(n.a,{href:"https://pypi.org/account/register/",children:"https://pypi.org/account/register/"})]}),"\n",(0,l.jsx)(n.li,{children:"V\xe9rifier l'email"}),"\n",(0,l.jsx)(n.li,{children:"Activer 2FA (recommand\xe9)"}),"\n",(0,l.jsxs)(n.li,{children:["G\xe9n\xe9rer un token API : ",(0,l.jsx)(n.a,{href:"https://pypi.org/account/tokens/",children:"https://pypi.org/account/tokens/"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"testpypi--sandbox",children:"TestPyPI : Sandbox"}),"\n",(0,l.jsx)(n.p,{children:"Pour tester avant vraie publication."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"URL"})," : ",(0,l.jsx)(n.a,{href:"https://test.pypi.org",children:"https://test.pypi.org"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Compt\xe9 s\xe9par\xe9"})," : Faut aussi s'y enregistrer"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Token s\xe9par\xe9"})," : \xc0 g\xe9n\xe9rer sur ",(0,l.jsx)(n.a,{href:"https://test.pypi.org/account/tokens/",children:"https://test.pypi.org/account/tokens/"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Utile pour tester le processus de publication sans polluer PyPI."}),"\n",(0,l.jsx)(n.h2,{id:"publication-sur-pypi",children:"Publication sur PyPI"}),"\n",(0,l.jsx)(n.h3,{id:"installation-du-cli",children:"Installation du CLI"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pip install twine\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"twine"})," est l'outil de publication, plus robust que ",(0,l.jsx)(n.code,{children:"python setup.py upload"})," (d\xe9pr\xe9ci\xe9e)."]}),"\n",(0,l.jsx)(n.h3,{id:"configuration-des-credentials",children:"Configuration des Credentials"}),"\n",(0,l.jsx)(n.p,{children:"Option 1 : Token API (recommand\xe9)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Dans ~/.pypirc\n[distutils]\nindex-servers =\n    pypi\n\n[pypi]\nrepository = https://upload.pypi.org/legacy/\nusername = __token__\npassword = pypi-AgEIcHlwaS5vcmc...  # Votre token\n"})}),"\n",(0,l.jsx)(n.p,{children:"Option 2 : Username/password (moins s\xfbr, legacy)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"[pypi]\nusername = john\npassword = mon_mot_de_passe_clair  # Mauvaise id\xe9e !\n"})}),"\n",(0,l.jsx)(n.h3,{id:"publier-sur-testpypi",children:"Publier sur TestPyPI"}),"\n",(0,l.jsxs)(n.p,{children:["D'abord, ajouter TestPyPI \xe0 ",(0,l.jsx)(n.code,{children:"~/.pypirc"})," :"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"[distutils]\nindex-servers =\n    pypi\n    test-pypi\n\n[test-pypi]\nrepository = https://test.pypi.org/legacy/\nusername = __token__\npassword = pypi-AgEIcHlwaS5vcm9qZWN0...\n"})}),"\n",(0,l.jsx)(n.p,{children:"Puis publier :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python -m twine upload --repository test-pypi dist/*\n"})}),"\n",(0,l.jsx)(n.h3,{id:"tester-linstallation",children:"Tester l'installation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Depuis TestPyPI\npip install --index-url https://test.pypi.org/simple/ my-awesome-lib\n\n# Depuis PyPI\npip install my-awesome-lib\n"})}),"\n",(0,l.jsx)(n.h3,{id:"publier-sur-pypi-official",children:"Publier sur PyPI Official"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python -m twine upload dist/*\n"})}),"\n",(0,l.jsx)(n.p,{children:"Ou avec version sp\xe9cifique :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python -m twine upload dist/my_package-1.0.0*\n"})}),"\n",(0,l.jsx)(n.h2,{id:"semantic-versioning",children:"Semantic Versioning"}),"\n",(0,l.jsxs)(n.p,{children:["Format : ",(0,l.jsx)(n.code,{children:"MAJOR.MINOR.PATCH[-pre-release][+build]"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"1.0.0          # Release stable\n1.0.1          # Bugfix (PATCH)\n1.1.0          # Feature (MINOR)\n2.0.0          # Breaking change (MAJOR)\n1.0.0-beta.1   # Pre-release (beta/alpha/rc)\n1.0.0+build.1  # Build metadata\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"R\xe8gles"})," :"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MAJOR"})," : Breaking change, code client doit changer"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"MINOR"})," : Feature r\xe9tro-compatible"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"PATCH"})," : Bugfix r\xe9tro-compatible"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"metadata-compl\xe8tes",children:"Metadata compl\xe8tes"}),"\n",(0,l.jsxs)(n.h3,{id:"initpy",children:[(0,l.jsx)(n.strong,{children:"init"}),".py"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# my_lib/__init__.py\n__version__ = "1.0.0"\n__author__ = "John Doe"\n__email__ = "john@example.com"\n__license__ = "MIT"\n\n# Exposer l\'API publique\nfrom .core import main_function\nfrom .utils import helper\n\n__all__ = ["main_function", "helper"]\n'})}),"\n",(0,l.jsx)(n.h3,{id:"classifiers-importants",children:"Classifiers importants"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[project.classifiers]\n# Status\n"Development Status :: 3 - Alpha"\n"Development Status :: 4 - Beta"\n"Development Status :: 5 - Production/Stable"\n\n# Licence\n"License :: OSI Approved :: MIT License"\n"License :: OSI Approved :: Apache Software License"\n\n# Public\n"Intended Audience :: Developers"\n"Intended Audience :: System Administrators"\n\n# Topics\n"Topic :: Software Development"\n"Topic :: System :: Monitoring"\n\n# Python versions\n"Programming Language :: Python :: 3"\n"Programming Language :: Python :: 3.8"\n"Programming Language :: Python :: 3.9"\n"Programming Language :: Python :: 3.10"\n"Programming Language :: Python :: 3.11"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"checklist-avant-publication",children:"Checklist Avant Publication"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 Tests passent : ",(0,l.jsx)(n.code,{children:"pytest"})]}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Code format\xe9 et lint\xe9"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Version mise \xe0 jour (semantic versioning)"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 CHANGELOG.md compl\xe9t\xe9"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 README.md avec instructions d'installation/usage"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 LICENSE.md pr\xe9sent"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 M\xe9tadonn\xe9es compl\xe8tes dans pyproject.toml/setup.py"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Test\xe9 sur TestPyPI d'abord"}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 Tag Git : ",(0,l.jsx)(n.code,{children:"git tag v1.0.0"})]}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Commit des changements"}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 Build g\xe9n\xe9r\xe9 : ",(0,l.jsx)(n.code,{children:"python -m build"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"workflow-complet-avec-setuptools",children:"Workflow Complet avec setuptools"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# 1. Initialiser la structure\nmkdir my-awesome-lib && cd my-awesome-lib\ngit init\n\n# 2. Cr\xe9er pyproject.toml et source\ncat > pyproject.toml << \'EOF\'\n[build-system]\nrequires = ["setuptools>=61.0", "wheel"]\nbuild-backend = "setuptools.build_meta"\n\n[project]\nname = "my-awesome-lib"\nversion = "1.0.0"\ndescription = "Une libraire incroyable"\nrequires-python = ">=3.8"\ndependencies = ["requests>=2.28.0"]\nEOF\n\nmkdir my_lib\ntouch my_lib/__init__.py\n\n# 3. Tester le build\npip install build\npython -m build\n\n# 4. V\xe9rifier\npip install --dry-run dist/my_awesome_lib-1.0.0-py3-none-any.whl\n\n# 5. Publier sur TestPyPI\ntwine upload --repository test-pypi dist/*\n\n# 6. Tester installation\npip install --index-url https://test.pypi.org/simple/ my-awesome-lib\n\n# 7. Publier sur PyPI official\ntwine upload dist/*\n'})}),"\n",(0,l.jsx)(n.h2,{id:"bonnes-pratiques",children:"Bonnes Pratiques"}),"\n",(0,l.jsx)(n.h3,{id:"d\xe9pendances",children:"D\xe9pendances"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'# BON : Version mineure fix\xe9e\nrequests = ">=2.28.0,<3.0"\npydantic = ">=1.10,<2.0"\n\n# MAUVAIS : Pas de limite sup\nrequests = ">=2.28.0"\n\n# BON : Version exacte pour stabilit\xe9\nsome-critical-lib = "1.2.3"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"namespace-packages",children:"Namespace packages"}),"\n",(0,l.jsx)(n.p,{children:"Utile si on maintient plusieurs packages li\xe9s :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"src/\n\u251c\u2500\u2500 mycompany/\n\u2502   \u251c\u2500\u2500 __init__.py          (empty!)\n\u2502   \u251c\u2500\u2500 lib1/\n\u2502   \u2502   \u2514\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 lib2/\n\u2502       \u2514\u2500\u2500 __init__.py\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[tool.setuptools.packages]\nfind = {where = ["src"]}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["Alors ",(0,l.jsx)(n.code,{children:"from mycompany.lib1 import ..."})," \xe7a marche."]}),"\n",(0,l.jsx)(n.h3,{id:"entry-points--scripts-cli",children:"Entry points / Scripts CLI"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[project.scripts]\nmy-cli = "my_lib.cli:main"\nmagic-tool = "my_lib.tools:run_magic"\n'})}),"\n",(0,l.jsx)(n.p,{children:"L'installation du package rend ces commandes disponibles partout :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pip install my-awesome-lib\nmy-cli --help        # Fonctionne!\nmagic-tool config    # Fonctionne!\n"})}),"\n",(0,l.jsx)(n.h3,{id:"extras--optional-dependencies",children:"Extras / Optional dependencies"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[project.optional-dependencies]\ndatabase = ["sqlalchemy>=1.4"]\nemail = ["aiosmtplib>=2.0"]\ndev = ["pytest", "black", "mypy"]\n'})}),"\n",(0,l.jsx)(n.p,{children:"Installation s\xe9lective :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pip install my-awesome-lib                    # Bare minimum\npip install my-awesome-lib[database]          # + database\npip install my-awesome-lib[database,email]    # + database et email\npip install my-awesome-lib[dev]               # + all dev tools\n"})}),"\n",(0,l.jsx)(n.h2,{id:"alternatives-modernes-optionnel",children:"Alternatives Modernes (Optionnel)"}),"\n",(0,l.jsx)(n.h3,{id:"poetry",children:"Poetry"}),"\n",(0,l.jsx)(n.p,{children:"Si vous pr\xe9f\xe9rez une approche all-in-one avec lock file :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"poetry new my-lib\npoetry add requests pydantic\npoetry build && poetry publish\n"})}),"\n",(0,l.jsx)(n.p,{children:"Poetry g\xe8re pyproject.toml, dependencies, et publication automatiquement. Id\xe9al si vous aimez la coh\xe9sion."}),"\n",(0,l.jsx)(n.h3,{id:"uv",children:"uv"}),"\n",(0,l.jsx)(n.p,{children:"Package manager ultra-rapide (\xe9crit en Rust) :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"uv pip install requests\nuv venv\n"})}),"\n",(0,l.jsx)(n.p,{children:"Remplace pip pour des workflows rapides. Toujours utilise pyproject.toml/setup.py pour packages, juste acc\xe9l\xe8re les installations."}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Les deux restent compatibles avec le syst\xe8me d'emballage standard"})," (wheel, sdist, PyPI, setuptools). Juste des wrapper/helpers autour."]}),"\n",(0,l.jsx)(n.h2,{id:"r\xe9sources",children:"R\xe9sources"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://packaging.python.org/tutorials/packaging-projects/",children:"Official Packaging Guide"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://setuptools.pypa.io/",children:"setuptools Documentation"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://peps.python.org/pep-0427/",children:"PEP 427 - Wheel Format"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://peps.python.org/pep-0440/",children:"PEP 440 - Versioning"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://pypi.org/classifiers/",children:"PyPI Classifiers"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://twine.readthedocs.io/",children:"Twine Documentation"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,l.jsx)(n.p,{children:"Le packaging Python s'appuie sur des concepts simples : modules, packages, distributions (wheel/sdist), m\xe9tadonn\xe9es, et PyPI. Une fois qu'on comprend \xe7a, publier son code devient facile. setuptools + twine suffisent pour la plupart des cas. Les alternatives modernes comme Poetry offrent plus de confort mais reposent toujours sur les m\xeames fondations."}),"\n",(0,l.jsx)(n.p,{children:"\xc0 vos pipelines! \ud83d\ude80"})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var s=i(96540);const l={},t=s.createContext(l);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(t.Provider,{value:n},e.children)}},83815(e){e.exports=JSON.parse('{"permalink":"/blog/2026/02/15/09-scripting/packaging-python","source":"@site/blog/09-scripting/2026-02-15-packaging-python.md","title":"Python : Packaging","description":"Comprendre le packaging Python : qu\'est-ce qu\'un package, PyPI, wheel, distributions, setuptools, m\xe9tadonn\xe9es et versioning.","date":"2026-02-15T00:00:00.000Z","tags":[{"inline":false,"label":"Scripting","permalink":"/blog/tags/scripting"},{"inline":false,"label":"DevOps","permalink":"/blog/tags/devops"}],"readingTime":7.55,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Python : Packaging","description":"Comprendre le packaging Python : qu\'est-ce qu\'un package, PyPI, wheel, distributions, setuptools, m\xe9tadonn\xe9es et versioning.","tags":["scripting","devops"]},"unlisted":false,"prevItem":{"title":"Docker Swarm","permalink":"/blog/2026/02/15/06-orchestration/docker-swarm"},"nextItem":{"title":"Python : Pytest","permalink":"/blog/2026/02/15/09-scripting/pytest-testing"}}')}}]);
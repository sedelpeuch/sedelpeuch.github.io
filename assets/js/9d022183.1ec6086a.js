"use strict";(self.webpackChunksedelpeuch_net=self.webpackChunksedelpeuch_net||[]).push([[3694],{37542:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>u,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"enseirb/s8/se/4","title":"Concurrence et synchronisation","description":"Les syst\xe8mes d\'exploitations actuels induisent in\xe9vitablement de la concurrence","source":"@site/docs/enseirb/s8/se/4.md","sourceDirName":"enseirb/s8/se","slug":"/enseirb/s8/se/4","permalink":"/docs/enseirb/s8/se/4","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Concurrence et synchronisation"},"sidebar":"tutorialSidebar","previous":{"title":"Gestion m\xe9moire","permalink":"/docs/enseirb/s8/se/3"},"next":{"title":"Gestion du temps","permalink":"/docs/enseirb/s8/se/5"}}');var r=t(74848),i=t(28453);const o={title:"Concurrence et synchronisation"},u=void 0,a={},c=[];function l(e){const n={p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Les syst\xe8mes d'exploitations actuels induisent in\xe9vitablement de la concurrence\ncar plusieurs files d'ex\xe9cution sont simultan\xe9es (machines multi-processeur /\ncoeur ...). De plus l'existence d'instructions non-atomiques ainsi que de la\npr\xe9emption font que nous n'avons ",(0,r.jsx)(n.strong,{children:"aucune garantie"})," que quelqu'un d'autre n'est\npas en train de modifier la m\xeame ressource que nous."]}),"\n",(0,r.jsx)(n.p,{children:"Deux types de concurrence sont observables, la concurrence physique de\ndiff\xe9rentes t\xe2ches (possible uniquement avec une machine multiprocesseur)\nprovoqu\xe9e par un vrai acc\xe8s concurrent au mat\xe9riel. Et la concurrence logique\npouvant \xeatre provoqu\xe9e par un acc\xe8s interrompu par la pr\xe9emption ou par une\ninterruption mat\xe9rielle."}),"\n",(0,r.jsx)(n.p,{children:"Une diff\xe9rence notable concernant la gestion de la concurrence entre le noyau et\nl'espace utilisateur est la capacit\xe9 du noyau \xe0 ma\xeetriser la pr\xe9emption et les\ninterruptions. En effet il peut emp\xeacher la concurrence logique en emp\xeachant les\nautres acteurs ou \xe9v\xe9nements de s'ex\xe9cuter. Quant \xe0 lui l'espace utilisateur n'a\naucune ma\xeetres."}),"\n",(0,r.jsxs)(n.p,{children:["Pour contrer cela nous allons utiliser des verrous. Rappelons qu'il existe deux\ntypes de verrous : ceux \xe0 attente active qui vont consommer beaucoup de CPU mais\nvont \xeatre tr\xe8s r\xe9actifs. Et ceux \xe0 attente passive qui vont se mettre en sommeil\njusqu'\xe0 ce qu'il soit r\xe9veill\xe9 par une autre t\xe2che via l'ordonnanceur. Cela est\npeu r\xe9actif mais consomme peu de CPU. Ces m\xe9canismes vont permettre de mettre en\nplace des protections contre la famine ou les deadlocks (d\xe9pend de\nl'impl\xe9mentation). En revanche en espace utilisateur, l'ordonnanceur noyau n'a\npas connaissance des verrous pris. La pr\xe9emption peut rendre une section\ncritique tr\xe8s longue et peut passer la main \xe0 une t\xe2che qui va essayer de\nprendre le m\xeame verrou. En somme, en espace utilisateur l'",(0,r.jsx)(n.strong,{children:"attente passive est\npr\xe9f\xe9rable"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Sur Linux le co\xfbt de synchronisation est critique, il existe beaucoup de\nvariante dans Linux notamment les variantes \xe0 attente active. De plus la\npr\xe9emption est d\xe9sactiv\xe9e quand un verrou \xe0 attente active est pris. (Garantie\nd'avoir une section critique courte). Pour \xe9viter de faire exploser le co\xfbt en\nutilisant uniquement des verrous, il est bon d'utiliser des ",(0,r.jsx)(n.strong,{children:"instructions\natomiques"})," permettant d'\xe9viter la concurrence."]}),"\n",(0,r.jsxs)(n.p,{children:["Concernant les interruptions, le processeur peut \xeatre interrompu ",(0,r.jsx)(n.strong,{children:"n'importe\nquand"})," (p\xe9riph\xe9riques, horloge) y compris au milieu d'une section critique ! Il\nest donc n\xe9cessaire de d\xe9sactiver les interruptions lors des sections critiques.\nCela est faisable gr\xe2ce \xe0 des instructions d\xe9di\xe9es pour d\xe9sactiver les\ninterruptions vers ce processeur mais il ne faut pas les d\xe9sactiver trop\nlongtemps (nuit \xe0 la r\xe9activit\xe9)."]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>u});var s=t(96540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function u(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);
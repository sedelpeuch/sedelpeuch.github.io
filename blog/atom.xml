<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://delpeuch.net/blog</id>
    <title>S√©bastien Delpeuch's Blog</title>
    <updated>2025-02-15T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://delpeuch.net/blog"/>
    <subtitle>S√©bastien Delpeuch Blog</subtitle>
    <icon>https://delpeuch.net/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[Secrets et ConfigMaps dans Kubernetes]]></title>
        <id>https://delpeuch.net/blog/2025/02/15/06-orchestration/k8s-secrets-configmaps</id>
        <link href="https://delpeuch.net/blog/2025/02/15/06-orchestration/k8s-secrets-configmaps"/>
        <updated>2025-02-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[D√©couvrez les concepts de Secrets et ConfigMaps dans Kubernetes, et comment les utiliser pour g√©rer les configurations et les informations sensibles.]]></summary>
        <content type="html"><![CDATA[<p>Kubernetes offre des m√©canismes pour g√©rer les configurations et les informations sensibles de mani√®re s√©curis√©e et efficace. Dans cet article, les concepts de Secrets et ConfigMaps dans Kubernetes seront explor√©s, ainsi que leur utilisation pour g√©rer les configurations et les informations sensibles. üîí</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configmap">ConfigMap<a href="https://delpeuch.net/blog/2025/02/15/06-orchestration/k8s-secrets-configmaps#configmap" class="hash-link" aria-label="Direct link to ConfigMap" title="Direct link to ConfigMap">‚Äã</a></h2>
<p>Un ConfigMap est une ressource Kubernetes utilis√©e pour stocker des paires cl√©-valeur de configuration. Les ConfigMaps permettent de s√©parer les configurations des conteneurs, ce qui facilite la gestion et la mise √† jour des configurations sans avoir √† reconstruire les images des conteneurs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-configmap">Exemple de ConfigMap<a href="https://delpeuch.net/blog/2025/02/15/06-orchestration/k8s-secrets-configmaps#exemple-de-configmap" class="hash-link" aria-label="Direct link to Exemple de ConfigMap" title="Direct link to Exemple de ConfigMap">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">data</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">database_url</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"postgres://user:password@hostname:5432/dbname"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">log_level</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"debug"</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="utilisation-dun-configmap-dans-un-pod">Utilisation d'un ConfigMap dans un Pod<a href="https://delpeuch.net/blog/2025/02/15/06-orchestration/k8s-secrets-configmaps#utilisation-dun-configmap-dans-un-pod" class="hash-link" aria-label="Direct link to Utilisation d'un ConfigMap dans un Pod" title="Direct link to Utilisation d'un ConfigMap dans un Pod">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">containers</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">env</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> DATABASE_URL</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">valueFrom</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">configMapKeyRef</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">              </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">              </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">key</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> database_url</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> LOG_LEVEL</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">valueFrom</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">configMapKeyRef</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">              </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">              </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">key</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> log_level</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="secret">Secret<a href="https://delpeuch.net/blog/2025/02/15/06-orchestration/k8s-secrets-configmaps#secret" class="hash-link" aria-label="Direct link to Secret" title="Direct link to Secret">‚Äã</a></h2>
<p>Un Secret est une ressource Kubernetes utilis√©e pour stocker des informations sensibles, telles que des mots de passe, des cl√©s API et des certificats. Les Secrets permettent de g√©rer les informations sensibles de mani√®re s√©curis√©e et de les injecter dans les conteneurs sans les exposer dans les fichiers de configuration.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-secret">Exemple de Secret<a href="https://delpeuch.net/blog/2025/02/15/06-orchestration/k8s-secrets-configmaps#exemple-de-secret" class="hash-link" aria-label="Direct link to Exemple de Secret" title="Direct link to Exemple de Secret">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Secret</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Opaque</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">data</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">username</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> dXNlcm5hbWU=</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">password</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> cGFzc3dvcmQ=</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="utilisation-dun-secret-dans-un-pod">Utilisation d'un Secret dans un Pod<a href="https://delpeuch.net/blog/2025/02/15/06-orchestration/k8s-secrets-configmaps#utilisation-dun-secret-dans-un-pod" class="hash-link" aria-label="Direct link to Utilisation d'un Secret dans un Pod" title="Direct link to Utilisation d'un Secret dans un Pod">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">containers</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">env</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> USERNAME</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">valueFrom</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">secretKeyRef</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">              </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">              </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">key</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> username</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> PASSWORD</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">valueFrom</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">secretKeyRef</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">              </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">secret</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">              </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">key</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> password</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://delpeuch.net/blog/2025/02/15/06-orchestration/k8s-secrets-configmaps#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2>
<p>Les Secrets et ConfigMaps dans Kubernetes permettent de g√©rer les configurations et les informations sensibles de mani√®re s√©curis√©e et efficace. En utilisant ces ressources, il est possible de s√©parer les configurations des conteneurs, de faciliter la gestion des configurations et de prot√©ger les informations sensibles. üîê</p>
<p>Pour en savoir plus sur Kubernetes, consulter la <a href="https://kubernetes.io/fr/docs/concepts/" target="_blank" rel="noopener noreferrer">documentation officielle</a>.</p>]]></content>
        <category label="Kubernetes" term="Kubernetes"/>
        <category label="Orchestration" term="Orchestration"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Stockage dans Kubernetes]]></title>
        <id>https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage</id>
        <link href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage"/>
        <updated>2025-02-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[D√©couvrez les concepts de stockage dans Kubernetes, tels que PersistentVolume, PersistentVolumeClaim, StorageClass et Volume.]]></summary>
        <content type="html"><![CDATA[<p>Kubernetes offre des m√©canismes pour monter et utiliser du stockage dans les pods, mais la gestion des donn√©es, y compris la provision, la sauvegarde et la r√©plication, est une t√¢che qui incombe aux administrateurs du cluster. Dans cet article, les concepts de stockage dans Kubernetes, notamment PersistentVolume, PersistentVolumeClaim, StorageClass et Volume, seront explor√©s. üì¶</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="persistentvolume-pv">PersistentVolume (PV)<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#persistentvolume-pv" class="hash-link" aria-label="Direct link to PersistentVolume (PV)" title="Direct link to PersistentVolume (PV)">‚Äã</a></h2>
<p>Un PersistentVolume (PV) est une ressource Kubernetes qui repr√©sente un volume de stockage dans le cluster. Il peut √™tre provisionn√© dynamiquement ou statiquement et est utilis√© pour stocker des donn√©es de mani√®re persistante. Les PVs sont ind√©pendants des pods et peuvent √™tre r√©clam√©s par des PersistentVolumeClaims (PVCs).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-persistentvolume">Exemple de PersistentVolume<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#exemple-de-persistentvolume" class="hash-link" aria-label="Direct link to Exemple de PersistentVolume" title="Direct link to Exemple de PersistentVolume">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> PersistentVolume</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">pv</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">capacity</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">storage</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> 1Gi</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">accessModes</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> ReadWriteOnce</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">persistentVolumeReclaimPolicy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Retain</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">storageClassName</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">storage</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">class</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">hostPath</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">path</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> /mnt/data</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="persistentvolumeclaim-pvc">PersistentVolumeClaim (PVC)<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#persistentvolumeclaim-pvc" class="hash-link" aria-label="Direct link to PersistentVolumeClaim (PVC)" title="Direct link to PersistentVolumeClaim (PVC)">‚Äã</a></h2>
<p>Un PersistentVolumeClaim (PVC) est une ressource Kubernetes utilis√©e par les pods pour demander un certain type et une certaine quantit√© de stockage persistant. Les PVCs sont li√©s aux PVs disponibles dans le cluster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-persistentvolumeclaim">Exemple de PersistentVolumeClaim<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#exemple-de-persistentvolumeclaim" class="hash-link" aria-label="Direct link to Exemple de PersistentVolumeClaim" title="Direct link to Exemple de PersistentVolumeClaim">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> PersistentVolumeClaim</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">pvc</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">accessModes</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> ReadWriteOnce</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">resources</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">requests</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">storage</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> 1Gi</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">storageClassName</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">storage</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">class</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cycle-de-vie-des-persistentvolumes-pv-et-persistentvolumeclaims-pvc">Cycle de vie des PersistentVolumes (PV) et PersistentVolumeClaims (PVC)<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#cycle-de-vie-des-persistentvolumes-pv-et-persistentvolumeclaims-pvc" class="hash-link" aria-label="Direct link to Cycle de vie des PersistentVolumes (PV) et PersistentVolumeClaims (PVC)" title="Direct link to Cycle de vie des PersistentVolumes (PV) et PersistentVolumeClaims (PVC)">‚Äã</a></h2>
<p>Le cycle de vie des PersistentVolumes (PV) et PersistentVolumeClaims (PVC) dans Kubernetes suit plusieurs √©tapes, de la cr√©ation √† la suppression.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cycle-de-vie-des-pv">Cycle de vie des PV<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#cycle-de-vie-des-pv" class="hash-link" aria-label="Direct link to Cycle de vie des PV" title="Direct link to Cycle de vie des PV">‚Äã</a></h3>
<ol>
<li><strong>Provisioning</strong>: Le PV est cr√©√© soit statiquement par un administrateur, soit dynamiquement par le contr√¥leur de stockage.</li>
<li><strong>Binding</strong>: Le PV est li√© √† un PVC lorsqu'un PVC correspondant est cr√©√©.</li>
<li><strong>Using</strong>: Le PV est utilis√© par un pod via le PVC.</li>
<li><strong>Reclaiming</strong>: Lorsque le PVC est supprim√©, le PV entre dans une phase de r√©cup√©ration selon sa politique de r√©cup√©ration (Retain, Recycle, Delete).</li>
<li><strong>Releasing</strong>: Le PV est lib√©r√© mais reste associ√© au PVC jusqu'√† ce que la politique de r√©cup√©ration soit appliqu√©e.</li>
<li><strong>Recycling/Deleting</strong>: Le PV est soit recycl√© pour √™tre r√©utilis√©, soit supprim√©.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cycle-de-vie-des-pvc">Cycle de vie des PVC<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#cycle-de-vie-des-pvc" class="hash-link" aria-label="Direct link to Cycle de vie des PVC" title="Direct link to Cycle de vie des PVC">‚Äã</a></h3>
<ol>
<li><strong>Pending</strong>: Le PVC est cr√©√© et attend qu'un PV correspondant soit disponible.</li>
<li><strong>Bound</strong>: Le PVC est li√© √† un PV disponible.</li>
<li><strong>Using</strong>: Le PVC est utilis√© par un pod pour acc√©der au stockage.</li>
<li><strong>Released</strong>: Le PVC est supprim√© et le PV entre dans la phase de r√©cup√©ration.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="diagramme-mermaid">Diagramme Mermaid<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#diagramme-mermaid" class="hash-link" aria-label="Direct link to Diagramme Mermaid" title="Direct link to Diagramme Mermaid">‚Äã</a></h3>
<!-- -->
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="storageclass">StorageClass<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#storageclass" class="hash-link" aria-label="Direct link to StorageClass" title="Direct link to StorageClass">‚Äã</a></h2>
<p>Une StorageClass est une ressource Kubernetes utilis√©e pour d√©finir les types de stockage disponibles dans le cluster. Elle permet de provisionner dynamiquement des PersistentVolumes en fonction des besoins sp√©cifiques des applications.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="provisionnement-dynamique">Provisionnement dynamique<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#provisionnement-dynamique" class="hash-link" aria-label="Direct link to Provisionnement dynamique" title="Direct link to Provisionnement dynamique">‚Äã</a></h3>
<p>Le provisionnement dynamique permet de cr√©er automatiquement des PersistentVolumes (PVs) lorsque des PersistentVolumeClaims (PVCs) sont demand√©s par les pods. Cela simplifie la gestion du stockage en √©liminant la n√©cessit√© de cr√©er manuellement des PVs. Pour utiliser le provisionnement dynamique, les administrateurs du cluster doivent d√©finir des StorageClasses qui sp√©cifient les types de stockage disponibles et les param√®tres de provisionnement.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-storageclass">Exemple de StorageClass<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#exemple-de-storageclass" class="hash-link" aria-label="Direct link to Exemple de StorageClass" title="Direct link to Exemple de StorageClass">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> storage.k8s.io/v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> StorageClass</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">storage</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">class</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">provisioner</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> kubernetes.io/no</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">provisioner</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">volumeBindingMode</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> WaitForFirstConsumer</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-persistentvolumeclaim-utilisant-une-storageclass">Exemple de PersistentVolumeClaim utilisant une StorageClass<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#exemple-de-persistentvolumeclaim-utilisant-une-storageclass" class="hash-link" aria-label="Direct link to Exemple de PersistentVolumeClaim utilisant une StorageClass" title="Direct link to Exemple de PersistentVolumeClaim utilisant une StorageClass">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> PersistentVolumeClaim</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">pvc</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">accessModes</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> ReadWriteOnce</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">resources</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">requests</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">storage</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> 1Gi</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">storageClassName</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">storage</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">class</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>En utilisant une StorageClass avec le provisionnement dynamique, Kubernetes cr√©era automatiquement un PV correspondant aux sp√©cifications du PVC lorsque celui-ci sera cr√©√©. Cela est √©galement possible on-premise, √† condition que le cluster Kubernetes soit configur√© avec un provisionneur de stockage compatible. Les administrateurs du cluster doivent s'assurer que les StorageClasses sont correctement d√©finies pour le stockage on-premise.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="volume">Volume<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#volume" class="hash-link" aria-label="Direct link to Volume" title="Direct link to Volume">‚Äã</a></h2>
<p>Un Volume Kubernetes est un r√©pertoire, potentiellement mont√© √† partir du stockage du n≈ìud, partag√© entre les conteneurs d'un pod. Les volumes sont utilis√©s pour stocker des donn√©es de mani√®re temporaire ou persistante.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-volume">Exemple de Volume<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#exemple-de-volume" class="hash-link" aria-label="Direct link to Exemple de Volume" title="Direct link to Exemple de Volume">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">containers</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">volumeMounts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">mountPath</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> /usr/share/nginx/html</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">volume</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">volumes</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">volume</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">persistentVolumeClaim</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">claimName</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">pvc</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="stockage-statique-et-dynamique">Stockage statique et dynamique<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#stockage-statique-et-dynamique" class="hash-link" aria-label="Direct link to Stockage statique et dynamique" title="Direct link to Stockage statique et dynamique">‚Äã</a></h2>
<p>Le stockage dans Kubernetes peut √™tre provisionn√© de mani√®re statique ou dynamique.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stockage-statique">Stockage statique<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#stockage-statique" class="hash-link" aria-label="Direct link to Stockage statique" title="Direct link to Stockage statique">‚Äã</a></h3>
<p>Le stockage statique implique la cr√©ation manuelle de PersistentVolumes (PVs) par les administrateurs du cluster. Les PVs sont d√©finis √† l'avance et sont disponibles pour √™tre r√©clam√©s par les PersistentVolumeClaims (PVCs). Cette m√©thode est utile lorsque des exigences sp√©cifiques de stockage doivent √™tre respect√©es.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stockage-dynamique">Stockage dynamique<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#stockage-dynamique" class="hash-link" aria-label="Direct link to Stockage dynamique" title="Direct link to Stockage dynamique">‚Äã</a></h3>
<p>Le stockage dynamique permet de provisionner automatiquement des PersistentVolumes (PVs) en fonction des besoins des applications. Les administrateurs du cluster d√©finissent des StorageClasses qui sp√©cifient les types de stockage disponibles. Lorsqu'un PersistentVolumeClaim (PVC) est cr√©√©, Kubernetes utilise la StorageClass pour provisionner dynamiquement un PV correspondant aux sp√©cifications du PVC. Cette m√©thode simplifie la gestion du stockage et permet une allocation plus flexible des ressources.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://delpeuch.net/blog/2025/02/10/06-orchestration/k8s-storage#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2>
<p>Les concepts de stockage dans Kubernetes, tels que PersistentVolume, PersistentVolumeClaim, StorageClass et Volume, permettent de g√©rer efficacement le stockage des donn√©es dans les applications conteneuris√©es. En comprenant ces concepts, il est possible de tirer parti de la puissance de Kubernetes pour g√©rer le stockage des applications. üìä</p>
<p>Pour en savoir plus sur Kubernetes, consulter la <a href="https://kubernetes.io/fr/docs/concepts/" target="_blank" rel="noopener noreferrer">documentation officielle</a>.</p>]]></content>
        <category label="Kubernetes" term="Kubernetes"/>
        <category label="Orchestration" term="Orchestration"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Composants de base de Kubernetes]]></title>
        <id>https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components</id>
        <link href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components"/>
        <updated>2025-02-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[D√©couvrez les composants de base de Kubernetes, tels que les Services, Pods, Deployments et StatefulSets.]]></summary>
        <content type="html"><![CDATA[<p>Kubernetes est une plateforme d'orchestration de conteneurs qui permet de g√©rer des clusters de machines ex√©cutant des conteneurs. Dans cet article, les composants de base de Kubernetes, notamment les Services, Pods, Deployments et StatefulSets, seront explor√©s. üöÄ</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pod">Pod<a href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components#pod" class="hash-link" aria-label="Direct link to Pod" title="Direct link to Pod">‚Äã</a></h2>
<p>Un Pod est l'unit√© de base de d√©ploiement dans Kubernetes. Il repr√©sente un ou plusieurs conteneurs qui partagent le m√™me r√©seau et le m√™me espace de stockage. Les Pods sont √©ph√©m√®res et peuvent √™tre recr√©√©s en cas de d√©faillance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-pod">Exemple de Pod<a href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components#exemple-de-pod" class="hash-link" aria-label="Direct link to Exemple de Pod" title="Direct link to Exemple de Pod">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">containers</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ports</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">containerPort</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">80</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Les Pods sont utilis√©s pour ex√©cuter des applications conteneuris√©es sur des n≈ìuds de travail. Ils peuvent contenir un ou plusieurs conteneurs, qui partagent le m√™me r√©seau et le m√™me espace de stockage. Les Pods sont √©ph√©m√®res, ce qui signifie qu'ils peuvent √™tre recr√©√©s en cas de d√©faillance. Les Pods sont √©galement utilis√©s pour regrouper des conteneurs qui doivent √™tre ex√©cut√©s ensemble, par exemple, un conteneur d'application et un conteneur de base de donn√©es.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="service">Service<a href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components#service" class="hash-link" aria-label="Direct link to Service" title="Direct link to Service">‚Äã</a></h2>
<p>Un Service est une abstraction qui permet d'exposer une application ex√©cut√©e sur un ensemble de Pods en tant que service r√©seau. Les Services permettent de distribuer le trafic r√©seau entre les Pods et de garantir la haute disponibilit√© des applications.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-service">Exemple de Service<a href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components#exemple-de-service" class="hash-link" aria-label="Direct link to Exemple de Service" title="Direct link to Exemple de Service">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">selector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">app</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ports</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">protocol</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">port</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">targetPort</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> LoadBalancer</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Les Services sont utilis√©s pour exposer des applications ex√©cut√©es sur des Pods en tant que services r√©seau. Ils permettent de distribuer le trafic r√©seau entre les Pods et de garantir la haute disponibilit√© des applications. Les Services peuvent √™tre de diff√©rents types, tels que ClusterIP, NodePort et LoadBalancer, en fonction des besoins de l'application.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment">Deployment<a href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components#deployment" class="hash-link" aria-label="Direct link to Deployment" title="Direct link to Deployment">‚Äã</a></h2>
<p>Un Deployment est un objet Kubernetes qui g√®re le d√©ploiement et la mise √† l'√©chelle des applications conteneuris√©es. Il d√©finit l'√©tat souhait√© de l'application et Kubernetes s'occupe de cr√©er et de g√©rer les instances (Pods) pour atteindre cet √©tat.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-deployment">Exemple de Deployment<a href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components#exemple-de-deployment" class="hash-link" aria-label="Direct link to Exemple de Deployment" title="Direct link to Exemple de Deployment">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">replicas</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">selector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">matchLabels</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">app</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">template</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">labels</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">app</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">containers</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ports</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">containerPort</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">80</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Les Deployments sont utilis√©s pour g√©rer le d√©ploiement et la mise √† l'√©chelle des applications conteneuris√©es. Ils d√©finissent l'√©tat souhait√© de l'application, y compris le nombre de r√©plicas, l'image du conteneur √† utiliser, les ports expos√©s et les volumes. Kubernetes s'occupe de cr√©er et de g√©rer les instances (Pods) pour atteindre cet √©tat. Les Deployments permettent √©galement de mettre √† jour les applications de mani√®re transparente en effectuant des d√©ploiements progressifs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="statefulset">StatefulSet<a href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components#statefulset" class="hash-link" aria-label="Direct link to StatefulSet" title="Direct link to StatefulSet">‚Äã</a></h2>
<p>Un StatefulSet est un objet Kubernetes qui g√®re le d√©ploiement et la mise √† l'√©chelle des applications avec √©tat. Contrairement aux Deployments, les StatefulSets garantissent l'ordre et l'unicit√© des Pods, ce qui est essentiel pour les applications n√©cessitant un stockage persistant.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-statefulset">Exemple de StatefulSet<a href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components#exemple-de-statefulset" class="hash-link" aria-label="Direct link to Exemple de StatefulSet" title="Direct link to Exemple de StatefulSet">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> StatefulSet</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">statefulset</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">serviceName</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"my-service"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">replicas</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">selector</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">matchLabels</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">app</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">template</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">labels</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">app</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">containers</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ports</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">containerPort</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">volumeMounts</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">volume</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">              </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">mountPath</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> /usr/share/nginx/html</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">volumeClaimTemplates</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">volume</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">accessModes</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"ReadWriteOnce"</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">resources</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">requests</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">storage</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> 1Gi</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Les StatefulSets sont utilis√©s pour g√©rer le d√©ploiement et la mise √† l'√©chelle des applications avec √©tat. Contrairement aux Deployments, les StatefulSets garantissent l'ordre et l'unicit√© des Pods, ce qui est essentiel pour les applications n√©cessitant un stockage persistant. Les StatefulSets sont souvent utilis√©s pour des applications telles que les bases de donn√©es, qui n√©cessitent un stockage persistant et une gestion de l'√©tat.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="interactions-entre-les-composants">Interactions entre les composants<a href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components#interactions-entre-les-composants" class="hash-link" aria-label="Direct link to Interactions entre les composants" title="Direct link to Interactions entre les composants">‚Äã</a></h2>
<p>Les composants de base de Kubernetes interagissent entre eux pour assurer le d√©ploiement, la mise √† l'√©chelle et la gestion des applications conteneuris√©es. Par exemple, un Deployment peut cr√©er plusieurs Pods, qui sont ensuite expos√©s en tant que service r√©seau par un Service. Les StatefulSets garantissent l'ordre et l'unicit√© des Pods, ce qui est essentiel pour les applications n√©cessitant un stockage persistant. Les Services permettent de distribuer le trafic r√©seau entre les Pods et de garantir la haute disponibilit√© des applications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://delpeuch.net/blog/2025/02/05/06-orchestration/k8s-basic-components#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2>
<p>Les composants de base de Kubernetes, tels que les Pods, Services, Deployments et StatefulSets, permettent de d√©ployer, g√©rer et mettre √† l'√©chelle des applications conteneuris√©es de mani√®re efficace. En comprenant ces composants et leurs interactions, il est possible de tirer parti de la puissance de Kubernetes pour g√©rer les applications.</p>
<p>Pour en savoir plus sur Kubernetes, consulter la <a href="https://kubernetes.io/fr/docs/concepts/" target="_blank" rel="noopener noreferrer">documentation officielle</a>.</p>]]></content>
        <category label="Kubernetes" term="Kubernetes"/>
        <category label="Orchestration" term="Orchestration"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Introduction √† Kubernetes]]></title>
        <id>https://delpeuch.net/blog/2025/02/01/06-orchestration/k8s-introduction</id>
        <link href="https://delpeuch.net/blog/2025/02/01/06-orchestration/k8s-introduction"/>
        <updated>2025-02-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[D√©couvrez les concepts de base de Kubernetes, une plateforme d'orchestration de conteneurs.]]></summary>
        <content type="html"><![CDATA[<p>Kubernetes est une plateforme open-source con√ßue pour automatiser le d√©ploiement, la mise √† l'√©chelle et la gestion des applications conteneuris√©es. Il permet de regrouper des conteneurs qui composent une application en unit√©s logiques pour une gestion et une d√©couverte plus faciles. üöÄ</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quest-ce-que-kubernetes--">Qu'est-ce que Kubernetes ? ü§î<a href="https://delpeuch.net/blog/2025/02/01/06-orchestration/k8s-introduction#quest-ce-que-kubernetes--" class="hash-link" aria-label="Direct link to Qu'est-ce que Kubernetes ? ü§î" title="Direct link to Qu'est-ce que Kubernetes ? ü§î">‚Äã</a></h2>
<p>Kubernetes, souvent abr√©g√© en K8s, est une plateforme d'orchestration de conteneurs qui permet de g√©rer des clusters de machines ex√©cutant des conteneurs. Il a √©t√© initialement d√©velopp√© par Google et est maintenant maintenu par la Cloud Native Computing Foundation (CNCF).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture-de-kubernetes-Ô∏è">Architecture de Kubernetes üèóÔ∏è<a href="https://delpeuch.net/blog/2025/02/01/06-orchestration/k8s-introduction#architecture-de-kubernetes-%EF%B8%8F" class="hash-link" aria-label="Direct link to Architecture de Kubernetes üèóÔ∏è" title="Direct link to Architecture de Kubernetes üèóÔ∏è">‚Äã</a></h3>
<p>L'architecture de Kubernetes est compos√©e de plusieurs composants cl√©s :</p>
<ul>
<li><strong>Master Node</strong> : Le n≈ìud ma√Ætre est responsable de la gestion du cluster. Il orchestre les t√¢ches telles que le d√©ploiement des applications, la maintenance de l'√©tat souhait√© des applications, la mise √† l'√©chelle des applications et la mise √† jour des applications.</li>
<li><strong>Worker Nodes</strong> : Les n≈ìuds de travail ex√©cutent les applications conteneuris√©es. Chaque n≈ìud de travail contient les services n√©cessaires pour ex√©cuter les conteneurs et est g√©r√© par le n≈ìud ma√Ætre.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Architecture de Kubernetes" src="https://delpeuch.net/assets/images/k8s-architecture-b792fb99c20256118ec91e912eac62c7.png" width="1403" height="1066" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="composants-principaux-de-kubernetes-">Composants principaux de Kubernetes üîß<a href="https://delpeuch.net/blog/2025/02/01/06-orchestration/k8s-introduction#composants-principaux-de-kubernetes-" class="hash-link" aria-label="Direct link to Composants principaux de Kubernetes üîß" title="Direct link to Composants principaux de Kubernetes üîß">‚Äã</a></h3>
<ul>
<li><strong>API Server</strong> : L'API Server est le point d'entr√©e pour toutes les commandes Kubernetes. Il expose l'API Kubernetes.</li>
<li><strong>etcd</strong> : etcd est un magasin de donn√©es cl√©-valeur distribu√© qui stocke les donn√©es de configuration du cluster et l'√©tat du cluster.</li>
<li><strong>Scheduler</strong> : Le Scheduler est responsable de la r√©partition des conteneurs sur les n≈ìuds de travail en fonction des ressources disponibles et des contraintes d√©finies.</li>
<li><strong>Controller Manager</strong> : Le Controller Manager ex√©cute les contr√¥leurs qui surveillent l'√©tat du cluster et effectuent les ajustements n√©cessaires pour atteindre l'√©tat souhait√©.</li>
<li><strong>Kubelet</strong> : Kubelet est un agent qui s'ex√©cute sur chaque n≈ìud de travail et garantit que les conteneurs sont ex√©cut√©s dans un Pod.</li>
<li><strong>Container Runtime</strong> : Le Container Runtime est le logiciel responsable de l'ex√©cution des conteneurs. Kubernetes prend en charge plusieurs runtimes de conteneurs, y compris Docker, containerd et CRI-O.</li>
<li><strong>Kube-proxy</strong> : Kube-proxy est un proxy r√©seau qui g√®re la mise en r√©seau des conteneurs et assure la communication entre les services.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="avantages-de-kubernetes-">Avantages de Kubernetes üåü<a href="https://delpeuch.net/blog/2025/02/01/06-orchestration/k8s-introduction#avantages-de-kubernetes-" class="hash-link" aria-label="Direct link to Avantages de Kubernetes üåü" title="Direct link to Avantages de Kubernetes üåü">‚Äã</a></h3>
<ul>
<li><strong>Portabilit√©</strong> : Kubernetes est compatible avec plusieurs environnements de cloud, y compris AWS, Azure et Google Cloud, ainsi qu'avec des environnements sur site.</li>
<li><strong>Scalabilit√©</strong> : Kubernetes permet de mettre √† l'√©chelle les applications de mani√®re horizontale (en ajoutant plus de r√©plicas) et verticale (en allouant plus de ressources √† un conteneur).</li>
<li><strong>R√©silience</strong> : Kubernetes assure la haute disponibilit√© des applications en red√©marrant automatiquement les conteneurs d√©faillants, en r√©pliquant les conteneurs et en √©quilibrant la charge du trafic r√©seau.</li>
<li><strong>Gestion simplifi√©e</strong> : Kubernetes automatise de nombreuses t√¢ches de gestion des conteneurs, y compris le d√©ploiement, la mise √† jour et la mise √† l'√©chelle des applications.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion-">Conclusion üéØ<a href="https://delpeuch.net/blog/2025/02/01/06-orchestration/k8s-introduction#conclusion-" class="hash-link" aria-label="Direct link to Conclusion üéØ" title="Direct link to Conclusion üéØ">‚Äã</a></h2>
<p>Kubernetes est une plateforme puissante et flexible pour l'orchestration des conteneurs. En automatisant de nombreuses t√¢ches de gestion des conteneurs, Kubernetes permet aux √©quipes de d√©veloppement et d'exploitation de se concentrer sur la cr√©ation et la maintenance des applications, plut√¥t que sur la gestion de l'infrastructure sous-jacente.</p>
<p>Pour en savoir plus sur Kubernetes, consulter la <a href="https://kubernetes.io/fr/docs/concepts/" target="_blank" rel="noopener noreferrer">documentation officielle</a>.</p>]]></content>
        <category label="Kubernetes" term="Kubernetes"/>
        <category label="Orchestration" term="Orchestration"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Nginx Proxy Manager]]></title>
        <id>https://delpeuch.net/blog/2025/01/12/02-network/nginx-proxy-manager</id>
        <link href="https://delpeuch.net/blog/2025/01/12/02-network/nginx-proxy-manager"/>
        <updated>2025-01-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Pr√©sentation de Nginx Proxy Manager, ses fonctionnalit√©s et ses avantages, ainsi qu'une d√©monstration d'utilisation avec Docker.]]></summary>
        <content type="html"><![CDATA[<p>Nginx Proxy Manager est une interface utilisateur graphique (GUI) pour g√©rer les proxys inverses Nginx. Il simplifie la gestion des proxys inverses, des certificats SSL et des redirections de trafic. Cet article pr√©sente Nginx Proxy Manager, explique ses fonctionnalit√©s et avantages, et fournit une d√©monstration d'utilisation avec Docker.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quest-ce-que-nginx-proxy-manager-">Qu'est-ce que Nginx Proxy Manager ?<a href="https://delpeuch.net/blog/2025/01/12/02-network/nginx-proxy-manager#quest-ce-que-nginx-proxy-manager-" class="hash-link" aria-label="Direct link to Qu'est-ce que Nginx Proxy Manager ?" title="Direct link to Qu'est-ce que Nginx Proxy Manager ?">‚Äã</a></h2>
<p><img decoding="async" loading="lazy" alt="Nginx Proxy Manager" src="https://delpeuch.net/assets/images/nginx-proxy-manager-b8f97f3974e56251debc7386ebfee5d7.png" width="1000" height="762" class="img_ev3q"></p>
<p><a href="https://nginxproxymanager.com/" target="_blank" rel="noopener noreferrer">Nginx Proxy Manager</a> est une interface utilisateur graphique (GUI) pour g√©rer les proxys inverses Nginx. Il permet de configurer facilement des proxys inverses, des certificats SSL et des redirections de trafic. Nginx Proxy Manager est con√ßu pour √™tre simple √† utiliser et accessible aux utilisateurs non techniques.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Qu'est-ce qu'un proxy ?</summary><div><div class="collapsibleContent_i85q"><p>Un proxy, √©galement connu sous le nom de proxy direct ou proxy de transfert, est un serveur qui agit comme un interm√©diaire entre un client (par exemple, un utilisateur ou un appareil) et un serveur de destination sur Internet. Voici un aper√ßu d√©taill√© de son fonctionnement :</p><ol>
<li>
<p><strong>Interception des requ√™tes</strong> : Lorsqu'un client souhaite acc√©der √† une ressource sur Internet, il envoie une requ√™te au proxy au lieu de se connecter directement au serveur de destination. Le proxy intercepte cette requ√™te.</p>
</li>
<li>
<p><strong>Filtrage et s√©curit√©</strong> : Le proxy examine la requ√™te pour s'assurer qu'elle respecte les politiques de s√©curit√© et de filtrage d√©finies par l'administrateur r√©seau. Il peut bloquer l'acc√®s √† certains sites web, filtrer les contenus inappropri√©s ou malveillants, et appliquer des r√®gles de s√©curit√©.</p>
</li>
<li>
<p><strong>Anonymisation</strong> : Le proxy peut masquer l'adresse IP du client en utilisant sa propre adresse IP pour se connecter au serveur de destination. Cela permet de prot√©ger l'identit√© et la confidentialit√© du client.</p>
</li>
<li>
<p><strong>Mise en cache</strong> : Le proxy peut mettre en cache les r√©ponses des serveurs de destination. Si un autre client demande la m√™me ressource, le proxy peut fournir la r√©ponse mise en cache, ce qui r√©duit la charge sur le serveur de destination et am√©liore les temps de r√©ponse.</p>
</li>
<li>
<p><strong>Transmission de la requ√™te</strong> : Si la requ√™te est autoris√©e, le proxy la transmet au serveur de destination en utilisant sa propre adresse IP. Le serveur de destination r√©pond alors au proxy.</p>
</li>
<li>
<p><strong>Retour de la r√©ponse</strong> : Le proxy re√ßoit la r√©ponse du serveur de destination, la filtre √† nouveau si n√©cessaire, et la renvoie au client. Le client re√ßoit ainsi la r√©ponse comme s'il avait directement communiqu√© avec le serveur de destination.</p>
</li>
</ol></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fonctionnalit√©s-de-nginx-proxy-manager">Fonctionnalit√©s de Nginx Proxy Manager<a href="https://delpeuch.net/blog/2025/01/12/02-network/nginx-proxy-manager#fonctionnalit%C3%A9s-de-nginx-proxy-manager" class="hash-link" aria-label="Direct link to Fonctionnalit√©s de Nginx Proxy Manager" title="Direct link to Fonctionnalit√©s de Nginx Proxy Manager">‚Äã</a></h3>
<ul>
<li><strong>Gestion des proxys inverses</strong> : Configurez facilement des proxys inverses pour vos applications web.</li>
<li><strong>Certificats SSL</strong> : G√©rez les certificats SSL pour s√©curiser vos sites web.</li>
<li><strong>Redirections de trafic</strong> : Configurez des redirections de trafic pour vos domaines et sous-domaines.</li>
<li><strong>Interface utilisateur intuitive</strong> : Utilisez une interface utilisateur graphique pour g√©rer vos configurations Nginx.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="avantages-de-nginx-proxy-manager">Avantages de Nginx Proxy Manager<a href="https://delpeuch.net/blog/2025/01/12/02-network/nginx-proxy-manager#avantages-de-nginx-proxy-manager" class="hash-link" aria-label="Direct link to Avantages de Nginx Proxy Manager" title="Direct link to Avantages de Nginx Proxy Manager">‚Äã</a></h3>
<ul>
<li><strong>Simplicit√©</strong> : Nginx Proxy Manager simplifie la gestion des proxys inverses et des certificats SSL.</li>
<li><strong>Accessibilit√©</strong> : L'interface utilisateur graphique rend Nginx Proxy Manager accessible aux utilisateurs non techniques.</li>
<li><strong>Flexibilit√©</strong> : Nginx Proxy Manager prend en charge une vari√©t√© de configurations et de sc√©narios d'utilisation.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilisation-de-nginx-proxy-manager-avec-docker">Utilisation de Nginx Proxy Manager avec Docker<a href="https://delpeuch.net/blog/2025/01/12/02-network/nginx-proxy-manager#utilisation-de-nginx-proxy-manager-avec-docker" class="hash-link" aria-label="Direct link to Utilisation de Nginx Proxy Manager avec Docker" title="Direct link to Utilisation de Nginx Proxy Manager avec Docker">‚Äã</a></h2>
<p>Dans cette section, une d√©monstration est fournie pour montrer comment utiliser Nginx Proxy Manager avec Docker. Un conteneur Docker pour Nginx Proxy Manager sera cr√©√© et un proxy inverse pour une application web sera configur√©.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pr√©requis">Pr√©requis<a href="https://delpeuch.net/blog/2025/01/12/02-network/nginx-proxy-manager#pr%C3%A9requis" class="hash-link" aria-label="Direct link to Pr√©requis" title="Direct link to Pr√©requis">‚Äã</a></h3>
<ul>
<li>Docker install√© sur la machine</li>
<li>Une application web √† proxyfier</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="√©tapes">√âtapes<a href="https://delpeuch.net/blog/2025/01/12/02-network/nginx-proxy-manager#%C3%A9tapes" class="hash-link" aria-label="Direct link to √âtapes" title="Direct link to √âtapes">‚Äã</a></h3>
<ol>
<li>
<p><strong>Cr√©er un fichier <code>docker-compose.yml</code></strong></p>
<p>Cr√©ez un fichier <code>docker-compose.yml</code> avec le contenu suivant :</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">version</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'3'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">services</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">app</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> your</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">app</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">image</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">container_name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> your</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ports</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"8080:80"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">nginx-proxy-manager</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> jc21/nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">proxy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">manager</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">container_name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">proxy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">manager</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ports</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"80:80"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"81:81"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"443:443"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">volumes</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> ./data</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">/data</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> ./letsencrypt</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">/etc/letsencrypt</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>D√©marrer les conteneurs Docker</strong></p>
<p>Ex√©cutez la commande suivante pour d√©marrer les conteneurs Docker :</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker-compose</span><span class="token plain"> up </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-d</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Acc√©der √† l'interface utilisateur de Nginx Proxy Manager</strong></p>
<p>Ouvrir le navigateur et acc√©der √† <code>http://localhost:81</code>. Se connecter avec les informations d'identification par d√©faut (<code>admin@example.com</code> / <code>changeme</code>) et changer le mot de passe.</p>
</li>
<li>
<p><strong>Configurer un proxy inverse</strong></p>
<p>Dans l'interface utilisateur de Nginx Proxy Manager, ajouter un nouveau proxy h√¥te avec les param√®tres suivants :</p>
<ul>
<li><strong>Domain Names</strong> : Entrer le nom de domaine ou l'adresse IP de l'application web.</li>
<li><strong>Forward Hostname / IP</strong> : Entrer <code>app</code>.</li>
<li><strong>Forward Port</strong> : Entrer <code>80</code>.</li>
</ul>
<p>Enregistrer la configuration et acc√©der √† l'application web via le nom de domaine ou l'adresse IP configur√©e.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://delpeuch.net/blog/2025/01/12/02-network/nginx-proxy-manager#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2>
<p>Nginx Proxy Manager est un outil puissant et facile √† utiliser pour g√©rer les proxys inverses Nginx, les certificats SSL et les redirections de trafic. En utilisant Docker, il est possible de d√©ployer et configurer rapidement Nginx Proxy Manager pour les applications web. Essayer Nginx Proxy Manager d√®s aujourd'hui pour simplifier la gestion des proxys inverses et am√©liorer la s√©curit√© des sites web.</p>]]></content>
        <category label="nginx-proxy-manager" term="nginx-proxy-manager"/>
        <category label="Docker" term="Docker"/>
        <category label="Network" term="Network"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DevOps Roadmap 2025]]></title>
        <id>https://delpeuch.net/blog/2025/01/01/devops-roadmap-2025</id>
        <link href="https://delpeuch.net/blog/2025/01/01/devops-roadmap-2025"/>
        <updated>2025-01-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Pr√©sentation de ma roadmap DevOps personnelle 2025]]></summary>
        <content type="html"><![CDATA[<p>Voici un r√©sum√© de ma roadmap DevOps personnelle pour 2025. Cette roadmap est bas√©e sur mes exp√©riences et mes objectifs personnels. Elle est sujette √† des changements et des mises √† jour r√©guli√®res. N'h√©sitez pas √† me contacter si vous avez des suggestions ou des commentaires.</p>
<!-- -->
<p><img decoding="async" loading="lazy" alt="DevOps" src="https://delpeuch.net/assets/images/devops-7e8caa7376b7c423945a1df3b7a1fa48.png" width="446" height="212" class="img_ev3q"></p>
<h2><div style="text-align:center"><span></span><div style="padding:2px 16px"><h2>06 Orchestration de conteneurs - Kubernetes &amp; Docker Swarm</h2></div></div></h2>
<ul>
<li>Apprendre les composants de base comme, Deployment, Service, ConfigMap, Secret, StatefulSet</li>
<li>CLI Kubernetes (Kubectl)</li>
<li>Persistance des donn√©es avec les volumes K8s</li>
<li>Externalisation des configurations avec ConfigMap et Secret</li>
<li>Acc√®s aux applications avec les composants Ingress (Nginx)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-1"><div style="text-align:center"><span></span><div style="padding:2px 16px"><h2>07 Monitoring &amp; Observabilit√©</h2></div></div><a href="https://delpeuch.net/blog/2025/01/01/devops-roadmap-2025#-1" class="hash-link" aria-label="Direct link to -1" title="Direct link to -1">‚Äã</a></h2>
<ul>
<li>Grafana : Outil d'analyse et de visualisation interactive</li>
<li>Prometheus : Un outil de surveillance et d'alerte populaire</li>
<li>Loki : Une pile de gestion de logs populaire</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-2"><div style="text-align:center"><span></span><div style="padding:2px 16px"><h2>08 Infrastructure as Code</h2></div></div><a href="https://delpeuch.net/blog/2025/01/01/devops-roadmap-2025#-2" class="hash-link" aria-label="Direct link to -2" title="Direct link to -2">‚Äã</a></h2>
<ul>
<li>Terraform est l'outil de provisionnement d'infrastructure le plus populaire</li>
<li>Ansible est l'outil de gestion de configuration le plus populaire</li>
</ul>]]></content>
        <category label="Devops" term="Devops"/>
        <category label="Roadmap" term="Roadmap"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[FastAPI]]></title>
        <id>https://delpeuch.net/blog/2024/12/15/09-scripting/fastapi</id>
        <link href="https://delpeuch.net/blog/2024/12/15/09-scripting/fastapi"/>
        <updated>2024-12-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[FastAPI est un framework web moderne et rapide (hautes performances) pour la cr√©ation d'API avec Python, bas√© sur les annotations de types standard de Python.]]></summary>
        <content type="html"><![CDATA[<p>FastAPI est un framework web moderne et rapide (hautes performances) pour la cr√©ation d'API avec Python, bas√© sur les annotations de types standard de Python.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aper√ßu">Aper√ßu<a href="https://delpeuch.net/blog/2024/12/15/09-scripting/fastapi#aper%C3%A7u" class="hash-link" aria-label="Direct link to Aper√ßu" title="Direct link to Aper√ßu">‚Äã</a></h2>
<p>FastAPI est un framework web moderne et rapide (hautes performances) pour la cr√©ation d'API avec Python, bas√© sur les annotations de types standard de Python. Il offre des performances √©lev√©es, comparables √† celles de NodeJS et Go, gr√¢ce √† Starlette et Pydantic, ce qui en fait l'un des frameworks Python les plus rapides disponibles. FastAPI permet d'augmenter la vitesse de d√©veloppement des fonctionnalit√©s de 200% √† 300%, de r√©duire d'environ 40% les erreurs humaines des d√©veloppeurs, et propose un excellent support des √©diteurs avec des compl√©tions.</p>
<table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>Site Web</td><td><a href="https://fastapi.tiangolo.com/" target="_blank" rel="noopener noreferrer">https://fastapi.tiangolo.com/</a></td></tr><tr><td>GitHub Stars</td><td>&gt; 75k ‚≠ê</td></tr><tr><td>Nombre de contributeurs</td><td>700</td></tr><tr><td>Licence</td><td>MIT</td></tr></tbody></table>
<ul>
<li>Finalit√© : Cr√©ation des API web avec Python</li>
<li>Int√©r√™t : FastAPI est facile √† utiliser et √† apprendre, r√©duit la duplication de code, et produit du code pr√™t pour la production avec une documentation interactive bas√©e sur les standards OpenAPI et JSON Schema.</li>
<li>Gouvernance : Assur√©e par une √©quipe de mainteneurs dont <span style="display:inline-flex;gap:0.25rem"><span></span><a href="https://github.com/tiangolo" target="_blank" rel="noopener noreferrer">tiangolo</a></span> est le cr√©ateur et mainteneurs principal. A cela s'ajoute des contributeurs individuels, le projet est soutenu par la communaut√©.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fastapi-vs-flask">FastAPI vs Flask<a href="https://delpeuch.net/blog/2024/12/15/09-scripting/fastapi#fastapi-vs-flask" class="hash-link" aria-label="Direct link to FastAPI vs Flask" title="Direct link to FastAPI vs Flask">‚Äã</a></h3>
<p><strong>FastAPI</strong> est reconnu pour sa rapidit√© et ses performances √©lev√©es, gr√¢ce √† Starlette et Pydantic. Il utilise les annotations de types standard de Python, ce qui am√©liore la validation et la s√©rialisation des donn√©es. FastAPI g√©n√®re automatiquement une documentation interactive et est bas√© sur les standards OpenAPI et JSON Schema. Il est id√©al pour les projets n√©cessitant des performances √©lev√©es et une validation stricte des donn√©es.</p>
<p><strong>Flask</strong>, en revanche, est un micro-framework l√©ger et flexible, facile √† apprendre et √† utiliser. Il offre une grande libert√© aux d√©veloppeurs pour structurer leurs applications comme ils le souhaitent. Flask est extensible via de nombreuses extensions tierces, ce qui le rend adapt√© aux projets de toutes tailles. Cependant, il ne fournit pas de validation de donn√©es int√©gr√©e ni de documentation automatique comme FastAPI.</p>
<p>En r√©sum√©, FastAPI est plus adapt√© pour les projets n√©cessitant des performances √©lev√©es et une validation stricte des donn√©es, tandis que Flask est con√ßu pour les projets n√©cessitant flexibilit√© et simplicit√©.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilisation">Utilisation<a href="https://delpeuch.net/blog/2024/12/15/09-scripting/fastapi#utilisation" class="hash-link" aria-label="Direct link to Utilisation" title="Direct link to Utilisation">‚Äã</a></h2>
<p>Pour installer FastAPI, vous pouvez utiliser pip :</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">pip </span><span class="token function" style="color:hsl(207, 82%, 66%)">install</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"fastapi[standard]"</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>L'exemple ci dessous est une API simpliste de gestion des To-Do List permettant aux utilisateurs de cr√©√©r, lire, mettre √† jour et supprimer des t√¢ches. Les sp√©cifications sont les suivantes :</p>
<ol>
<li>Cr√©er une t√¢che : Permettre aux utilisateurs de cr√©er une nouvelle t√¢che avec un titre et une description.</li>
<li>Lire les t√¢ches : R√©cup√©rer la liste de toutes les t√¢ches ou une t√¢che sp√©cifique par son identifiant.</li>
<li>Mettre √† jour une t√¢che : Modifier les d√©tails d'une t√¢che existante.</li>
<li>Supprimer une t√¢che : Supprimer une t√¢che par son identifiant.</li>
</ol>
<p>L'exemple ci dessous m√©lange plusieurs fonctionnalit√©s de FastAPI.</p>
<div class="language-python codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-python codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token keyword" style="color:hsl(286, 60%, 67%)">from</span><span class="token plain"> datetime </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">import</span><span class="token plain"> date</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">import</span><span class="token plain"> Optional</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">from</span><span class="token plain"> fastapi </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">import</span><span class="token plain"> FastAPI</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> Query</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">from</span><span class="token plain"> pydantic </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">import</span><span class="token plain"> BaseModel</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">import</span><span class="token plain"> uvicorn</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">app </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> FastAPI</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">class</span><span class="token plain"> </span><span class="token class-name" style="color:hsl(29, 54%, 61%)">Task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">BaseModel</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token builtin" style="color:hsl(95, 38%, 62%)">id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(95, 38%, 62%)">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    title</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(95, 38%, 62%)">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(95, 38%, 62%)">str</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    date</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> date</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">tasks</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(95, 38%, 62%)">list</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">Task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">@app</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">post</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">"/tasks/"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> response_model</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">Task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">def</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">create_task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    tasks</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">append</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> task</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">@app</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">"/tasks/"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> response_model</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token builtin" style="color:hsl(95, 38%, 62%)">list</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">Task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">def</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">read_tasks</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">skip</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(95, 38%, 62%)">int</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> limit</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(95, 38%, 62%)">int</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">10</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> tasks</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">skip </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> skip </span><span class="token operator" style="color:hsl(207, 82%, 66%)">+</span><span class="token plain"> limit</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">@app</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">"/tasks/{task_id}"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> response_model</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">Task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">def</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">read_task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">task_id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(95, 38%, 62%)">int</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">for</span><span class="token plain"> task </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">in</span><span class="token plain"> tasks</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token builtin" style="color:hsl(95, 38%, 62%)">id</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> task_id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> task</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string" style="color:hsl(95, 38%, 62%)">"error"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"Task not found"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">@app</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">put</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">"/tasks/{task_id}"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> response_model</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">Task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">def</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">update_task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">task_id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(95, 38%, 62%)">int</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> updated_task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">for</span><span class="token plain"> task </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">in</span><span class="token plain"> tasks</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token builtin" style="color:hsl(95, 38%, 62%)">id</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> task_id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">title </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> updated_task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">title</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">description </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> updated_task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">description</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">date </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> updated_task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">date</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> task</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string" style="color:hsl(95, 38%, 62%)">"error"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"Task not found"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">@app</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">delete</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">"/tasks/{task_id}"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">def</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">delete_task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">task_id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token builtin" style="color:hsl(95, 38%, 62%)">int</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">global</span><span class="token plain"> tasks</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    tasks </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">task </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">for</span><span class="token plain"> task </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">in</span><span class="token plain"> tasks </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token builtin" style="color:hsl(95, 38%, 62%)">id</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">!=</span><span class="token plain"> task_id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string" style="color:hsl(95, 38%, 62%)">"message"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"Task deleted"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">@app</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token decorator annotation punctuation" style="color:hsl(220, 14%, 71%)">get</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">"/search_tasks"</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> response_model</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token builtin" style="color:hsl(95, 38%, 62%)">list</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">Task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">def</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">search_tasks</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    title</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token builtin" style="color:hsl(95, 38%, 62%)">str</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> Query</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token boolean" style="color:hsl(29, 54%, 61%)">None</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> date</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">date</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> Query</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token boolean" style="color:hsl(29, 54%, 61%)">None</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    results </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> tasks</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> title</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        results </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">task </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">for</span><span class="token plain"> task </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">in</span><span class="token plain"> results </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> title</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">in</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">title</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">lower</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> date</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        results </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">task </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">for</span><span class="token plain"> task </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">in</span><span class="token plain"> results </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> task</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token plain">date </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> date</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">return</span><span class="token plain"> results</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Pour lancer l'application :</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">fastapi run /path/to/file.py </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># production mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">fastapi dev /path/to/file.py </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># development mode</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>En plus de l'API, FastAPI g√©n√®re automatiquement une documentation interactive accessible √† l'adresse <code>http://127.0.0.1:8000/docs</code></p>
<p><img decoding="async" loading="lazy" alt="documentation" src="https://delpeuch.net/assets/images/fast-api-documentation-f41f2ce0ce73b19223cee5acb932ddb8.png" width="1186" height="879" class="img_ev3q"></p>]]></content>
        <category label="Devops" term="Devops"/>
        <category label="Python" term="Python"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Dokku]]></title>
        <id>https://delpeuch.net/blog/2024/11/30/06-orchestration/orchestration-dokku</id>
        <link href="https://delpeuch.net/blog/2024/11/30/06-orchestration/orchestration-dokku"/>
        <updated>2024-11-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Dokku est une plateforme open-source permettant le d√©ploiement, la gestion et la mise √† l'√©chelle des applications sur un serveur.]]></summary>
        <content type="html"><![CDATA[<p>Une alternative PAAS open source √† Heroku <a href="https://dokku.com/" target="_blank" rel="noopener noreferrer">https://dokku.com/</a>
Dokku est une plateforme open-source permettant le d√©ploiement, la gestion et la mise √† l'√©chelle des applications sur un serveur. Inspir√© par Heroku, il utilise une approche similaire pour le d√©ploiement d'applications : le code se d√©ploie en effectuant un "push" vers un d√©p√¥t Git sur le serveur. √Ä la diff√©rence de Heroku, Dokku offre un contr√¥le total sur l'environnement de d√©ploiement. Ainsi, l'infrastructure, le syst√®me d'exploitation et les services (tels que les bases de donn√©es ou les files d'attente de t√¢ches) peuvent √™tre personnalis√©s selon les besoins. Dokku s'appuie sur Docker pour g√©rer les applications dans des conteneurs isol√©s, ce qui simplifie la gestion des applications et de leurs d√©pendances. Chaque "push" d'une application √† Dokku cr√©e un nouveau conteneur Docker.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="https://delpeuch.net/blog/2024/11/30/06-orchestration/orchestration-dokku#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">‚Äã</a></h2>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token comment" style="color:hsl(220, 10%, 40%)"># download the installation script</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-NP</span><span class="token plain"> </span><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">.</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">https://dokku.com/bootstrap.sh</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)"># run the installer</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">DOKKU_TAG</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">v0.32.3 </span><span class="token function" style="color:hsl(207, 82%, 66%)">bash</span><span class="token plain"> bootstrap.sh</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)"># and your ssh key to the dokku user</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">PUBLIC_KEY</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token string" style="color:hsl(95, 38%, 62%)">"your-public-key-contents-here"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">echo</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"</span><span class="token string variable" style="color:hsl(207, 82%, 66%)">$PUBLIC_KEY</span><span class="token string" style="color:hsl(95, 38%, 62%)">"</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">|</span><span class="token plain"> dokku ssh-keys:add admin</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="premi√®re-application">Premi√®re application<a href="https://delpeuch.net/blog/2024/11/30/06-orchestration/orchestration-dokku#premi%C3%A8re-application" class="hash-link" aria-label="Direct link to Premi√®re application" title="Direct link to Premi√®re application">‚Äã</a></h2>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token comment" style="color:hsl(220, 10%, 40%)"># define global domains</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">dokku domains:set-global </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">your-domain</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)"># &lt;your-domain&gt; can be a rd party domain or a local domain like sonu-dev-gzsim.local</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sur la machine o√π <code>dokku</code> est install√©</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">dokku apps:create </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">app-name</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> dokku plugin:install </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">https://github.com/dokku/dokku-postgres.git</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">dokku postgres:create railsdatabase</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">dokku postgres:link railsdatabase </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">app-name</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sur la machine locale</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">cd</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">app-name</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> remote </span><span class="token function" style="color:hsl(207, 82%, 66%)">add</span><span class="token plain"> dokku dokku@</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">your-domain</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">app-name</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> push dokku main</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="construire-sa-propre-application">Construire sa propre application<a href="https://delpeuch.net/blog/2024/11/30/06-orchestration/orchestration-dokku#construire-sa-propre-application" class="hash-link" aria-label="Direct link to Construire sa propre application" title="Direct link to Construire sa propre application">‚Äã</a></h2>
<p>Dokku supporte plusieurs m√©thodes de build pour cr√©er des applications, chacun avec ses propres avantages sp√©cifiques :</p>
<ol>
<li><a href="https://dokku.com/docs/deployment/builders/dockerfiles/" target="_blank" rel="noopener noreferrer"><strong>builder-dockerfile</strong></a>: Cette m√©thode utilise un Dockerfile pour construire des applications via la commande <code>docker build</code>. Il donne un contr√¥le maximal sur l'environnement d'ex√©cution de l'application et sur la mani√®re dont l'application est assembl√©e.</li>
<li><a href="https://dokku.com/docs/deployment/builders/herokuish-buildpacks/" target="_blank" rel="noopener noreferrer"><strong>builder-herokuish</strong></a>: Avec cette m√©thode, Dokku cr√©e des applications en utilisant la sp√©cification v2a Buildpack de Heroku via <code>gliderlabs/herokuish</code>. Il vous permet de profiter du m√™me pipeline de build que Heroku, qui inclut le support pour de nombreux langages de programmation par d√©faut.</li>
<li>builder-lambda: Ce g√©n√©rateur construit des fonctions AWS Lambda dans un environnement simulant les temps d'ex√©cution d'AWS Lambda.</li>
<li><strong>builder-null</strong>: Cette m√©thode ne fait rien pendant la phase de construction. C'est utile pour les sc√©narios o√π aucune construction n'est n√©cessaire, comme le d√©ploiement d'applications d√©j√† compil√©es ou de conteneurs Docker.</li>
<li><strong>builder-pack</strong>: Cette m√©thode utilise les Cloud Native Buildpacks pour construire des applications via l'outil pack-cli. Les Cloud Native Buildpacks sont une norme ouverte qui √©tend les capacit√©s des Buildpacks classiques.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="automatiser-le-d√©ploiement-via-github-actions">Automatiser le d√©ploiement via Github Actions<a href="https://delpeuch.net/blog/2024/11/30/06-orchestration/orchestration-dokku#automatiser-le-d%C3%A9ploiement-via-github-actions" class="hash-link" aria-label="Direct link to Automatiser le d√©ploiement via Github Actions" title="Direct link to Automatiser le d√©ploiement via Github Actions">‚Äã</a></h2>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Deploy to Dokku (sonu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">dev</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">gzsim)</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">schedule</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">cron</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'0 0 * * *'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">workflow_dispatch</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">workflow_run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">workflows</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"Test build"</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">types</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> completed</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">deploy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">group</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Cloning repo</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> actions/checkout@v4</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">fetch-depth</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Tailscale</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> tailscale/github</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">action@v2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">oauth-client-id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> secrets.TS_OAUTH_CLIENT_ID </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">oauth-secret</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> secrets.TS_OAUTH_SECRET </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">tags</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> tag</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">server</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Push to dokku</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> dokku/github</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">action@master</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">git_remote_url</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'ssh://dokku@100.65.237.90:22/rd25-robotics'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ssh_private_key</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> secrets.SSH_PRIVATE_KEY </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">branch</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">git_push_flags</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'--force'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">if</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> github.event.workflow_run.conclusion == 'success' </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="astuces">Astuces<a href="https://delpeuch.net/blog/2024/11/30/06-orchestration/orchestration-dokku#astuces" class="hash-link" aria-label="Direct link to Astuces" title="Direct link to Astuces">‚Äã</a></h2>
<p>‚ö†Ô∏è Les astuces ci dessous correspondent <strong>tr√®s certainement</strong> √† une incompr√©hension des m√©canismes de domain, proxy et reverse proxy</p>
<p>Par d√©faut <code>dokku</code> d√©ploie l‚Äôapplication sur une url construite comme suit : <code>http://&lt;app-name&gt;.&lt;your-domain&gt;</code> visiblement si le domaine est local (comme <code>sonu-dev-gzsim.local</code>) le reverse proxy ne fonctionne pas (la configuration <code>nginx</code> est √† creuser) il est donc n√©cessaire de <code>disable</code> les domains avec la commande</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">dokku domains:disable </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">app-name</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Cela aura pour effet de d√©sactiver le domaine pour l‚Äôapplication en question. Elle tournera donc directement sur le port d√©fini al√©atoirement par <code>dokku</code>.
√Ä chaque d√©ploiement, <code>dokku</code> construit un <code>dokker</code> pour g√©rer les applications de mani√®re isol√©e. Par d√©faut, les applications de type web doivent fournir leurs services sur le port <code>5000</code>. Par la suite, <code>dokku</code> s‚Äôoccupe de faire la redirection de port entre la machine et le container. Pour √©viter d‚Äôavoir un port al√©atoire, il est possible de faire</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">dokku ports:set </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">app-name</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> http:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">machine-port</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">docker-port</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Ainsi, √† chaque d√©ploiement, <code>dokku</code> redirigera le port de la machine vers le port du docker.
Finalement si vous souhaitez mettre en place une redirection comme <code>http://&lt;your-domain&gt;/&lt;app-name&gt;</code> vers l‚Äôapplication il suffit de faire les modifications suivantes dans <code>nginx</code>
Modifiez le fichier de configuration de Nginx pour votre site :</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">nano</span><span class="token plain"> /etc/nginx/sites-available/your-config-file</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Ajoutez la directive location dans votre configuration :</p>
<div class="language-txt codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-txt codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">server { listen 80; server_name &lt;your-domain&gt;; location = &lt;app-name&gt; { return 301 http://$host:&lt;machine-port&gt;; } }</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Cr√©ez un lien symbolique vers le fichier de configuration :</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">ln</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-s</span><span class="token plain"> /etc/nginx/sites-available/your-config-file /etc/nginx/sites-enabled/</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>V√©rifiez la configuration de Nginx :</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> nginx </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-t</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Red√©marrez Nginx pour appliquer les modifications :</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> systemctl restart nginx</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <category label="Devops" term="Devops"/>
        <category label="Orchestration" term="Orchestration"/>
        <category label="Alternatives" term="Alternatives"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Docker Compose]]></title>
        <id>https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose</id>
        <link href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose"/>
        <updated>2024-11-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Explication de Docker Compose]]></summary>
        <content type="html"><![CDATA[<p>Docker Compose est un outil puissant qui permet de d√©finir et de g√©rer des applications multi-conteneurs Docker. Il utilise un fichier YAML pour configurer les services de l'application. Ensuite, avec une seule commande, vous pouvez cr√©er et d√©marrer tous les services √† partir de votre configuration.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quest-ce-que-docker-compose-">Qu'est-ce que Docker Compose ?<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#quest-ce-que-docker-compose-" class="hash-link" aria-label="Direct link to Qu'est-ce que Docker Compose ?" title="Direct link to Qu'est-ce que Docker Compose ?">‚Äã</a></h2>
<p>Docker Compose est un outil qui permet de d√©finir et de g√©rer des applications multi-conteneurs Docker. Il utilise un fichier YAML pour configurer les services de l'application. Ensuite, avec une seule commande, vous pouvez cr√©er et d√©marrer tous les services √† partir de votre configuration.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-fichier-docker-compose">Exemple de fichier Docker Compose<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#exemple-de-fichier-docker-compose" class="hash-link" aria-label="Direct link to Exemple de fichier Docker Compose" title="Direct link to Exemple de fichier Docker Compose">‚Äã</a></h2>
<p>Voici un exemple de fichier <code>docker-compose.yml</code> pour une application web simple avec un service web et une base de donn√©es :</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">version</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'3'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">services</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">web</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ports</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"80:80"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">db</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">environment</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">POSTGRES_DB</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> exampledb</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">POSTGRES_USER</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> exampleuser</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">POSTGRES_PASSWORD</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> examplepass</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans cet exemple, nous avons deux services : <code>web</code> et <code>db</code>. Le service <code>web</code> utilise l'image <code>nginx:alpine</code> et mappe le port 80 du conteneur au port 80 de l'h√¥te. Le service <code>db</code> utilise l'image <code>postgres:alpine</code> et d√©finit quelques variables d'environnement pour configurer la base de donn√©es.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="commandes-docker-compose">Commandes Docker Compose<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#commandes-docker-compose" class="hash-link" aria-label="Direct link to Commandes Docker Compose" title="Direct link to Commandes Docker Compose">‚Äã</a></h2>
<p>Voici quelques commandes Docker Compose couramment utilis√©es :</p>
<ul>
<li><code>docker-compose up</code> : Cr√©e et d√©marre les conteneurs d√©finis dans le fichier <code>docker-compose.yml</code>.</li>
<li><code>docker-compose down</code> : Arr√™te et supprime les conteneurs, les r√©seaux et les volumes cr√©√©s par <code>docker-compose up</code>.</li>
<li><code>docker-compose ps</code> : Affiche l'√©tat des conteneurs d√©finis dans le fichier <code>docker-compose.yml</code>.</li>
<li><code>docker-compose logs</code> : Affiche les logs des conteneurs.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sch√©ma-explicatif">Sch√©ma explicatif<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#sch%C3%A9ma-explicatif" class="hash-link" aria-label="Direct link to Sch√©ma explicatif" title="Direct link to Sch√©ma explicatif">‚Äã</a></h2>
<p>Voici un sch√©ma expliquant comment Docker Compose fonctionne :</p>
<p><img decoding="async" loading="lazy" src="https://www.biaudelle.fr/wp-content/uploads/2021/07/docker-compose-archi.png" alt="Sch√©ma Docker Compose" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="d√©monstration-pratique">D√©monstration pratique<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#d%C3%A9monstration-pratique" class="hash-link" aria-label="Direct link to D√©monstration pratique" title="Direct link to D√©monstration pratique">‚Äã</a></h2>
<p>Pour mieux comprendre l'utilisation de Docker Compose, voici une d√©monstration pratique :</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> network create mynetwork</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">docker-compose</span><span class="token plain"> up </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-d</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">docker-compose</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">ps</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Ouvrez votre navigateur et acc√©dez √† <code>http://localhost</code>.</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker-compose</span><span class="token plain"> down</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="avantages-cl√©s-de-docker-compose">Avantages cl√©s de Docker Compose<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#avantages-cl%C3%A9s-de-docker-compose" class="hash-link" aria-label="Direct link to Avantages cl√©s de Docker Compose" title="Direct link to Avantages cl√©s de Docker Compose">‚Äã</a></h2>
<p>L'utilisation de Docker Compose offre plusieurs avantages qui simplifient le d√©veloppement, le d√©ploiement et la gestion des applications conteneuris√©es :</p>
<ul>
<li><strong>Contr√¥le simplifi√©</strong> : Docker Compose vous permet de d√©finir et de g√©rer des applications multi-conteneurs dans un seul fichier YAML. Cela simplifie la t√¢che complexe d'orchestrer et de coordonner divers services, rendant plus facile la gestion et la r√©plication de votre environnement applicatif.</li>
<li><strong>Collaboration efficace</strong> : Les fichiers de configuration Docker Compose sont faciles √† partager, facilitant la collaboration entre les d√©veloppeurs, les √©quipes d'exploitation et les autres parties prenantes. Cette approche collaborative conduit √† des flux de travail plus fluides, une r√©solution des probl√®mes plus rapide et une efficacit√© globale accrue.</li>
<li><strong>D√©veloppement rapide d'applications</strong> : Compose met en cache la configuration utilis√©e pour cr√©er un conteneur. Lorsque vous red√©marrez un service qui n'a pas chang√©, Compose r√©utilise les conteneurs existants. La r√©utilisation des conteneurs signifie que vous pouvez apporter des modifications √† votre environnement tr√®s rapidement.</li>
<li><strong>Portabilit√© entre les environnements</strong> : Compose prend en charge les variables dans le fichier Compose. Vous pouvez utiliser ces variables pour personnaliser votre composition pour diff√©rents environnements ou diff√©rents utilisateurs.</li>
<li><strong>Communaut√© et support √©tendus</strong> : Docker Compose b√©n√©ficie d'une communaut√© dynamique et active, ce qui signifie des ressources abondantes, des tutoriels et un support. Cet √©cosyst√®me communautaire contribue √† l'am√©lioration continue de Docker Compose et aide les utilisateurs √† r√©soudre efficacement les probl√®mes.</li>
</ul>
<p>Compose peut √™tre utilis√© de nombreuses mani√®res diff√©rentes. Voici quelques cas d'utilisation courants.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="environnements-de-d√©veloppement">Environnements de d√©veloppement<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#environnements-de-d%C3%A9veloppement" class="hash-link" aria-label="Direct link to Environnements de d√©veloppement" title="Direct link to Environnements de d√©veloppement">‚Äã</a></h3>
<p>Lorsque vous d√©veloppez des logiciels, la capacit√© √† ex√©cuter une application dans un environnement isol√© et √† interagir avec elle est cruciale. L'outil en ligne de commande Compose peut √™tre utilis√© pour cr√©er l'environnement et interagir avec lui.</p>
<p>Le fichier Compose fournit un moyen de documenter et de configurer toutes les d√©pendances de service de l'application (bases de donn√©es, files d'attente, caches, API de services web, etc.). En utilisant l'outil en ligne de commande Compose, vous pouvez cr√©er et d√©marrer un ou plusieurs conteneurs pour chaque d√©pendance avec une seule commande (<code>docker compose up</code>).</p>
<p>Ensemble, ces fonctionnalit√©s offrent un moyen pratique de d√©marrer un projet. Compose peut r√©duire un "guide de d√©marrage pour les d√©veloppeurs" de plusieurs pages √† un seul fichier Compose lisible par machine et quelques commandes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="environnements-de-test-automatis√©s">Environnements de test automatis√©s<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#environnements-de-test-automatis%C3%A9s" class="hash-link" aria-label="Direct link to Environnements de test automatis√©s" title="Direct link to Environnements de test automatis√©s">‚Äã</a></h3>
<p>Une partie importante de tout processus de d√©ploiement continu ou d'int√©gration continue est la suite de tests automatis√©s. Les tests automatis√©s de bout en bout n√©cessitent un environnement dans lequel ex√©cuter les tests. Compose fournit un moyen pratique de cr√©er et de d√©truire des environnements de test isol√©s pour votre suite de tests. En d√©finissant l'environnement complet dans un fichier Compose, vous pouvez cr√©er et d√©truire ces environnements en quelques commandes seulement.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="d√©ploiements-sur-un-seul-h√¥te">D√©ploiements sur un seul h√¥te<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#d%C3%A9ploiements-sur-un-seul-h%C3%B4te" class="hash-link" aria-label="Direct link to D√©ploiements sur un seul h√¥te" title="Direct link to D√©ploiements sur un seul h√¥te">‚Äã</a></h3>
<p>Compose a traditionnellement √©t√© ax√© sur les flux de travail de d√©veloppement et de test, mais √† chaque nouvelle version, nous progressons sur des fonctionnalit√©s plus orient√©es vers la production.</p>
<p>Pour plus de d√©tails sur l'utilisation des fonctionnalit√©s orient√©es production, consultez <a href="https://docs.docker.com/compose/production/" target="_blank" rel="noopener noreferrer">Compose en production</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilisation-des-secrets-avec-docker-compose">Utilisation des secrets avec Docker Compose<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#utilisation-des-secrets-avec-docker-compose" class="hash-link" aria-label="Direct link to Utilisation des secrets avec Docker Compose" title="Direct link to Utilisation des secrets avec Docker Compose">‚Äã</a></h2>
<p>Docker Compose permet √©galement de g√©rer les secrets de mani√®re s√©curis√©e. Les secrets sont des informations sensibles telles que des mots de passe, des cl√©s API, etc., qui ne doivent pas √™tre expos√©es dans le code source.</p>
<p>Voici un exemple de configuration de secrets dans un fichier <code>docker-compose.yml</code> :</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">version</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'3.7'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">services</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">web</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">secrets</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> my_secret</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">secrets</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">my_secret</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">file</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ./my_secret.txt</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans cet exemple, le service <code>web</code> utilise un secret nomm√© <code>my_secret</code> qui est d√©fini dans le fichier <code>my_secret.txt</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="support-des-gpu-avec-docker-compose">Support des GPU avec Docker Compose<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#support-des-gpu-avec-docker-compose" class="hash-link" aria-label="Direct link to Support des GPU avec Docker Compose" title="Direct link to Support des GPU avec Docker Compose">‚Äã</a></h2>
<p>Docker Compose prend √©galement en charge l'utilisation des GPU pour les applications n√©cessitant des capacit√©s de calcul intensif, telles que l'apprentissage automatique et le traitement d'images.</p>
<p>Voici un exemple de configuration pour utiliser un GPU avec Docker Compose :</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">version</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'3.8'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">services</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">gpu_service</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nvidia/cuda</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">10.2</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">base</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">deploy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">resources</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">reservations</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">devices</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">capabilities</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">gpu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans cet exemple, le service <code>gpu_service</code> utilise l'image <code>nvidia/cuda:10.2-base</code> et r√©serve un GPU pour le conteneur.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilisation-de-la-surveillance-des-fichiers-avec-docker-compose">Utilisation de la surveillance des fichiers avec Docker Compose<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#utilisation-de-la-surveillance-des-fichiers-avec-docker-compose" class="hash-link" aria-label="Direct link to Utilisation de la surveillance des fichiers avec Docker Compose" title="Direct link to Utilisation de la surveillance des fichiers avec Docker Compose">‚Äã</a></h2>
<p>Docker Compose permet √©galement de surveiller les modifications des fichiers et de red√©marrer automatiquement les services concern√©s. Cela est particuli√®rement utile pour les environnements de d√©veloppement.</p>
<p>Voici un exemple de configuration de surveillance des fichiers dans un fichier <code>docker-compose.yml</code> :</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">version</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'3.8'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">services</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">web</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">volumes</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> ./src</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">/usr/share/nginx/html</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">command</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> sh </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">c "nginx </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">g 'daemon off;'"</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">file_watch</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">watch</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ./src</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">action</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> restart</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans cet exemple, le service <code>web</code> surveille les modifications dans le r√©pertoire <code>./src</code> et red√©marre automatiquement le service lorsque des modifications sont d√©tect√©es.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="r√©seau-dans-compose">R√©seau dans Compose<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#r%C3%A9seau-dans-compose" class="hash-link" aria-label="Direct link to R√©seau dans Compose" title="Direct link to R√©seau dans Compose">‚Äã</a></h2>
<blockquote>
<p><strong>Important</strong></p>
<p>La documentation de Docker se r√©f√®re et d√©crit les fonctionnalit√©s de Compose V2.</p>
<p>√Ä partir de juillet 2023, Compose V1 a cess√© de recevoir des mises √† jour et n'est plus inclus dans les nouvelles versions de Docker Desktop. Compose V2 l'a remplac√© et est maintenant int√©gr√© dans toutes les versions actuelles de Docker Desktop. Pour plus d'informations, consultez <a href="https://docs.docker.com/compose/migrate" target="_blank" rel="noopener noreferrer">Migrer vers Compose V2</a>.</p>
</blockquote>
<p>Par d√©faut, Compose configure un seul <a href="https://docs.docker.com/reference/cli/docker/network/create/" target="_blank" rel="noopener noreferrer">r√©seau</a> pour votre application. Chaque conteneur pour un service rejoint le r√©seau par d√©faut et est √† la fois accessible par d'autres conteneurs sur ce r√©seau et d√©couvrable par le nom du service.</p>
<blockquote>
<p><strong>Remarque</strong></p>
<p>Le r√©seau de votre application re√ßoit un nom bas√© sur le "nom du projet", qui est bas√© sur le nom du r√©pertoire dans lequel il se trouve. Vous pouvez remplacer le nom du projet avec soit le <a href="https://docs.docker.com/reference/" target="_blank" rel="noopener noreferrer">flag <code>--project-name</code></a> soit la <a href="https://docs.docker.com/compose/environment-variables/envvars/#compose_project_name" target="_blank" rel="noopener noreferrer">variable d'environnement <code>COMPOSE_PROJECT_NAME</code></a>.</p>
</blockquote>
<p>Par exemple, supposons que votre application se trouve dans un r√©pertoire appel√© <code>myapp</code>, et que votre <code>compose.yml</code> ressemble √† ceci :</p>
<p>Lorsque vous ex√©cutez <code>docker compose up</code>, les actions suivantes se produisent :</p>
<ol>
<li>Un r√©seau appel√© <code>myapp_default</code> est cr√©√©.</li>
<li>Un conteneur est cr√©√© en utilisant la configuration de <code>web</code>. Il rejoint le r√©seau <code>myapp_default</code> sous le nom <code>web</code>.</li>
<li>Un conteneur est cr√©√© en utilisant la configuration de <code>db</code>. Il rejoint le r√©seau <code>myapp_default</code> sous le nom <code>db</code>.</li>
</ol>
<p>Chaque conteneur peut maintenant rechercher le nom du service <code>web</code> ou <code>db</code> et obtenir l'adresse IP appropri√©e du conteneur. Par exemple, le code de l'application de <code>web</code> pourrait se connecter √† l'URL <code>postgres://db:5432</code> et commencer √† utiliser la base de donn√©es Postgres.</p>
<p>Il est important de noter la distinction entre <code>HOST_PORT</code> et <code>CONTAINER_PORT</code>. Dans l'exemple ci-dessus, pour <code>db</code>, le <code>HOST_PORT</code> est <code>8001</code> et le port du conteneur est <code>5432</code> (par d√©faut pour postgres). La communication de service √† service en r√©seau utilise le <code>CONTAINER_PORT</code>. Lorsque <code>HOST_PORT</code> est d√©fini, le service est √©galement accessible en dehors du swarm.</p>
<p>Dans le conteneur <code>web</code>, votre cha√Æne de connexion √† <code>db</code> ressemblerait √† <code>postgres://db:5432</code>, et depuis la machine h√¥te, la cha√Æne de connexion ressemblerait √† <code>postgres://{DOCKER_IP}:8001</code>, par exemple <code>postgres://localhost:8001</code> si votre conteneur s'ex√©cute localement.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mise-√†-jour-des-conteneurs-sur-le-r√©seau">Mise √† jour des conteneurs sur le r√©seau<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#mise-%C3%A0-jour-des-conteneurs-sur-le-r%C3%A9seau" class="hash-link" aria-label="Direct link to Mise √† jour des conteneurs sur le r√©seau" title="Direct link to Mise √† jour des conteneurs sur le r√©seau">‚Äã</a></h3>
<p>Si vous apportez une modification de configuration √† un service et ex√©cutez <code>docker compose up</code> pour le mettre √† jour, l'ancien conteneur est supprim√© et le nouveau rejoint le r√©seau sous une adresse IP diff√©rente mais avec le m√™me nom. Les conteneurs en cours d'ex√©cution peuvent rechercher ce nom et se connecter √† la nouvelle adresse, mais l'ancienne adresse cesse de fonctionner.</p>
<p>Si des conteneurs ont des connexions ouvertes vers l'ancien conteneur, elles sont ferm√©es. Il incombe au conteneur de d√©tecter cette condition, de rechercher √† nouveau le nom et de se reconnecter.</p>
<blockquote>
<p><strong>Astuce</strong></p>
<p>R√©f√©rencez les conteneurs par nom, et non par IP, chaque fois que possible. Sinon, vous devrez constamment mettre √† jour l'adresse IP que vous utilisez.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="r√©seau-multi-h√¥te">R√©seau multi-h√¥te<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#r%C3%A9seau-multi-h%C3%B4te" class="hash-link" aria-label="Direct link to R√©seau multi-h√¥te" title="Direct link to R√©seau multi-h√¥te">‚Äã</a></h3>
<p>Lors du d√©ploiement d'une application Compose sur un moteur Docker avec <a href="https://docs.docker.com/engine/swarm/" target="_blank" rel="noopener noreferrer">le mode Swarm activ√©</a>, vous pouvez utiliser le pilote int√©gr√© <code>overlay</code> pour activer la communication multi-h√¥te.</p>
<p>Les r√©seaux overlay sont toujours cr√©√©s comme <code>attachable</code>. Vous pouvez √©ventuellement d√©finir la propri√©t√© <a href="https://docs.docker.com/reference/compose-file/networks/#attachable" target="_blank" rel="noopener noreferrer"><code>attachable</code></a> sur <code>false</code>.</p>
<p>Consultez la <a href="https://docs.docker.com/engine/swarm/" target="_blank" rel="noopener noreferrer">section mode Swarm</a> pour savoir comment configurer un cluster Swarm, et le <a href="https://docs.docker.com/engine/network/tutorials/overlay/" target="_blank" rel="noopener noreferrer">guide de d√©marrage avec le r√©seau multi-h√¥te</a> pour en savoir plus sur les r√©seaux overlay multi-h√¥te.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sp√©cifier-des-r√©seaux-personnalis√©s">Sp√©cifier des r√©seaux personnalis√©s<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#sp%C3%A9cifier-des-r%C3%A9seaux-personnalis%C3%A9s" class="hash-link" aria-label="Direct link to Sp√©cifier des r√©seaux personnalis√©s" title="Direct link to Sp√©cifier des r√©seaux personnalis√©s">‚Äã</a></h3>
<p>Au lieu d'utiliser simplement le r√©seau d'application par d√©faut, vous pouvez sp√©cifier vos propres r√©seaux avec la cl√© de niveau sup√©rieur <code>networks</code>. Cela vous permet de cr√©er des topologies plus complexes et de sp√©cifier des <a href="https://docs.docker.com/engine/extend/plugins_network/" target="_blank" rel="noopener noreferrer">pilotes de r√©seau personnalis√©s</a> et des options. Vous pouvez √©galement l'utiliser pour connecter des services √† des r√©seaux cr√©√©s en externe qui ne sont pas g√©r√©s par Compose.</p>
<p>Chaque service peut sp√©cifier √† quels r√©seaux se connecter avec la cl√© de niveau service <code>networks</code>, qui est une liste de noms r√©f√©rencant des entr√©es sous la cl√© de niveau sup√©rieur <code>networks</code>.</p>
<p>L'exemple suivant montre un fichier Compose qui d√©finit deux r√©seaux personnalis√©s. Le service <code>proxy</code> est isol√© du service <code>db</code>, car ils ne partagent pas de r√©seau en commun. Seul <code>app</code> peut parler aux deux.</p>
<p>Les r√©seaux peuvent √™tre configur√©s avec des adresses IP statiques en d√©finissant l'<a href="https://docs.docker.com/reference/compose-file/services/#ipv4_address-ipv6_address" target="_blank" rel="noopener noreferrer">adresse ipv4 et/ou ipv6</a> pour chaque r√©seau attach√©.</p>
<p>Les r√©seaux peuvent √©galement recevoir un <a href="https://docs.docker.com/reference/compose-file/networks/#name" target="_blank" rel="noopener noreferrer">nom personnalis√©</a> :</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configurer-le-r√©seau-par-d√©faut">Configurer le r√©seau par d√©faut<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#configurer-le-r%C3%A9seau-par-d%C3%A9faut" class="hash-link" aria-label="Direct link to Configurer le r√©seau par d√©faut" title="Direct link to Configurer le r√©seau par d√©faut">‚Äã</a></h3>
<p>Au lieu de, ou en plus de, sp√©cifier vos propres r√©seaux, vous pouvez √©galement modifier les param√®tres du r√©seau par d√©faut de l'application en d√©finissant une entr√©e sous <code>networks</code> nomm√©e <code>default</code> :</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="utiliser-un-r√©seau-pr√©existant">Utiliser un r√©seau pr√©existant<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#utiliser-un-r%C3%A9seau-pr%C3%A9existant" class="hash-link" aria-label="Direct link to Utiliser un r√©seau pr√©existant" title="Direct link to Utiliser un r√©seau pr√©existant">‚Äã</a></h3>
<p>Si vous souhaitez que vos conteneurs rejoignent un r√©seau pr√©existant, utilisez l'option <a href="https://docs.docker.com/reference/compose-file/networks/#external" target="_blank" rel="noopener noreferrer"><code>external</code></a></p>
<p>Au lieu de tenter de cr√©er un r√©seau appel√© <code>[projectname]_default</code>, Compose recherche un r√©seau appel√© <code>my-pre-existing-network</code> et connecte les conteneurs de votre application √† celui-ci.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://delpeuch.net/blog/2024/11/01/06-orchestration/docker-compose#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2>
<p>Docker Compose est un outil puissant pour g√©rer des applications multi-conteneurs. Il simplifie la configuration, l'isolation des environnements et la portabilit√© des applications. En utilisant Docker Compose, vous pouvez facilement d√©finir et g√©rer des environnements de d√©veloppement, de test et de mise en sc√®ne, ainsi que des d√©ploiements de production simples.</p>
<p>Pour en savoir plus sur Docker Compose, vous pouvez consulter la <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">documentation officielle</a>.</p>]]></content>
        <category label="Docker Compose" term="Docker Compose"/>
        <category label="Devops" term="Devops"/>
        <category label="Orchestration" term="Orchestration"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Containerization vs Virtualization]]></title>
        <id>https://delpeuch.net/blog/2024/10/15/03-containerization/difference-conteneurisation-virtualisation</id>
        <link href="https://delpeuch.net/blog/2024/10/15/03-containerization/difference-conteneurisation-virtualisation"/>
        <updated>2024-10-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Comparaison entre Docker et les machines virtuelles (VM) en termes de taille d'image, de vitesse et de compatibilit√©.]]></summary>
        <content type="html"><![CDATA[<p>Docker et les machines virtuelles (VM) sont des outils de virtualisation, mais ils fonctionnent diff√©remment. Docker virtualise la couche des applications du syst√®me d'exploitation, utilisant le noyau de l'h√¥te, tandis qu'une VM virtualise l'ensemble du syst√®me d'exploitation, incluant son propre noyau et sa couche d'applications. Cette diff√©rence entra√Æne plusieurs distinctions majeures.</p>
<p>Docker et les machines virtuelles (VM) sont des outils de virtualisation, mais ils fonctionnent diff√©remment. Docker virtualise la couche des applications du syst√®me d'exploitation, utilisant le noyau de l'h√¥te, tandis qu'une VM virtualise l'ensemble du syst√®me d'exploitation, incluant son propre noyau et sa couche d'applications. Cette diff√©rence entra√Æne plusieurs distinctions majeures.</p>
<p>Les images Docker sont beaucoup plus petites et rapides √† t√©l√©charger que les images de VM, car elles n'ont qu'une seule couche √† impl√©menter. Les images Docker sont g√©n√©ralement de quelques m√©gaoctets, tandis que les images de VM peuvent atteindre plusieurs gigaoctets.</p>
<p>Les conteneurs Docker d√©marrent beaucoup plus rapidement que les VM, car ils n'ont besoin de d√©marrer que la couche des applications, contrairement aux VM qui doivent d√©marrer l'ensemble du syst√®me d'exploitation.</p>
<p>Docker pr√©sente des probl√®mes de compatibilit√©. Une image de VM de n'importe quel syst√®me d'exploitation peut √™tre ex√©cut√©e sur n'importe quel h√¥te, mais ce n'est pas le cas pour Docker. Par exemple, une image Docker bas√©e sur Linux ne peut pas utiliser le noyau Windows directement. Cependant, Docker Desktop permet de contourner ce probl√®me en utilisant une couche hyperviseur avec une distribution Linux l√©g√®re pour fournir le noyau n√©cessaire.</p>
<p>En r√©sum√©, Docker est plus l√©ger et rapide, mais moins compatible que les VM. Docker Desktop permet de d√©velopper localement sur Windows ou Mac en ex√©cutant des conteneurs bas√©s sur Linux.</p>]]></content>
        <category label="Containerization" term="Containerization"/>
        <category label="Virtualization" term="Virtualization"/>
        <category label="Docker" term="Docker"/>
        <category label="VM" term="VM"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[GitHub GHCR]]></title>
        <id>https://delpeuch.net/blog/2024/09/31/03-containerization/ghrc</id>
        <link href="https://delpeuch.net/blog/2024/09/31/03-containerization/ghrc"/>
        <updated>2024-10-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[GitHub Container Registry (GHCR) est un service d'h√©bergement de packages logiciels propos√© par GitHub, permettant aux utilisateurs de stocker des packages priv√©s ou publics et de les utiliser comme d√©pendances dans leurs projets. Compatible avec plusieurs langages de programmation, GitHub Packages propose des registres pour des gestionnaires de packages tels que npm, RubyGems, Maven, Gradle, Docker, et NuGet. L'authentification sur GitHub Packages se fait exclusivement via un "personal access token (classic)". Les utilisateurs doivent disposer de ce token pour effectuer des op√©rations telles que la publication, l'installation et la suppression de packages, qu'ils soient publics, priv√©s ou internes. Pour les packages priv√©s, GitHub Packages applique des limites de stockage et de transfert de donn√©es en fonction du plan du compte. La gestion des packages peut √™tre r√©alis√©e √† travers l'interface utilisateur GitHub ou via l'API REST. Des webhooks peuvent √©galement √™tre configur√©s pour suivre des √©v√©nements li√©s aux packages, comme la publication ou la mise √† jour.]]></summary>
        <content type="html"><![CDATA[<p>GitHub Container Registry (GHCR) est un service d'h√©bergement de packages logiciels propos√© par GitHub, permettant aux utilisateurs de stocker des packages priv√©s ou publics et de les utiliser comme d√©pendances dans leurs projets. Compatible avec plusieurs langages de programmation, GitHub Packages propose des registres pour des gestionnaires de packages tels que npm, RubyGems, Maven, Gradle, Docker, et NuGet. L'authentification sur GitHub Packages se fait exclusivement via un "personal access token (classic)". Les utilisateurs doivent disposer de ce token pour effectuer des op√©rations telles que la publication, l'installation et la suppression de packages, qu'ils soient publics, priv√©s ou internes. Pour les packages priv√©s, GitHub Packages applique des limites de stockage et de transfert de donn√©es en fonction du plan du compte. La gestion des packages peut √™tre r√©alis√©e √† travers l'interface utilisateur GitHub ou via l'API REST. Des webhooks peuvent √©galement √™tre configur√©s pour suivre des √©v√©nements li√©s aux packages, comme la publication ou la mise √† jour.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quest-ce-que-github-ghcr">Qu'est-ce que GitHub GHCR?<a href="https://delpeuch.net/blog/2024/09/31/03-containerization/ghrc#quest-ce-que-github-ghcr" class="hash-link" aria-label="Direct link to Qu'est-ce que GitHub GHCR?" title="Direct link to Qu'est-ce que GitHub GHCR?">‚Äã</a></h2>
<p>GitHub Container Registry (GHCR) est un service d'h√©bergement de conteneurs Docker propos√© par GitHub. Il permet aux utilisateurs de stocker, g√©rer et distribuer des images Docker en toute s√©curit√©. GHCR est int√©gr√© √† GitHub, ce qui facilite l'utilisation des conteneurs dans les workflows de d√©veloppement et de d√©ploiement.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pourquoi-utiliser-github-ghcr">Pourquoi utiliser GitHub GHCR?<a href="https://delpeuch.net/blog/2024/09/31/03-containerization/ghrc#pourquoi-utiliser-github-ghcr" class="hash-link" aria-label="Direct link to Pourquoi utiliser GitHub GHCR?" title="Direct link to Pourquoi utiliser GitHub GHCR?">‚Äã</a></h2>
<p>L'utilisation de GitHub GHCR pr√©sente plusieurs avantages :</p>
<ol>
<li>
<p><strong>S√©curit√©</strong> : GHCR offre des fonctionnalit√©s de s√©curit√© avanc√©es, telles que l'authentification et l'autorisation bas√©es sur les tokens d'acc√®s personnels (PAT). Les images peuvent √™tre priv√©es ou publiques, et les utilisateurs peuvent contr√¥ler l'acc√®s aux images en fonction de leurs besoins.</p>
</li>
<li>
<p><strong>Int√©gration avec GitHub</strong> : GHCR est √©troitement int√©gr√© √† GitHub, ce qui permet aux utilisateurs de g√©rer leurs images Docker directement depuis leurs d√©p√¥ts GitHub. Les workflows GitHub Actions peuvent √™tre utilis√©s pour automatiser la cr√©ation, le test et le d√©ploiement des images Docker.</p>
</li>
<li>
<p><strong>Gestion des versions</strong> : GHCR prend en charge la gestion des versions des images Docker, ce qui permet aux utilisateurs de suivre les modifications apport√©es aux images et de revenir √† des versions ant√©rieures si n√©cessaire.</p>
</li>
<li>
<p><strong>Suivi des √©v√©nements</strong> : GHCR permet de configurer des webhooks pour suivre les √©v√©nements li√©s aux images Docker, tels que la publication, la mise √† jour et la suppression. Cela permet aux utilisateurs de rester inform√©s des modifications apport√©es aux images et de r√©agir en cons√©quence.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-workflow-pour-utiliser-github-ghcr">Exemple de workflow pour utiliser GitHub GHCR<a href="https://delpeuch.net/blog/2024/09/31/03-containerization/ghrc#exemple-de-workflow-pour-utiliser-github-ghcr" class="hash-link" aria-label="Direct link to Exemple de workflow pour utiliser GitHub GHCR" title="Direct link to Exemple de workflow pour utiliser GitHub GHCR">‚Äã</a></h2>
<p>Le workflow suppose que vous avez un <code>Dockerfile</code> √† la racine du d√©p√¥t. Ce <code>Dockerfile</code> doit r√©ussir la commande de <code>build</code> avec succ√®s</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©ez-un-fichier-yaml-pour-le-workflow">Cr√©ez un fichier YAML pour le Workflow<a href="https://delpeuch.net/blog/2024/09/31/03-containerization/ghrc#cr%C3%A9ez-un-fichier-yaml-pour-le-workflow" class="hash-link" aria-label="Direct link to Cr√©ez un fichier YAML pour le Workflow" title="Direct link to Cr√©ez un fichier YAML pour le Workflow">‚Äã</a></h3>
<p>Cr√©ez un fichier YAML (par exemple, <code>docker-publish.yml</code>) dans le r√©pertoire <code>.github/workflows/</code> de votre d√©p√¥t avec le contenu suivant :</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Create and publish a Docker image</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">push</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">branches</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token string" style="color:hsl(95, 38%, 62%)">'release'</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">env</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">REGISTRY</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ghcr.io</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">IMAGE_NAME</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> github.repository </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">build-and-push-image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">permissions</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">contents</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> read</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">packages</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> write</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Checkout repository</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> actions/checkout@v4</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Log in to the Container registry</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> docker/login</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">action@65b78e6e13532edd9afa3aa52ac7964289d1a9c1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">registry</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> env.REGISTRY </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">username</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> github.actor </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">password</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Extract metadata (tags</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> labels) for Docker</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> meta</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> docker/metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">action@9ec57ed1fcdbf14dcef7dfbe97b2010124a938b7</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">images</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> env.REGISTRY </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">/$</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> env.IMAGE_NAME </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Build and push Docker image</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> docker/build</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">push</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">action@f2a1d5e99d037542a71f64918e516c093c6f3fc4</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">context</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> .</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">push</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">tags</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> steps.meta.outputs.tags </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">labels</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> steps.meta.outputs.labels </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configurez-les-options-du-workflow">Configurez les Options du Workflow<a href="https://delpeuch.net/blog/2024/09/31/03-containerization/ghrc#configurez-les-options-du-workflow" class="hash-link" aria-label="Direct link to Configurez les Options du Workflow" title="Direct link to Configurez les Options du Workflow">‚Äã</a></h3>
<p>Dans le fichier YAML, vous pouvez personnaliser les options suivantes selon vos besoins :</p>
<ul>
<li><code>branches</code>: Modifiez la branche d√©clenchant le workflow.</li>
<li><code>REGISTRY</code> et <code>IMAGE_NAME</code>: Modifiez-les si vous souhaitez utiliser un autre registre ou nom d'image.</li>
<li><code>permissions</code>: Ajustez les autorisations en fonction de vos besoins.</li>
</ul>
<p><strong>Enregistrez et Poussez vos Modifications</strong>
Enregistrez les modifications dans le fichier YAML et poussez-les vers la branche "release" de votre d√©p√¥t GitHub.</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">add</span><span class="token plain"> .github/workflows/docker-publish.yml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> commit </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-m</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"Ajout du workflow de publication Docker"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> push origin release</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="utilisation-dun-package-ghcr">Utilisation d‚Äôun package GHCR<a href="https://delpeuch.net/blog/2024/09/31/03-containerization/ghrc#utilisation-dun-package-ghcr" class="hash-link" aria-label="Direct link to Utilisation d‚Äôun package GHCR" title="Direct link to Utilisation d‚Äôun package GHCR">‚Äã</a></h3>
<p>Une fois d√©ploy√©, le package s‚Äôutilise comme n‚Äôimporte quel docker</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> pull ghcr.io/</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token environment constant" style="color:hsl(29, 54%, 61%)">USER</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">/</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">REPO-NAME</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">:master</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>üí° L‚Äôutilisation des Github GHCR entraine des consommations d‚Äôespace. Le CATIE a le droit √† 2Gb de stockage sur GHCR et 10Gb de transit par mois. Au del√† de ces limites, nous sommes factur√©s.
L‚Äôutilisation (sous n‚Äôimporte quelle forme) de GHCR sur des d√©p√¥ts <strong>publics</strong> est totalement gratuite Sur des d√©p√¥ts priv√©s : le pull via des actions est gratuit. Pour les actions <code>self-hosted</code> le pull est gratuit si l‚Äôaction est authentifi√©e par le <code>GITHUB_TOKEN</code> et non un PAT.</p>
<p>Voici un exemple d‚Äôutilisation sans co√ªt associ√©</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Run in container from GHCR</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain"> push </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">myJob</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">container</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ghcr.io/sedelpeuch/github</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">ghcr</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">test</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">master</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Checkout code</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Run a command</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> echo "Running inside the container"</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>L‚Äôimage <a href="http://ghcr.io/sedelpeuch/github-ghcr-test:master" target="_blank" rel="noopener noreferrer">ghcr.io/sedelpeuch/github-ghcr-test<!-- -->:master</a> est priv√©e, l‚Äôacc√®s est possible sans donner de PAT gr√¢ce √† l‚Äôauthentification par jeton automatique qui poss√®de la lecture des packages priv√©s <a href="https://docs.github.com/fr/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token" target="_blank" rel="noopener noreferrer">https://docs.github.com/fr/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token</a></p>]]></content>
        <category label="Containerization" term="Containerization"/>
        <category label="Registry" term="Registry"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Pratiques recommand√©es pour Docker]]></title>
        <id>https://delpeuch.net/blog/2024/08/30/03-containerization/docker-best-practices</id>
        <link href="https://delpeuch.net/blog/2024/08/30/03-containerization/docker-best-practices"/>
        <updated>2024-08-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[L'adoption de Docker augmente constamment et beaucoup le connaissent, mais tout le monde n'utilise pas Docker selon les meilleures pratiques.]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilisez-une-image-docker-officielle-et-v√©rifi√©e-comme-image-de-base-chaque-fois-disponible">Utilisez une image Docker officielle et v√©rifi√©e comme image de base, chaque fois disponible<a href="https://delpeuch.net/blog/2024/08/30/03-containerization/docker-best-practices#utilisez-une-image-docker-officielle-et-v%C3%A9rifi%C3%A9e-comme-image-de-base-chaque-fois-disponible" class="hash-link" aria-label="Direct link to Utilisez une image Docker officielle et v√©rifi√©e comme image de base, chaque fois disponible" title="Direct link to Utilisez une image Docker officielle et v√©rifi√©e comme image de base, chaque fois disponible">‚Äã</a></h2>
<p>Disons que vous d√©veloppez une application Node.js et que vous souhaitez la cr√©er et l'ex√©cuter en tant qu'image Docker.</p>
<p>Au lieu de prendre une image du syst√®me d'exploitation de base et d'installer Node.js, NPM et tous les autres outils dont vous avez besoin pour votre application, utilisez l'image de node officiel pour votre application.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilisez-des-versions-dimage-docker-sp√©cifiques">Utilisez des versions d'image docker sp√©cifiques<a href="https://delpeuch.net/blog/2024/08/30/03-containerization/docker-best-practices#utilisez-des-versions-dimage-docker-sp%C3%A9cifiques" class="hash-link" aria-label="Direct link to Utilisez des versions d'image docker sp√©cifiques" title="Direct link to Utilisez des versions d'image docker sp√©cifiques">‚Äã</a></h2>
<p>D'accord, nous avons donc s√©lectionn√© l'image de base, mais maintenant lorsque nous construisons notre image d'applications √† partir de ce Dockerfile, il utilisera toujours la derni√®re balise de l'image de n≈ìud.</p>
<p>Ainsi, au lieu d'une √©tiquette d'image al√©atoire, vous souhaitez fixer la version, et tout comme vous d√©ployez votre propre application avec une version sp√©cifique, vous souhaitez utiliser l'image officielle avec une version sp√©cifique.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utiliser-des-images-officielles-de-petite-taille">Utiliser des images officielles de petite taille<a href="https://delpeuch.net/blog/2024/08/30/03-containerization/docker-best-practices#utiliser-des-images-officielles-de-petite-taille" class="hash-link" aria-label="Direct link to Utiliser des images officielles de petite taille" title="Direct link to Utiliser des images officielles de petite taille">‚Äã</a></h2>
<p>Lors du choix d'une image Node.js, vous verrez qu'il y a en fait plusieurs images officielles. Non seulement avec diff√©rents num√©ros de version mais aussi avec diff√©rentes distributions de syst√®mes d'exploitation:</p>
<ol>
<li>
<p>Taille de l'image : si l'image est bas√©e sur une distribution de syst√®me d'exploitation √† part enti√®re comme Ubuntu ou Centos, vous aurez un tas d'outils d√©j√† emball√©s dans l'image. Ainsi, la taille de l'image sera plus grande, mais vous n'avez pas besoin de la plupart de ces outils dans vos images d'application.</p>
</li>
<li>
<p>Probl√®me de s√©curit√© : avec de nombreux outils install√©s √† l'int√©rieur, vous devez consid√©rer l'aspect de s√©curit√©. Parce que ces images de base contiennent g√©n√©ralement <a href="https://snyk.io/blog/openSourcesEcurity-2020Survey/" target="_blank" rel="noopener noreferrer">des centaines de vuln√©rabilit√©s connues</a> et cr√©ent essentiellement une plus grande surface d'attaque √† votre image d'application.</p>
</li>
</ol>
<p>Ainsi, la meilleure pratique ici serait de s√©lectionner une image avec une version sp√©cifique bas√©e sur une distribution plus maigre comme Alpine.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optimiser-la-mise-en-cache-pour-les-couches-dimage-lors-de-la-construction-dune-image">Optimiser la mise en cache pour les couches d'image lors de la construction d'une image<a href="https://delpeuch.net/blog/2024/08/30/03-containerization/docker-best-practices#optimiser-la-mise-en-cache-pour-les-couches-dimage-lors-de-la-construction-dune-image" class="hash-link" aria-label="Direct link to Optimiser la mise en cache pour les couches d'image lors de la construction d'une image" title="Direct link to Optimiser la mise en cache pour les couches d'image lors de la construction d'une image">‚Äã</a></h2>
<ol>
<li>Que sont les layer d'image? Une image Docker est construite sur la base d'un dockerfile.</li>
</ol>
<p>Et dans un dockerfile, chaque commande ou instruction cr√©e un layer d'image.</p>
<p>Ainsi, lorsque nous utilisons une image de base d'alpine, il a d√©j√† des layers, car il a d√©j√† √©t√© construit en utilisant son propre dockerfile. Dans notre dockerfile, nous avons quelques autres commandes qui ajouteront chacune un nouveau layer √† cette image.</p>
<p>Ainsi, lorsque vous reconstruisez votre image, si votre Dockerfile n'a pas chang√©, Docker n'utilisera que les layers en cache pour construire l'image.</p>
<p>Avantages des layers d'image en cache:</p>
<ul>
<li>Contruction d'image plus rapide</li>
<li>Push et pull plus rapides de nouvelles versions d'image: Si je pull une nouvelle version d'image de la m√™me application et, disons, 2 nouveaux layers ont √©t√© ajout√©es dans la nouvelle version: seule la nouvelle version des layers ajout√©es seront t√©l√©charg√©es Les autres sont d√©j√† mis en cache localement par Docker.</li>
</ul>
<p>Optimiser la mise en cache : une fois qu'un layer change, tous les layers suivants doivent √©galement √™tre recr√©√©es. En d'autres termes: lorsque vous modifiez le contenu d'une ligne dans le dockerfile, les caches de toutes les lignes ou layers suivantes seront invalid√©s.</p>
<p>Ainsi, la r√®gle ici et la meilleure pratique est: placez vos commandes dans le Dockerfile du moins au plus fr√©quemment modif√©.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="√†-laide-dun-fichier-dockerignore">√† l'aide d'un fichier .dockerignore<a href="https://delpeuch.net/blog/2024/08/30/03-containerization/docker-best-practices#%C3%A0-laide-dun-fichier-dockerignore" class="hash-link" aria-label="Direct link to √† l'aide d'un fichier .dockerignore" title="Direct link to √† l'aide d'un fichier .dockerignore">‚Äã</a></h2>
<p>C'est assez simple. Nous cr√©ons simplement ce fichier .dockerignore et r√©pertorions tous les fichiers et dossiers que nous voulons √™tre ignor√©s, et lors de la cr√©ation de l'image, Docker examinera le contenu et ignorera tout ce qui est sp√©cifi√© √† l'int√©rieur.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilisez-des-versions-multi-√©tages">Utilisez des versions multi-√©tages<a href="https://delpeuch.net/blog/2024/08/30/03-containerization/docker-best-practices#utilisez-des-versions-multi-%C3%A9tages" class="hash-link" aria-label="Direct link to Utilisez des versions multi-√©tages" title="Direct link to Utilisez des versions multi-√©tages">‚Äã</a></h2>
<p>Maintenant, disons qu'il existe un outil dans votre projet dont vous avez besoin pour construire l'image mais vous n'en avez pas besoin dans l'image finale pour ex√©cuter leapplication.</p>
<p>Supposons que vous conserviez ces artefacts dans votre image finale, m√™me s'ils sont absolument inutiles pour ex√©cuter l'application. Dans ce cas, cela entra√Ænera √† nouveau une augmentation de la taille de l'image et une augmentation de la surface d'attaque.</p>
<p>Pour cela, vous pouvez utiliser ce qu'on appelle les constructions √† plusieurs √©tages</p>
<p>La fonction de construction en plusieurs √©tapes vous permet d'utiliser plusieurs images temporaires pendant le processus de construction, mais ne conserve que la derni√®re image comme artefact final.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilisez-lutilisateur-le-moins-privil√©gi√©">Utilisez l'utilisateur le moins privil√©gi√©<a href="https://delpeuch.net/blog/2024/08/30/03-containerization/docker-best-practices#utilisez-lutilisateur-le-moins-privil%C3%A9gi%C3%A9" class="hash-link" aria-label="Direct link to Utilisez l'utilisateur le moins privil√©gi√©" title="Direct link to Utilisez l'utilisateur le moins privil√©gi√©">‚Äã</a></h2>
<p>Maintenant, lorsque nous cr√©ons cette image et que nous l'ex√©cutons finalement en tant que conteneur, quel utilisateur du syst√®me d'exploitation sera utilis√© pour d√©marrer l'application √† l'int√©rieur? Par d√©faut, lorsqu'un DockerFile ne sp√©cifie pas un utilisateur, il utilise un utilisateur root. Mais en r√©alit√©, il n'y a surtout aucune raison d'ex√©cuter des conteneurs avec des privil√®ges root.</p>
<p>Cela introduit essentiellement un probl√®me de s√©curit√© car lorsque le conteneur commence sur l'h√¥te, il aura potentiellement un acc√®s root sur l'h√¥te Docker.</p>
<p>Pour √©viter cela, la meilleure pratique consiste √† cr√©er simplement un utilisateur d√©di√© et un groupe d√©di√© dans l'image Docker pour ex√©cuter l'application et √©galement ex√©cuter l'application √† l'int√©rieur du conteneur avec cet utilisateur.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="scannez-vos-images-pour-les-vuln√©rabilit√©s-de-s√©curit√©">Scannez vos images pour les vuln√©rabilit√©s de s√©curit√©<a href="https://delpeuch.net/blog/2024/08/30/03-containerization/docker-best-practices#scannez-vos-images-pour-les-vuln%C3%A9rabilit%C3%A9s-de-s%C3%A9curit%C3%A9" class="hash-link" aria-label="Direct link to Scannez vos images pour les vuln√©rabilit√©s de s√©curit√©" title="Direct link to Scannez vos images pour les vuln√©rabilit√©s de s√©curit√©">‚Äã</a></h2>
<p>Enfin, comment s'assurer et valider que l'image que vous construisez a peu ou pas de vuln√©rabilit√©s de s√©curit√© ?</p>
<p>La meilleure pratique est, une fois que vous avez construit l'image, la scannez pour des vuln√©rabilit√©s de s√©curit√© √† l'aide de la commande docker scan.</p>
<p>En arri√®re-plan, Docker utilise en fait un service appel√© SNYK pour faire la num√©risation de la vuln√©rabilit√© des images. Le scan utilise une base de donn√©es de vuln√©rabilit√©s, qui est constamment mise √† jour.</p>]]></content>
        <category label="Containerization" term="Containerization"/>
        <category label="Docker" term="Docker"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[D√©bogage des conteneurs Docker]]></title>
        <id>https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers</id>
        <link href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers"/>
        <updated>2024-08-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Guide pour d√©boguer les conteneurs Docker en utilisant des commandes de base et des options avanc√©es.]]></summary>
        <content type="html"><![CDATA[<p>Le d√©bogage des conteneurs Docker est une comp√©tence essentielle pour tout d√©veloppeur ou administrateur syst√®me travaillant avec des environnements conteneuris√©s. Docker offre une vari√©t√© de commandes et d'options pour aider √† identifier et r√©soudre les probl√®mes qui peuvent survenir dans les conteneurs. Dans cet article, nous allons explorer certaines des commandes de base et des techniques avanc√©es pour d√©boguer les conteneurs Docker.</p>
<p>&lt; !--truncate--&gt;</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="commandes-de-base-pour-le-d√©bogage">Commandes de base pour le d√©bogage<a href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers#commandes-de-base-pour-le-d%C3%A9bogage" class="hash-link" aria-label="Direct link to Commandes de base pour le d√©bogage" title="Direct link to Commandes de base pour le d√©bogage">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-ps">docker ps<a href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers#docker-ps" class="hash-link" aria-label="Direct link to docker ps" title="Direct link to docker ps">‚Äã</a></h3>
<p>La commande <code>docker ps</code> est utilis√©e pour lister les conteneurs en cours d'ex√©cution. Vous pouvez utiliser l'option <code>-a</code> pour afficher tous les conteneurs, qu'ils soient en cours d'ex√©cution ou arr√™t√©s.</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">ps</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-a</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-logs">docker logs<a href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers#docker-logs" class="hash-link" aria-label="Direct link to docker logs" title="Direct link to docker logs">‚Äã</a></h3>
<p>La commande <code>docker logs</code> permet de visualiser les journaux d'un conteneur. Cela peut √™tre tr√®s utile pour identifier les erreurs ou les comportements inattendus.</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> logs </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">container_id</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Vous pouvez √©galement utiliser le nom du conteneur √† la place de l'ID.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-exec">docker exec<a href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers#docker-exec" class="hash-link" aria-label="Direct link to docker exec" title="Direct link to docker exec">‚Äã</a></h3>
<p>La commande <code>docker exec</code> permet d'ex√©cuter des commandes √† l'int√©rieur d'un conteneur en cours d'ex√©cution. Cela peut √™tre utile pour naviguer dans le syst√®me de fichiers du conteneur, v√©rifier les configurations ou ex√©cuter des scripts de diagnostic.</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> </span><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">exec</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-it</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">container_id</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> /bin/bash</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-inspect">docker inspect<a href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers#docker-inspect" class="hash-link" aria-label="Direct link to docker inspect" title="Direct link to docker inspect">‚Äã</a></h3>
<p>La commande <code>docker inspect</code> fournit des informations d√©taill√©es sur un conteneur ou une image Docker. Cela inclut des d√©tails sur la configuration, les r√©seaux, les volumes et plus encore.</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> inspect </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">container_id</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="techniques-avanc√©es-de-d√©bogage">Techniques avanc√©es de d√©bogage<a href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers#techniques-avanc%C3%A9es-de-d%C3%A9bogage" class="hash-link" aria-label="Direct link to Techniques avanc√©es de d√©bogage" title="Direct link to Techniques avanc√©es de d√©bogage">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="utilisation-de-docker-run-avec-des-options">Utilisation de docker run avec des options<a href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers#utilisation-de-docker-run-avec-des-options" class="hash-link" aria-label="Direct link to Utilisation de docker run avec des options" title="Direct link to Utilisation de docker run avec des options">‚Äã</a></h3>
<p>La commande <code>docker run</code> peut √™tre utilis√©e avec diverses options pour faciliter le d√©bogage. Par exemple, l'option <code>-d</code> permet de d√©marrer un conteneur en mode d√©tach√©, tandis que l'option <code>-p</code> permet de mapper les ports entre l'h√¥te et le conteneur.</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-p</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">8080</span><span class="token plain">:80 </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">image_name</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="red√©marrage-des-conteneurs">Red√©marrage des conteneurs<a href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers#red%C3%A9marrage-des-conteneurs" class="hash-link" aria-label="Direct link to Red√©marrage des conteneurs" title="Direct link to Red√©marrage des conteneurs">‚Äã</a></h3>
<p>Les commandes <code>docker start</code> et <code>docker stop</code> permettent de red√©marrer les conteneurs. Cela peut √™tre utile si vous avez apport√© des modifications √† la configuration du conteneur et que vous souhaitez les appliquer.</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> stop </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">container_id</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> start </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">container_id</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nommage-des-conteneurs">Nommage des conteneurs<a href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers#nommage-des-conteneurs" class="hash-link" aria-label="Direct link to Nommage des conteneurs" title="Direct link to Nommage des conteneurs">‚Äã</a></h3>
<p>Lorsque vous cr√©ez un conteneur, vous pouvez lui attribuer un nom pour faciliter son identification. Cela peut √™tre fait en utilisant l'option <code>--name</code> avec la commande <code>docker run</code>.</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--name</span><span class="token plain"> my_container </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">image_name</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://delpeuch.net/blog/2024/08/15/03-containerization/debugging-docker-containers#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2>
<p>Le d√©bogage des conteneurs Docker peut sembler complexe au d√©but, mais en utilisant les commandes et techniques appropri√©es, vous pouvez rapidement identifier et r√©soudre les probl√®mes. Les commandes de base comme <code>docker ps</code>, <code>docker logs</code>, <code>docker exec</code> et <code>docker inspect</code> sont essentielles pour tout d√©veloppeur ou administrateur syst√®me travaillant avec Docker. En combinant ces commandes avec des techniques avanc√©es comme l'utilisation de <code>docker run</code> avec des options et le red√©marrage des conteneurs, vous pouvez am√©liorer consid√©rablement votre efficacit√© dans le d√©bogage des conteneurs Docker.</p>]]></content>
        <category label="Docker" term="Docker"/>
        <category label="Debugging" term="Debugging"/>
        <category label="Containers" term="Containers"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Les containers Docker]]></title>
        <id>https://delpeuch.net/blog/2024/07/30/03-containerization/docker-containers</id>
        <link href="https://delpeuch.net/blog/2024/07/30/03-containerization/docker-containers"/>
        <updated>2024-07-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Pr√©sentation des conteneurs Docker, leur fonctionnement et des exemples d'utilisation.]]></summary>
        <content type="html"><![CDATA[<p>Les conteneurs Docker sont des unit√©s logicielles l√©g√®res et portables qui encapsulent une application et ses d√©pendances dans une image. Ces images sont compos√©es de plusieurs couches, souvent bas√©es sur une distribution Linux l√©g√®re comme Alpine, pour minimiser la taille. Les conteneurs permettent de maintenir des applications isol√©es et coh√©rentes, ind√©pendamment de l'environnement d'ex√©cution.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quest-ce-quun-conteneur-docker-">Qu'est-ce qu'un conteneur Docker ?<a href="https://delpeuch.net/blog/2024/07/30/03-containerization/docker-containers#quest-ce-quun-conteneur-docker-" class="hash-link" aria-label="Direct link to Qu'est-ce qu'un conteneur Docker ?" title="Direct link to Qu'est-ce qu'un conteneur Docker ?">‚Äã</a></h2>
<p>Un conteneur Docker est une unit√© logicielle l√©g√®re et portable qui encapsule une application et ses d√©pendances dans une image. Ces images sont compos√©es de plusieurs couches, souvent bas√©es sur une distribution Linux l√©g√®re comme Alpine, pour minimiser la taille. Les conteneurs permettent de maintenir des applications isol√©es et coh√©rentes, ind√©pendamment de l'environnement d'ex√©cution.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="structure-dun-conteneur-docker">Structure d'un conteneur Docker<a href="https://delpeuch.net/blog/2024/07/30/03-containerization/docker-containers#structure-dun-conteneur-docker" class="hash-link" aria-label="Direct link to Structure d'un conteneur Docker" title="Direct link to Structure d'un conteneur Docker">‚Äã</a></h3>
<p>Un conteneur Docker est compos√© de plusieurs couches d'images empil√©es les unes sur les autres. √Ä la base de la plupart des conteneurs, on trouve une image Linux, souvent Alpine en raison de sa petite taille. Les couches sup√©rieures contiennent les d√©pendances et l'application elle-m√™me. Cette structure en couches permet de r√©utiliser les couches communes entre plusieurs conteneurs, r√©duisant ainsi la taille et le temps de t√©l√©chargement.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="diff√©rence-entre-une-image-docker-et-un-conteneur-docker">Diff√©rence entre une image Docker et un conteneur Docker<a href="https://delpeuch.net/blog/2024/07/30/03-containerization/docker-containers#diff%C3%A9rence-entre-une-image-docker-et-un-conteneur-docker" class="hash-link" aria-label="Direct link to Diff√©rence entre une image Docker et un conteneur Docker" title="Direct link to Diff√©rence entre une image Docker et un conteneur Docker">‚Äã</a></h3>
<p>Une image Docker est un package statique qui contient tout ce dont une application a besoin pour fonctionner : le code, les biblioth√®ques, les d√©pendances et les configurations. C'est un mod√®le pr√™t √† √™tre ex√©cut√©. En revanche, un conteneur Docker est une instance en cours d'ex√©cution de cette image. Lorsque vous d√©marrez un conteneur, Docker utilise l'image pour cr√©er un environnement isol√© o√π l'application peut s'ex√©cuter. En d'autres termes, une image est un mod√®le, tandis qu'un conteneur est une instance active de ce mod√®le.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="commandes-docker-de-base">Commandes Docker de base<a href="https://delpeuch.net/blog/2024/07/30/03-containerization/docker-containers#commandes-docker-de-base" class="hash-link" aria-label="Direct link to Commandes Docker de base" title="Direct link to Commandes Docker de base">‚Äã</a></h2>
<p>Voici quelques commandes Docker de base pour g√©rer les conteneurs :</p>
<ul>
<li><code>docker run</code> : Cette commande permet de cr√©er et de d√©marrer un conteneur √† partir d'une image Docker. Par exemple, <code>docker run redis</code> d√©marre un conteneur Redis.</li>
<li><code>docker ps</code> : Cette commande affiche la liste des conteneurs en cours d'ex√©cution. Par exemple, <code>docker ps</code> montre tous les conteneurs actifs.</li>
<li><code>docker stop</code> : Cette commande arr√™te un conteneur en cours d'ex√©cution. Par exemple, <code>docker stop &lt;container_id&gt;</code> arr√™te le conteneur sp√©cifi√©.</li>
<li><code>docker start</code> : Cette commande red√©marre un conteneur arr√™t√©. Par exemple, <code>docker start &lt;container_id&gt;</code> red√©marre le conteneur sp√©cifi√©.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-pratique--utilisation-de-postgresql-avec-docker">Exemple pratique : Utilisation de PostgreSQL avec Docker<a href="https://delpeuch.net/blog/2024/07/30/03-containerization/docker-containers#exemple-pratique--utilisation-de-postgresql-avec-docker" class="hash-link" aria-label="Direct link to Exemple pratique : Utilisation de PostgreSQL avec Docker" title="Direct link to Exemple pratique : Utilisation de PostgreSQL avec Docker">‚Äã</a></h2>
<p>Pour illustrer l'utilisation des conteneurs Docker, prenons l'exemple de PostgreSQL. En utilisant Docker Hub, un d√©p√¥t public d'images Docker, on peut rechercher et t√©l√©charger une version sp√©cifique de PostgreSQL. Par exemple, pour obtenir la version 9.6, il suffit d'ex√©cuter la commande <code>docker pull</code> suivie de <code>docker run</code> pour d√©marrer le conteneur. Docker t√©l√©charge les couches n√©cessaires et d√©marre l'application automatiquement.</p>
<div class="language-bash codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-bash codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token comment" style="color:hsl(220, 10%, 40%)"># Rechercher l'image officielle de PostgreSQL sur Docker Hub</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> search postgres</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)"># T√©l√©charger l'image de PostgreSQL version 9.6</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> pull postgres:9.6</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)"># D√©marrer un conteneur PostgreSQL avec la version 9.6</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--name</span><span class="token plain"> my-postgres </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">POSTGRES_PASSWORD</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">mysecretpassword </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-d</span><span class="token plain"> postgres:9.6</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <category label="Docker" term="Docker"/>
        <category label="Containerization" term="Containerization"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Le concept containerisation (Docker)]]></title>
        <id>https://delpeuch.net/blog/2024/07/15/03-containerization/docker</id>
        <link href="https://delpeuch.net/blog/2024/07/15/03-containerization/docker"/>
        <updated>2024-07-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Docker est un outil open source qui permet aux d√©veloppeurs de cr√©er, d√©ployer, ex√©cuter, mettre √† jour et g√©rer les conteneurs.]]></summary>
        <content type="html"><![CDATA[<p>Docker est de plus en plus populaire car il r√©sout des probl√®mes courants dans le d√©veloppement logiciel, en particulier ceux li√©s √† la configuration de l'environnement et √† la compatibilit√©. Les applications modernes utilisent souvent une combinaison de diff√©rentes technologies, chacune avec des d√©pendances de version sp√©cifiques. Ces applications doivent fonctionner de mani√®re coh√©rente dans divers environnements (d√©veloppement, test, production), qui peuvent diff√©rer en termes de syst√®me d'exploitation, de version et de mat√©riel. Sans Docker, chaque environnement doit √™tre configur√© avec les versions correctes des services, ce qui entra√Æne des probl√®mes de compatibilit√© et des configurations complexes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quest-ce-quun-conteneur-et-quels-probl√®mes-r√©sout-il">Qu'est-ce qu'un conteneur et quels probl√®mes r√©sout-il?<a href="https://delpeuch.net/blog/2024/07/15/03-containerization/docker#quest-ce-quun-conteneur-et-quels-probl%C3%A8mes-r%C3%A9sout-il" class="hash-link" aria-label="Direct link to Qu'est-ce qu'un conteneur et quels probl√®mes r√©sout-il?" title="Direct link to Qu'est-ce qu'un conteneur et quels probl√®mes r√©sout-il?">‚Äã</a></h2>
<p>Un conteneur est un <strong>moyen de packager des applications</strong> avec tout ce dont ils ont besoin √† l'int√©rieur de ce package, y compris toutes ses d√©pendances et toutes les configurations n√©cessaires.</p>
<p>Le package est portable comme tout autre artefact, et ce package peut √™tre facilement partag√© et d√©plac√© entre une √©quipe de d√©veloppement ou une √©quipe de d√©veloppement et d'op√©rations.</p>
<p>La portabilit√© des conteneurs, ainsi que tout ce qui est packag√© dans un <strong>environnement isol√©</strong>, lui donne des avantages qui rendent le processus de d√©veloppement et de d√©ploiement plus efficace.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="probl√®mes-r√©solus-par-docker">Probl√®mes r√©solus par Docker<a href="https://delpeuch.net/blog/2024/07/15/03-containerization/docker#probl%C3%A8mes-r%C3%A9solus-par-docker" class="hash-link" aria-label="Direct link to Probl√®mes r√©solus par Docker" title="Direct link to Probl√®mes r√©solus par Docker">‚Äã</a></h3>
<p>Docker est de plus en plus populaire car il r√©sout des probl√®mes courants dans le d√©veloppement logiciel, en particulier ceux li√©s √† la configuration de l'environnement et √† la compatibilit√©. Les applications modernes utilisent souvent une combinaison de diff√©rentes technologies, chacune avec des d√©pendances de version sp√©cifiques. Ces applications doivent fonctionner de mani√®re coh√©rente dans divers environnements (d√©veloppement, test, production), qui peuvent diff√©rer en termes de syst√®me d'exploitation, de version et de mat√©riel. Sans Docker, chaque environnement doit √™tre configur√© avec les versions correctes des services, ce qui entra√Æne des probl√®mes de compatibilit√© et des configurations complexes.</p>
<p>Les principaux probl√®mes que Docker r√©sout incluent :</p>
<ol>
<li>La compatibilit√© des services avec le syst√®me d'exploitation sous-jacent et ses biblioth√®ques.</li>
<li>La gestion des diff√©rentes versions des services et de leurs d√©pendances.</li>
<li>La simplification du processus de configuration pour les nouveaux d√©veloppeurs.</li>
</ol>
<p>La solution de Docker consiste √† regrouper chaque service avec ses d√©pendances syst√®me requises dans des conteneurs isol√©s. Cela permet de changer des composants sans affecter les autres services et de modifier le syst√®me d'exploitation sous-jacent sans impacter les services. Docker garantit que les applications fonctionnent de mani√®re coh√©rente dans diff√©rents environnements, √©vitant ainsi le probl√®me du "√ßa fonctionne sur ma machine".</p>
<p>De plus, Docker fournit des images pr√™tes √† l'emploi pour divers environnements dans son d√©p√¥t officiel, ce qui facilite la configuration et l'ex√©cution des services localement pour les d√©veloppeurs. Par exemple, les d√©veloppeurs peuvent r√©cup√©rer une version sp√©cifique d'une image de base de donn√©es Postgres et l'ex√©cuter avec une seule commande. Cette flexibilit√© s'√©tend √† l'ex√©cution de plusieurs versions du m√™me service pour diff√©rentes applications.</p>
<p>En r√©sum√©, Docker simplifie la configuration des environnements, assure la compatibilit√© et offre une flexibilit√© dans la gestion des services et de leurs d√©pendances.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="d√©veloppement-dapplications-avant--apr√®s-conteneur">D√©veloppement d'applications avant / apr√®s conteneur<a href="https://delpeuch.net/blog/2024/07/15/03-containerization/docker#d%C3%A9veloppement-dapplications-avant--apr%C3%A8s-conteneur" class="hash-link" aria-label="Direct link to D√©veloppement d'applications avant / apr√®s conteneur" title="Direct link to D√©veloppement d'applications avant / apr√®s conteneur">‚Äã</a></h2>
<p>Voyons maintenant comment les conteneurs am√©liorent le processus de d√©veloppement par des exemples sp√©cifiques.</p>
<p>Comment avons-nous d√©velopp√© des applications avant les conteneurs?</p>
<p>Habituellement, lorsque vous avez une √©quipe de d√©veloppeurs travaillant sur une application, vous devez installer directement la plupart des services sur votre syst√®me d'exploitation.</p>
<p>Chaque d√©veloppeur de l'√©quipe devrait alors aller installer les binaires de ces services, les configurer et les ex√©cuter sur son environnement de d√©veloppement local. Le processus d'installation sera diff√©rent en fonction du syst√®me d'exploitation qu'ils utilisent.</p>
<p>Vous avez donc quelques commandes √† ex√©cuter, et les <strong>chances qu'une erreur se produise sont √©lev√©es</strong>, en raison du nombre d'√©tapes n√©cessaires pour installer chaque service.</p>
<p>Maintenant, voyons comment les conteneurs r√©solvent certains de ces probl√®mes.</p>
<p>Vous n'avez pas √† installer des services directement sur votre syst√®me d'exploitation, car le conteneur poss√®de <strong>sa propre couche de syst√®me d'exploitation isol√©e</strong> avec une image de base Linux.</p>
<p>Vous avez tout packag√© dans un environnement isol√©, en tant que d√©veloppeur, vous n'avez pas chercher les binaires √† t√©l√©charger sur votre machine. Au lieu de cela, vous allez consulter le registre de conteneurs pour trouver le conteneur sp√©cifique √† votre application et le t√©l√©charger sur votre machine locale.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="d√©ploiement-dapplication-avant--apr√®s-conteneur">D√©ploiement d'application avant / apr√®s conteneur<a href="https://delpeuch.net/blog/2024/07/15/03-containerization/docker#d%C3%A9ploiement-dapplication-avant--apr%C3%A8s-conteneur" class="hash-link" aria-label="Direct link to D√©ploiement d'application avant / apr√®s conteneur" title="Direct link to D√©ploiement d'application avant / apr√®s conteneur">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="avant-les-conteneurs">Avant les conteneurs<a href="https://delpeuch.net/blog/2024/07/15/03-containerization/docker#avant-les-conteneurs" class="hash-link" aria-label="Direct link to Avant les conteneurs" title="Direct link to Avant les conteneurs">‚Äã</a></h3>
<p>Un processus de d√©ploiement traditionnel ressemblera √† ceci:</p>
<p>L'√©quipe de d√©veloppeur cr√©era des artefacts, qui sont essentiellement des fichiers, ainsi que des instructions sur l'installation et les configurer sur le serveur. Tous ces artefacts et instructions seront fournis par l'√©quipe de d√©veloppement:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="https://delpeuch.net/assets/images/image-9b95c6cd8afa79d41610a7ff6b76f5f9.png" width="350" height="348" class="img_ev3q"></p>
<p>L'√©quipe de d√©veloppement donnerait donc ces artefacts √† l'√©quipe des op√©rations, et l'√©quipe d'op√©ration mettrait en place les environnements pour d√©ployer ces applications:</p>
<p><img decoding="async" loading="lazy" alt="Texte alt" src="https://delpeuch.net/assets/images/image-1-fb8f11dc59bdcd139f7ea8afda840665.png" width="350" height="166" class="img_ev3q"></p>
<ul>
<li><strong>D√©pendances externes sur le syst√®me d'exploitation du serveur</strong>: Le probl√®me avec cette approche est que vous devez d'abord configurer tout et tout installer directement sur le syst√®me d'exploitation du serveur. Cela pourrait entra√Æner des conflits avec les versions de d√©pendance.</li>
<li><strong>Mauvaise communication</strong>: un autre probl√®me qui pourrait r√©sulter de ce processus est un malentendu entre l'√©quipe de d√©veloppement et les op√©rations. Parce que tout est dans un guide textuel, il pourrait y avoir des cas, o√π les d√©veloppeurs manquent de mentionner certains points critiques sur la configuration et en cas d'√©chec, l'√©quipe d'op√©rations doit retourner aux d√©veloppeurs et demander plus de d√©tails.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="avec-les-conteneurs">Avec les Conteneurs<a href="https://delpeuch.net/blog/2024/07/15/03-containerization/docker#avec-les-conteneurs" class="hash-link" aria-label="Direct link to Avec les Conteneurs" title="Direct link to Avec les Conteneurs">‚Äã</a></h3>
<p>Avec les conteneurs, ce processus est simplifi√©, car maintenant les d√©veloppeurs et les op√©rations fonctionnent dans une √©quipe pour former toutes les d√©pendances de configuration dans l'application.</p>
<p><img decoding="async" loading="lazy" alt="Texte alt" src="https://delpeuch.net/assets/images/image-2-5c8a4648962758e750606cd1ae476ebd.png" width="529" height="256" class="img_ev3q"></p>
<p>Cela signifie que si vous utilisez un conteneur Docker, vous n'avez pas besoin de configurer quoi que ce soit directement sur le serveur, car tout est d√©j√† encapsul√© dans le conteneur. Au lieu de cela, il vous suffit d'ex√©cuter une commande docker qui r√©cup√®re le conteneur que vous avez stock√© dans le registre, puis l'ex√©cute.</p>
<p>C'est donc beaucoup plus simple et aucune configuration environnementale n'est n√©cessaire sur le serveur. La seule chose bien s√ªr est que vous devez installer et configurer le runtime docker sur le serveur avant de pouvoir y ex√©cuter des conteneurs. Mais ce n'est qu'un effort unique.</p>]]></content>
        <category label="Containerization" term="Containerization"/>
        <category label="Docker" term="Docker"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Architecture compl√®te]]></title>
        <id>https://delpeuch.net/blog/2024/06/11/04-ci-cd/exemple</id>
        <link href="https://delpeuch.net/blog/2024/06/11/04-ci-cd/exemple"/>
        <updated>2024-06-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Exemple complet d'architecture CI/CD r√©utilisable]]></summary>
        <content type="html"><![CDATA[<p>L'objectif est de cr√©er une architecture CI/CD compl√®te pour un projet de d√©veloppement adressant une technologie (par exemple ROS). Cette architecture doit √™tre :</p>
<ul>
<li>facilement r√©utilisable dans d'autres projets</li>
<li>√©viter la duplication de code</li>
<li>maintenable et √©volutive ais√©ment</li>
<li>applicable √† d'autres projets</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©ation-dune-architecture-cicd">Cr√©ation d'une architecture CI/CD<a href="https://delpeuch.net/blog/2024/06/11/04-ci-cd/exemple#cr%C3%A9ation-dune-architecture-cicd" class="hash-link" aria-label="Direct link to Cr√©ation d'une architecture CI/CD" title="Direct link to Cr√©ation d'une architecture CI/CD">‚Äã</a></h2>
<p>L'id√©e de l'architecture est de cr√©er un d√©p√¥t contenant tous les workflows et les actions propres √† une technologie / projet (par exemple ROS). Ce d√©p√¥t sera ensuite utilis√© comme cible pour les workflows des projets utilisant cette technologie.</p>
<!-- -->
<p>Dans cet exemple, nous avons un d√©p√¥t <code>ros_workflows</code> contenant les workflows et les actions propres √† la technologie ROS. Ce d√©p√¥t est ensuite utilis√© par les d√©p√¥ts <code>ros_package_1</code>, <code>ros_package_2</code>, <code>ros_package_n</code> pour ex√©cuter les workflows. Les diff√©rents workflows pr√©sents dans <code>ros_workflows</code> sont les <strong>uniques</strong> points d'entr√©e pour les workflows des d√©p√¥ts <code>ros_package_1</code>, <code>ros_package_2</code>, <code>ros_package_n</code>. Ainsi s'il est n√©cessaire de modifier un workflow, il suffit de le faire dans le d√©p√¥t <code>ros_workflows</code> et tous les d√©p√¥ts utilisant ce workflow seront mis √† jour.</p>
<p>De plus le d√©p√¥t <code>ros_workflows</code> peut d√©finir des <code>actions-composites</code> pour √©viter la duplication de code entre leurs propres workflows. Ces actions sont utilis√©es par les workflows du d√©p√¥t <code>ros_workflows</code> et par cons√©quent des d√©p√¥ts <code>ros_package_1</code>, <code>ros_package_2</code>, <code>ros_package_n</code>. Elles peuvent aussi √™tre appel√©es directement au besoin.</p>
<p>Finalemet, le d√©p√¥t <code>ros_workflows</code> peut aussi utiliser des workflows g√©n√©riques (par exemple <code>pre-commit.yml</code>) pour automatiser des t√¢ches communes √† toutes les technologies.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-workflow-ros1yml">Exemple de workflow <code>ros1.yml</code><a href="https://delpeuch.net/blog/2024/06/11/04-ci-cd/exemple#exemple-de-workflow-ros1yml" class="hash-link" aria-label="Direct link to exemple-de-workflow-ros1yml" title="Direct link to exemple-de-workflow-ros1yml">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Build &amp; Test ROS Packages</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">workflow_call</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">inputs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">package-name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'The name of the ROS package to build and test.'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">secrets</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">PAT</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'A GitHub Personal Access Token (PAT) used to import the private repository into the container.'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">pre-commit</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> catie</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">aq/generic_workflows/.github/workflows/pre</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">commit.yaml@main</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">build_and_test_ros_package</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> self</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">hosted </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># Use self-hosted runner</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">strategy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># Define a matrix of ROS distributions and Docker images</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">matrix</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">include</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">docker_image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> osrf/ros</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">noetic</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">desktop</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">full</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ros_distribution</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> noetic</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">container</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># Use the Docker image defined in the matrix</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> matrix.docker_image </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Setup ROS environment</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ros</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">tooling/setup</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">ros@v0.7</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required-ros-distributions</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> matrix.ros_distribution </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Build and test ROS</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ros</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">tooling/action</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">ros</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">ci@v0.2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">package-name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> inputs.package</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">name </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">target-ros1-distro</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> matrix.ros_distribution </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">import-token</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> secrets.PAT </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-workflow-ciyml">Exemple de workflow <code>ci.yml</code><a href="https://delpeuch.net/blog/2024/06/11/04-ci-cd/exemple#exemple-de-workflow-ciyml" class="hash-link" aria-label="Direct link to exemple-de-workflow-ciyml" title="Direct link to exemple-de-workflow-ciyml">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"ROS CI/CD"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">push</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ros</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">user</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">/ros_workflows/.github/workflows/ros.yml@main</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-daction-composite-ros_buildactionyml">Exemple d'action composite <code>ros_build/action.yml</code><a href="https://delpeuch.net/blog/2024/06/11/04-ci-cd/exemple#exemple-daction-composite-ros_buildactionyml" class="hash-link" aria-label="Direct link to exemple-daction-composite-ros_buildactionyml" title="Direct link to exemple-daction-composite-ros_buildactionyml">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'Build and Test ROS'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'Build and test a ROS package'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">inputs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">package-name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'The name of the ROS package to build and test.'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ros-distribution</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'The ROS distribution to use for building and testing.'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">import-token</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'A GitHub Personal Access Token (PAT) used to import the private repository into the container.'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">using</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"composite"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> echo "Building and testing ROS package $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> inputs.package</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">name </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> for ROS $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> inputs.ros</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">distribution </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">."</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">shell</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> bash</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Action Runner Controller GitHub]]></title>
        <id>https://delpeuch.net/blog/2024/05/10/04-ci-cd/github-arc</id>
        <link href="https://delpeuch.net/blog/2024/05/10/04-ci-cd/github-arc"/>
        <updated>2024-05-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Explication de l'installation et de l'utilisation de l'Action Runner Controller GitHub]]></summary>
        <content type="html"><![CDATA[<p>Actions Runner Controller (ARC) est un op√©rateur de Kubernetes qui orchestre et g√®re les runners auto-h√©berg√©s pour les actions GitHub.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-arc">GitHub ARC<a href="https://delpeuch.net/blog/2024/05/10/04-ci-cd/github-arc#github-arc" class="hash-link" aria-label="Direct link to GitHub ARC" title="Direct link to GitHub ARC">‚Äã</a></h2>
<p>Les runners auto-h√©berg√©s offrent un contr√¥le total sur l'environnement d'ex√©cution, permettant de personnaliser les configurations et d'optimiser les performances selon les besoins sp√©cifiques. Ils sont √©galement plus rentables √† long terme, car ils n'entra√Ænent pas de co√ªts suppl√©mentaires li√©s √† l'utilisation des ressources de GitHub. Cependant, ils n√©cessitent une maintenance r√©guli√®re et une gestion de la s√©curit√© pour garantir leur bon fonctionnement et leur protection contre les menaces potentielles. En revanche, GitHub Actions Runner Controller (ARC) est une solution √©volutive g√©r√©e par GitHub, qui permet de g√©rer automatiquement les runners dans un environnement Kubernetes. ARC offre une gestion simplifi√©e et une mise √† l'√©chelle automatique des runners en fonction des besoins, ce qui est id√©al pour les grandes organisations avec des charges de travail variables. Cependant, l'utilisation de GitHub ARC peut entra√Æner des co√ªts plus √©lev√©s pour les d√©ploiements √† grande √©chelle, et les utilisateurs ont moins de contr√¥le sur l'environnement d'ex√©cution par rapport aux runners auto-h√©berg√©s.</p>
<p>Avec ARC, il est possible de cr√©er des ensembles de runners qui √©voluent automatiquement en fonction du nombre de workflows ex√©cut√©s dans votre d√©p√¥t, organisation ou entreprise.</p>
<p>Le diagramme suivant illustre l'architecture du mode Scaleset Runner Autoscaling d'Arc.</p>
<p><a href="https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/quickstart-for-actions-runner-controller" target="_blank" rel="noopener noreferrer">Documentation compl√®te</a></p>
<p><img decoding="async" loading="lazy" alt="alt text" src="https://delpeuch.net/assets/images/arc-f0e0447cc92a8d4f3224674d4da3736d.png" width="1440" height="729" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Sur GitHub les ARC sont identifi√©s par leur nom d'installation. Il est important de choisir un nom unique pour chaque installation. De plus pour simplifier l'√©criture des workflows il est consill√© de g√©rer les runners par des groupes de runners. La cl√© <code>runs-on</code> des jobs des workflows doit √™tre √©gale √† un groupe de runners.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pr√©requis">Pr√©requis<a href="https://delpeuch.net/blog/2024/05/10/04-ci-cd/github-arc#pr%C3%A9requis" class="hash-link" aria-label="Direct link to Pr√©requis" title="Direct link to Pr√©requis">‚Äã</a></h2>
<p>Pour utiliser l'ARC, il est n√©cessaire de disposer des √©l√©ments suivants :</p>
<ul>
<li>Un cluster Kubernetes</li>
<li>Helm 3.0 ou version ult√©rieure</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-rapide">Installation rapide<a href="https://delpeuch.net/blog/2024/05/10/04-ci-cd/github-arc#installation-rapide" class="hash-link" aria-label="Direct link to Installation rapide" title="Direct link to Installation rapide">‚Äã</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>La suite du guide permet de rapidement installer ARC. Les diff√©rents concepts et la configuration avanc√©e ne sont pas abord√©s. Pour une installation plus compl√®te, regarder la <a href="https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/quickstart-for-actions-runner-controller" target="_blank" rel="noopener noreferrer">documentation officielle</a>.</p></div></div>
<ul>
<li>Le pod de contr√¥le est en charge de la gestion des pods de runner. Il s'occupe de la cr√©ation, de la mise √† l'√©chelle et de la suppression des pods de runner.</li>
<li>Le pod de runner est d√©di√© √† l'ex√©cution des workflows GitHub Actions. Il se compose de deux conteneurs : un conteneur DinD et un conteneur runner. Le conteneur DinD fournit un environnement d'ex√©cution Docker pour le conteneur runner. Le conteneur runner est utilis√© pour ex√©cuter les workflows GitHub Actions.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="https://delpeuch.net/blog/2024/05/10/04-ci-cd/github-arc#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">‚Äã</a></h2>
<p>Pour lancer le pod de contr√¥le :</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">NAMESPACE</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token string" style="color:hsl(95, 38%, 62%)">"arc-systems"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">helm </span><span class="token function" style="color:hsl(207, 82%, 66%)">install</span><span class="token plain"> arc </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--namespace</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"</span><span class="token string variable" style="color:hsl(207, 82%, 66%)">${NAMESPACE}</span><span class="token string" style="color:hsl(95, 38%, 62%)">"</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    --create-namespace </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    oci://ghcr.io/actions/actions-runner-controller-charts/gha-runner-scale-set-controller</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Pour lancer le pod de runner :</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">INSTALLATION_NAME</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token string" style="color:hsl(95, 38%, 62%)">"elegantencoder"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">NAMESPACE</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token string" style="color:hsl(95, 38%, 62%)">"arc-runners"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">helm </span><span class="token function" style="color:hsl(207, 82%, 66%)">install</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"</span><span class="token string variable" style="color:hsl(207, 82%, 66%)">${INSTALLATION_NAME}</span><span class="token string" style="color:hsl(95, 38%, 62%)">"</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--namespace</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"</span><span class="token string variable" style="color:hsl(207, 82%, 66%)">${NAMESPACE}</span><span class="token string" style="color:hsl(95, 38%, 62%)">"</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    --create-namespace </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-f</span><span class="token plain"> value.yaml </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    oci://ghcr.io/actions/actions-runner-controller-charts/gha-runner-scale-set</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authentification">Authentification<a href="https://delpeuch.net/blog/2024/05/10/04-ci-cd/github-arc#authentification" class="hash-link" aria-label="Direct link to Authentification" title="Direct link to Authentification">‚Äã</a></h2>
<p>Pour que le pod de contr√¥le puisse cr√©er des pods de runner, il faut lui donner les droits n√©cessaires. Pour cela, il faut cr√©er un secret contenant un token d'authentification. Les diff√©rents √©l√©ments proviennent de l'enregistrement d'une application GitHub au niveau de l'organisation concern√©e.</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl create secret generic pre-defined-secret </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">   </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--namespace</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">arc-runners </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">   --from-literal</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">github_app_id</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">xxx </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">   --from-literal</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">github_app_installation_id</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">xxx </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">   --from-literal</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">github_app_private_key</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token string" style="color:hsl(95, 38%, 62%)">'xxx'</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring">Monitoring<a href="https://delpeuch.net/blog/2024/05/10/04-ci-cd/github-arc#monitoring" class="hash-link" aria-label="Direct link to Monitoring" title="Direct link to Monitoring">‚Äã</a></h2>
<p>Dashboard Helm</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">helm dashboard </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--bind</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0.0</span><span class="token plain">.0.0</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Portainer</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-cache">Docker cache<a href="https://delpeuch.net/blog/2024/05/10/04-ci-cd/github-arc#docker-cache" class="hash-link" aria-label="Direct link to Docker cache" title="Direct link to Docker cache">‚Äã</a></h2>
<p>Nous avons rencontr√© un probl√®me de lenteur lors de la construction des images Docker. Pour y rem√©dier, nous avons mis en place la mutualisation des couches des images Docker entre les diff√©rents pods et l'h√¥te. Cela implique la cr√©ation d'un volume partag√© entre les diff√©rents pods et l'h√¥te. Ces volumes sont mont√©s dans le conteneur DinD du pod qui les utilise pour fournir les images Docker au conteneur du runner. Chaque pod de runner contient un conteneur DinD qui est utilis√© pour construire les images Docker.</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> overlay2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">hostPath</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">path</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> /var/lib/docker/overlay2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">overlay2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">hostPath</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">path</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> /var/lib/docker/image/overlay2</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Runner GitHub Self-Hosted]]></title>
        <id>https://delpeuch.net/blog/2024/04/15/04-ci-cd/self-host-runner</id>
        <link href="https://delpeuch.net/blog/2024/04/15/04-ci-cd/self-host-runner"/>
        <updated>2024-04-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Explication de la cr√©ation et de l'installation d'un nouveau runner au niveau de l'organisation]]></summary>
        <content type="html"><![CDATA[<p>Un <code>runner</code> est une machine virtuelle ou physique qui ex√©cute des <code>jobs</code> dans un <code>workflow</code>. Les <code>runners</code> peuvent √™tre h√©berg√©s par GitHub ou auto-h√©berg√©s. Les <code>runners</code> h√©berg√©s par GitHub sont ex√©cut√©s dans un environnement de cloud partag√© et sont g√©r√©s par GitHub et peuvent entrainer des surcouts. Les <code>runners</code> auto-h√©berg√©s sont ex√©cut√©s sur une machine que vous poss√©dez et g√©rez.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comparaison-entre-les-runners-auto-h√©berg√©s-et-les-runners-cloud-h√©berg√©s-de-github">Comparaison entre les runners auto-h√©berg√©s et les runners cloud-h√©berg√©s de GitHub<a href="https://delpeuch.net/blog/2024/04/15/04-ci-cd/self-host-runner#comparaison-entre-les-runners-auto-h%C3%A9berg%C3%A9s-et-les-runners-cloud-h%C3%A9berg%C3%A9s-de-github" class="hash-link" aria-label="Direct link to Comparaison entre les runners auto-h√©berg√©s et les runners cloud-h√©berg√©s de GitHub" title="Direct link to Comparaison entre les runners auto-h√©berg√©s et les runners cloud-h√©berg√©s de GitHub">‚Äã</a></h2>
<p>Les runners auto-h√©berg√©s offrent un contr√¥le total sur l'environnement d'ex√©cution, ce qui permet de personnaliser les configurations et d'optimiser les performances selon les besoins sp√©cifiques. Ils sont √©galement plus rentables √† long terme, car ils n'entra√Ænent pas de co√ªts suppl√©mentaires li√©s √† l'utilisation des ressources de GitHub. Cependant, ils n√©cessitent une maintenance r√©guli√®re et une gestion de la s√©curit√© pour garantir leur bon fonctionnement et leur protection contre les menaces potentielles.</p>
<p>Les runners cloud-h√©berg√©s de GitHub sont g√©r√©s par GitHub, ce qui signifie que les utilisateurs n'ont pas √† se soucier de la maintenance, de la s√©curit√© ou de la mise √† jour des runners. Ils sont √©galement facilement √©volutifs, car GitHub peut ajouter des ressources suppl√©mentaires en fonction des besoins. Cependant, les runners cloud-h√©berg√©s peuvent entra√Æner des co√ªts suppl√©mentaires pour les utilisateurs, en particulier pour les projets de grande envergure ou les charges de travail intensives.</p>
<p>En r√©sum√©, les runners auto-h√©berg√©s sont id√©aux pour les √©quipes ou les projets avec des besoins sp√©cifiques en mati√®re de configuration et de performances, tandis que les runners cloud-h√©berg√©s de GitHub sont mieux adapt√©s aux utilisateurs qui pr√©f√®rent une solution g√©r√©e et √©volutive sans avoir √† se soucier de la maintenance et de la s√©curit√©. Le choix entre les deux d√©pend des besoins sp√©cifiques de l'√©quipe et des ressources disponibles.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©√©r-un-runner-auto-h√©berg√©s">Cr√©√©r un runner auto-h√©berg√©s<a href="https://delpeuch.net/blog/2024/04/15/04-ci-cd/self-host-runner#cr%C3%A9%C3%A9r-un-runner-auto-h%C3%A9berg%C3%A9s" class="hash-link" aria-label="Direct link to Cr√©√©r un runner auto-h√©berg√©s" title="Direct link to Cr√©√©r un runner auto-h√©berg√©s">‚Äã</a></h2>
<p>Pour t√©l√©charger un nouveau <code>runner</code>, ex√©cutez les lignes suivantes</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token comment" style="color:hsl(220, 10%, 40%)"># Create a folder</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">mkdir</span><span class="token plain"> actions-runner </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">cd</span><span class="token plain"> actions-runner</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)"># Download the latest runner package</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-o</span><span class="token plain"> actions-runner-linux-x64-2.312.0.tar.gz </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-L</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">https://github.com/actions/runner/releases/download/v2.312.0/actions-runner-linux-x64-2.312.0.tar.gz</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># ! update this documentation with the latest release</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)"># Optional: Validate the hash</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">echo</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"85c1bbd104d539f666a89edef70a18db2596df374a1b51670f2af1578ecbe031  actions-runner-linux-x64-2.312.0.tar.gz"</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">|</span><span class="token plain"> shasum </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-a</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">256</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-c</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token comment" style="color:hsl(220, 10%, 40%)"># Extract the installer</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">tar</span><span class="token plain"> xzf ./actions-runner-linux-x64-2.312.0.tar.gz</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Il est ensuite n√©cessaire de configurer votre <code>runner</code></p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token comment" style="color:hsl(220, 10%, 40%)"># Create the runner and start the configuration experience</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">./config.sh </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--url</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">https://github.com/</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">org</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain">/</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">repo</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--token</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">token</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token comment" style="color:hsl(220, 10%, 40%)"># Last step, run it!</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">./run.sh</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Le token est √† obtenir au pr√®s d‚Äôun <code>owner</code> de l‚Äôorganisation accessible sur le lien suivant <span style="display:inline-flex;gap:0.25rem"><span></span><a href="https://github.com/organizations/org/settings/actions/runners/new?arch=x64&amp;os=linux" target="_blank" rel="noopener noreferrer">https://github.com/organizations/</a></span></p></div></div>
<p>‚û°Ô∏è Lors de la configuration, il est possible d'ajouter des <strong>labels</strong> pour identifier la machine (par exemple <code>GPU</code>).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©er-une-action-self-hosted">Cr√©er une action <code>self-hosted</code><a href="https://delpeuch.net/blog/2024/04/15/04-ci-cd/self-host-runner#cr%C3%A9er-une-action-self-hosted" class="hash-link" aria-label="Direct link to cr√©er-une-action-self-hosted" title="Direct link to cr√©er-une-action-self-hosted">‚Äã</a></h2>
<p>Il n‚Äôest pas possible de cr√©er une action visant une machine <code>self-hosted</code> particuli√®re (√† confirmer). Chaque <code>repository</code> d‚Äôune organisation peut acc√©der √† :</p>
<ul>
<li>Toutes les machines dans le groupe <code>D√©faut</code> qui sont automatiquement partag√©es √† tous les d√©p√¥ts.</li>
<li>Toutes les machines dans un groupe <code>Name</code> qui sont manuellement partag√©es au d√©p√¥t concern√© (l‚Äôaffectation manuelle des d√©p√¥ts √† des groupes de machines nous encourage √† ne pas utiliser ceci sauf cas particulier)</li>
</ul>
<p>Parmi les machines disponibles le <code>repository</code> peut demander d‚Äôutiliser une machine en fonction de son <code>label</code> par exemple l‚Äôaction ci-dessous, permettant de v√©rifier que le d√©p√¥t est compilable sous ROS, r√©quisitionne une machine ayant le label <code>Robotics</code>. Ceci est modifiable √† la ligne <code>runs-on: Robotics</code>.</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> CI</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">pull_request</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">industrial_ci</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">strategy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">matrix</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">env</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ROS_DISTRO</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> melodic</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ROS_REPO</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> main</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Robotics</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> actions/checkout@v3</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'ros-industrial/industrial_ci@master'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">env</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">matrix.env</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Lors de la premi√®re utilisation, si vous rencontrez un erreur <code>docker</code> sp√©cifiant un manque de permission, il est n√©cessaire de taper la commande suivante sur la machine distance <code>sudo setfacl --modify user:&lt;user&gt;:rw /var/run/docker.sock</code>
Lorsqu‚Äôune action est cr√©√© en <code>self-hosted</code> il est fortement conseill√© de mettre les actions dans un <code>container</code>. Lorsque c‚Äôest impossible (comme <code>tailscale</code>) il est n√©cessaire d‚Äôajouer un clean de l‚Äôenvironnement √† la fin de l‚Äôaction en ajoutant cette <code>step</code></p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Clean runner</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">if</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> always()</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> rm </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">rf $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> github.workspace </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">/*</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mettre-en-place-le-runner-sous-forme-de-service">Mettre en place le runner sous forme de service<a href="https://delpeuch.net/blog/2024/04/15/04-ci-cd/self-host-runner#mettre-en-place-le-runner-sous-forme-de-service" class="hash-link" aria-label="Direct link to Mettre en place le runner sous forme de service" title="Direct link to Mettre en place le runner sous forme de service">‚Äã</a></h2>
<p>Dans le dossier de votre <code>runnner</code> sur la machine, transformer le <code>./run.sh</code> en service, tapez simplement les lignes ci-dessous pour que le <code>runner</code> s‚Äôactive au d√©marrage de la machine.</p>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> ./svc.sh </span><span class="token function" style="color:hsl(207, 82%, 66%)">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> ./svc.sh start</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Actions Composites]]></title>
        <id>https://delpeuch.net/blog/2024/03/28/04-ci-cd/action</id>
        <link href="https://delpeuch.net/blog/2024/03/28/04-ci-cd/action"/>
        <updated>2024-03-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Cr√©√©er une action r√©utilisable]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-de-cr√©ation-et-dutilisation-dune-action-github">Exemple de cr√©ation et d'utilisation d'une action GitHub<a href="https://delpeuch.net/blog/2024/03/28/04-ci-cd/action#exemple-de-cr%C3%A9ation-et-dutilisation-dune-action-github" class="hash-link" aria-label="Direct link to Exemple de cr√©ation et d'utilisation d'une action GitHub" title="Direct link to Exemple de cr√©ation et d'utilisation d'une action GitHub">‚Äã</a></h2>
<p>Voici un exemple de cr√©ation et d'utilisation d'une action GitHub pour automatiser le d√©ploiement d'une application Node.js.</p>
<ol>
<li>Cr√©ez un fichier <code>action.yml</code> dans le r√©pertoire <code>.github/actions/deploy</code> de votre d√©p√¥t avec le contenu suivant :</li>
</ol>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'Deploy Node.js App'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'Deploy a Node.js application to a remote server'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">inputs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">server</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'The remote server to deploy to'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">username</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'The username to use for the deployment'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">password</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'The password to use for the deployment'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">using</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'composite'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Checkout code</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> actions/checkout@v4</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Install dependencies</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> npm install</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Build application</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> npm run build</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Deploy application</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">|</span><span class="token scalar string" style="color:hsl(95, 38%, 62%)"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token scalar string" style="color:hsl(95, 38%, 62%)">        sshpass -p ${{ inputs.password }} ssh ${{ inputs.username }}@${{ inputs.server }} 'mkdir -p /var/www/myapp'</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token scalar string" style="color:hsl(95, 38%, 62%)">        sshpass -p ${{ inputs.password }} scp -r ./build/* ${{ inputs.username }}@${{ inputs.server }}:/var/www/myapp</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Cr√©ez un fichier <code>deploy.yml</code> dans le r√©pertoire <code>.github/workflows</code> de votre d√©p√¥t avec le contenu suivant :</li>
</ol>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Deploy Node.js App</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">push</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">branches</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">deploy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Deploy application</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ./.github/actions/deploy</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">server</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> secrets.DEPLOY_SERVER </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">username</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> secrets.DEPLOY_USERNAME </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">password</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> secrets.DEPLOY_PASSWORD </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Dans cet exemple, l'action <code>Deploy Node.js App</code> est utilis√©e pour d√©ployer une application Node.js sur un serveur distant. L'action est d√©clench√©e √† chaque fois qu'un push est effectu√© sur la branche <code>main</code>. Les informations de d√©ploiement (serveur, nom d'utilisateur et mot de passe) sont stock√©es dans les secrets du d√©p√¥t pour des raisons de s√©curit√©.</p>
<p>Les actions GitHub permettent d'automatiser, personnaliser et ex√©cuter un flux de travail directement depuis votre d√©p√¥t. Avec les actions GitHub, il est possible de cr√©er des t√¢ches personnalis√©es pour automatiser un flux de travail, partager et d√©couvrir des actions pour effectuer des t√¢ches sp√©cifiques.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comment-cr√©er-ses-propres-actions">Comment cr√©er ses propres actions<a href="https://delpeuch.net/blog/2024/03/28/04-ci-cd/action#comment-cr%C3%A9er-ses-propres-actions" class="hash-link" aria-label="Direct link to Comment cr√©er ses propres actions" title="Direct link to Comment cr√©er ses propres actions">‚Äã</a></h2>
<p>Documentation compl√®te : <a href="https://docs.github.com/fr/actions/creating-actions" target="_blank" rel="noopener noreferrer">https://docs.github.com/fr/actions/creating-actions</a></p>
<p>La cr√©ation d'actions personnalis√©es offre la possibilit√© de concevoir du code sp√©cifique qui interagit avec le d√©p√¥t selon les besoins. Ces actions peuvent s'int√©grer aux API de GitHub ou √† toute API tierce accessible publiquement. Par exemple, une action pourrait √™tre configur√©e pour publier des modules npm, envoyer des alertes par SMS en cas de cr√©ation de probl√®mes urgents, ou encore d√©ployer du code pr√™t pour la production.
Ce guide expose les √©l√©ments fondamentaux requis pour la cr√©ation et l'utilisation d'une action composite empaquet√©e.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Lors de la cr√©ation de flux de travail et d'actions, il est imp√©ratif d'√©valuer constamment la possibilit√© d'ex√©cution d'une entr√©e non fiable provenant de sources potentiellement malveillantes. Certains contextes doivent √™tre trait√©s comme des entr√©es non fiables, car un attaquant pourrait ins√©rer son propre contenu malveillant. Pour de plus amples informations, veuillez consulter la section ¬´ <a href="https://docs.github.com/fr/actions/security-guides/security-hardening-for-github-actions#understanding-the-risk-of-script-injections" target="_blank" rel="noopener noreferrer">Durcissement de la s√©curit√© pour GitHub Actions</a> ¬ª.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©ation-dune-action">Cr√©ation d‚Äôune action<a href="https://delpeuch.net/blog/2024/03/28/04-ci-cd/action#cr%C3%A9ation-dune-action" class="hash-link" aria-label="Direct link to Cr√©ation d‚Äôune action" title="Direct link to Cr√©ation d‚Äôune action">‚Äã</a></h2>
<p>Un d√©p√¥t doit √™tre cr√©√© sur <a href="http://github.com/" target="_blank" rel="noopener noreferrer">GitHub.com</a>.</p>
<ul>
<li>Cr√©ez un nouveau d√©p√¥t sur <a href="http://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a>, en choisissant n'importe quel nom de d√©p√¥t ou en utilisant l'exemple suivant : <code>hello-world-composite-action</code>. Les fichiers peuvent √™tre ajout√©s une fois que le projet est pouss√© sur GitHub. Pour plus d'informations, veuillez vous r√©f√©rer √† la section <a href="https://docs.github.com/fr/repositories/creating-and-managing-repositories/creating-a-new-repository" target="_blank" rel="noopener noreferrer">Cr√©ation d'un d√©p√¥t</a>.</li>
<li>Dans le d√©p√¥t <code>hello-world-composite-action</code>, cr√©ez un fichier nomm√© <code>goodbye.sh</code> et ajoutez le code <code>echo "Goodbye</code></li>
<li>Rendez <code>goodbye.sh</code> ex√©cutable depuis votre terminal.</li>
<li>Dans le d√©p√¥t <code>hello-world-composite-action</code>, cr√©ez un fichier nomm√© <code>action.yml</code> et ajoutez le code suivant en exemple. Pour plus d'informations sur cette syntaxe, consultez la section <a href="https://docs.github.com/fr/actions/creating-actions/metadata-syntax-for-github-actions#runs-for-composite-actions" target="_blank" rel="noopener noreferrer">Syntaxe des m√©tadonn√©es pour les actions GitHub</a> .</li>
</ul>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'Hello World'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'Greet someone'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">inputs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">who-to-greet</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">  </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># id of input</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'Who to greet'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">default</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'World'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">outputs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">random-number</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"Random number"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">value</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> steps.random</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">number</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">generator.outputs.random</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">number </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">using</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"composite"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> echo Hello $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> inputs.who</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">to</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">greet </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">.</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">shell</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> bash</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> random</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">number</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">generator</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> echo "random</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">number=$(echo $RANDOM)" </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"> $GITHUB_OUTPUT</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">shell</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> bash</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> echo "$</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> github.action_path </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">" </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"> $GITHUB_PATH</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">shell</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> bash</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> goodbye.sh</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">shell</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> bash</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Ce fichier d√©finit l'entr√©e <code>who-to-greet</code>, mappe le nombre g√©n√©r√© al√©atoirement √† la variable de sortie <code>random-number</code>, ajoute le chemin d'acc√®s de l'action au chemin d'acc√®s du syst√®me de l'ex√©cuteur (pour localiser le script <code>goodbye.sh</code> lors de l'ex√©cution) et ex√©cute le script .</li>
<li>Effectuez le commit de votre fichier <code>action.yml</code> depuis votre terminal.</li>
</ul>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">add</span><span class="token plain"> action.yml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> commit </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-m</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"Add action"</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> push</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Ajoutez une √©tiquette depuis votre terminal. Cet exemple utilise une √©tiquette nomm√©e <code>v1</code>.</li>
</ul>
<div class="language-shell codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-shell codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> tag </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-a</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-m</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">"Description of this release"</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> push --follow-tags</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tester-laction-dans-un-workflow">Tester l‚Äôaction dans un workflow<a href="https://delpeuch.net/blog/2024/03/28/04-ci-cd/action#tester-laction-dans-un-workflow" class="hash-link" aria-label="Direct link to Tester l‚Äôaction dans un workflow" title="Direct link to Tester l‚Äôaction dans un workflow">‚Äã</a></h2>
<p>Copiez le code de workflow dans un fichier <code>.github/workflows/main.yml</code> d'un autre d√©p√¥t</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">push</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">hello_world_job</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> A job to say hello</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> actions/checkout@v4</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">id</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> foo</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> actions/hello</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">world</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">composite</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">action@v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">              </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">who-to-greet</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'Mona the Octocat'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> echo random</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">number $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> steps.foo.outputs.random</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">number </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">shell</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> bash</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="action-dans-un-workflow-priv√©">Action dans un workflow priv√©<a href="https://delpeuch.net/blog/2024/03/28/04-ci-cd/action#action-dans-un-workflow-priv%C3%A9" class="hash-link" aria-label="Direct link to Action dans un workflow priv√©" title="Direct link to Action dans un workflow priv√©">‚Äã</a></h2>
<p>Dans les param√®tres des actions, il est n√©cessaire de la partager √† l‚Äôorganisation</p>
<p><img decoding="async" loading="lazy" alt="AllowAction" src="https://delpeuch.net/assets/images/allow_action-bfc7861aa70e40d33daa3bd986fb4ec3.png" width="788" height="273" class="img_ev3q"></p>]]></content>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Devops" term="Devops"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Workflows]]></title>
        <id>https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow</id>
        <link href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow"/>
        <updated>2024-03-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Cr√©√©er un workflow avec GitHub Actions]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exemple-dint√©gration-des-actions-github-dans-les-workflows">Exemple d'int√©gration des actions GitHub dans les workflows<a href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow#exemple-dint%C3%A9gration-des-actions-github-dans-les-workflows" class="hash-link" aria-label="Direct link to Exemple d'int√©gration des actions GitHub dans les workflows" title="Direct link to Exemple d'int√©gration des actions GitHub dans les workflows">‚Äã</a></h2>
<p>Voici un exemple d'int√©gration des actions GitHub dans un workflow pour automatiser le d√©ploiement d'une application Node.js.</p>
<p>Un workflow est l'√©l√©ment central de GitHub Actions. Il s'agit d'un processus automatis√© compos√© de <code>jobs</code> et de <code>steps</code> qui s'ex√©cutent sur des <code>runners</code>. Les workflows sont d√©clench√©s par des √©v√©nements, tels que des pushs, des pull requests, des forks, etc.</p>
<p>Pour cr√©er un fichier de workflow, il faut cr√©er un fichier <code>.yml</code> dans le dossier <code>.github/workflows</code> du d√©p√¥t. Un workflow est compos√© de <code>jobs</code> et de <code>steps</code>. Un <code>job</code> est une suite d'√©tapes qui s'ex√©cutent sur le m√™me runner, tandis qu'un <code>step</code> est une t√¢che individuelle qui peut s'ex√©cuter dans un <code>job</code>. Chaque <code>job</code> est ex√©cut√© dans un environnement d√©di√© d√©fini par <a href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow#type-de-machine"><code>runs-on</code></a>.</p>
<div class="language-yml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> CI</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">push</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">build</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Run a one</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">line script</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> echo Hello</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> world</span><span class="token tag" style="color:hsl(355, 65%, 65%)">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Run a multi</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">line script</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">|</span><span class="token scalar string" style="color:hsl(95, 38%, 62%)"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token scalar string" style="color:hsl(95, 38%, 62%)">          echo Add other actions to build,</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token scalar string" style="color:hsl(95, 38%, 62%)">          echo test, and deploy your project.</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Documentation Compl√®te  : <a href="https://docs.github.com/en/actions/learn-github-actions/introduction-to-github-actions" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/actions/learn-github-actions/introduction-to-github-actions</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="d√©clenchement-des-actions">D√©clenchement des actions<a href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow#d%C3%A9clenchement-des-actions" class="hash-link" aria-label="Direct link to D√©clenchement des actions" title="Direct link to D√©clenchement des actions">‚Äã</a></h2>
<p>Les d√©clencheurs de workflow sont des √©v√©nements qui entra√Ænent l‚Äôex√©cution d‚Äôun workflow. La syntaxe d√©pend du niveau de pr√©cision</p>
<ul>
<li>Pour tout ce qui concerne un √©v√©nement :</li>
</ul>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">push</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"> </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># pull_request, fork etc</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Pour plus de finesse sur l‚Äô√©v√©nement :</li>
</ul>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># trigger</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">label</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># type d'event (push, fork, pull_request)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">types</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> created </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># trigger √† chaque fois qu'un label est cr√©√©</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">push</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">branches</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> main </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># tous les push sur la branche main</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>D√©clenchement manuel de l‚Äôop√©ration (avec prise d‚Äôargument)</li>
</ul>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">workflow_dispatch</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">inputs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">test_mode</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">description</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">'True or False'</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">required</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:hsl(220, 14%, 71%);font-weight:bold">true</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>La liste compl√®te des d√©clencheurs est disponible dans la <a href="https://docs.github.com/fr/actions/using-workflows/events-that-trigger-workflows" target="_blank" rel="noopener noreferrer">Documentation Github</a></p>
<p>Une ex√©cution de workflow est compos√©e d‚Äôun ou de plusieurs <code>jobs</code>, qui s‚Äôex√©cutent en parall√®le par d√©faut. Chaque job est constitu√© d‚Äôun <code>name</code> et d‚Äôau moins un <code>step</code> pour √™tre ex√©cutable et peut √™tre configur√©.
La documentation pr√©cise des job est disponible dans la <a href="https://docs.github.com/fr/actions/using-workflows/workflow-syntax-for-github-actions#jobs" target="_blank" rel="noopener noreferrer">Documentation Github</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="marketplace">Marketplace<a href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow#marketplace" class="hash-link" aria-label="Direct link to Marketplace" title="Direct link to Marketplace">‚Äã</a></h2>
<p>Chaque <code>job</code> permet d‚Äôex√©cuter un script. Le script le plus basique est un simple <code>run</code> avec des commandes <code>bash</code> derri√®re. Cependant, il est possible de r√©utiliser des actions d√©finies dans le marketplace. Par exemple le <code>steps</code> ci-dessous permet d‚Äôex√©cuter l‚Äôaction <span style="display:inline-flex;gap:0.25rem"><span></span><a href="https://github.com/ros-tooling/action-ros-ci" target="_blank" rel="noopener noreferrer">https://github.com/ros-tooling/action-ros-ci</a></span>. Le mot cl√© <code>with</code> permet de passer des param√®tres √† l‚Äôaction.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Le marketplace permet de r√©utiliser des actions d√©j√† d√©finies par la communaut√©. Il est important de v√©rifier la source de l‚Äôaction avant de l‚Äôutiliser.</p></div></div>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> build and test ROS 2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ros</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">tooling/action</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">ros</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">ci@v0.2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">package-name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> github</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">action</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">test</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">target-ros2-distro</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> matrix.ros_distribution </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">import-token</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># token autogenerated par github</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="r√©utiliser-les-workflows-et-actions">R√©utiliser les Workflows et Actions<a href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow#r%C3%A9utiliser-les-workflows-et-actions" class="hash-link" aria-label="Direct link to R√©utiliser les Workflows et Actions" title="Direct link to R√©utiliser les Workflows et Actions">‚Äã</a></h2>
<p>Il est possible de r√©utiliser des <code>workflows</code> et des <code>actions</code> dans un workflow. Pour cela, il est possible de cr√©er des <code>workflows</code> et des <code>actions</code> dans des fichiers s√©par√©s et de les appeler dans le workflow principal.</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">workflow</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># r√©utilisation du workflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> path/to/your</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">workflow.yml@v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">action</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># r√©utilisation d'une action</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">container</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> path/to/your</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">action@v1</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://docs.github.com/en/actions/learn-github-actions/reusing-workflows" target="_blank" rel="noopener noreferrer">Documentation des wokflows r√©utilisables</a></p>
<p><a href="https://docs.github.com/en/actions/creating-actions/creating-a-composite-action" target="_blank" rel="noopener noreferrer">Documentation des actions r√©utilisables</a></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Lorsqu'un workflow est r√©utilis√© il d√©fini son propre environnement (runner, container, etc). De plus il n'est pas utilisable dans une <code>step</code>.</p><p>√Ä l'inverse, une action est utilisable dans une <code>step</code> et fonctionne dans l'environnement du <code>job</code> qui l'appelle.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="type-de-machine">Type de machine<a href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow#type-de-machine" class="hash-link" aria-label="Direct link to Type de machine" title="Direct link to Type de machine">‚Äã</a></h2>
<p>Utilisez <code>jobs.&lt;job_id&gt;.runs-on</code> pour d√©finir le type de machine sur laquelle le travail doit √™tre ex√©cut√©. La configuration prend en argument un <code>tag</code> d√©fini pour les runners</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name-job</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">latest </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># runner distant sur les serveur de Github</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> self</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">hosted </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># runner local</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> echo "Hello World </span><span class="token tag" style="color:hsl(355, 65%, 65%)">!</span><span class="token plain">"</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Les <code>runners</code> distants fourni par Github consomment du temps pour l‚Äôorganisation dans les limites de 2 000 minutes gratuites par mois. Il est pr√©f√©rable d‚Äôutiliser des <code>runners self hosted</code> (voir <a href="https://docs.github.com/fr/actions/hosting-your-own-runners/managing-self-hosted-runners/about-self-hosted-runners" target="_blank" rel="noopener noreferrer">https://docs.github.com/fr/actions/hosting-your-own-runners/managing-self-hosted-runners/about-self-hosted-runners</a>)</p>
<p>Le choix du <code>runner</code> se fait via les tags. Toutes les machines auto-h√©berg√©es partagent le tag <code>self-hosted</code> , le tag de leur syst√®me d‚Äôexploitation (<code>Linux</code>, <code>Windows</code>), leur architecture (<code>x64</code>) et des tags personnalis√©s par machine.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="container">Container<a href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow#container" class="hash-link" aria-label="Direct link to Container" title="Direct link to Container">‚Äã</a></h2>
<p>L‚Äôutilisation d‚Äôun <code>container</code> permet de cr√©er un nouveau conteneur permettant d‚Äôex√©cuter les √©tapes d‚Äôun travail dans un conteneur sp√©cifif√©. Si vous ne d√©finissez pas de <code>container</code>, toutes les √©tapes s‚Äôex√©cutent directement sur l‚Äôh√¥te sp√©cifi√© par <code>runs-on</code> dans le cas d‚Äôune machine auto-h√©berg√©es, il n‚Äôy a donc acc√®s qu‚Äôaux packages install√©s sur la machine. Un <code>container</code> est rattach√© √† un <code>job</code>.</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name-job</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">runs-on</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> self</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">hosted</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">container</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">jammy </span><span class="token comment" style="color:hsl(220, 10%, 40%)"># run job with ubuntu:jammy docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> echo "Hello World </span><span class="token tag" style="color:hsl(355, 65%, 65%)">!</span><span class="token plain">"</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="strategy">Strategy<a href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow#strategy" class="hash-link" aria-label="Direct link to Strategy" title="Direct link to Strategy">‚Äã</a></h2>
<p>L‚Äôutilisation de <code>strategy</code> permet cr√©er automatiquement plusieurs ex√©cutions de travaux bas√©es sur des combinaisons de variables. Une strat√©gie de matrice est utile pour tester du code dans diff√©rentes versions d'un langage ou sur diff√©rents syst√®mes d'exploitation.
Par exemple</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">jobs</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">example_matrix</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">strategy</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">matrix</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">version</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token number" style="color:hsl(29, 54%, 61%)">10</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">12</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">14</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">os</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">ubuntu</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> windows</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">latest</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">steps</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">run</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> echo "$</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> matrix.version </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> matrix.os </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">"</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Un travail s‚Äôex√©cute pour chaque combinaison possible des variables. Dans cet exemple, le workflow ex√©cute six travaux, un pour chaque combinaison des variables <code>os</code> et <code>version</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="art√©fact">Art√©fact<a href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow#art%C3%A9fact" class="hash-link" aria-label="Direct link to Art√©fact" title="Direct link to Art√©fact">‚Äã</a></h2>
<p>Les artefacts permettent de conserver des donn√©es une fois un travail termin√© et de les partager avec une autre action. Un artefact est un fichier ou une collection de fichiers g√©n√©r√©s pendant l‚Äôex√©cution d‚Äôun workflow. Cet exemple permet de stocker un fichier comme artefact.</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Archive code coverage results</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> actions/upload</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">artifact@v3</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> code</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">coverage</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">report</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">path</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> output/test/code</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">coverage.html</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Pour r√©cup√©rer un artefact</p>
<div class="language-yaml codeBlockContainer_APcc theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_m3Ux"><pre tabindex="0" class="prism-code language-yaml codeBlock_qGQc thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_p187"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Download math result for job 2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">uses</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> actions/download</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">artifact@v3</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">with</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> homework</span><br></span></code></pre><div class="buttonGroup_6DOT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FhaS" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_phi_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FfTR"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vrac">Vrac<a href="https://delpeuch.net/blog/2024/03/17/04-ci-cd/workflow#vrac" class="hash-link" aria-label="Direct link to Vrac" title="Direct link to Vrac">‚Äã</a></h2>
<ul>
<li><code>needs</code> le job actuel ne commencera que quand le job mentionn√© sera termin√©</li>
<li><code>if</code> condition de lancement du job</li>
<li><code>permission</code> permet d‚Äôaugmenter les droits du <code>GITHUB_TOKEN</code> (voir <a href="https://docs.github.com/fr/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token" target="_blank" rel="noopener noreferrer">https://docs.github.com/fr/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token</a>)</li>
<li><code>environnement</code> permet de d√©finir des variables d‚Äôenvironnement</li>
</ul>]]></content>
        <category label="CI/CD" term="CI/CD"/>
        <category label="GitHub" term="GitHub"/>
        <category label="Devops" term="Devops"/>
    </entry>
</feed>
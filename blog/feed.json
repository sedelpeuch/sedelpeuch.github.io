{
    "version": "https://jsonfeed.org/version/1",
    "title": "Sébastien Delpeuch's Blog",
    "home_page_url": "https://delpeuch.net/blog",
    "description": "Sébastien Delpeuch Blog",
    "items": [
        {
            "id": "https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli",
            "content_html": "<p>L'AWS CLI (Command Line Interface) fournit un accès en ligne de commande aux services AWS. L'extension <em>AWS Toolkit</em> pour Visual Studio Code propose une intégration complémentaire permettant de naviguer les ressources, tester et déployer des fonctions depuis l'éditeur.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation\">Installation<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli#installation\" class=\"hash-link\" aria-label=\"Direct link to Installation\" title=\"Direct link to Installation\" translate=\"no\">​</a></h2>\n<p>Les distributions officielles de l'AWS CLI v2 sont disponibles pour Linux, macOS et Windows. Choisir l'onglet correspondant au système d'exploitation pour l'instruction d'installation.</p>\n<div class=\"theme-tabs-container tabs-container tabList__CuJ\"><ul role=\"tablist\" aria-orientation=\"horizontal\" class=\"tabs\"><li role=\"tab\" tabindex=\"0\" aria-selected=\"true\" class=\"tabs__item tabItem_LNqP tabs__item--active\">Linux</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_LNqP\">macOS</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_LNqP\">Windows</li></ul><div class=\"margin-top--md\"><div role=\"tabpanel\" class=\"tabItem_Ymn6\"><p>Sur Linux (exemple Debian/Ubuntu) :</p><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">curl</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\"</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"awscliv2.zip\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">unzip</span><span class=\"token plain\"> awscliv2.zip</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> ./aws/install</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--version</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>Pour d'autres distributions, suivre le guide officiel adapté au package manager (yum, apt, pacman).</p></div><div role=\"tabpanel\" class=\"tabItem_Ymn6\" hidden=\"\"><p>Sur macOS, utiliser Homebrew ou le package officiel :</p><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Homebrew</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">brew </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> awscli</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--version</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>Ou télécharger le package macOS depuis la page officielle et installer via l'installateur.</p></div><div role=\"tabpanel\" class=\"tabItem_Ymn6\" hidden=\"\"><p>Sur Windows, télécharger l'installateur MSI depuis la page officielle et exécuter l'assistant d'installation. Après installation, ouvrir PowerShell ou CMD et vérifier :</p><div class=\"language-powershell codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-powershell codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws --version</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>Pour Windows Subsystem for Linux (WSL), suivre les instructions Linux depuis l'environnement WSL.</p></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-initiale\">Configuration initiale<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli#configuration-initiale\" class=\"hash-link\" aria-label=\"Direct link to Configuration initiale\" title=\"Direct link to Configuration initiale\" translate=\"no\">​</a></h2>\n<p>La commande <code>aws configure</code> permet d'initialiser un profil par défaut : clé d'accès, clé secrète, région et format de sortie.</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws configure</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Pour gérer plusieurs comptes ou rôles, utiliser des profils nommés :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws configure </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--profile</span><span class=\"token plain\"> dev</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--profile</span><span class=\"token plain\"> dev s3 </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ls</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Les fichiers principaux sont <code>~/.aws/credentials</code> et <code>~/.aws/config</code>.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"méthodes-dauthentification\">Méthodes d'authentification<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli#m%C3%A9thodes-dauthentification\" class=\"hash-link\" aria-label=\"Direct link to Méthodes d'authentification\" title=\"Direct link to Méthodes d'authentification\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><strong>Clés d'accès (access key/secret)</strong> : pratiques pour scripts, mais sensibles — les stocker dans <code>~/.aws/credentials</code> ou un gestionnaire sécurisé.</li>\n<li class=\"\"><strong>AWS SSO / Cognito</strong> : pour comptes d'entreprise, utiliser <code>aws sso login</code> (CLI v2) et profils SSO.</li>\n<li class=\"\"><strong>Assume role (STS)</strong> : pour exécuter des actions avec un rôle différent : <code>aws sts assume-role</code> ou configurer <code>source_profile</code> + <code>role_arn</code> dans <code>~/.aws/config</code>.</li>\n<li class=\"\"><strong>Outils tiers</strong> : <code>aws-vault</code>, <code>saml2aws</code> facilitent la gestion des sessions et la sécurité des credentials.</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"commandes-courantes-exemples\">Commandes courantes (exemples)<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli#commandes-courantes-exemples\" class=\"hash-link\" aria-label=\"Direct link to Commandes courantes (exemples)\" title=\"Direct link to Commandes courantes (exemples)\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">S3 : transférer un fichier</li>\n</ul>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws s3 </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">cp</span><span class=\"token plain\"> ./index.html s3://mon-bucket/index.html </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--acl</span><span class=\"token plain\"> private </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--profile</span><span class=\"token plain\"> dev</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<ul>\n<li class=\"\">EC2 : lister les instances</li>\n</ul>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws ec2 describe-instances </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--query</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'Reservations[].Instances[].{ID:InstanceId,State:State.Name,IP:PublicIpAddress}'</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--output</span><span class=\"token plain\"> table</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<ul>\n<li class=\"\">Lambda : invoquer une fonction</li>\n</ul>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws lambda invoke --function-name my-func </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--payload</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'{}'</span><span class=\"token plain\"> response.json</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">cat</span><span class=\"token plain\"> response.json</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<ul>\n<li class=\"\">STS : assumer un rôle</li>\n</ul>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws sts assume-role --role-arn arn:aws:iam::123456789012:role/RoleName --role-session-name session1</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"requêtes-complexes-et-jmespath\">Requêtes complexes et JMESPath<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli#requ%C3%AAtes-complexes-et-jmespath\" class=\"hash-link\" aria-label=\"Direct link to Requêtes complexes et JMESPath\" title=\"Direct link to Requêtes complexes et JMESPath\" translate=\"no\">​</a></h2>\n<p>La CLI prend en charge JMESPath pour filtrer et transformer la sortie JSON via <code>--query</code>.</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws ec2 describe-instances </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--query</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'Reservations[].Instances[?State.Name==`running`].InstanceId'</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--output</span><span class=\"token plain\"> text</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques\">Bonnes pratiques<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli#bonnes-pratiques\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques\" title=\"Direct link to Bonnes pratiques\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Préférer les profils nommés plutôt que d'exporter <code>AWS_ACCESS_KEY_ID</code> en clair.</li>\n<li class=\"\">Minimiser les permissions (IAM least privilege) pour les rôles et utilisateurs utilisés par la CLI.</li>\n<li class=\"\">Pour les workflows locaux, préférer <code>aws-vault</code> ou sessions SSO plutôt que laisser des clés longues dans des fichiers.</li>\n<li class=\"\">Utiliser <code>--region</code> et <code>--profile</code> explicitement dans les scripts pour rendre les commandes reproductibles.</li>\n<li class=\"\">Activer les logs et métriques CloudWatch côté services pour tracer l'impact des automatisations.</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"astuces-utiles\">Astuces utiles<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli#astuces-utiles\" class=\"hash-link\" aria-label=\"Direct link to Astuces utiles\" title=\"Direct link to Astuces utiles\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Pagination : la CLI gère la pagination automatiquement, ou utiliser <code>--page-size</code>/<code>--max-items</code> pour contrôler.</li>\n<li class=\"\">Format de sortie : <code>--output json|yaml|table|text</code> ; pour les pipelines, <code>json</code> et <code>jq</code> sont pratiques.</li>\n<li class=\"\">Session interactive : <code>aws configure list</code> et <code>aws sts get-caller-identity</code> pour vérifier l'identité active.</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"références-rapides\">Références rapides<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli#r%C3%A9f%C3%A9rences-rapides\" class=\"hash-link\" aria-label=\"Direct link to Références rapides\" title=\"Direct link to Références rapides\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Documentation AWS CLI v2 : <a href=\"https://docs.aws.amazon.com/cli/latest/\" target=\"_blank\" rel=\"noopener noreferrer\">https://docs.aws.amazon.com/cli/latest/</a></li>\n<li class=\"\">Tutoriels SSO et <code>aws-vault</code> pour gestion sécurisée des credentials.</li>\n</ul>\n<hr>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"aws-dans-visual-studio-code\">AWS dans Visual Studio Code<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli#aws-dans-visual-studio-code\" class=\"hash-link\" aria-label=\"Direct link to AWS dans Visual Studio Code\" title=\"Direct link to AWS dans Visual Studio Code\" translate=\"no\">​</a></h2>\n<p>L'extension officielle <em>AWS Toolkit for Visual Studio Code</em> facilite le travail avec AWS directement depuis l'éditeur. Principales fonctionnalités :</p>\n<ul>\n<li class=\"\"><strong>Connexion aux comptes</strong> : sélection et gestion des profils AWS (credentials, SSO) depuis l'interface, commande <code>AWS: Connect to AWS</code>.</li>\n<li class=\"\"><strong>AWS Explorer</strong> : navigation des ressources (Lambda, S3, DynamoDB, CloudFormation, ECS), déploiement rapide et actions contextuelles.</li>\n<li class=\"\"><strong>Développement Serverless</strong> : intégration avec AWS SAM pour build, debug et déploiement locaux des fonctions Lambda (requiert SAM CLI et Docker pour le debug local).</li>\n<li class=\"\"><strong>Invocation et logs</strong> : exécution et test des fonctions Lambda, visualisation des logs CloudWatch depuis l'éditeur.</li>\n<li class=\"\"><strong>Déploiement</strong> : assistance pour empaqueter et déployer des stacks CloudFormation / SAM, et exécution de commandes <code>sam deploy</code> via l'interface.</li>\n</ul>\n<p>Installation et configuration rapide :</p>\n<ol>\n<li class=\"\">Installer l'extension <code>AWS Toolkit</code> depuis le marketplace VS Code.</li>\n<li class=\"\">Configurer un profil AWS (clé/secret ou SSO) dans <code>~/.aws/credentials</code> / <code>~/.aws/config</code> ou utiliser le flux d'authentification de l'extension.</li>\n<li class=\"\">Installer <code>awscli</code>, <code>sam-cli</code> et Docker si des tests locaux ou du debugging sont nécessaires.</li>\n</ol>\n<p>Conseils pratiques :</p>\n<ul>\n<li class=\"\">Pour déboguer une Lambda localement, installer Docker et SAM CLI, puis utiliser la commande <em>Run Local</em> fournie par l'extension.</li>\n<li class=\"\">Préférer les profils nommés et SSO pour éviter d'exposer des credentials dans l'éditeur. L'extension supporte SSO flows (CLI v2 requis).</li>\n<li class=\"\">Utiliser les actions contextuelles dans AWS Explorer pour ouvrir rapidement la console AWS ou copier des ARNs et URL.</li>\n<li class=\"\">En équipe, documenter le profil à utiliser et ajouter un fichier <code>devcontainer.json</code> si l'on standardise l'environnement de développement.</li>\n</ul>\n<p>L'utilisation du Toolkit accélère les itérations de développement et la validation locale des fonctions, tout en conservant les bonnes pratiques de gestion des credentials et des rôles.</p>",
            "url": "https://delpeuch.net/blog/2026/02/21/05-cloud/aws-cli",
            "title": "AWS : CLI et Toolkit VS Code",
            "summary": "Installation, configuration et commandes courantes pour démarrer avec l'AWS CLI v2.",
            "date_modified": "2026-02-21T00:00:00.000Z",
            "tags": [
                "Cloud",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2026/02/21/05-cloud/lambda",
            "content_html": "<p>AWS Lambda permet d'exécuter du code sans gérer de serveurs. Ce document décrit le déploiement d'une fonction qui restitue une page HTML via une Function URL, les méthodes de test applicables et les opérations de nettoyage des ressources associées.</p>\n<p>AWS Lambda est un service d'exécution serverless orienté événements. Une fonction Lambda exécute du code en réponse à des déclencheurs (HTTP via Function URL ou API Gateway, événements S3, messages SNS/SQS, EventBridge, etc.). Le modèle de facturation repose sur le temps d'exécution et la mémoire allouée : il n'y a pas de coût pour des serveurs continus, seules les invocations et la durée d'exécution sont facturées.</p>\n<p>L'exécution se fait dans des environnements éphémères isolés ; le démarrage initial peut entraîner un \"cold start\" pour certains runtimes. Les fonctions disposent de limites configurables (mémoire, timeout, taille du bundle) et peuvent utiliser des layers pour partager des dépendances. Les logs et métriques sont émis vers CloudWatch, et l'exécution requiert un rôle IAM avec permissions minimales (principle du least privilege) pour les actions nécessaires.</p>\n<p>Cas d'usage courants : backends HTTP légers, transformations d'objets S3, tâches asynchrones, webhooks et prototypes rapides. Pour des charges statiques ou des assets lourds, l'utilisation de S3 + CloudFront reste préférable.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-la-fonction\">Créer la fonction<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/lambda#cr%C3%A9er-la-fonction\" class=\"hash-link\" aria-label=\"Direct link to Créer la fonction\" title=\"Direct link to Créer la fonction\" translate=\"no\">​</a></h2>\n<p>La création de la fonction peut s'effectuer depuis la console AWS Lambda.</p>\n<p>La fonction peut être configurée avec des valeurs simples, par exemple <code>runtime</code> <code>nodejs22.x</code>, <code>architecture</code> <code>x86_64</code> et un nommage tel que <code>http-function-url-tutorial</code>. Le rôle d'exécution peut être créé automatiquement et doit autoriser l'envoi de logs vers CloudWatch.</p>\n<p>Le plan \"Getting started with Lambda HTTP\" fournit un <code>index.html</code> et un handler simple lisant ce fichier et renvoyant son contenu comme body HTML. La fonction traite une requête HTTP et retourne un document HTML.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-de-handler\">Exemple de handler<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/lambda#exemple-de-handler\" class=\"hash-link\" aria-label=\"Direct link to Exemple de handler\" title=\"Direct link to Exemple de handler\" translate=\"no\">​</a></h2>\n<p>Le handler renvoie simplement <code>index.html</code>. Exemple (ESM) :</p>\n<div class=\"language-javascript codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-javascript codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\">// index.mjs</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> </span><span class=\"token imports\">fs</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'node:fs'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">const</span><span class=\"token plain\"> html </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> fs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token method function property-access\" style=\"color:hsl(207, 82%, 66%)\">readFileSync</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'index.html'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'utf8'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"color:hsl(286, 60%, 67%)\">export</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">handler</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token parameter\">event</span><span class=\"token parameter punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token parameter\"> context</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\">// `event` contient les données de la requête HTTP ou l'événement déclencheur.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\">// `context` fournit des métadonnées d'exécution (requestId, timeout restant, etc.).</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword control-flow\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token literal-property property\" style=\"color:hsl(355, 65%, 65%)\">statusCode</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">200</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token literal-property property\" style=\"color:hsl(355, 65%, 65%)\">headers</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"> </span><span class=\"token string-property property\" style=\"color:hsl(355, 65%, 65%)\">'Content-Type'</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'text/html'</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token literal-property property\" style=\"color:hsl(355, 65%, 65%)\">body</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> html</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Le handler reçoit deux paramètres principaux : <code>event</code> et <code>context</code>. Pour une invocation HTTP, <code>event</code> inclut la méthode, les en-têtes et le corps de la requête. Le paramètre <code>context</code> fournit des informations sur l'exécution en cours (identifiant de la requête, temps restant avant timeout). Les messages envoyés via <code>console.log</code> apparaissent automatiquement dans CloudWatch Logs.</p>\n<p>Le démarrage initial d'un environnement d'exécution peut entraîner un \"cold start\" qui augmente la latence pour la première invocation. Les cold starts sont plus perceptibles pour certains runtimes et lorsque la fonction a des dépendances lourdes. Les stratégies pour réduire l'impact comprennent le provisioned concurrency, le choix d'un runtime optimisé et la réduction de la taille du bundle.</p>\n<p>Les variables d'environnement permettent de paramétrer le comportement sans modifier le code. Les layers servent à partager des dépendances entre fonctions et à réduire la taille des packages déployés. Pour des fichiers statiques ou des assets volumineux, héberger les ressources sur S3 et servir via CloudFront est généralement plus performant que de les embarquer dans le package Lambda.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"invoquer-la-function-url\">Invoquer la Function URL<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/lambda#invoquer-la-function-url\" class=\"hash-link\" aria-label=\"Direct link to Invoquer la Function URL\" title=\"Direct link to Invoquer la Function URL\" translate=\"no\">​</a></h2>\n<p>Pour vérifier le déploiement, l'onglet Code affiche le handler et le fichier <code>index.html</code>. L'ouverture de l'URL de Function (Configuration → Function URL) dans un navigateur déclenche l'invocation et retourne la page HTML.</p>\n<p>Le test en ligne de commande s'effectue avec la commande suivante (remplacer <code>&lt;FUNCTION_URL&gt;</code> par l'URL fournie par la console) :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">curl</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-i</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"https://&lt;FUNCTION_URL&gt;\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"vérifier-les-logs\">Vérifier les logs<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/lambda#v%C3%A9rifier-les-logs\" class=\"hash-link\" aria-label=\"Direct link to Vérifier les logs\" title=\"Direct link to Vérifier les logs\" translate=\"no\">​</a></h3>\n<p>Les logs CloudWatch fournissent les informations de diagnostic et les traces d'exécution. Les entrées <code>START/END/REPORT</code> et les erreurs JavaScript y sont visibles. Pour suivre les logs en temps réel, utiliser :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws logs </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">tail</span><span class=\"token plain\"> /aws/lambda/http-function-url-tutorial </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--follow</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--since</span><span class=\"token plain\"> 1h</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>La CLI AWS permet également d'invoquer la fonction directement sans passer par la Function URL :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws lambda invoke --function-name http-function-url-tutorial out.txt</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>La différence principale est l'endpoint : <code>aws lambda invoke</code> appelle l'API Lambda en mode administré et ne reflète pas le comportement exact d'une invocation HTTP via Function URL (en-têtes, codes de statut). Pour une Function URL configurée en <code>AWS_IAM</code>, les requêtes HTTP doivent être signées (SigV4) ; les SDK AWS gèrent cette signature automatiquement.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"alternatives-et-bonnes-pratiques\">Alternatives et bonnes pratiques<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/lambda#alternatives-et-bonnes-pratiques\" class=\"hash-link\" aria-label=\"Direct link to Alternatives et bonnes pratiques\" title=\"Direct link to Alternatives et bonnes pratiques\" translate=\"no\">​</a></h2>\n<p>Pour un usage public statique, il est préférable d'héberger <code>index.html</code> sur S3 et d'utiliser CloudFront. Pour sécuriser l'accès à une fonction, il est recommandé d'utiliser <code>AWS_IAM</code> ou de placer un API Gateway avec des mécanismes d'authentification. Pour la performance, précompiler et bundler les assets et éviter les lectures synchrones à chaque invocation.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-chaînage-simple-entre-deux-lambdas\">Exemple chaînage simple entre deux Lambdas<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/lambda#exemple-cha%C3%AEnage-simple-entre-deux-lambdas\" class=\"hash-link\" aria-label=\"Direct link to Exemple chaînage simple entre deux Lambdas\" title=\"Direct link to Exemple chaînage simple entre deux Lambdas\" translate=\"no\">​</a></h2>\n<p>Un chaînage simple entre deux fonctions Lambda permet d'illustrer les concepts d'invocation et de permissions sans introduire d'infrastructure supplémentaire. Dans cet exemple, la fonction <em>producer</em> invoque de manière asynchrone la fonction <em>consumer</em> via l'API Lambda (<code>Invoke</code> avec <code>InvocationType='Event'</code>).</p>\n<p>Extrait du producer (Python) :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> os</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> boto3</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">lambda_client </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> boto3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'lambda'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">CONSUMER </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> os</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">environ</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'CONSUMER_FUNCTION_NAME'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'lambda-consumer'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">handler</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">event</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> context</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    payload </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'message'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'Hello from producer'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'input'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> event </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    lambda_client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">invoke</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        FunctionName</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">CONSUMER</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        InvocationType</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'Event'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        Payload</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">dumps</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">payload</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">encode</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'statusCode'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">202</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'body'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">dumps</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'sent'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:hsl(29, 54%, 61%)\">True</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Comportement attendu du consumer : consigner le payload reçu dans les logs CloudWatch et exécuter le traitement asynchrone. Pour une invocation asynchrone, la réponse renvoyée par le consumer n'est pas retournée au caller.</p>\n<p>Permissions minimales : le rôle d'exécution de la fonction producer doit inclure l'action <code>lambda:InvokeFunction</code> ciblant l'ARN de la fonction consumer (ex. <code>arn:aws:lambda:REGION:ACCOUNT_ID:function:lambda-consumer</code>).</p>\n<p>Test rapide (CLI) :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws lambda invoke --function-name lambda-producer </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--payload</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'{}'</span><span class=\"token plain\"> /tmp/out.json</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">cat</span><span class=\"token plain\"> /tmp/out.json</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Consulter les logs du consumer dans CloudWatch pour vérifier la réception</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Remarques pratiques :</p>\n<ul>\n<li class=\"\">Vérifier la taille du payload ; pour des objets volumineux, stocker sur S3 et transmettre un lien.</li>\n<li class=\"\">Inclure des métadonnées (horodatage, requestId) facilite le traçage entre producer et consumer.</li>\n<li class=\"\">Prévoir l'idempotence côté consumer si des duplications peuvent survenir.</li>\n</ul>\n<p>Les fichiers d'exemple correspondants se trouvent dans <code>examples/lambda-two/</code> du dépôt.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"nettoyage\">Nettoyage<a href=\"https://delpeuch.net/blog/2026/02/21/05-cloud/lambda#nettoyage\" class=\"hash-link\" aria-label=\"Direct link to Nettoyage\" title=\"Direct link to Nettoyage\" translate=\"no\">​</a></h2>\n<p>La suppression des ressources commence par la suppression de la Function URL si elle n'est pas nécessaire, puis par la suppression de la fonction :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws lambda delete-function --function-name http-function-url-tutorial</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Après suppression de la fonction, supprimer le rôle IAM si celui-ci n'est plus utilisé.</p>",
            "url": "https://delpeuch.net/blog/2026/02/21/05-cloud/lambda",
            "title": "AWS : Lambda",
            "summary": "Découverte d'AWS Lambda et d'une URL de fonction.",
            "date_modified": "2026-02-21T00:00:00.000Z",
            "tags": [
                "Cloud",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2026/02/19/05-cloud/ec2",
            "content_html": "<p>Amazon Web Services (AWS) est l'une des premières plateformes cloud au monde. Ses services fondamentaux comme EC2 et IAM permettent de déployer et gérer une infrastructure complète sans matériel physique.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-un-compte-aws-free-tier\">Créer un compte AWS Free Tier<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#cr%C3%A9er-un-compte-aws-free-tier\" class=\"hash-link\" aria-label=\"Direct link to Créer un compte AWS Free Tier\" title=\"Direct link to Créer un compte AWS Free Tier\" translate=\"no\">​</a></h2>\n<p>AWS reste le leader incontesté du marché du cloud avec une part de marché significative. Pour un ingénieur ou un développeur souhaitant maîtriser les technologies cloud, l'accès à une plateforme de qualité production est essentiel. L'offre Free Tier permet d'explorer AWS à coût zéro pendant une période initiale, ce qui en fait un point de départ idéal.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"structure-et-avantages-du-free-tier\">Structure et avantages du Free Tier<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#structure-et-avantages-du-free-tier\" class=\"hash-link\" aria-label=\"Direct link to Structure et avantages du Free Tier\" title=\"Direct link to Structure et avantages du Free Tier\" translate=\"no\">​</a></h3>\n<p>AWS propose plusieurs niveaux d'offres gratuits adaptés à différents usages. Le forfait principal offre un crédit de 200 USD valable pendant 12 mois pour explorer les services. Ce crédit couvre une majorité des cas d'usage basiques :</p>\n<ul>\n<li class=\"\">EC2 : 750 heures de t2.micro par mois (suffisant pour une instance 24/7)</li>\n<li class=\"\">S3 : 5 GB de stockage</li>\n<li class=\"\">RDS : 750 heures de db.t2.micro par mois</li>\n<li class=\"\">CloudWatch : Monitoring gratuit</li>\n<li class=\"\">Transferts de données : Jusqu'à 1 GB d'entrée/sortie gratuit par mois</li>\n</ul>\n<p>Certains services restent gratuits indéfiniment, même après les 12 mois, à condition de rester dans les limites d'utilisation. Par exemple, AWS Lambda propose 1 million de requêtes gratuites par mois, DynamoDB offre 25 Go de stockage.</p>\n<p>Les avantages principaux sont : aucun risque financier (aucune charge si les limites gratuites ne sont pas dépassées), accès complet à plus de 150 services AWS, durée suffisante pour apprendre (12 mois), et services identiques à ceux utilisés en production.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"inscription-et-accès\">Inscription et accès<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#inscription-et-acc%C3%A8s\" class=\"hash-link\" aria-label=\"Direct link to Inscription et accès\" title=\"Direct link to Inscription et accès\" translate=\"no\">​</a></h3>\n<p>L'inscription se fait via <a href=\"https://aws.amazon.com/fr/free/\" target=\"_blank\" rel=\"noopener noreferrer\">https://aws.amazon.com/fr/free/</a>. Les étapes clés incluent : entrée des informations personnelles (email, nom, mot de passe), vérification de l'identité (AWS demande une carte bancaire pour vérification uniquement, pas de charge), validation par SMS, et sélection du plan de support gratuit (Basic Support).</p>\n<p>Une fois inscrit, l'accès à la console se fait sur <a href=\"https://console.aws.amazon.com/\" target=\"_blank\" rel=\"noopener noreferrer\">https://console.aws.amazon.com</a>.</p>\n<p>Il est crucial de mettre en place des garde-fous pour éviter les dépassements. AWS Budgets permet de définir des alertes automatiques qui vous notifient avant toute charge inattendue. Le template \"Zero spend budget\" est recommandé pour débuter : il crée une alerte dès que l'utilisation risque de dépasser le Free Tier. Ces pratiques de surveillance des coûts forment de bonnes habitudes pour la gestion en production.</p>\n<hr>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"comprendre-le-modèle-iam\">Comprendre le modèle IAM<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#comprendre-le-mod%C3%A8le-iam\" class=\"hash-link\" aria-label=\"Direct link to Comprendre le modèle IAM\" title=\"Direct link to Comprendre le modèle IAM\" translate=\"no\">​</a></h2>\n<p>Identity and Access Management (IAM) est le service AWS responsable de la gestion des accès et des permissions. C'est un composant critique de la sécurité infrastrukturelle qui doit être compris dès le départ, tant il influence toute l'architecture en production.</p>\n<p>Accès à la console IAM : <a href=\"https://console.aws.amazon.com/iam/\" target=\"_blank\" rel=\"noopener noreferrer\">https://console.aws.amazon.com/iam/</a></p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"modèle-de-sécurité-basé-sur-les-permissions\">Modèle de sécurité basé sur les permissions<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#mod%C3%A8le-de-s%C3%A9curit%C3%A9-bas%C3%A9-sur-les-permissions\" class=\"hash-link\" aria-label=\"Direct link to Modèle de sécurité basé sur les permissions\" title=\"Direct link to Modèle de sécurité basé sur les permissions\" translate=\"no\">​</a></h3>\n<p>AWS fonctionne selon un principe de permission explicite : par défaut, tout accès est refusé. Seules les actions explicitement autorisées sont possibles. Cette approche sécuritaire signifie que chaque utilisateur, chaque service, chaque ressource doit disposer des permissions minimales nécessaires à son fonctionnement.</p>\n<p>Les quatre concepts clés d'IAM sont :</p>\n<p><strong>Users</strong> : Entités représentant des personnes ou des applications. Chaque utilisateur possède des identifiants uniques et des credentials de connexion. Un root user est créé automatiquement lors de la création du compte, mais il est recommandé de ne pas l'utiliser en production.</p>\n<p><strong>Groups</strong> : Ensemble logique d'utilisateurs partageant les mêmes permissions. Plutôt que d'assigner des permissions à chaque utilisateur individuellement, les groupes permettent une gestion centralisée et scalable.</p>\n<p><strong>Roles</strong> : Identités destinées à être assumées temporairement, généralement par des services ou des utilisateurs externes. Contrairement aux users, les roles n'ont pas de credentials permanentes mais génèrent des tokens temporaires.</p>\n<p><strong>Policies</strong> : Documents JSON définissant précisément les actions autorisées (Allow) ou refusées (Deny) sur les ressources AWS. Une policy peut être attachée à des users, groups, ou roles pour définir leurs permissions.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques-dès-le-départ\">Bonnes pratiques dès le départ<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#bonnes-pratiques-d%C3%A8s-le-d%C3%A9part\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques dès le départ\" title=\"Direct link to Bonnes pratiques dès le départ\" translate=\"no\">​</a></h3>\n<p>Appliquer les bonnes pratiques dès le début forme de solides habitudes. Ne jamais utiliser le root user après la création initiale du compte, créer un utilisateur IAM administrateur avec authentification multifacteur (MFA), utiliser des groupes pour simplifier la gestion des permissions, et régulièrement auditer les accès sont les règles de base.</p>\n<p>Pour un projet personnel, créer au minimum un utilisateur IAM avec permissions complètes et l'utiliser comme administrateur du compte libère le root user, qui ne devrait être utilisé que pour les changements critiques (récupération de compte, modifications de facturation).</p>\n<hr>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"lancer-une-instance-ec2\">Lancer une instance EC2<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#lancer-une-instance-ec2\" class=\"hash-link\" aria-label=\"Direct link to Lancer une instance EC2\" title=\"Direct link to Lancer une instance EC2\" translate=\"no\">​</a></h2>\n<p>Le lancement d'une instance EC2 est un processus guidé composé de plusieurs étapes. L'objectif est de configurer tous les paramètres nécessaires pour que la machine virtuelle démarre correctement et soit accessible.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"nommage-et-identification\">Nommage et identification<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#nommage-et-identification\" class=\"hash-link\" aria-label=\"Direct link to Nommage et identification\" title=\"Direct link to Nommage et identification\" translate=\"no\">​</a></h3>\n<p>Chaque instance doit recevoir un nom permettant de l'identifier facilement dans la console. Ce nom est en réalité une étiquette (tag) avec la clé \"Name\". Pour un projet de test, un simple \"Test Instance\" suffit. Ce nommage devient critique en production où vous aurez potentiellement des dizaines ou centaines d'instances : une politique de nommage cohérente (par exemple <code>projet-env-role-numero</code>) facilite la gestion et l'automatisation.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"sélection-de-lamazon-machine-image-ami\">Sélection de l'Amazon Machine Image (AMI)<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#s%C3%A9lection-de-lamazon-machine-image-ami\" class=\"hash-link\" aria-label=\"Direct link to Sélection de l'Amazon Machine Image (AMI)\" title=\"Direct link to Sélection de l'Amazon Machine Image (AMI)\" translate=\"no\">​</a></h3>\n<p>Une AMI est un modèle prêt à l'emploi contenant un système d'exploitation complet et un ensemble de logiciels préconfigurés. AWS propose plusieurs AMI de démarrage rapide gratuites : Amazon Linux, Ubuntu, Debian, CentOS. Le choix dépend de votre préférence et de votre expérience. Amazon Linux est optimisé pour AWS, Ubuntu offre une large communauté de développeurs, Debian est minimaliste.</p>\n<p>Pour débuter, choisissez simplement Amazon Linux 2 ou Ubuntu. Ces AMI sont disponibles dans le Free Tier.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-du-type-dinstance\">Configuration du type d'instance<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#configuration-du-type-dinstance\" class=\"hash-link\" aria-label=\"Direct link to Configuration du type d'instance\" title=\"Direct link to Configuration du type d'instance\" translate=\"no\">​</a></h3>\n<p>Le type d'instance détermine les ressources matérielles : processeur, mémoire, réseau. AWS propose plusieurs familles (<code>t2</code>, <code>t3</code>, <code>m5</code>, etc.). Le type <code>t3.micro</code> est inclus dans le Free Tier (750 heures par mois) et convient parfaitement pour apprendre, tester une application, ou servir une charge très légère.</p>\n<p>Ne modifiez pas le type par défaut proposé pour une première instance. Vous pouvez toujours le changer plus tard.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"paire-de-clés-ssh\">Paire de clés SSH<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#paire-de-cl%C3%A9s-ssh\" class=\"hash-link\" aria-label=\"Direct link to Paire de clés SSH\" title=\"Direct link to Paire de clés SSH\" translate=\"no\">​</a></h3>\n<p>Avant de lancer l'instance, vous devez créer ou sélectionner une paire de clés SSH. La paire de clés se compose d'une clé publique (stockée sur l'instance) et d'une clé privée (conservée sur votre ordinateur local). La clé privée est votre secret : ne la partagez jamais.</p>\n<p>AWS vous permet de télécharger la clé privée une seule fois lors de la création. Si vous la perdez, vous ne pourrez plus accéder à l'instance. Stockez-la dans un endroit sûr, comme <code>~/.ssh/</code> sur Linux/Mac ou <code>C:\\Users\\VotreNom\\.ssh\\</code> sur Windows.</p>\n<p>Nommez votre paire de clés de manière explicite (ex: <code>aws-key-2026</code>) pour éviter confusion avec d'autres clés.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-réseau-vpc-et-sous-réseau\">Configuration réseau (VPC et sous-réseau)<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#configuration-r%C3%A9seau-vpc-et-sous-r%C3%A9seau\" class=\"hash-link\" aria-label=\"Direct link to Configuration réseau (VPC et sous-réseau)\" title=\"Direct link to Configuration réseau (VPC et sous-réseau)\" translate=\"no\">​</a></h3>\n<p>AWS crée automatiquement un VPC (Virtual Private Cloud) par défaut pour votre compte. Les instances doivent être lancées dans ce VPC, idéalement dans un sous-réseau public pour un accès Internet. Le sous-réseau par défaut est public et attribue une adresse IP publique à votre instance, ce qui la rend accessible depuis Internet.</p>\n<p>Pour un test, gardez les paramètres par défaut. En production, une segmentation réseau appropriée devient critique pour la sécurité.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pare-feu-security-group\">Pare-feu (Security Group)<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#pare-feu-security-group\" class=\"hash-link\" aria-label=\"Direct link to Pare-feu (Security Group)\" title=\"Direct link to Pare-feu (Security Group)\" translate=\"no\">​</a></h3>\n<p>Un Security Group fonctionne comme un pare-feu applicatif. Il définit les règles de trafic entrant et sortant pour votre instance. Pour vous connecter en SSH, vous avez besoin d'une règle permettant le trafic sur le port 22 (SSH).</p>\n<p>Pour débuter, autorisez SSH de n'importe où (<code>0.0.0.0/0</code>). En production, limitez toujours SSH aux adresses IP connues.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"stockage-ebs\">Stockage (EBS)<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#stockage-ebs\" class=\"hash-link\" aria-label=\"Direct link to Stockage (EBS)\" title=\"Direct link to Stockage (EBS)\" translate=\"no\">​</a></h3>\n<p>Un volume EBS (Elastic Block Store) est le disque de votre instance. Le volume racine contient le système d'exploitation. Pour une instance de test, un volume de 8-20 GB suffit, sans chiffrement supplémentaire nécessaire.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"vérification-et-lancement\">Vérification et lancement<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#v%C3%A9rification-et-lancement\" class=\"hash-link\" aria-label=\"Direct link to Vérification et lancement\" title=\"Direct link to Vérification et lancement\" translate=\"no\">​</a></h3>\n<p>Passez en revue le résumé de tous les paramètres. Vérifiez que vous avez sélectionné la paire de clés correcte et que le Security Group autorise SSH. Une fois satisfait, cliquez sur \"Lancer l'instance\".</p>\n<p>L'instance démarre en quelques secondes. Vous pouvez suivre son état dans la console : elle passe de \"Pending\" à \"Running\". Notez son adresse IP publique (affichée dans les détails de l'instance) : vous en aurez besoin pour la connexion SSH.</p>\n<hr>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"se-connecter-en-ssh\">Se connecter en SSH<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#se-connecter-en-ssh\" class=\"hash-link\" aria-label=\"Direct link to Se connecter en SSH\" title=\"Direct link to Se connecter en SSH\" translate=\"no\">​</a></h2>\n<p>Une fois l'instance en état \"Running\" avec une adresse IP publique, vous pouvez établir une connexion SSH sécurisée depuis votre terminal local.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"préparation-de-la-clé-privée\">Préparation de la clé privée<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#pr%C3%A9paration-de-la-cl%C3%A9-priv%C3%A9e\" class=\"hash-link\" aria-label=\"Direct link to Préparation de la clé privée\" title=\"Direct link to Préparation de la clé privée\" translate=\"no\">​</a></h3>\n<p>La clé privée téléchargée lors du lancement doit être protégée avec les permissions appropriées. Sur Linux/Mac, exécutez :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">chmod</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">400</span><span class=\"token plain\"> ~/.ssh/votre-cle.pem</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Cette commande restreint l'accès à la clé : seul le propriétaire peut la lire. SSH refusera de fonctionner si la clé a des permissions trop larges.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"commande-ssh\">Commande SSH<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#commande-ssh\" class=\"hash-link\" aria-label=\"Direct link to Commande SSH\" title=\"Direct link to Commande SSH\" translate=\"no\">​</a></h3>\n<p>La syntaxe SSH dépend du système d'exploitation de l'AMI utilisée :</p>\n<div class=\"theme-tabs-container tabs-container tabList__CuJ\"><ul role=\"tablist\" aria-orientation=\"horizontal\" class=\"tabs\"><li role=\"tab\" tabindex=\"0\" aria-selected=\"true\" class=\"tabs__item tabItem_LNqP tabs__item--active\">Amazon Linux</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_LNqP\">Ubuntu</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_LNqP\">Debian</li></ul><div class=\"margin-top--md\"><div role=\"tabpanel\" class=\"tabItem_Ymn6\"><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ssh</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-i</span><span class=\"token plain\"> ~/.ssh/votre-cle.pem ec2-user@adresse-ip-publique</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div><div role=\"tabpanel\" class=\"tabItem_Ymn6\" hidden=\"\"><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ssh</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-i</span><span class=\"token plain\"> ~/.ssh/votre-cle.pem ubuntu@adresse-ip-publique</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div><div role=\"tabpanel\" class=\"tabItem_Ymn6\" hidden=\"\"><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ssh</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-i</span><span class=\"token plain\"> ~/.ssh/votre-cle.pem admin@adresse-ip-publique</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div></div></div>\n<p>Remplacez <code>votre-cle.pem</code> par le chemin réel de votre clé et <code>adresse-ip-publique</code> par l'IP publique de votre instance.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"connexion-et-vérification\">Connexion et vérification<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#connexion-et-v%C3%A9rification\" class=\"hash-link\" aria-label=\"Direct link to Connexion et vérification\" title=\"Direct link to Connexion et vérification\" translate=\"no\">​</a></h3>\n<p>La première connexion SSH vous affiche généralement une empreinte digitale de la clé hôte (host key fingerprint) pour vérifier que vous vous connectez au bon serveur. Acceptez-la en tapant \"yes\".</p>\n<p>Une fois connecté, vous êtes en tant qu'utilisateur <code>ec2-user</code>, <code>ubuntu</code>, ou <code>admin</code> (selon l'AMI). Vous avez un accès utilisateur à l'instance. Pour les opérations d'administration (installation de logiciels, modifications système), utilisez <code>sudo</code>.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"accès-root-et-administration\">Accès root et administration<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#acc%C3%A8s-root-et-administration\" class=\"hash-link\" aria-label=\"Direct link to Accès root et administration\" title=\"Direct link to Accès root et administration\" translate=\"no\">​</a></h3>\n<p>L'utilisateur par défaut (<code>ec2-user</code>, <code>ubuntu</code>, <code>admin</code>) dispose de sudo sans mot de passe. Vous pouvez donc exécuter des commandes en root simplement en préfixant avec <code>sudo</code> :</p>\n<div class=\"theme-tabs-container tabs-container tabList__CuJ\"><ul role=\"tablist\" aria-orientation=\"horizontal\" class=\"tabs\"><li role=\"tab\" tabindex=\"0\" aria-selected=\"true\" class=\"tabs__item tabItem_LNqP tabs__item--active\">Amazon Linux</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_LNqP\">Ubuntu / Debian</li></ul><div class=\"margin-top--md\"><div role=\"tabpanel\" class=\"tabItem_Ymn6\"><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> yum update</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div><div role=\"tabpanel\" class=\"tabItem_Ymn6\" hidden=\"\"><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">apt</span><span class=\"token plain\"> update</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fermeture-de-la-connexion\">Fermeture de la connexion<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#fermeture-de-la-connexion\" class=\"hash-link\" aria-label=\"Direct link to Fermeture de la connexion\" title=\"Direct link to Fermeture de la connexion\" translate=\"no\">​</a></h3>\n<p>Tapez <code>exit</code> ou appuyez sur Ctrl+D pour fermer la connexion SSH. Votre instance reste active à moins que vous ne l'arrêtiez explicitement.</p>\n<hr>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installer-nginx\">Installer Nginx<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#installer-nginx\" class=\"hash-link\" aria-label=\"Direct link to Installer Nginx\" title=\"Direct link to Installer Nginx\" translate=\"no\">​</a></h2>\n<p>Nginx est un serveur web léger et performant, idéal pour débuter avec une application web simple. L'installation est directe via le gestionnaire de paquets de votre système d'exploitation.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation\">Installation<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#installation\" class=\"hash-link\" aria-label=\"Direct link to Installation\" title=\"Direct link to Installation\" translate=\"no\">​</a></h3>\n<p>Une fois connecté en SSH à votre instance, commencez par mettre à jour les paquets système :</p>\n<div class=\"theme-tabs-container tabs-container tabList__CuJ\"><ul role=\"tablist\" aria-orientation=\"horizontal\" class=\"tabs\"><li role=\"tab\" tabindex=\"0\" aria-selected=\"true\" class=\"tabs__item tabItem_LNqP tabs__item--active\">Amazon Linux</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_LNqP\">Ubuntu / Debian</li></ul><div class=\"margin-top--md\"><div role=\"tabpanel\" class=\"tabItem_Ymn6\"><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> yum update </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-y</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div><div role=\"tabpanel\" class=\"tabItem_Ymn6\" hidden=\"\"><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">apt</span><span class=\"token plain\"> update </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&amp;&amp;</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">apt</span><span class=\"token plain\"> upgrade </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-y</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div></div></div>\n<p>Installez ensuite Nginx :</p>\n<div class=\"theme-tabs-container tabs-container tabList__CuJ\"><ul role=\"tablist\" aria-orientation=\"horizontal\" class=\"tabs\"><li role=\"tab\" tabindex=\"0\" aria-selected=\"true\" class=\"tabs__item tabItem_LNqP tabs__item--active\">Amazon Linux</li><li role=\"tab\" tabindex=\"-1\" aria-selected=\"false\" class=\"tabs__item tabItem_LNqP\">Ubuntu / Debian</li></ul><div class=\"margin-top--md\"><div role=\"tabpanel\" class=\"tabItem_Ymn6\"><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> yum </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> nginx </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-y</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div><div role=\"tabpanel\" class=\"tabItem_Ymn6\" hidden=\"\"><div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">apt</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> nginx </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-y</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"démarrage-du-service\">Démarrage du service<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#d%C3%A9marrage-du-service\" class=\"hash-link\" aria-label=\"Direct link to Démarrage du service\" title=\"Direct link to Démarrage du service\" translate=\"no\">​</a></h3>\n<p>Après installation, démarrez le service Nginx :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> systemctl start nginx</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Vérifiez que le service est bien actif :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> systemctl status nginx</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Vous devez voir un statut \"active (running)\".</p>\n<p>Pour que Nginx démarre automatiquement au redémarrage de l'instance :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> systemctl </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">enable</span><span class=\"token plain\"> nginx</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-du-security-group\">Configuration du Security Group<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#configuration-du-security-group\" class=\"hash-link\" aria-label=\"Direct link to Configuration du Security Group\" title=\"Direct link to Configuration du Security Group\" translate=\"no\">​</a></h3>\n<p>Pour que Nginx soit accessible depuis Internet, vous devez autoriser le trafic HTTP (port 80) dans le Security Group de votre instance. C'est une étape critique souvent oubliée, qui explique pourquoi l'adresse IP publique ne charge pas initialement.</p>\n<p>Dans la console AWS, allez à <strong>EC2 → Security Groups</strong>, sélectionnez le Security Group de votre instance, puis cliquez sur <strong>Edit inbound rules</strong>. Ajoutez une nouvelle règle :</p>\n<ul>\n<li class=\"\">Type : HTTP</li>\n<li class=\"\">Port : 80</li>\n<li class=\"\">Protocol : TCP</li>\n<li class=\"\">Source : 0.0.0.0/0</li>\n</ul>\n<p>Sauvegardez les modifications.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"accès-au-serveur-web\">Accès au serveur web<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#acc%C3%A8s-au-serveur-web\" class=\"hash-link\" aria-label=\"Direct link to Accès au serveur web\" title=\"Direct link to Accès au serveur web\" translate=\"no\">​</a></h3>\n<p>Récupérez l'adresse IP publique de votre instance (visible dans les détails EC2), puis accédez-y via HTTP dans votre navigateur :</p>\n<div class=\"language-text codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http://votre-ip-publique</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Vous devez voir la page de bienvenue Nginx, confirmant que le serveur est opérationnel. Cette page est servie depuis <code>/usr/share/nginx/html/index.html</code>.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"vérification-locale\">Vérification locale<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#v%C3%A9rification-locale\" class=\"hash-link\" aria-label=\"Direct link to Vérification locale\" title=\"Direct link to Vérification locale\" translate=\"no\">​</a></h3>\n<p>Depuis la session SSH, vous pouvez aussi vérifier que Nginx écoute correctement :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">netstat</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-tlnp</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">|</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">grep</span><span class=\"token plain\"> nginx</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>ou</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">curl</span><span class=\"token plain\"> http://localhost</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Ces commandes confirment que Nginx est bien configuré et accessible localement. L'absence de règle HTTP dans le Security Group était le blocage : même si Nginx tourne, le pare-feu AWS bloque l'accès externe sans cette règle explicite.</p>\n<hr>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"gérer-linstance\">Gérer l'instance<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#g%C3%A9rer-linstance\" class=\"hash-link\" aria-label=\"Direct link to Gérer l'instance\" title=\"Direct link to Gérer l'instance\" translate=\"no\">​</a></h2>\n<p>Le cycle de vie d'une instance EC2 comprend plusieurs états critiques pour la gestion des coûts et des ressources. Comprendre la différence entre \"Stop\" et \"Terminate\" est essentiel pour éviter des frais inattendus.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"états-dune-instance\">États d'une instance<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#%C3%A9tats-dune-instance\" class=\"hash-link\" aria-label=\"Direct link to États d'une instance\" title=\"Direct link to États d'une instance\" translate=\"no\">​</a></h3>\n<p>Une instance EC2 peut se trouver dans plusieurs états :</p>\n<ul>\n<li class=\"\"><strong>Running</strong> : L'instance est en cours d'exécution et vous facturation pour le calcul (CPU, mémoire)</li>\n<li class=\"\"><strong>Stopped</strong> : L'instance est arrêtée mais conserve ses données et peux être redémarrée. Vous êtes facturé pour le stockage EBS uniquement</li>\n<li class=\"\"><strong>Terminated</strong> : L'instance est supprimée définitivement. Les données sont perdues (sauf si à sauvegardé les volumes EBS). Pas de frais (ou frais minimaux pour EBS selon la configuration)</li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"stop-vs-terminate\">Stop vs Terminate<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#stop-vs-terminate\" class=\"hash-link\" aria-label=\"Direct link to Stop vs Terminate\" title=\"Direct link to Stop vs Terminate\" translate=\"no\">​</a></h3>\n<p><strong>Stop (Arrêt)</strong> : Comme éteindre un ordinateur à la maison. L'instance s'arrête mais subsiste. Vous pouvez la redémarrer plus tard. Les données sur le volume racine (EBS) sont conservées. Vous êtes facturé pour le stockage EBS (quelques centimes par mois) mais pas pour le calcul.</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Depuis la console AWS : clic-droit sur l'instance → Instance State → Stop</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Terminate (Suppression)</strong> : Suppression définitive de l'instance. Les données du volume racine sont perdues par défaut (sauf si vous avez configuré \"Delete on Termination = No\"). Vous cessez immédiatement d'être facturé pour le calcul et le stockage racine.</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Depuis la console AWS : clic-droit sur l'instance → Instance State → Terminate</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"facturation-dans-le-free-tier\">Facturation dans le Free Tier<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#facturation-dans-le-free-tier\" class=\"hash-link\" aria-label=\"Direct link to Facturation dans le Free Tier\" title=\"Direct link to Facturation dans le Free Tier\" translate=\"no\">​</a></h3>\n<p>Dans le Free Tier (750 heures par mois de t3.micro gratuit) :</p>\n<ul>\n<li class=\"\"><strong>Running</strong> : Consomme vos 750 heures gratuites</li>\n<li class=\"\"><strong>Stopped</strong> : Ne consomme pas les heures gratuites, mais facturé pour EBS (~$0.10 par Go/mois)</li>\n<li class=\"\"><strong>Terminated</strong> : Pas de frais</li>\n</ul>\n<p>Pour une instance de test à court terme (une journée d'apprentissage), il est judicieux de <strong>Terminate</strong> pour éviter les frais EBS. Pour une instance que vous revisiterez plus tard, <strong>Stop</strong> pour la conserver à bas coût.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"commandes-via-la-console\">Commandes via la console<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#commandes-via-la-console\" class=\"hash-link\" aria-label=\"Direct link to Commandes via la console\" title=\"Direct link to Commandes via la console\" translate=\"no\">​</a></h3>\n<p><strong>Arrêter (Stop) l'instance :</strong></p>\n<ol>\n<li class=\"\">Allez à EC2 → Instances</li>\n<li class=\"\">Sélectionnez votre instance</li>\n<li class=\"\">Clic-droit → Instance State → Stop</li>\n<li class=\"\">Confirmez l'arrêt</li>\n<li class=\"\">L'état change à \"Stopped\" en quelques secondes</li>\n</ol>\n<p><strong>Redémarrer (Start) l'instance :</strong></p>\n<ol>\n<li class=\"\">Allez à EC2 → Instances</li>\n<li class=\"\">Sélectionnez votre instance (état \"Stopped\")</li>\n<li class=\"\">Clic-droit → Instance State → Start</li>\n<li class=\"\">L'instance redémarre, les données persistent</li>\n</ol>\n<p><strong>Supprimer (Terminate) l'instance :</strong></p>\n<ol>\n<li class=\"\">Allez à EC2 → Instances</li>\n<li class=\"\">Sélectionnez votre instance</li>\n<li class=\"\">Clic-droit → Instance State → Terminate</li>\n<li class=\"\">Confirmez la suppression (attention : irréversible)</li>\n<li class=\"\">L'instance disparaît après quelques secondes</li>\n</ol>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"impact-sur-les-données\">Impact sur les données<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#impact-sur-les-donn%C3%A9es\" class=\"hash-link\" aria-label=\"Direct link to Impact sur les données\" title=\"Direct link to Impact sur les données\" translate=\"no\">​</a></h3>\n<p>Le comportement des données dépend du type de stockage :</p>\n<ul>\n<li class=\"\"><strong>Volume EBS racine</strong> : Par défaut configuré à être supprimé avec l'instance. On peut le modifier lors du lancement pour le conserver.</li>\n<li class=\"\"><strong>Volumes EBS supplémentaires</strong> : Conservés indépendamment de l'instance, facturable séparément.</li>\n<li class=\"\"><strong>Stockage local de l'instance (ephemeral)</strong> : Perdu lors de l'arrêt ou la suppression.</li>\n</ul>\n<p>Pour conserver des données importantes sans l'instance, transférez-les vers S3 (stockage objet) ou sur un volume EBS séparé.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques\">Bonnes pratiques<a href=\"https://delpeuch.net/blog/2026/02/19/05-cloud/ec2#bonnes-pratiques\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques\" title=\"Direct link to Bonnes pratiques\" translate=\"no\">​</a></h3>\n<p>Pour débuter avec le Free Tier :</p>\n<ul>\n<li class=\"\"><strong>Terminate</strong> les instances de test après usage pour éviter les frais EBS</li>\n<li class=\"\"><strong>Stop</strong> les instances que vous réutiliserez régulièrement</li>\n<li class=\"\"><strong>Configurez des alarmes de coûts</strong> pour détecter les dépassements accidentels</li>\n<li class=\"\"><strong>Taguez clairement</strong> les instances (\"Test\", \"Production\", etc.) pour savoir lesquelles arrêter</li>\n</ul>\n<p>Une fois familiarisé avec les bases, arrêter votre instance actuelle vous évitera des frais inattendus sur votre Free Tier.</p>\n<hr>",
            "url": "https://delpeuch.net/blog/2026/02/19/05-cloud/ec2",
            "title": "AWS : Free Tier, EC2 et IAM",
            "summary": "Maîtrise des fondamentaux AWS : création de compte, modèle IAM, lancement et gestion d'instances EC2.",
            "date_modified": "2026-02-19T00:00:00.000Z",
            "tags": [
                "Cloud",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm",
            "content_html": "<p>Docker Swarm est le système d'orchestration natif de Docker qui permet de gérer un cluster de conteneurs de manière simple et intégrée. Contrairement à Kubernetes, Swarm est plus léger et plus facile à configurer, le rendant idéal pour les petits à moyens déploiements.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-que-docker-swarm-\">Qu'est-ce que Docker Swarm ?<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#quest-ce-que-docker-swarm-\" class=\"hash-link\" aria-label=\"Direct link to Qu'est-ce que Docker Swarm ?\" title=\"Direct link to Qu'est-ce que Docker Swarm ?\" translate=\"no\">​</a></h2>\n<p>Docker Swarm est un mode de clustering intégré directement dans Docker qui transforme plusieurs machines Docker en un seul cluster logique. Il offre :</p>\n<ul>\n<li class=\"\"><strong>Gestion distribuée</strong> : Coordination automatique des conteneurs sur plusieurs nœuds</li>\n<li class=\"\"><strong>Haute disponibilité</strong> : Réplication des services et basculement automatique</li>\n<li class=\"\"><strong>Load balancing</strong> : Distribution automatique du trafic</li>\n<li class=\"\"><strong>Sécurité native</strong> : Chiffrement TLS automatique et gestion des secrets</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"architecture-de-docker-swarm\">Architecture de Docker Swarm<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#architecture-de-docker-swarm\" class=\"hash-link\" aria-label=\"Direct link to Architecture de Docker Swarm\" title=\"Direct link to Architecture de Docker Swarm\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"composants-principaux\">Composants principaux<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#composants-principaux\" class=\"hash-link\" aria-label=\"Direct link to Composants principaux\" title=\"Direct link to Composants principaux\" translate=\"no\">​</a></h3>\n<p><strong>Manager Nodes</strong> (Nœuds gestionnaires)</p>\n<ul>\n<li class=\"\">Gèrent l'état du cluster</li>\n<li class=\"\">Maintiennent la base de données distribuée (raft)</li>\n<li class=\"\">Orchestre les services</li>\n<li class=\"\">Élection leader automatique</li>\n</ul>\n<p><strong>Worker Nodes</strong> (Nœuds de travail)</p>\n<ul>\n<li class=\"\">Exécutent les conteneurs</li>\n<li class=\"\">Reçoivent les tâches du manager</li>\n<li class=\"\">Rapportent leur état au manager</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"initialiser-un-swarm\">Initialiser un Swarm<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#initialiser-un-swarm\" class=\"hash-link\" aria-label=\"Direct link to Initialiser un Swarm\" title=\"Direct link to Initialiser un Swarm\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-un-premier-nœud-manager\">Créer un premier nœud manager<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#cr%C3%A9er-un-premier-n%C5%93ud-manager\" class=\"hash-link\" aria-label=\"Direct link to Créer un premier nœud manager\" title=\"Direct link to Créer un premier nœud manager\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> swarm init</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Cela initie le swarm et retourne un token pour ajouter d'autres nœuds :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">Swarm initialized</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> current node </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">id</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">is</span><span class=\"token plain\"> now a manager</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">To add a worker to this swarm</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> run the following command</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    docker swarm join </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token plain\">token SWMTKN</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token plain\">xxx </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&lt;</span><span class=\"token plain\">MANAGER_IP</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2377</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ajouter-des-nœuds-workers\">Ajouter des nœuds workers<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#ajouter-des-n%C5%93uds-workers\" class=\"hash-link\" aria-label=\"Direct link to Ajouter des nœuds workers\" title=\"Direct link to Ajouter des nœuds workers\" translate=\"no\">​</a></h3>\n<p>Sur une autre machine :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> swarm </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">join</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--token</span><span class=\"token plain\"> SWMTKN-1-xxx </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&lt;</span><span class=\"token plain\">MANAGER_IP</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\">:2377</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"vérifier-le-cluster\">Vérifier le cluster<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#v%C3%A9rifier-le-cluster\" class=\"hash-link\" aria-label=\"Direct link to Vérifier le cluster\" title=\"Direct link to Vérifier le cluster\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">node</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ls</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"déployer-des-services\">Déployer des Services<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#d%C3%A9ployer-des-services\" class=\"hash-link\" aria-label=\"Direct link to Déployer des Services\" title=\"Direct link to Déployer des Services\" translate=\"no\">​</a></h2>\n<p>Les services Swarm remplacent les conteneurs simples dans un cluster. Ils garantissent que le nombre de répliques souhaité est toujours en exécution.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-un-service-simple\">Créer un service simple<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#cr%C3%A9er-un-service-simple\" class=\"hash-link\" aria-label=\"Direct link to Créer un service simple\" title=\"Direct link to Créer un service simple\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">service</span><span class=\"token plain\"> create </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--name</span><span class=\"token plain\"> web-app </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--replicas</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-p</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">80</span><span class=\"token plain\">:8080 </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  nginx:latest</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"lister-les-services\">Lister les services<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#lister-les-services\" class=\"hash-link\" aria-label=\"Direct link to Lister les services\" title=\"Direct link to Lister les services\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">service</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ls</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"voir-les-tâches-dun-service\">Voir les tâches d'un service<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#voir-les-t%C3%A2ches-dun-service\" class=\"hash-link\" aria-label=\"Direct link to Voir les tâches d'un service\" title=\"Direct link to Voir les tâches d'un service\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">service</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ps</span><span class=\"token plain\"> web-app</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"gestion-des-services\">Gestion des Services<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#gestion-des-services\" class=\"hash-link\" aria-label=\"Direct link to Gestion des Services\" title=\"Direct link to Gestion des Services\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"mettre-à-jour-un-service\">Mettre à jour un service<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#mettre-%C3%A0-jour-un-service\" class=\"hash-link\" aria-label=\"Direct link to Mettre à jour un service\" title=\"Direct link to Mettre à jour un service\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">service</span><span class=\"token plain\"> update </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--image</span><span class=\"token plain\"> nginx:alpine </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  web-app</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"redimensionner-un-service\">Redimensionner un service<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#redimensionner-un-service\" class=\"hash-link\" aria-label=\"Direct link to Redimensionner un service\" title=\"Direct link to Redimensionner un service\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">service</span><span class=\"token plain\"> scale web-app</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"supprimer-un-service\">Supprimer un service<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#supprimer-un-service\" class=\"hash-link\" aria-label=\"Direct link to Supprimer un service\" title=\"Direct link to Supprimer un service\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">service</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">rm</span><span class=\"token plain\"> web-app</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-avec-docker-compose\">Configuration avec Docker Compose<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#configuration-avec-docker-compose\" class=\"hash-link\" aria-label=\"Direct link to Configuration avec Docker Compose\" title=\"Direct link to Configuration avec Docker Compose\" translate=\"no\">​</a></h2>\n<p>Docker Swarm supporte également le déploiement via Docker Compose avec la command <code>docker stack deploy</code>.</p>\n<p><strong>docker-compose.yml</strong></p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">version</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'3.8'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">services</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">web</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">image</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">alpine</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">ports</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"80:80\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">deploy</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">replicas</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">update_config</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">parallelism</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">delay</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> 10s</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">networks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> webnet</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">image</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> postgres</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">13</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">environment</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">POSTGRES_PASSWORD</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> secret</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">volumes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> db_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">/var/lib/postgresql/data</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">deploy</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">replicas</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">networks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> webnet</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">volumes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">db_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">networks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">webnet</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">driver</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> overlay</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"déployer-la-stack\">Déployer la stack<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#d%C3%A9ployer-la-stack\" class=\"hash-link\" aria-label=\"Direct link to Déployer la stack\" title=\"Direct link to Déployer la stack\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> stack deploy </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-c</span><span class=\"token plain\"> docker-compose.yml myapp</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"consulter-les-stacks\">Consulter les stacks<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#consulter-les-stacks\" class=\"hash-link\" aria-label=\"Direct link to Consulter les stacks\" title=\"Direct link to Consulter les stacks\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> stack </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ls</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> stack </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ps</span><span class=\"token plain\"> myapp</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"gestion-des-secrets\">Gestion des Secrets<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#gestion-des-secrets\" class=\"hash-link\" aria-label=\"Direct link to Gestion des Secrets\" title=\"Direct link to Gestion des Secrets\" translate=\"no\">​</a></h2>\n<p>Docker Swarm offre une gestion native des secrets chiffrés.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-un-secret\">Créer un secret<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#cr%C3%A9er-un-secret\" class=\"hash-link\" aria-label=\"Direct link to Créer un secret\" title=\"Direct link to Créer un secret\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">echo</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"my_secret_password\"</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">|</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> secret create db_password -</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"utiliser-un-secret-dans-un-service\">Utiliser un secret dans un service<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#utiliser-un-secret-dans-un-service\" class=\"hash-link\" aria-label=\"Direct link to Utiliser un secret dans un service\" title=\"Direct link to Utiliser un secret dans un service\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">service</span><span class=\"token plain\"> create </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--name</span><span class=\"token plain\"> myservice </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--secret</span><span class=\"token plain\"> db_password </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-e</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">DB_PASSWORD_FILE</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">/run/secrets/db_password </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  myimage</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"réseaux-overlay\">Réseaux Overlay<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#r%C3%A9seaux-overlay\" class=\"hash-link\" aria-label=\"Direct link to Réseaux Overlay\" title=\"Direct link to Réseaux Overlay\" translate=\"no\">​</a></h2>\n<p>Les réseaux overlay permettent la communication entre conteneurs sur différents nœuds.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-un-réseau-overlay\">Créer un réseau overlay<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#cr%C3%A9er-un-r%C3%A9seau-overlay\" class=\"hash-link\" aria-label=\"Direct link to Créer un réseau overlay\" title=\"Direct link to Créer un réseau overlay\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> network create </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-d</span><span class=\"token plain\"> overlay </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--attachable</span><span class=\"token plain\"> mynetwork</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"connecter-un-service-à-un-réseau\">Connecter un service à un réseau<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#connecter-un-service-%C3%A0-un-r%C3%A9seau\" class=\"hash-link\" aria-label=\"Direct link to Connecter un service à un réseau\" title=\"Direct link to Connecter un service à un réseau\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">service</span><span class=\"token plain\"> create </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--name</span><span class=\"token plain\"> web </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--network</span><span class=\"token plain\"> mynetwork </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  nginx</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"avantages-et-limitations\">Avantages et Limitations<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#avantages-et-limitations\" class=\"hash-link\" aria-label=\"Direct link to Avantages et Limitations\" title=\"Direct link to Avantages et Limitations\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"-avantages\">✅ Avantages<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#-avantages\" class=\"hash-link\" aria-label=\"Direct link to ✅ Avantages\" title=\"Direct link to ✅ Avantages\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\">Intégration native avec Docker</li>\n<li class=\"\">Configuration simple et rapide</li>\n<li class=\"\">Parfait pour petits/moyens clusters</li>\n<li class=\"\">Faible overhead de ressources</li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"-limitations\">❌ Limitations<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#-limitations\" class=\"hash-link\" aria-label=\"Direct link to ❌ Limitations\" title=\"Direct link to ❌ Limitations\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\">Moins de fonctionnalités que Kubernetes</li>\n<li class=\"\">Pas d'autoscaling sophistiqué</li>\n<li class=\"\">Scheduling moins flexible</li>\n<li class=\"\">Écosystème moins riche</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quand-utiliser-docker-swarm-\">Quand utiliser Docker Swarm ?<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#quand-utiliser-docker-swarm-\" class=\"hash-link\" aria-label=\"Direct link to Quand utiliser Docker Swarm ?\" title=\"Direct link to Quand utiliser Docker Swarm ?\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><strong>Clusters petits à moyens</strong> (&lt; 50 nœuds)</li>\n<li class=\"\"><strong>Déploiements simples</strong> sans besoins complexes</li>\n<li class=\"\"><strong>Équipes</strong> préférant la simplicité à la puissance</li>\n<li class=\"\"><strong>Prototypage rapide</strong> et POC</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion\">Conclusion<a href=\"https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm#conclusion\" class=\"hash-link\" aria-label=\"Direct link to Conclusion\" title=\"Direct link to Conclusion\" translate=\"no\">​</a></h2>\n<p>Docker Swarm reste une excellente option pour l'orchestration de conteneurs quand on privilégie la simplicité. Pour des déploiements plus complexes et à grande échelle, Kubernetes reste le choix de référence. Le choix entre les deux dépend vraiment des besoins spécifiques du projet.</p>",
            "url": "https://delpeuch.net/blog/2026/02/15/06-orchestration/docker-swarm",
            "title": "Docker Swarm",
            "summary": "Introduction à Docker Swarm, l'orchestrateur natif de Docker. Découvrez comment déployer et gérer des clusters de conteneurs.",
            "date_modified": "2026-02-15T00:00:00.000Z",
            "tags": [
                "Orchestration",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python",
            "content_html": "<p>Publier son code Python sur PyPI c'est le rendre accessible à des milliers de développeurs. Exploration des concepts fondamentaux du packaging Python.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-quun-package-python-\">Qu'est-ce qu'un Package Python ?<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#quest-ce-quun-package-python-\" class=\"hash-link\" aria-label=\"Direct link to Qu'est-ce qu'un Package Python ?\" title=\"Direct link to Qu'est-ce qu'un Package Python ?\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"différence--module-vs-package\">Différence : Module vs Package<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#diff%C3%A9rence--module-vs-package\" class=\"hash-link\" aria-label=\"Direct link to Différence : Module vs Package\" title=\"Direct link to Différence : Module vs Package\" translate=\"no\">​</a></h3>\n<p><strong>Module</strong> : Un fichier Python unique</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">calculator</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># C'est un module</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Package</strong> : Un dossier contenant des modules</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">calculator</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── __init__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Marque le dossier comme package</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── operations</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── utils</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└── constants</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Le fichier <code>__init__.py</code> est crucial : c'est ce qui dit à Python \"je suis un package\".</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"structure-simple\">Structure simple<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#structure-simple\" class=\"hash-link\" aria-label=\"Direct link to Structure simple\" title=\"Direct link to Structure simple\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">my_package</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── my_package</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">           </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Code source</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── __init__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── core</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   └── utils</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── tests</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">                </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Tests</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── README</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">md</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── LICENSE</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└── pyproject</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">toml        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Configuration de packaging</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"dépendances-du-package\">Dépendances du package<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#d%C3%A9pendances-du-package\" class=\"hash-link\" aria-label=\"Direct link to Dépendances du package\" title=\"Direct link to Dépendances du package\" translate=\"no\">​</a></h3>\n<p>Un package peut dépendre d'autres packages (importés via <code>pip install</code>).</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Dans my_package/core.py</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> requests  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Dépendance externe</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">utils </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> helper  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Dépendance interne</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Ces dépendances externes doivent être déclarées lors du packaging.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"distributions--wheel-vs-source\">Distributions : Wheel vs Source<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#distributions--wheel-vs-source\" class=\"hash-link\" aria-label=\"Direct link to Distributions : Wheel vs Source\" title=\"Direct link to Distributions : Wheel vs Source\" translate=\"no\">​</a></h2>\n<p>Quand on publie un package, on crée deux types de distribution :</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"source-distribution-sdist\">Source Distribution (sdist)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#source-distribution-sdist\" class=\"hash-link\" aria-label=\"Direct link to Source Distribution (sdist)\" title=\"Direct link to Source Distribution (sdist)\" translate=\"no\">​</a></h3>\n<p><strong>Format</strong> : <code>my_package-1.0.0.tar.gz</code> (ou <code>.zip</code>)</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">my_package</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1.0</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">.0</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── my_package</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── __init__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── core</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   └── utils</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── setup</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── README</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">md</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└── pyproject</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">toml</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Avantages</strong> ✅</p>\n<ul>\n<li class=\"\">Contient le code source complet</li>\n<li class=\"\">Portable sur tous les OS/architectures</li>\n<li class=\"\">Permet inspection du code</li>\n</ul>\n<p><strong>Inconvénients</strong> ❌</p>\n<ul>\n<li class=\"\">Installation lente (compilation nécessaire)</li>\n<li class=\"\">Requiert les build tools (compilateur C, etc.)</li>\n<li class=\"\">Plus volumineux</li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"wheel-distribution-bdist_wheel\">Wheel Distribution (bdist_wheel)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#wheel-distribution-bdist_wheel\" class=\"hash-link\" aria-label=\"Direct link to Wheel Distribution (bdist_wheel)\" title=\"Direct link to Wheel Distribution (bdist_wheel)\" translate=\"no\">​</a></h3>\n<p><strong>Format</strong> : <code>my_package-1.0.0-py3-none-any.whl</code> (archive ZIP)</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">my_package</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1.0</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">.0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">dist</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token plain\">info</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── METADATA</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── RECORD</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── entry_points</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">txt</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└── top_level</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">txt</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">my_package</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── __init__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── core</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└── utils</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Avantages</strong> ✅</p>\n<ul>\n<li class=\"\">Installation ultra-rapide (pas de compilation)</li>\n<li class=\"\">Ne requiert que pip</li>\n<li class=\"\">Cohérent sur tous les environnements</li>\n</ul>\n<p><strong>Inconvénients</strong> ❌</p>\n<ul>\n<li class=\"\">Spécifique à une version Python/plateforme</li>\n<li class=\"\">Code pré-compilé (moins d'inspection)</li>\n</ul>\n<p><strong>Verdict</strong> : Toujours publier les deux. Wheel en priorité, source en fallback.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"métadonnées--déclarer-un-package\">Métadonnées : Déclarer un Package<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#m%C3%A9tadonn%C3%A9es--d%C3%A9clarer-un-package\" class=\"hash-link\" aria-label=\"Direct link to Métadonnées : Déclarer un Package\" title=\"Direct link to Métadonnées : Déclarer un Package\" translate=\"no\">​</a></h2>\n<p>Les métadonnées c'est tout ce qu'on doit savoir sur un package : nom, version, dépendances, auteur, licence, etc.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-avec-pyprojecttoml-modern\">Configuration avec pyproject.toml (Modern)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#configuration-avec-pyprojecttoml-modern\" class=\"hash-link\" aria-label=\"Direct link to Configuration avec pyproject.toml (Modern)\" title=\"Direct link to Configuration avec pyproject.toml (Modern)\" translate=\"no\">​</a></h3>\n<p>Depuis PEP 517/518 (2015+), c'est l'approche moderne :</p>\n<div class=\"language-toml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">build-system</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">requires</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"setuptools&gt;=61.0\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"wheel\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">build-backend</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"setuptools.build_meta\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">project</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">name</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"my-awesome-lib\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">version</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"1.0.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">description</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Une libraire incroyable\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">readme</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"README.md\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">requires-python</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"&gt;=3.8\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">license</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">text</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"MIT\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">authors</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">name</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"John Doe\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">email</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"john@example.com\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">keywords</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"awesome\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"library\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"python\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># URLs</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">project.urls</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">Homepage</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"https://github.com/user/my-awesome-lib\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">Documentation</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"https://my-awesome-lib.readthedocs.io\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">Repository</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"https://github.com/user/my-awesome-lib\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Dépendances</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">project.dependencies</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">requests</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"&gt;=2.28.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">pydantic</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"&gt;=1.10\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Dépendances optionnelles</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">project.optional-dependencies</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">database</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"sqlalchemy&gt;=1.4\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"psycopg2&gt;=2.9\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">email</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"aiosmtplib&gt;=2.0\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Scripts CLI</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">project.scripts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">my-cli</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"my_lib.cli:main\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Classifiers</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">project.classifiers</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Development Status :: 4 - Beta\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Intended Audience :: Developers\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"License :: OSI Approved :: MIT License\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Programming Language :: Python :: 3\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Programming Language :: Python :: 3.8\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Programming Language :: Python :: 3.9\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Programming Language :: Python :: 3.10\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-avec-setuppy-legacy\">Configuration avec setup.py (Legacy)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#configuration-avec-setuppy-legacy\" class=\"hash-link\" aria-label=\"Direct link to Configuration avec setup.py (Legacy)\" title=\"Direct link to Configuration avec setup.py (Legacy)\" translate=\"no\">​</a></h3>\n<p>Encore utilisé, particulièrement pour les extensions C :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> setuptools </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> setup</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> find_packages</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">setup</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    name</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"my-awesome-lib\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    version</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"1.0.0\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    description</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Une libraire incroyable\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    author</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"John Doe\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    author_email</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"john@example.com\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    url</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"https://github.com/user/my-awesome-lib\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    long_description</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">open</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"README.md\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">read</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    long_description_content_type</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"text/markdown\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    license</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"MIT\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    packages</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">find_packages</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    python_requires</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"&gt;=3.8\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    install_requires</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"requests&gt;=2.28.0\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"pydantic&gt;=1.10\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    extras_require</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"database\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"sqlalchemy&gt;=1.4\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"psycopg2&gt;=2.9\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"email\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"aiosmtplib&gt;=2.0\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    entry_points</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"console_scripts\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"my-cli=my_lib.cli:main\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    classifiers</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Development Status :: 4 - Beta\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Intended Audience :: Developers\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"License :: OSI Approved :: MIT License\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Programming Language :: Python :: 3.8\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-avec-setupcfg-alternative\">Configuration avec setup.cfg (Alternative)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#configuration-avec-setupcfg-alternative\" class=\"hash-link\" aria-label=\"Direct link to Configuration avec setup.cfg (Alternative)\" title=\"Direct link to Configuration avec setup.cfg (Alternative)\" translate=\"no\">​</a></h3>\n<p>Format INI, utile pour projects complexes :</p>\n<div class=\"language-ini codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-ini codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">[metadata]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">name = my-awesome-lib</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">version = 1.0.0</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">description = Une libraire incroyable</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">author = John Doe</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">author_email = john@example.com</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">url = https://github.com/user/my-awesome-lib</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">long_description = file: README.md</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">long_description_content_type = text/markdown</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">license = MIT</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">[options]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">packages = find:</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">python_requires = &gt;=3.8</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">install_requires =</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    requests&gt;=2.28.0</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    pydantic&gt;=1.10</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">[options.extras_require]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">database =</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    sqlalchemy&gt;=1.4</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    psycopg2&gt;=2.9</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">email =</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    aiosmtplib&gt;=2.0</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">[options.entry_points]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">console_scripts =</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    my-cli = my_lib.cli:main</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"building--créer-les-distributions\">Building : Créer les Distributions<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#building--cr%C3%A9er-les-distributions\" class=\"hash-link\" aria-label=\"Direct link to Building : Créer les Distributions\" title=\"Direct link to Building : Créer les Distributions\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installer-les-outils\">Installer les outils<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#installer-les-outils\" class=\"hash-link\" aria-label=\"Direct link to Installer les outils\" title=\"Direct link to Installer les outils\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> setuptools wheel build</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><code>build</code> est l'outil moderne et recommandé pour créer distributions.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-wheel--sdist\">Créer wheel + sdist<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#cr%C3%A9er-wheel--sdist\" class=\"hash-link\" aria-label=\"Direct link to Créer wheel + sdist\" title=\"Direct link to Créer wheel + sdist\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">python </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-m</span><span class=\"token plain\"> build</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Génère dans le dossier <code>dist/</code> :</p>\n<ul>\n<li class=\"\"><code>my_package-1.0.0-py3-none-any.whl</code></li>\n<li class=\"\"><code>my_package-1.0.0.tar.gz</code></li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"vérifier-la-distribution\">Vérifier la distribution<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#v%C3%A9rifier-la-distribution\" class=\"hash-link\" aria-label=\"Direct link to Vérifier la distribution\" title=\"Direct link to Vérifier la distribution\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Lister le contenu du wheel</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">unzip</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-l</span><span class=\"token plain\"> dist/my_package-1.0.0-py3-none-any.whl</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Lister le contenu du sdist</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">tar</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-tzf</span><span class=\"token plain\"> dist/my_package-1.0.0.tar.gz</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pypi--la-registry-centrale\">PyPI : La Registry Centrale<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#pypi--la-registry-centrale\" class=\"hash-link\" aria-label=\"Direct link to PyPI : La Registry Centrale\" title=\"Direct link to PyPI : La Registry Centrale\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-que-pypi-\">Qu'est-ce que PyPI ?<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#quest-ce-que-pypi-\" class=\"hash-link\" aria-label=\"Direct link to Qu'est-ce que PyPI ?\" title=\"Direct link to Qu'est-ce que PyPI ?\" translate=\"no\">​</a></h3>\n<p><strong>Python Package Index</strong> : Registry centrale où vivent tous les packages Python publics.</p>\n<ul>\n<li class=\"\"><strong>URL</strong> : <a href=\"https://pypi.org/\" target=\"_blank\" rel=\"noopener noreferrer\">https://pypi.org</a></li>\n<li class=\"\"><strong>Packages</strong> : Environ 500k packages</li>\n<li class=\"\"><strong>Téléchargements/jour</strong> : Millions</li>\n</ul>\n<p>C'est là qu'on publie avec <code>pip install le-package</code>.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-un-compte\">Créer un compte<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#cr%C3%A9er-un-compte\" class=\"hash-link\" aria-label=\"Direct link to Créer un compte\" title=\"Direct link to Créer un compte\" translate=\"no\">​</a></h3>\n<ol>\n<li class=\"\">Aller sur <a href=\"https://pypi.org/account/register/\" target=\"_blank\" rel=\"noopener noreferrer\">https://pypi.org/account/register/</a></li>\n<li class=\"\">Vérifier l'email</li>\n<li class=\"\">Activer 2FA (recommandé)</li>\n<li class=\"\">Générer un token API : <a href=\"https://pypi.org/account/tokens/\" target=\"_blank\" rel=\"noopener noreferrer\">https://pypi.org/account/tokens/</a></li>\n</ol>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"testpypi--sandbox\">TestPyPI : Sandbox<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#testpypi--sandbox\" class=\"hash-link\" aria-label=\"Direct link to TestPyPI : Sandbox\" title=\"Direct link to TestPyPI : Sandbox\" translate=\"no\">​</a></h3>\n<p>Pour tester avant vraie publication.</p>\n<ul>\n<li class=\"\"><strong>URL</strong> : <a href=\"https://test.pypi.org/\" target=\"_blank\" rel=\"noopener noreferrer\">https://test.pypi.org</a></li>\n<li class=\"\"><strong>Compté séparé</strong> : Faut aussi s'y enregistrer</li>\n<li class=\"\"><strong>Token séparé</strong> : À générer sur <a href=\"https://test.pypi.org/account/tokens/\" target=\"_blank\" rel=\"noopener noreferrer\">https://test.pypi.org/account/tokens/</a></li>\n</ul>\n<p>Utile pour tester le processus de publication sans polluer PyPI.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"publication-sur-pypi\">Publication sur PyPI<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#publication-sur-pypi\" class=\"hash-link\" aria-label=\"Direct link to Publication sur PyPI\" title=\"Direct link to Publication sur PyPI\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-du-cli\">Installation du CLI<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#installation-du-cli\" class=\"hash-link\" aria-label=\"Direct link to Installation du CLI\" title=\"Direct link to Installation du CLI\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> twine</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><code>twine</code> est l'outil de publication, plus robust que <code>python setup.py upload</code> (dépréciée).</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-des-credentials\">Configuration des Credentials<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#configuration-des-credentials\" class=\"hash-link\" aria-label=\"Direct link to Configuration des Credentials\" title=\"Direct link to Configuration des Credentials\" translate=\"no\">​</a></h3>\n<p>Option 1 : Token API (recommandé)</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Dans ~/.pypirc</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">distutils</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">index-servers </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    pypi</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">pypi</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">repository </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> https://upload.pypi.org/legacy/</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">username </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> __token__</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">password </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> pypi-AgEIcHlwaS5vcmc</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">..</span><span class=\"token plain\">.  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Votre token</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Option 2 : Username/password (moins sûr, legacy)</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">pypi</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">username </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> john</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">password </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> mon_mot_de_passe_clair  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Mauvaise idée !</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"publier-sur-testpypi\">Publier sur TestPyPI<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#publier-sur-testpypi\" class=\"hash-link\" aria-label=\"Direct link to Publier sur TestPyPI\" title=\"Direct link to Publier sur TestPyPI\" translate=\"no\">​</a></h3>\n<p>D'abord, ajouter TestPyPI à <code>~/.pypirc</code> :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">distutils</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">index</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token plain\">servers </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    pypi</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    test</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token plain\">pypi</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">test</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token plain\">pypi</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">repository </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> https</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">//</span><span class=\"token plain\">test</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">pypi</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">org</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">legacy</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">username </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> __token__</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">password </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> pypi</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token plain\">AgEIcHlwaS5vcm9qZWN0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Puis publier :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">python </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-m</span><span class=\"token plain\"> twine upload </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--repository</span><span class=\"token plain\"> test-pypi dist/*</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"tester-linstallation\">Tester l'installation<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#tester-linstallation\" class=\"hash-link\" aria-label=\"Direct link to Tester l'installation\" title=\"Direct link to Tester l'installation\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Depuis TestPyPI</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> --index-url https://test.pypi.org/simple/ my-awesome-lib</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Depuis PyPI</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> my-awesome-lib</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"publier-sur-pypi-official\">Publier sur PyPI Official<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#publier-sur-pypi-official\" class=\"hash-link\" aria-label=\"Direct link to Publier sur PyPI Official\" title=\"Direct link to Publier sur PyPI Official\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">python </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-m</span><span class=\"token plain\"> twine upload dist/*</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Ou avec version spécifique :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">python </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-m</span><span class=\"token plain\"> twine upload dist/my_package-1.0.0*</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"semantic-versioning\">Semantic Versioning<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#semantic-versioning\" class=\"hash-link\" aria-label=\"Direct link to Semantic Versioning\" title=\"Direct link to Semantic Versioning\" translate=\"no\">​</a></h2>\n<p>Format : <code>MAJOR.MINOR.PATCH[-pre-release][+build]</code></p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1.0</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">.0</span><span class=\"token plain\">          </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Release stable</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1.0</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">.1</span><span class=\"token plain\">          </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Bugfix (PATCH)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1.1</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">.0</span><span class=\"token plain\">          </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Feature (MINOR)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2.0</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">.0</span><span class=\"token plain\">          </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Breaking change (MAJOR)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1.0</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">.0</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token plain\">beta</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token plain\">   </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Pre-release (beta/alpha/rc)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1.0</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">.0</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">+</span><span class=\"token plain\">build</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Build metadata</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Règles</strong> :</p>\n<ul>\n<li class=\"\"><code>MAJOR</code> : Breaking change, code client doit changer</li>\n<li class=\"\"><code>MINOR</code> : Feature rétro-compatible</li>\n<li class=\"\"><code>PATCH</code> : Bugfix rétro-compatible</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"metadata-complètes\">Metadata complètes<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#metadata-compl%C3%A8tes\" class=\"hash-link\" aria-label=\"Direct link to Metadata complètes\" title=\"Direct link to Metadata complètes\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"initpy\"><strong>init</strong>.py<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#initpy\" class=\"hash-link\" aria-label=\"Direct link to initpy\" title=\"Direct link to initpy\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># my_lib/__init__.py</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">__version__ </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"1.0.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">__author__ </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"John Doe\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">__email__ </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"john@example.com\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">__license__ </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"MIT\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exposer l'API publique</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">core </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> main_function</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">utils </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> helper</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">__all__ </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"main_function\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"helper\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"classifiers-importants\">Classifiers importants<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#classifiers-importants\" class=\"hash-link\" aria-label=\"Direct link to Classifiers importants\" title=\"Direct link to Classifiers importants\" translate=\"no\">​</a></h3>\n<div class=\"language-toml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">project.classifiers</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Status</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Development Status :: 3 - Alpha\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Development Status :: 4 - Beta\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Development Status :: 5 - Production/Stable\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Licence</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"License :: OSI Approved :: MIT License\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"License :: OSI Approved :: Apache Software License\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Public</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Intended Audience :: Developers\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Intended Audience :: System Administrators\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Topics</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Topic :: Software Development\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Topic :: System :: Monitoring\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Python versions</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Programming Language :: Python :: 3\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Programming Language :: Python :: 3.8\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Programming Language :: Python :: 3.9\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Programming Language :: Python :: 3.10\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Programming Language :: Python :: 3.11\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"checklist-avant-publication\">Checklist Avant Publication<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#checklist-avant-publication\" class=\"hash-link\" aria-label=\"Direct link to Checklist Avant Publication\" title=\"Direct link to Checklist Avant Publication\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">✅ Tests passent : <code>pytest</code></li>\n<li class=\"\">✅ Code formaté et linté</li>\n<li class=\"\">✅ Version mise à jour (semantic versioning)</li>\n<li class=\"\">✅ CHANGELOG.md complété</li>\n<li class=\"\">✅ README.md avec instructions d'installation/usage</li>\n<li class=\"\">✅ LICENSE.md présent</li>\n<li class=\"\">✅ Métadonnées complètes dans pyproject.toml/setup.py</li>\n<li class=\"\">✅ Testé sur TestPyPI d'abord</li>\n<li class=\"\">✅ Tag Git : <code>git tag v1.0.0</code></li>\n<li class=\"\">✅ Commit des changements</li>\n<li class=\"\">✅ Build généré : <code>python -m build</code></li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"workflow-complet-avec-setuptools\">Workflow Complet avec setuptools<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#workflow-complet-avec-setuptools\" class=\"hash-link\" aria-label=\"Direct link to Workflow Complet avec setuptools\" title=\"Direct link to Workflow Complet avec setuptools\" translate=\"no\">​</a></h2>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># 1. Initialiser la structure</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">mkdir</span><span class=\"token plain\"> my-awesome-lib </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&amp;&amp;</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">cd</span><span class=\"token plain\"> my-awesome-lib</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">git</span><span class=\"token plain\"> init</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># 2. Créer pyproject.toml et source</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">cat</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> pyproject.toml </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&lt;&lt;</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'EOF'</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">[build-system]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">requires = [\"setuptools&gt;=61.0\", \"wheel\"]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">build-backend = \"setuptools.build_meta\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">[project]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">name = \"my-awesome-lib\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">version = \"1.0.0\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">description = \"Une libraire incroyable\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">requires-python = \"&gt;=3.8\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">dependencies = [\"requests&gt;=2.28.0\"]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">EOF</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">mkdir</span><span class=\"token plain\"> my_lib</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">touch</span><span class=\"token plain\"> my_lib/__init__.py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># 3. Tester le build</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> build</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">python </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-m</span><span class=\"token plain\"> build</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># 4. Vérifier</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> --dry-run dist/my_awesome_lib-1.0.0-py3-none-any.whl</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># 5. Publier sur TestPyPI</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">twine upload </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--repository</span><span class=\"token plain\"> test-pypi dist/*</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># 6. Tester installation</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> --index-url https://test.pypi.org/simple/ my-awesome-lib</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># 7. Publier sur PyPI official</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">twine upload dist/*</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques\">Bonnes Pratiques<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#bonnes-pratiques\" class=\"hash-link\" aria-label=\"Direct link to Bonnes Pratiques\" title=\"Direct link to Bonnes Pratiques\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"dépendances\">Dépendances<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#d%C3%A9pendances\" class=\"hash-link\" aria-label=\"Direct link to Dépendances\" title=\"Direct link to Dépendances\" translate=\"no\">​</a></h3>\n<div class=\"language-toml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># BON : Version mineure fixée</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">requests</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"&gt;=2.28.0,&lt;3.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">pydantic</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"&gt;=1.10,&lt;2.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># MAUVAIS : Pas de limite sup</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">requests</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"&gt;=2.28.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># BON : Version exacte pour stabilité</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">some-critical-lib</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"1.2.3\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"namespace-packages\">Namespace packages<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#namespace-packages\" class=\"hash-link\" aria-label=\"Direct link to Namespace packages\" title=\"Direct link to Namespace packages\" translate=\"no\">​</a></h3>\n<p>Utile si on maintient plusieurs packages liés :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">src</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── mycompany</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── __init__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">empty!</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── lib1</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   │   └── __init__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   └── lib2</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│       └── __init__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<div class=\"language-toml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">tool.setuptools.packages</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">find</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">where</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"src\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Alors <code>from mycompany.lib1 import ...</code> ça marche.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"entry-points--scripts-cli\">Entry points / Scripts CLI<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#entry-points--scripts-cli\" class=\"hash-link\" aria-label=\"Direct link to Entry points / Scripts CLI\" title=\"Direct link to Entry points / Scripts CLI\" translate=\"no\">​</a></h3>\n<div class=\"language-toml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">project.scripts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">my-cli</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"my_lib.cli:main\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">magic-tool</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"my_lib.tools:run_magic\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>L'installation du package rend ces commandes disponibles partout :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> my-awesome-lib</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">my-cli </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--help</span><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Fonctionne!</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">magic-tool config    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Fonctionne!</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"extras--optional-dependencies\">Extras / Optional dependencies<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#extras--optional-dependencies\" class=\"hash-link\" aria-label=\"Direct link to Extras / Optional dependencies\" title=\"Direct link to Extras / Optional dependencies\" translate=\"no\">​</a></h3>\n<div class=\"language-toml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">project.optional-dependencies</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">database</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"sqlalchemy&gt;=1.4\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">email</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"aiosmtplib&gt;=2.0\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">dev</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"pytest\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"black\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"mypy\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Installation sélective :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> my-awesome-lib                    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Bare minimum</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> my-awesome-lib</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">database</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\">          </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># + database</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> my-awesome-lib</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">database,email</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># + database et email</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> my-awesome-lib</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">dev</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\">               </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># + all dev tools</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"alternatives-modernes-optionnel\">Alternatives Modernes (Optionnel)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#alternatives-modernes-optionnel\" class=\"hash-link\" aria-label=\"Direct link to Alternatives Modernes (Optionnel)\" title=\"Direct link to Alternatives Modernes (Optionnel)\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"poetry\">Poetry<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#poetry\" class=\"hash-link\" aria-label=\"Direct link to Poetry\" title=\"Direct link to Poetry\" translate=\"no\">​</a></h3>\n<p>Si vous préférez une approche all-in-one avec lock file :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">poetry new my-lib</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">poetry </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">add</span><span class=\"token plain\"> requests pydantic</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">poetry build </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&amp;&amp;</span><span class=\"token plain\"> poetry publish</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Poetry gère pyproject.toml, dependencies, et publication automatiquement. Idéal si vous aimez la cohésion.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"uv\">uv<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#uv\" class=\"hash-link\" aria-label=\"Direct link to uv\" title=\"Direct link to uv\" translate=\"no\">​</a></h3>\n<p>Package manager ultra-rapide (écrit en Rust) :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">uv pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> requests</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">uv venv</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Remplace pip pour des workflows rapides. Toujours utilise pyproject.toml/setup.py pour packages, juste accélère les installations.</p>\n<p><strong>Les deux restent compatibles avec le système d'emballage standard</strong> (wheel, sdist, PyPI, setuptools). Juste des wrapper/helpers autour.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"résources\">Résources<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#r%C3%A9sources\" class=\"hash-link\" aria-label=\"Direct link to Résources\" title=\"Direct link to Résources\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://packaging.python.org/tutorials/packaging-projects/\" target=\"_blank\" rel=\"noopener noreferrer\">Official Packaging Guide</a></li>\n<li class=\"\"><a href=\"https://setuptools.pypa.io/\" target=\"_blank\" rel=\"noopener noreferrer\">setuptools Documentation</a></li>\n<li class=\"\"><a href=\"https://peps.python.org/pep-0427/\" target=\"_blank\" rel=\"noopener noreferrer\">PEP 427 - Wheel Format</a></li>\n<li class=\"\"><a href=\"https://peps.python.org/pep-0440/\" target=\"_blank\" rel=\"noopener noreferrer\">PEP 440 - Versioning</a></li>\n<li class=\"\"><a href=\"https://pypi.org/classifiers/\" target=\"_blank\" rel=\"noopener noreferrer\">PyPI Classifiers</a></li>\n<li class=\"\"><a href=\"https://twine.readthedocs.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Twine Documentation</a></li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion\">Conclusion<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python#conclusion\" class=\"hash-link\" aria-label=\"Direct link to Conclusion\" title=\"Direct link to Conclusion\" translate=\"no\">​</a></h2>\n<p>Le packaging Python s'appuie sur des concepts simples : modules, packages, distributions (wheel/sdist), métadonnées, et PyPI. Une fois qu'on comprend ça, publier son code devient facile. setuptools + twine suffisent pour la plupart des cas. Les alternatives modernes comme Poetry offrent plus de confort mais reposent toujours sur les mêmes fondations.</p>\n<p>À vos pipelines! 🚀</p>",
            "url": "https://delpeuch.net/blog/2026/02/15/09-scripting/packaging-python",
            "title": "Python : Packaging",
            "summary": "Comprendre le packaging Python : qu'est-ce qu'un package, PyPI, wheel, distributions, setuptools, métadonnées et versioning.",
            "date_modified": "2026-02-15T00:00:00.000Z",
            "tags": [
                "Scripting",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing",
            "content_html": "<p>Pytest est le framework de testing le plus populaire en Python. Il offre une syntaxe simple, des fonctionnalités puissantes et une grande flexibilité pour écrire des tests de qualité.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-et-configuration\">Installation et Configuration<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#installation-et-configuration\" class=\"hash-link\" aria-label=\"Direct link to Installation et Configuration\" title=\"Direct link to Installation et Configuration\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installer-pytest\">Installer pytest<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#installer-pytest\" class=\"hash-link\" aria-label=\"Direct link to Installer pytest\" title=\"Direct link to Installer pytest\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> pytest</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Ou avec uv :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">uv pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> pytest</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"structure-basique\">Structure basique<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#structure-basique\" class=\"hash-link\" aria-label=\"Direct link to Structure basique\" title=\"Direct link to Structure basique\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">project</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── src</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   └── mymodule</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── tests</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── __init__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── test_mymodule</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   └── conftest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└── pytest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">ini</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"tests-simples\">Tests Simples<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#tests-simples\" class=\"hash-link\" aria-label=\"Direct link to Tests Simples\" title=\"Direct link to Tests Simples\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"première-fonction\">Première fonction<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#premi%C3%A8re-fonction\" class=\"hash-link\" aria-label=\"Direct link to Première fonction\" title=\"Direct link to Première fonction\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># src/calculator.py</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">add</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">a</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> b</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> a </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">+</span><span class=\"token plain\"> b</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">multiply</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">a</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> b</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> a </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">*</span><span class=\"token plain\"> b</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"écrire-des-tests\">Écrire des tests<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#%C3%A9crire-des-tests\" class=\"hash-link\" aria-label=\"Direct link to Écrire des tests\" title=\"Direct link to Écrire des tests\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># tests/test_calculator.py</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> src</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">calculator </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> add</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> multiply</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_add</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> add</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_add_negative</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> add</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_multiply</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> multiply</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">4</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">12</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"lancer-les-tests\">Lancer les tests<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#lancer-les-tests\" class=\"hash-link\" aria-label=\"Direct link to Lancer les tests\" title=\"Direct link to Lancer les tests\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Tous les tests</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pytest</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Fichier spécifique</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pytest tests/test_calculator.py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Test spécifique</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pytest tests/test_calculator.py::test_add</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Verbose</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pytest </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-v</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Avec couverture</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pytest </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--cov</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">src</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"assertions\">Assertions<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#assertions\" class=\"hash-link\" aria-label=\"Direct link to Assertions\" title=\"Direct link to Assertions\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"assertions-de-base\">Assertions de base<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#assertions-de-base\" class=\"hash-link\" aria-label=\"Direct link to Assertions de base\" title=\"Direct link to Assertions de base\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_assertions</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Égalité</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Inégalité</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">!=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Comparaisons</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&lt;=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérité</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:hsl(29, 54%, 61%)\">True</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">not</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:hsl(29, 54%, 61%)\">False</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Contenance</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"hello\"</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">in</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"hello world\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">in</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"messages-personnalisés\">Messages personnalisés<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#messages-personnalis%C3%A9s\" class=\"hash-link\" aria-label=\"Direct link to Messages personnalisés\" title=\"Direct link to Messages personnalisés\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_with_message</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> add</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">f\"Expected 5, got </span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string-interpolation interpolation\">result</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"assertions-sur-les-exceptions\">Assertions sur les exceptions<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#assertions-sur-les-exceptions\" class=\"hash-link\" aria-label=\"Direct link to Assertions sur les exceptions\" title=\"Direct link to Assertions sur les exceptions\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> pytest</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">divide</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">a</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> b</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">if</span><span class=\"token plain\"> b </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">raise</span><span class=\"token plain\"> ValueError</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Division by zero\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> a </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"> b</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_division_by_zero</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">with</span><span class=\"token plain\"> pytest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">raises</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">ValueError</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        divide</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">10</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier le message</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">with</span><span class=\"token plain\"> pytest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">raises</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">ValueError</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">match</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Division by zero\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        divide</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">10</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fixtures\">Fixtures<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#fixtures\" class=\"hash-link\" aria-label=\"Direct link to Fixtures\" title=\"Direct link to Fixtures\" translate=\"no\">​</a></h2>\n<p>Les fixtures fournissent des données/ressources réutilisables pour les tests.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fixture-simple\">Fixture simple<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#fixture-simple\" class=\"hash-link\" aria-label=\"Direct link to Fixture simple\" title=\"Direct link to Fixture simple\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> pytest</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">fixture</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sample_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"name\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"John\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"age\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">30</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_with_fixture</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">sample_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> sample_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"name\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"John\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> sample_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"age\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">30</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fixture-avec-setupteardown\">Fixture avec setup/teardown<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#fixture-avec-setupteardown\" class=\"hash-link\" aria-label=\"Direct link to Fixture avec setup/teardown\" title=\"Direct link to Fixture avec setup/teardown\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">fixture</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">database</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Setup</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    db </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> create_connection</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">yield</span><span class=\"token plain\"> db  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Le test s'exécute ici</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Teardown</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">close</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_database_query</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">database</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> database</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">query</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"SELECT * FROM users\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">len</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">result</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fixtures-conftestpy-partage\">Fixtures conftest.py (partage)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#fixtures-conftestpy-partage\" class=\"hash-link\" aria-label=\"Direct link to Fixtures conftest.py (partage)\" title=\"Direct link to Fixtures conftest.py (partage)\" translate=\"no\">​</a></h3>\n<p>Les fixtures dans <code>conftest.py</code> sont disponibles pour tous les tests du projet.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># tests/conftest.py</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> pytest</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">fixture</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">scope</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"session\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">app</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token triple-quoted-string string\" style=\"color:hsl(95, 38%, 62%)\">\"\"\"Partagée pour toute la session de test\"\"\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> create_app</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">fixture</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">scope</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"module\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">app</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token triple-quoted-string string\" style=\"color:hsl(95, 38%, 62%)\">\"\"\"Partagée pour tout le module\"\"\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> app</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">test_client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">fixture</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">scope</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"function\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">temp_file</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token triple-quoted-string string\" style=\"color:hsl(95, 38%, 62%)\">\"\"\"Nouvelle instance pour chaque test (par défaut)\"\"\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">file</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">open</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"temp.txt\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"w\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">yield</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">file</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">file</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">close</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"parametrization\">Parametrization<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#parametrization\" class=\"hash-link\" aria-label=\"Direct link to Parametrization\" title=\"Direct link to Parametrization\" translate=\"no\">​</a></h2>\n<p>Tester une fonction avec plusieurs jeux de données.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pytestmarkparametrize\">@pytest.mark.parametrize<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#pytestmarkparametrize\" class=\"hash-link\" aria-label=\"Direct link to @pytest.mark.parametrize\" title=\"Direct link to @pytest.mark.parametrize\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">parametrize</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"input,expected\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">4</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">9</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">25</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">4</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_square</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">input</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> expected</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">input</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">**</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> expected</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"parametrization-multiple\">Parametrization multiple<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#parametrization-multiple\" class=\"hash-link\" aria-label=\"Direct link to Parametrization multiple\" title=\"Direct link to Parametrization multiple\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">parametrize</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"a,b,expected\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">10</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_add_multiple</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">a</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> b</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> expected</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> add</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">a</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> b</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> expected</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"combinaison-avec-fixtures\">Combinaison avec fixtures<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#combinaison-avec-fixtures\" class=\"hash-link\" aria-label=\"Direct link to Combinaison avec fixtures\" title=\"Direct link to Combinaison avec fixtures\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">parametrize</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"username\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"alice\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"bob\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"charlie\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_user_creation</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> username</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    response </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">post</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"/users\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> json</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"name\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> username</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">status_code </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">201</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"mocking-avec-unittestmock\">Mocking avec unittest.mock<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#mocking-avec-unittestmock\" class=\"hash-link\" aria-label=\"Direct link to Mocking avec unittest.mock\" title=\"Direct link to Mocking avec unittest.mock\" translate=\"no\">​</a></h2>\n<p>Remplacer des dépendances pour isoler le code testé.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"mock-simple\">Mock simple<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#mock-simple\" class=\"hash-link\" aria-label=\"Direct link to Mock simple\" title=\"Direct link to Mock simple\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> unittest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">mock </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> patch</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> MagicMock</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> requests</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">fetch_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">url</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    response </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> requests</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">url</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@patch</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'requests.get'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_fetch_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">mock_get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    mock_get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">return_value</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">return_value </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"name\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"John\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> fetch_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"http://example.com/api/user\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> result</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"name\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"John\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"mock-avec-side_effect\">Mock avec side_effect<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#mock-avec-side_effect\" class=\"hash-link\" aria-label=\"Direct link to Mock avec side_effect\" title=\"Direct link to Mock avec side_effect\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@patch</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'requests.get'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_fetch_data_error</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">mock_get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    mock_get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">side_effect </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> requests</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">ConnectionError</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Connection failed\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">with</span><span class=\"token plain\"> pytest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">raises</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">requests</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">ConnectionError</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        fetch_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"http://example.com/api/user\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"vérifier-les-appels\">Vérifier les appels<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#v%C3%A9rifier-les-appels\" class=\"hash-link\" aria-label=\"Direct link to Vérifier les appels\" title=\"Direct link to Vérifier les appels\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@patch</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'requests.get'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_api_called_correctly</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">mock_get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    mock_get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">return_value</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">return_value </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    fetch_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"http://example.com/user/1\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier l'appel</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    mock_get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">assert_called_once_with</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"http://example.com/user/1\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> mock_get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">call_count </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pytest-mock-recommandé\">pytest-mock (recommandé)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#pytest-mock-recommand%C3%A9\" class=\"hash-link\" aria-label=\"Direct link to pytest-mock (recommandé)\" title=\"Direct link to pytest-mock (recommandé)\" translate=\"no\">​</a></h2>\n<p>Plugin qui simplifie le mocking.</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> pytest-mock</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_with_mocker</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">mocker</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    mock_get </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> mocker</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">patch</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'requests.get'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    mock_get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">return_value</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">return_value </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"status\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"ok\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> fetch_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"http://example.com\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> result</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"status\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"ok\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"marqueurs-markers\">Marqueurs (Markers)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#marqueurs-markers\" class=\"hash-link\" aria-label=\"Direct link to Marqueurs (Markers)\" title=\"Direct link to Marqueurs (Markers)\" translate=\"no\">​</a></h2>\n<p>Organiser et filtrer les tests.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"marqueurs-intégrés\">Marqueurs intégrés<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#marqueurs-int%C3%A9gr%C3%A9s\" class=\"hash-link\" aria-label=\"Direct link to Marqueurs intégrés\" title=\"Direct link to Marqueurs intégrés\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">skip</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">reason</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Non implémenté\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_feature_new</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">pass</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">skipif</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">sys</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">version_info </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&lt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">9</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> reason</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Python 3.9+\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_new_feature</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">pass</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">xfail</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">reason</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Bug connu\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_buggy_feature</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:hsl(29, 54%, 61%)\">False</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Attendu d'échouer</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"marqueurs-personnalisés\">Marqueurs personnalisés<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#marqueurs-personnalis%C3%A9s\" class=\"hash-link\" aria-label=\"Direct link to Marqueurs personnalisés\" title=\"Direct link to Marqueurs personnalisés\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># pytest.ini</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">pytest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">markers </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    slow</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> tests lents</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    integration</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> tests d'</span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">int</span><span class=\"token plain\">égration</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> tests utilisant la base de données</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Tests</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">slow</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_heavy_computation</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">pass</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">integration</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_api_integration</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">pass</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exécution</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># pytest -m slow</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># pytest -m \"not slow\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># pytest -m \"integration or db\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"plugins-utiles\">Plugins Utiles<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#plugins-utiles\" class=\"hash-link\" aria-label=\"Direct link to Plugins Utiles\" title=\"Direct link to Plugins Utiles\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pytest-cov-couverture\">pytest-cov (Couverture)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#pytest-cov-couverture\" class=\"hash-link\" aria-label=\"Direct link to pytest-cov (Couverture)\" title=\"Direct link to pytest-cov (Couverture)\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> pytest-cov</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pytest </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--cov</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">src --cov-report</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">html</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pytest-asyncio-tests-async\">pytest-asyncio (Tests async)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#pytest-asyncio-tests-async\" class=\"hash-link\" aria-label=\"Direct link to pytest-asyncio (Tests async)\" title=\"Direct link to pytest-asyncio (Tests async)\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> pytest-asyncio</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">asyncio</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_async_function</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> async_add</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pytest-timeout-timeout\">pytest-timeout (Timeout)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#pytest-timeout-timeout\" class=\"hash-link\" aria-label=\"Direct link to pytest-timeout (Timeout)\" title=\"Direct link to pytest-timeout (Timeout)\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> pytest-timeout</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pytest </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--timeout</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">10</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># 10 secondes</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">timeout</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_performance</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">pass</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"structure-dun-bon-test\">Structure d'un Bon Test<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#structure-dun-bon-test\" class=\"hash-link\" aria-label=\"Direct link to Structure d'un Bon Test\" title=\"Direct link to Structure d'un Bon Test\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"aaa-pattern-arrange-act-assert\">AAA Pattern (Arrange, Act, Assert)<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#aaa-pattern-arrange-act-assert\" class=\"hash-link\" aria-label=\"Direct link to AAA Pattern (Arrange, Act, Assert)\" title=\"Direct link to AAA Pattern (Arrange, Act, Assert)\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_user_registration</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Arrange - Préparer les données</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    user_data </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"username\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"alice\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"email\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"alice@example.com\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"password\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"secure123\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Act - Exécuter l'action</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    user </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> register_user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">user_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Assert - Vérifier le résultat</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">username </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"alice\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">email </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"alice@example.com\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">is_active </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">is</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:hsl(29, 54%, 61%)\">True</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-avancée\">Configuration avancée<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#configuration-avanc%C3%A9e\" class=\"hash-link\" aria-label=\"Direct link to Configuration avancée\" title=\"Direct link to Configuration avancée\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pytestini\">pytest.ini<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#pytestini\" class=\"hash-link\" aria-label=\"Direct link to pytest.ini\" title=\"Direct link to pytest.ini\" translate=\"no\">​</a></h3>\n<div class=\"language-ini codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-ini codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">[pytest]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">minversion = 7.0</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">addopts = -v --strict-markers --tb=short</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">testpaths = tests</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">python_files = test_*.py</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">python_classes = Test*</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">python_functions = test_*</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pyprojecttoml\">pyproject.toml<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#pyprojecttoml\" class=\"hash-link\" aria-label=\"Direct link to pyproject.toml\" title=\"Direct link to pyproject.toml\" translate=\"no\">​</a></h3>\n<div class=\"language-toml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">tool.pytest.ini_options</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">minversion</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"7.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">addopts</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"-v --strict-markers --tb=short\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">testpaths</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"tests\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">pythonpath</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\".\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques\">Bonnes Pratiques<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#bonnes-pratiques\" class=\"hash-link\" aria-label=\"Direct link to Bonnes Pratiques\" title=\"Direct link to Bonnes Pratiques\" translate=\"no\">​</a></h2>\n<p>✅ <strong>À faire</strong></p>\n<ul>\n<li class=\"\">Nommer les tests clairement : <code>test_&lt;fonction&gt;_&lt;condition&gt;</code></li>\n<li class=\"\">Un test = une responsabilité</li>\n<li class=\"\">Utiliser des fixtures plutôt que du setup/teardown</li>\n<li class=\"\">Tester les cas normaux et les edge cases</li>\n<li class=\"\">Viser 80%+ de couverture de code</li>\n<li class=\"\">Garder les tests rapides</li>\n</ul>\n<p>❌ <strong>À éviter</strong></p>\n<ul>\n<li class=\"\">Tests dépendants l'un de l'autre</li>\n<li class=\"\">Tests flaky (non-déterministes)</li>\n<li class=\"\">Assertions multiples et sans rapport</li>\n<li class=\"\">Tests trop complexes</li>\n<li class=\"\">Ignorer les erreurs</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-complet\">Exemple Complet<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#exemple-complet\" class=\"hash-link\" aria-label=\"Direct link to Exemple Complet\" title=\"Direct link to Exemple Complet\" translate=\"no\">​</a></h2>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># src/user_service.py</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">UserService</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">__init__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">db </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> db</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">create_user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> username</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> email</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">if</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">not</span><span class=\"token plain\"> username </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">or</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">not</span><span class=\"token plain\"> email</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">raise</span><span class=\"token plain\"> ValueError</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Username and email required\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        user </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"username\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> username</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"email\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> email</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">insert</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> user</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># tests/test_user_service.py</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> pytest</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> unittest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">mock </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> MagicMock</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> src</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">user_service </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> UserService</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">fixture</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">mock_db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> MagicMock</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">fixture</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">mock_db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> UserService</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">mock_db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@pytest</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mark</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">parametrize</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"username,email\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"alice\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"alice@example.com\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"bob\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"bob@example.com\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_create_user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> mock_db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> username</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> email</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    user </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">create_user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">username</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> email</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"username\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> username</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">assert</span><span class=\"token plain\"> user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"email\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> email</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    mock_db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">insert</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">assert_called_once</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_create_user_missing_username</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">with</span><span class=\"token plain\"> pytest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">raises</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">ValueError</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">match</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Username and email required\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">create_user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"test@example.com\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">test_create_user_missing_email</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">with</span><span class=\"token plain\"> pytest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">raises</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">ValueError</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">match</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Username and email required\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">create_user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"alice\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion\">Conclusion<a href=\"https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing#conclusion\" class=\"hash-link\" aria-label=\"Direct link to Conclusion\" title=\"Direct link to Conclusion\" translate=\"no\">​</a></h2>\n<p>Pytest est un outil puissant pour écrire des tests maintenables et fiables. Avec les fixtures, parametrization et mocking, vous pouvez couvrir n'importe quel scénario. Investir dans une bonne suite de tests paie rapidement en termes de confiance et de refactoring sécurisé !</p>",
            "url": "https://delpeuch.net/blog/2026/02/15/09-scripting/pytest-testing",
            "title": "Python : Pytest",
            "summary": "Maîtrisez Pytest, le framework de testing le plus populaire en Python. Fixtures, parametrization, mocking et bonnes pratiques.",
            "date_modified": "2026-02-15T00:00:00.000Z",
            "tags": [
                "Scripting",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2026/01/01/devops-roadmap-2026",
            "content_html": "<p>Voici un résumé de ma roadmap DevOps personnelle pour 2026. Cette roadmap s’appuie sur les réalisations de l’année précédente et vise à approfondir le cloud et l’Infrastructure as Code. Elle évolue au fil des projets, des expérimentations et des apprentissages partagés sur le blog.</p>\n<!-- -->\n<p><img decoding=\"async\" loading=\"lazy\" alt=\"DevOps\" src=\"https://delpeuch.net/assets/images/devops-7e8caa7376b7c423945a1df3b7a1fa48.png\" width=\"446\" height=\"212\" class=\"img_ev3q\"></p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"roadmap-2026\">Roadmap 2026<a href=\"https://delpeuch.net/blog/2026/01/01/devops-roadmap-2026#roadmap-2026\" class=\"hash-link\" aria-label=\"Direct link to Roadmap 2026\" title=\"Direct link to Roadmap 2026\" translate=\"no\">​</a></h2>\n<h3><div style=\"text-align:center\"><span></span><div style=\"padding:2px 16px\"><h2>05 Apprendre un fournisseur de Cloud</h2></div></div></h3>\n<p><a href=\"https://delpeuch.net/blog/tags/cloud\">Cloud</a> Maîtrise des plateformes cloud (AWS, Azure, Google Cloud), gestion des utilisateurs et des permissions (IAM), administration des réseaux privés (VPC) et des serveurs virtuels (EC2). Objectif : automatiser le déploiement, renforcer la sécurité et optimiser la scalabilité des infrastructures.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"-1\"><div style=\"text-align:center\"><span></span><div style=\"padding:2px 16px\"><h2>08 Infrastructure as Code - Terraform</h2></div></div><a href=\"https://delpeuch.net/blog/2026/01/01/devops-roadmap-2026#-1\" class=\"hash-link\" aria-label=\"Direct link to -1\" title=\"Direct link to -1\" translate=\"no\">​</a></h3>\n<p><a href=\"https://delpeuch.net/blog/tags/iac\">Infrastructure as Code</a> Automatisation avancée du provisionnement d’infrastructure avec Terraform, gestion multi-environnements (dev, test, prod), documentation des workflows et partage des bonnes pratiques.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bilan-2025\">Bilan 2025<a href=\"https://delpeuch.net/blog/2026/01/01/devops-roadmap-2026#bilan-2025\" class=\"hash-link\" aria-label=\"Direct link to Bilan 2025\" title=\"Direct link to Bilan 2025\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"-2\"><div style=\"text-align:center\"><span></span><div style=\"padding:2px 16px\"><h2>06 Orchestration de conteneurs - Kubernetes &amp; Docker Swarm</h2></div></div><a href=\"https://delpeuch.net/blog/2026/01/01/devops-roadmap-2026#-2\" class=\"hash-link\" aria-label=\"Direct link to -2\" title=\"Direct link to -2\" translate=\"no\">​</a></h3>\n<p><a href=\"https://delpeuch.net/blog/tags/orchestration\">Orchestration</a> Maîtrise des composants de base, utilisation avancée de la CLI Kubernetes, persistance des données, externalisation des configurations, gestion des accès via Ingress. Voir <a href=\"https://delpeuch.net/docs/projects/professionnel/github-arc-kubeadm\">GitHub ARC Kubeadm</a>.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"-3\"><div style=\"text-align:center\"><span></span><div style=\"padding:2px 16px\"><h2>07 Monitoring &amp; Observabilité</h2></div></div><a href=\"https://delpeuch.net/blog/2026/01/01/devops-roadmap-2026#-3\" class=\"hash-link\" aria-label=\"Direct link to -3\" title=\"Direct link to -3\" translate=\"no\">​</a></h3>\n<p><a href=\"https://delpeuch.net/blog/tags/monitoring\">Observabilité</a> Intégration de Grafana, Prometheus et Loki pour la supervision, la visualisation et la gestion des logs. Mise en place de dashboards, alertes et supervision multi-environnements. Voir <a href=\"https://delpeuch.net/docs/projects/personnel/fervantfactory\">FervantFactory</a>.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"-4\"><div style=\"text-align:center\"><span></span><div style=\"padding:2px 16px\"><h2>08 Infrastructure as Code</h2></div></div><a href=\"https://delpeuch.net/blog/2026/01/01/devops-roadmap-2026#-4\" class=\"hash-link\" aria-label=\"Direct link to -4\" title=\"Direct link to -4\" translate=\"no\">​</a></h3>\n<p><a href=\"https://delpeuch.net/blog/tags/iac\">Infrastructure as Code</a> Automatisation de la configuration et du déploiement avec Ansible, exploration de Terraform, documentation des workflows et partage des bonnes pratiques. Voir <a href=\"https://delpeuch.net/docs/projects/professionnel/cicd\">CI/CD GitHub Actions</a>.</p>",
            "url": "https://delpeuch.net/blog/2026/01/01/devops-roadmap-2026",
            "title": "DevOps Roadmap 2026",
            "summary": "Présentation de ma roadmap DevOps personnelle 2026",
            "date_modified": "2026-01-01T00:00:00.000Z",
            "tags": [
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/12/19/09-scripting/uv-python",
            "content_html": "<p>uv est un gestionnaire de paquets Python nouvelle génération, conçu pour être extrêmement rapide et compatible avec les outils existants comme pip, pip-tools et pipenv. Il vise à accélérer l'installation, la résolution et la gestion des dépendances dans les projets Python, tout en restant simple à utiliser.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pourquoi-utiliser-uv-\">Pourquoi utiliser uv ?<a href=\"https://delpeuch.net/blog/2025/12/19/09-scripting/uv-python#pourquoi-utiliser-uv-\" class=\"hash-link\" aria-label=\"Direct link to Pourquoi utiliser uv ?\" title=\"Direct link to Pourquoi utiliser uv ?\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><strong>Ultra-rapide</strong> : uv est écrit en Rust et surpasse pip en vitesse d'installation et de résolution.</li>\n<li class=\"\"><strong>Compatible</strong> : uv fonctionne avec les fichiers requirements.txt, pip-tools, pipenv, et la plupart des workflows Python existants.</li>\n<li class=\"\"><strong>Gestion de l'environnement</strong> : uv peut créer et gérer des environnements virtuels, simplifiant la configuration des projets.</li>\n<li class=\"\"><strong>Sécurité</strong> : vérification des hashs, isolation des environnements, et gestion fine des dépendances.</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"commandes-principales\">Commandes principales<a href=\"https://delpeuch.net/blog/2025/12/19/09-scripting/uv-python#commandes-principales\" class=\"hash-link\" aria-label=\"Direct link to Commandes principales\" title=\"Direct link to Commandes principales\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><code>uv pip install &lt;package&gt;</code> : Installe un paquet comme pip, mais bien plus vite !</li>\n<li class=\"\"><code>uv venv</code> : Crée un environnement virtuel.</li>\n<li class=\"\"><code>uv pip sync</code> : Synchronise l'environnement avec un fichier requirements.txt.</li>\n<li class=\"\"><code>uv pip compile</code> : Génère un fichier requirements.txt à partir d'un fichier de contraintes.</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-dutilisation\">Exemple d'utilisation<a href=\"https://delpeuch.net/blog/2025/12/19/09-scripting/uv-python#exemple-dutilisation\" class=\"hash-link\" aria-label=\"Direct link to Exemple d'utilisation\" title=\"Direct link to Exemple d'utilisation\" translate=\"no\">​</a></h2>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer un environnement virtuel</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">uv venv</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installer les dépendances</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">uv pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> requests fastapi</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Gérer les dépendances avec pip-tools</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">uv pip compile requirements.in</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">uv pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sync</span><span class=\"token plain\"> requirements.txt</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"avantages-par-rapport-à-pip\">Avantages par rapport à pip<a href=\"https://delpeuch.net/blog/2025/12/19/09-scripting/uv-python#avantages-par-rapport-%C3%A0-pip\" class=\"hash-link\" aria-label=\"Direct link to Avantages par rapport à pip\" title=\"Direct link to Avantages par rapport à pip\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Installation et résolution des dépendances beaucoup plus rapides</li>\n<li class=\"\">Gestion native des environnements virtuels</li>\n<li class=\"\">Compatible avec les outils de l'écosystème Python</li>\n<li class=\"\">Expérience utilisateur moderne (progress bar, logs clairs)</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pour-aller-plus-loin\">Pour aller plus loin<a href=\"https://delpeuch.net/blog/2025/12/19/09-scripting/uv-python#pour-aller-plus-loin\" class=\"hash-link\" aria-label=\"Direct link to Pour aller plus loin\" title=\"Direct link to Pour aller plus loin\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://docs.astral.sh/uv/\" target=\"_blank\" rel=\"noopener noreferrer\">Documentation officielle uv</a></li>\n<li class=\"\"><span style=\"display:inline-flex;gap:0.25rem\"><span></span><a href=\"https://github.com/astral-sh/uv\" target=\"_blank\" rel=\"noopener noreferrer\">Projet GitHub</a></span></li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"uv-vs-poetry\">uv vs Poetry<a href=\"https://delpeuch.net/blog/2025/12/19/09-scripting/uv-python#uv-vs-poetry\" class=\"hash-link\" aria-label=\"Direct link to uv vs Poetry\" title=\"Direct link to uv vs Poetry\" translate=\"no\">​</a></h2>\n<table><thead><tr><th></th><th>uv</th><th>Poetry</th></tr></thead><tbody><tr><td><strong>Vitesse</strong></td><td>Ultra-rapide (Rust)</td><td>Plus lent (Python)</td></tr><tr><td><strong>Compatibilité</strong></td><td>pip, pip-tools, pipenv, requirements.txt</td><td>pyproject.toml uniquement</td></tr><tr><td><strong>Gestion env</strong></td><td>Oui (uv venv)</td><td>Oui (poetry shell/install)</td></tr><tr><td><strong>Résolution</strong></td><td>Rapide, compatible pip-tools</td><td>Avancée, mais plus lente</td></tr><tr><td><strong>Philosophie</strong></td><td>Minimaliste, compatible écosystème</td><td>Tout-en-un, gestion centralisée</td></tr></tbody></table>\n<p>uv est idéal pour ceux qui veulent booster la vitesse et rester compatibles avec l'écosystème pip, tandis que Poetry propose une gestion centralisée et moderne des projets Python.</p>",
            "url": "https://delpeuch.net/blog/2025/12/19/09-scripting/uv-python",
            "title": "Python : uv",
            "summary": "Présentation de uv, un gestionnaire de paquets Python ultra-rapide, compatible pip, pip-tools et pipenv.",
            "date_modified": "2025-12-19T00:00:00.000Z",
            "tags": [
                "Scripting"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting",
            "content_html": "<p>Ruff est un <strong>linter et formatter Python ultra-rapide</strong> écrit en Rust. Il remplace plusieurs outils comme flake8, black, isort et pylint en étant 10 à 100 fois plus rapide. Cet outil simplifie considérablement la chaîne de qualité du code Python.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-que-ruff-\">Qu'est-ce que Ruff ?<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#quest-ce-que-ruff-\" class=\"hash-link\" aria-label=\"Direct link to Qu'est-ce que Ruff ?\" title=\"Direct link to Qu'est-ce que Ruff ?\" translate=\"no\">​</a></h2>\n<p>Ruff est un outil tout-en-un pour la qualité du code Python :</p>\n<ul>\n<li class=\"\"><strong>flake8</strong> (linting)</li>\n<li class=\"\"><strong>black</strong> (formatting)</li>\n<li class=\"\"><strong>isort</strong> (import sorting)</li>\n<li class=\"\"><strong>pylint</strong> (linting avancé)</li>\n</ul>\n<p>Le principal avantage : une performance exceptionnelle grâce à son implémentation en Rust.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation\">Installation<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#installation\" class=\"hash-link\" aria-label=\"Direct link to Installation\" title=\"Direct link to Installation\" translate=\"no\">​</a></h2>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Avec pip</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> ruff</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Avec poetry</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">poetry </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">add</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--group</span><span class=\"token plain\"> dev ruff</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-pyprojecttoml\">Configuration (<code>pyproject.toml</code>)<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#configuration-pyprojecttoml\" class=\"hash-link\" aria-label=\"Direct link to configuration-pyprojecttoml\" title=\"Direct link to configuration-pyprojecttoml\" translate=\"no\">​</a></h2>\n<div class=\"language-toml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">tool.ruff</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">line-length</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">88</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">target-version</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"py310\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">tool.ruff.lint</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Règles activées</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">select</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"E\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># pycodestyle errors</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"W\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># pycodestyle warnings</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"F\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Pyflakes</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"I\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># isort (import sorting)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"N\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># pep8-naming</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"C4\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">   </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># flake8-comprehensions</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"UP\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">   </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># pyupgrade</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Règles ignorées</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">ignore</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"E501\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># line-too-long (géré par formatter)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"W503\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># line-break-before-binary-operator</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">tool.ruff.format</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Identique à black</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">quote-style</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"double\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">indent-style</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"space\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"utilisation-en-ligne-de-commande\">Utilisation en ligne de commande<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#utilisation-en-ligne-de-commande\" class=\"hash-link\" aria-label=\"Direct link to Utilisation en ligne de commande\" title=\"Direct link to Utilisation en ligne de commande\" translate=\"no\">​</a></h2>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier les erreurs sans corriger</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ruff check </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Analyse le répertoire courant et affiche toutes les violations.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Auto-corriger les erreurs détectables</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ruff check </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--fix</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Corrige automatiquement les problèmes qui peuvent l'être (imports, formatting, etc.).</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Formater le code</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ruff </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">format</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Applique les conventions de formatting à tous les fichiers Python.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Combiner vérification et formatting</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ruff check </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--fix</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">.</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&amp;&amp;</span><span class=\"token plain\"> ruff </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">format</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Workflow complet : correction des erreurs puis formatting.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier le formatting sans modifier</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ruff </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">format</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--check</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Utile en CI/CD pour vérifier que le code est bien formaté.</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"intégration-vscode\">Intégration VSCode<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#int%C3%A9gration-vscode\" class=\"hash-link\" aria-label=\"Direct link to Intégration VSCode\" title=\"Direct link to Intégration VSCode\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-de-lextension\">Installation de l'extension<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#installation-de-lextension\" class=\"hash-link\" aria-label=\"Direct link to Installation de l'extension\" title=\"Direct link to Installation de l'extension\" translate=\"no\">​</a></h3>\n<ol>\n<li class=\"\">Ouvrir VSCode</li>\n<li class=\"\">Extensions (Ctrl+Shift+X)</li>\n<li class=\"\">Chercher <strong>\"Ruff\"</strong> (par Astral)</li>\n<li class=\"\">Installer l'extension</li>\n</ol>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-vscode-settingsjson\">Configuration VSCode (<code>settings.json</code>)<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#configuration-vscode-settingsjson\" class=\"hash-link\" aria-label=\"Direct link to configuration-vscode-settingsjson\" title=\"Direct link to configuration-vscode-settingsjson\" translate=\"no\">​</a></h3>\n<div class=\"language-json codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"[python]\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"editor.defaultFormatter\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"charliermarsh.ruff\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"editor.formatOnSave\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:hsl(29, 54%, 61%)\">true</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"editor.codeActionsOnSave\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"source.fixAll.ruff\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"explicit\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"source.organizeImports.ruff\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"explicit\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"ruff.importStrategy\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"fromEnvironment\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"ruff.showNotifications\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"onWarning\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fonctionnalités\">Fonctionnalités<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#fonctionnalit%C3%A9s\" class=\"hash-link\" aria-label=\"Direct link to Fonctionnalités\" title=\"Direct link to Fonctionnalités\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\"><strong>Diagnostic en temps réel</strong> : Erreurs soulignées immédiatement dans l'éditeur</li>\n<li class=\"\"><strong>Auto-fix</strong> : Appui sur Ctrl+S pour formater et corriger le fichier</li>\n<li class=\"\"><strong>Hover info</strong> : Survoler une erreur pour accéder à la documentation</li>\n<li class=\"\"><strong>Command Palette</strong> : <code>Ruff: Fix all auto-fixable problems</code></li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pre-commit-hook\">Pre-commit Hook<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#pre-commit-hook\" class=\"hash-link\" aria-label=\"Direct link to Pre-commit Hook\" title=\"Direct link to Pre-commit Hook\" translate=\"no\">​</a></h2>\n<p>Ajouter Ruff comme vérification automatique avant chaque commit :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># .pre-commit-config.yaml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">repos</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">repo</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> https</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">//github.com/astral</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">sh/ruff</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">pre</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">commit</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">rev</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> v0.5.0</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hooks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">id</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> ruff</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">args</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">fix</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">id</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> ruff</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">format</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Installation du hook :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pre-commit </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"règles-courantes\">Règles courantes<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#r%C3%A8gles-courantes\" class=\"hash-link\" aria-label=\"Direct link to Règles courantes\" title=\"Direct link to Règles courantes\" translate=\"no\">​</a></h2>\n<table><thead><tr><th>Code</th><th>Description</th></tr></thead><tbody><tr><td>E</td><td>PEP 8 errors</td></tr><tr><td>W</td><td>PEP 8 warnings</td></tr><tr><td>F</td><td>Pyflakes (undefined names, unused imports)</td></tr><tr><td>I</td><td>Import sorting</td></tr><tr><td>N</td><td>Naming conventions</td></tr><tr><td>C4</td><td>Comprehensions optimizations</td></tr><tr><td>UP</td><td>Modernize Python syntax</td></tr><tr><td>B</td><td>Bugbear (bugs courants)</td></tr><tr><td>D</td><td>Docstring conventions</td></tr></tbody></table>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"workflow-recommandé\">Workflow recommandé<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#workflow-recommand%C3%A9\" class=\"hash-link\" aria-label=\"Direct link to Workflow recommandé\" title=\"Direct link to Workflow recommandé\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"à-chaque-sauvegarde-vscode\">À chaque sauvegarde (VSCode)<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#%C3%A0-chaque-sauvegarde-vscode\" class=\"hash-link\" aria-label=\"Direct link to À chaque sauvegarde (VSCode)\" title=\"Direct link to À chaque sauvegarde (VSCode)\" translate=\"no\">​</a></h3>\n<p>Format automatique et fix automatique grâce à la configuration VSCode.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"avant-commit-pre-commit-hook\">Avant commit (pre-commit hook)<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#avant-commit-pre-commit-hook\" class=\"hash-link\" aria-label=\"Direct link to Avant commit (pre-commit hook)\" title=\"Direct link to Avant commit (pre-commit hook)\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ruff check </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--fix</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ruff </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">format</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">.</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"en-cicd\">En CI/CD<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#en-cicd\" class=\"hash-link\" aria-label=\"Direct link to En CI/CD\" title=\"Direct link to En CI/CD\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ruff check </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">.</span><span class=\"token plain\">           </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier sans corriger</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ruff </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">format</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--check</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">.</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier le formatting</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-dutilisation\">Exemple d'utilisation<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#exemple-dutilisation\" class=\"hash-link\" aria-label=\"Direct link to Exemple d'utilisation\" title=\"Direct link to Exemple d'utilisation\" translate=\"no\">​</a></h2>\n<p>Soit le fichier <code>main.py</code> avec plusieurs problèmes :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> os</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> sys</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> json</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">calculate</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">x</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">y</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    result</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">x</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">+</span><span class=\"token plain\">y</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> result</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">unused_var </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">42</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Après <code>ruff check --fix . &amp;&amp; ruff format .</code> :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> json</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> os</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> sys</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">calculate</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">x</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> y</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> x </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">+</span><span class=\"token plain\"> y</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> result</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Ruff a automatiquement :</p>\n<ul>\n<li class=\"\">Trié les imports (isort)</li>\n<li class=\"\">Ajouté les espaces autour des opérateurs (black)</li>\n<li class=\"\">Supprimé la variable non utilisée (avec <code>--fix</code>)</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ressources\">Ressources<a href=\"https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting#ressources\" class=\"hash-link\" aria-label=\"Direct link to Ressources\" title=\"Direct link to Ressources\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://docs.astral.sh/ruff/\" target=\"_blank\" rel=\"noopener noreferrer\">Documentation officielle Ruff</a></li>\n<li class=\"\"><a href=\"https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff\" target=\"_blank\" rel=\"noopener noreferrer\">Extension VSCode</a></li>\n<li class=\"\"><a href=\"https://docs.astral.sh/ruff/rules/\" target=\"_blank\" rel=\"noopener noreferrer\">Liste complète des règles</a></li>\n</ul>\n<p>Ruff représente une évolution majeure dans l'écosystème Python, combinant performance et simplicité. Son adoption améliore significativement la productivité des développeurs et la qualité du code.</p>",
            "url": "https://delpeuch.net/blog/2025/12/09/09-scripting/ruff-linting-formatting",
            "title": "Python : Ruff",
            "summary": "Découvrir Ruff, l'outil Python ultra-rapide écrit en Rust pour remplacer flake8, black et isort.",
            "date_modified": "2025-12-09T00:00:00.000Z",
            "tags": [
                "Scripting"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/11/28/08-iac/ansible-vault",
            "content_html": "<p>Ansible Vault est un outil intégré à Ansible permettant de chiffrer et de gérer les secrets (mots de passe, clés, variables sensibles) dans les fichiers de configuration et les playbooks. Cette fonctionnalité est essentielle pour garantir la sécurité des données confidentielles lors de l'automatisation de l'infrastructure.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pourquoi-utiliser-ansible-vault-\">Pourquoi utiliser Ansible Vault ?<a href=\"https://delpeuch.net/blog/2025/11/28/08-iac/ansible-vault#pourquoi-utiliser-ansible-vault-\" class=\"hash-link\" aria-label=\"Direct link to Pourquoi utiliser Ansible Vault ?\" title=\"Direct link to Pourquoi utiliser Ansible Vault ?\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Protéger les mots de passe, clés API et autres secrets dans les fichiers de configuration</li>\n<li class=\"\">Éviter de stocker des informations sensibles en clair dans le dépôt Git</li>\n<li class=\"\">Faciliter la collaboration tout en maintenant la sécurité</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fonctionnalités-principales\">Fonctionnalités principales<a href=\"https://delpeuch.net/blog/2025/11/28/08-iac/ansible-vault#fonctionnalit%C3%A9s-principales\" class=\"hash-link\" aria-label=\"Direct link to Fonctionnalités principales\" title=\"Direct link to Fonctionnalités principales\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Chiffrement et déchiffrement de fichiers YAML ou variables</li>\n<li class=\"\">Modification sécurisée des fichiers chiffrés</li>\n<li class=\"\">Intégration transparente dans les playbooks et rôles Ansible</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"commandes-de-base\">Commandes de base<a href=\"https://delpeuch.net/blog/2025/11/28/08-iac/ansible-vault#commandes-de-base\" class=\"hash-link\" aria-label=\"Direct link to Commandes de base\" title=\"Direct link to Commandes de base\" translate=\"no\">​</a></h2>\n<p>Voici les principales commandes à connaître, avec leurs options utiles :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer un nouveau fichier chiffré</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault create secrets.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Ouvre un éditeur pour saisir le contenu, qui sera chiffré à la sauvegarde.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Chiffrer un fichier existant</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault encrypt group_vars/prod.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Chiffre le fichier en place. Utilisez --vault-id pour gérer plusieurs mots de passe.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Déchiffrer un fichier</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault decrypt secrets.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Remplace le fichier chiffré par sa version en clair.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Modifier un fichier chiffré</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault edit secrets.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Ouvre le fichier dans l'éditeur, le contenu reste chiffré à la sauvegarde.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher le contenu d'un fichier chiffré sans le déchiffrer sur disque</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault view secrets.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Changer le mot de passe d'un fichier Vault</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault rekey secrets.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Permet de modifier le mot de passe utilisé pour le chiffrement.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exécuter un playbook en utilisant Vault</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook playbook.yml --ask-vault-pass</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Demande le mot de passe Vault à l'exécution. Utilisez --vault-id pour des cas avancés.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Utiliser plusieurs Vault ID (pour plusieurs mots de passe)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook playbook.yml --vault-id prod@prompt --vault-id dev@prompt</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-dutilisation-dans-un-playbook\">Exemple d'utilisation dans un playbook<a href=\"https://delpeuch.net/blog/2025/11/28/08-iac/ansible-vault#exemple-dutilisation-dans-un-playbook\" class=\"hash-link\" aria-label=\"Direct link to Exemple d'utilisation dans un playbook\" title=\"Direct link to Exemple d'utilisation dans un playbook\" translate=\"no\">​</a></h2>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> all</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">vars_files</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> secrets.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Afficher une variable secrète</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">debug</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">msg</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Le mot de passe est : {{ vault_password }}\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques\">Bonnes pratiques<a href=\"https://delpeuch.net/blog/2025/11/28/08-iac/ansible-vault#bonnes-pratiques\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques\" title=\"Direct link to Bonnes pratiques\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Utiliser des fichiers Vault pour toutes les variables sensibles</li>\n<li class=\"\">Ne jamais stocker le mot de passe Vault dans le dépôt</li>\n<li class=\"\">Changer régulièrement le mot de passe Vault</li>\n<li class=\"\">Limiter l'accès aux fichiers Vault aux personnes autorisées</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pour-aller-plus-loin\">Pour aller plus loin<a href=\"https://delpeuch.net/blog/2025/11/28/08-iac/ansible-vault#pour-aller-plus-loin\" class=\"hash-link\" aria-label=\"Direct link to Pour aller plus loin\" title=\"Direct link to Pour aller plus loin\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Rotation des secrets</li>\n<li class=\"\">Utilisation de Vault ID pour gérer plusieurs mots de passe</li>\n<li class=\"\">Intégration avec des outils externes de gestion de secrets</li>\n</ul>\n<p>Ansible Vault est un outil simple mais puissant pour renforcer la sécurité des automatisations. Il s'intègre naturellement dans les workflows DevOps et permet de respecter les bonnes pratiques de gestion des secrets.</p>",
            "url": "https://delpeuch.net/blog/2025/11/28/08-iac/ansible-vault",
            "title": "Ansible : Vault",
            "summary": "Introduction à Ansible Vault pour la gestion sécurisée des secrets dans les playbooks Ansible.",
            "date_modified": "2025-11-28T00:00:00.000Z",
            "tags": [
                "Infrastructure as Code",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles",
            "content_html": "<p>Kubectl est l'outil en ligne de commande officiel pour interagir avec les clusters Kubernetes. La maîtrise de kubectl est essentielle pour tout DevOps ou développeur travaillant avec Kubernetes. Cet article explore les commandes de base et avancées, ainsi que des astuces pour améliorer la productivité. 🚀</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-et-contextes-\">Configuration et contextes 🔧<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#configuration-et-contextes-\" class=\"hash-link\" aria-label=\"Direct link to Configuration et contextes 🔧\" title=\"Direct link to Configuration et contextes 🔧\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"gestion-des-contextes\">Gestion des contextes<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#gestion-des-contextes\" class=\"hash-link\" aria-label=\"Direct link to Gestion des contextes\" title=\"Direct link to Gestion des contextes\" translate=\"no\">​</a></h3>\n<p>Kubectl utilise des contextes pour basculer entre différents clusters :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher la configuration actuelle</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl config view</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Lister tous les contextes disponibles</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl config get-contexts</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher le contexte actuel</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl config current-context</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Changer de contexte</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl config use-context mon-cluster-prod</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer un nouveau contexte</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl config set-context mon-contexte </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--cluster</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">mon-cluster </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--user</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">mon-utilisateur </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--namespace</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">mon-namespace</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Définir le namespace par défaut pour le contexte actuel</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl config set-context </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--current</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--namespace</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">production</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"commandes-de-base-\">Commandes de base 📝<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#commandes-de-base-\" class=\"hash-link\" aria-label=\"Direct link to Commandes de base 📝\" title=\"Direct link to Commandes de base 📝\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"gestion-des-ressources\">Gestion des ressources<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#gestion-des-ressources\" class=\"hash-link\" aria-label=\"Direct link to Gestion des ressources\" title=\"Direct link to Gestion des ressources\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer une ressource depuis un fichier YAML</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl apply </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-f</span><span class=\"token plain\"> deployment.yaml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer plusieurs ressources depuis un répertoire</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl apply </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-f</span><span class=\"token plain\"> ./manifests/</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer une ressource depuis une URL</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl apply </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-f</span><span class=\"token plain\"> https://example.com/deployment.yaml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Supprimer une ressource</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl delete </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-f</span><span class=\"token plain\"> deployment.yaml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl delete deployment mon-deployment</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Supprimer toutes les ressources d'un type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl delete deployments </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--all</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"consultation-des-ressources\">Consultation des ressources<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#consultation-des-ressources\" class=\"hash-link\" aria-label=\"Direct link to Consultation des ressources\" title=\"Direct link to Consultation des ressources\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Lister toutes les ressources d'un type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get deployments</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get services</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher plus de détails</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> wide</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher au format YAML ou JSON</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pod mon-pod </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> yaml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pod mon-pod </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> json</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Lister toutes les ressources dans tous les namespaces</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods --all-namespaces</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-A</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Raccourci</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Filtrer par labels</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-l</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">app</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-l</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">environment</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">production,tier</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">frontend</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Trier les résultats</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods --sort-by</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">.metadata.creationTimestamp</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods --sort-by</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">.status.startTime</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"informations-détaillées\">Informations détaillées<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#informations-d%C3%A9taill%C3%A9es\" class=\"hash-link\" aria-label=\"Direct link to Informations détaillées\" title=\"Direct link to Informations détaillées\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Décrire une ressource (informations détaillées + événements)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl describe pod mon-pod</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl describe deployment mon-deployment</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl describe </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">node</span><span class=\"token plain\"> mon-node</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher les logs d'un pod</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl logs mon-pod</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher les logs en temps réel</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl logs </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-f</span><span class=\"token plain\"> mon-pod</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher les logs d'un conteneur spécifique dans un pod</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl logs mon-pod </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-c</span><span class=\"token plain\"> mon-conteneur</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher les logs des 100 dernières lignes</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl logs mon-pod </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--tail</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">100</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher les logs depuis les 5 dernières minutes</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl logs mon-pod </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--since</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">5m</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher les logs du conteneur précédent (en cas de crash)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl logs mon-pod </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--previous</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"commandes-avancées-\">Commandes avancées 🎯<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#commandes-avanc%C3%A9es-\" class=\"hash-link\" aria-label=\"Direct link to Commandes avancées 🎯\" title=\"Direct link to Commandes avancées 🎯\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exécution-de-commandes-dans-les-pods\">Exécution de commandes dans les pods<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#ex%C3%A9cution-de-commandes-dans-les-pods\" class=\"hash-link\" aria-label=\"Direct link to Exécution de commandes dans les pods\" title=\"Direct link to Exécution de commandes dans les pods\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exécuter une commande dans un pod</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">exec</span><span class=\"token plain\"> mon-pod -- </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ls</span><span class=\"token plain\"> /app</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Ouvrir un shell interactif</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">exec</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-it</span><span class=\"token plain\"> mon-pod -- /bin/bash</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">exec</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-it</span><span class=\"token plain\"> mon-pod -- /bin/sh</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exécuter dans un conteneur spécifique</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">exec</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-it</span><span class=\"token plain\"> mon-pod </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-c</span><span class=\"token plain\"> mon-conteneur -- /bin/bash</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Copier des fichiers depuis/vers un pod</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">cp</span><span class=\"token plain\"> mon-pod:/app/config.json ./config.json</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">cp</span><span class=\"token plain\"> ./config.json mon-pod:/app/config.json</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"port-forwarding-et-proxy\">Port-forwarding et proxy<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#port-forwarding-et-proxy\" class=\"hash-link\" aria-label=\"Direct link to Port-forwarding et proxy\" title=\"Direct link to Port-forwarding et proxy\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Rediriger un port local vers un pod</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl port-forward pod/mon-pod </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">8080</span><span class=\"token plain\">:80</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Rediriger vers un service</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl port-forward service/mon-service </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">8080</span><span class=\"token plain\">:80</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Rediriger vers un deployment</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl port-forward deployment/mon-deployment </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">8080</span><span class=\"token plain\">:80</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Permettre l'accès depuis toutes les interfaces</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl port-forward </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--address</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0.0</span><span class=\"token plain\">.0.0 pod/mon-pod </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">8080</span><span class=\"token plain\">:80</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer un proxy vers l'API Kubernetes</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl proxy </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--port</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">8001</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"débogage-et-dépannage\">Débogage et dépannage<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#d%C3%A9bogage-et-d%C3%A9pannage\" class=\"hash-link\" aria-label=\"Direct link to Débogage et dépannage\" title=\"Direct link to Débogage et dépannage\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Obtenir les événements du cluster</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get events</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get events --sort-by</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">.metadata.creationTimestamp</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get events --field-selector </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">type</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">Warning</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier l'état des nœuds</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">top</span><span class=\"token plain\"> nodes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier l'utilisation des ressources des pods</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">top</span><span class=\"token plain\"> pods</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">top</span><span class=\"token plain\"> pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--containers</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher les pods en erreur</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods --field-selector</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">status.phase</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">Failed</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher les pods non prêts</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods --field-selector</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">status.phase</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">!=</span><span class=\"token plain\">Running</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Obtenir le YAML complet d'une ressource en cours d'exécution</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pod mon-pod </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> yaml </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> pod-backup.yaml</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"édition-en-place\">Édition en place<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#%C3%A9dition-en-place\" class=\"hash-link\" aria-label=\"Direct link to Édition en place\" title=\"Direct link to Édition en place\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Éditer une ressource avec l'éditeur par défaut</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl edit deployment mon-deployment</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Définir l'éditeur (exemple avec vim)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">KUBE_EDITOR</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"vim\"</span><span class=\"token plain\"> kubectl edit deployment mon-deployment</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Mettre à jour l'image d'un deployment</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">set</span><span class=\"token plain\"> image deployment/mon-deployment </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">nginx</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">nginx:1.21</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Mettre à l'échelle un deployment</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl scale deployment mon-deployment </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--replicas</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">5</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Mettre en pause / reprendre un rollout</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl rollout pause deployment/mon-deployment</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl rollout resume deployment/mon-deployment</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier le statut d'un rollout</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl rollout status deployment/mon-deployment</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Voir l'historique des révisions</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl rollout </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">history</span><span class=\"token plain\"> deployment/mon-deployment</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Revenir à la révision précédente</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl rollout undo deployment/mon-deployment</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Revenir à une révision spécifique</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl rollout undo deployment/mon-deployment --to-revision</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"techniques-de-filtrage-avancées-\">Techniques de filtrage avancées 🔍<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#techniques-de-filtrage-avanc%C3%A9es-\" class=\"hash-link\" aria-label=\"Direct link to Techniques de filtrage avancées 🔍\" title=\"Direct link to Techniques de filtrage avancées 🔍\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"jsonpath\">JSONPath<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#jsonpath\" class=\"hash-link\" aria-label=\"Direct link to JSONPath\" title=\"Direct link to JSONPath\" translate=\"no\">​</a></h3>\n<p>JSONPath permet d'extraire des informations spécifiques des objets Kubernetes :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Obtenir uniquement les noms des pods</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">jsonpath</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'{.items[*].metadata.name}'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Obtenir les IPs des pods</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">jsonpath</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'{.items[*].status.podIP}'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Obtenir les noms et IPs (avec formatage)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">jsonpath</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'{range .items[*]}{.metadata.name}{\"\\t\"}{.status.podIP}{\"\\n\"}{end}'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Obtenir les images des conteneurs</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">jsonpath</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'{.items[*].spec.containers[*].image}'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Obtenir les nodes et leur capacité CPU</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get nodes </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">jsonpath</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'{range .items[*]}{.metadata.name}{\"\\t\"}{.status.capacity.cpu}{\"\\n\"}{end}'</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"custom-columns\">Custom Columns<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#custom-columns\" class=\"hash-link\" aria-label=\"Direct link to Custom Columns\" title=\"Direct link to Custom Columns\" translate=\"no\">​</a></h3>\n<p>Créer un affichage personnalisé des ressources :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Affichage personnalisé avec custom-columns</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> custom-columns</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">NAME:.metadata.name,STATUS:.status.phase,IP:.status.podIP</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher les nodes avec leur version</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get nodes </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> custom-columns</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">NAME:.metadata.name,VERSION:.status.nodeInfo.kubeletVersion</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Afficher les deployments avec leurs replicas</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get deployments </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-o</span><span class=\"token plain\"> custom-columns</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">NAME:.metadata.name,DESIRED:.spec.replicas,CURRENT:.status.replicas</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ressources-utiles-\">Ressources utiles 📚<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#ressources-utiles-\" class=\"hash-link\" aria-label=\"Direct link to Ressources utiles 📚\" title=\"Direct link to Ressources utiles 📚\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://kubernetes.io/docs/reference/kubectl/\" target=\"_blank\" rel=\"noopener noreferrer\">Documentation officielle kubectl</a></li>\n<li class=\"\"><a href=\"https://kubernetes.io/docs/reference/kubectl/cheatsheet/\" target=\"_blank\" rel=\"noopener noreferrer\">Kubectl Cheat Sheet</a></li>\n<li class=\"\"><a href=\"https://kubernetes.io/docs/reference/kubectl/jsonpath/\" target=\"_blank\" rel=\"noopener noreferrer\">JSONPath dans Kubernetes</a></li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion-\">Conclusion 🎯<a href=\"https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles#conclusion-\" class=\"hash-link\" aria-label=\"Direct link to Conclusion 🎯\" title=\"Direct link to Conclusion 🎯\" translate=\"no\">​</a></h2>\n<p>Kubectl est un outil puissant et flexible pour gérer des clusters Kubernetes. La maîtrise de ces commandes et astuces permet de gagner en productivité et en efficacité au quotidien. La pratique régulière est la clé pour devenir expert avec kubectl.</p>\n<p>L'exploration des fonctionnalités avancées et la création d'alias et scripts personnalisés peuvent automatiser les tâches récurrentes. 🚀</p>",
            "url": "https://delpeuch.net/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles",
            "title": "Kubernetes : kubectl",
            "summary": "Les commandes kubectl indispensables pour gérer efficacement des clusters Kubernetes au quotidien.",
            "date_modified": "2025-11-21T00:00:00.000Z",
            "tags": [
                "Orchestration"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management",
            "content_html": "<p>Loki est un système d'agrégation de logs horizontalement scalable, hautement disponible et multi-tenant, inspiré par Prometheus. Créé par Grafana Labs, Loki se distingue par son approche minimaliste : plutôt que d'indexer le contenu des logs, il n'indexe que les métadonnées (labels), ce qui le rend extrêmement efficace et économique. 📝</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-que-loki--\">Qu'est-ce que Loki ? 🤔<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#quest-ce-que-loki--\" class=\"hash-link\" aria-label=\"Direct link to Qu'est-ce que Loki ? 🤔\" title=\"Direct link to Qu'est-ce que Loki ? 🤔\" translate=\"no\">​</a></h2>\n<p>Loki est souvent décrit comme \"Prometheus, mais pour les logs\". Il partage plusieurs concepts avec Prometheus :</p>\n<ul>\n<li class=\"\"><strong>Modèle de données basé sur les labels</strong> : identification des flux de logs par des labels</li>\n<li class=\"\"><strong>Langage de requête puissant</strong> : LogQL, inspiré de PromQL</li>\n<li class=\"\"><strong>Intégration native avec Grafana</strong> : visualisation unifiée des métriques et logs</li>\n<li class=\"\"><strong>Architecture cloud-native</strong> : conçu pour Kubernetes et les microservices</li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pourquoi-loki--\">Pourquoi Loki ? 🎯<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#pourquoi-loki--\" class=\"hash-link\" aria-label=\"Direct link to Pourquoi Loki ? 🎯\" title=\"Direct link to Pourquoi Loki ? 🎯\" translate=\"no\">​</a></h3>\n<p>Les systèmes de logs traditionnels (ELK, Splunk) indexent tout le contenu des logs, ce qui :</p>\n<ul>\n<li class=\"\"><strong>Coûte cher</strong> en stockage et en ressources de calcul</li>\n<li class=\"\"><strong>Est lent</strong> à l'ingestion pour de gros volumes</li>\n<li class=\"\"><strong>Nécessite</strong> une infrastructure complexe</li>\n</ul>\n<p>Loki adopte une approche différente :</p>\n<ul>\n<li class=\"\"><strong>N'indexe que les métadonnées</strong> (labels), pas le contenu</li>\n<li class=\"\"><strong>Stocke les logs compressés</strong> de manière séquentielle</li>\n<li class=\"\"><strong>Utilise le stockage objet</strong> (S3, GCS, etc.) pour réduire les coûts</li>\n<li class=\"\"><strong>Requêtes rapides</strong> grâce aux labels indexés</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"architecture-de-loki-️\">Architecture de Loki 🏗️<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#architecture-de-loki-%EF%B8%8F\" class=\"hash-link\" aria-label=\"Direct link to Architecture de Loki 🏗️\" title=\"Direct link to Architecture de Loki 🏗️\" translate=\"no\">​</a></h2>\n<p>L'architecture de Loki se compose de plusieurs composants :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">┌─────────────────────────────────────────────────────────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│                         Applications                         │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└────────────────────┬────────────────────────────────────────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                     │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                     ▼</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">              ┌─────────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">              │  Promtail   │  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">Agent de collecte</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">              └──────┬──────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                     │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                     ▼</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">         ┌───────────────────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">         │   Loki Distributor    │  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">Point d'entrée</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">         └──────────┬────────────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                    │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">         ┌──────────┴──────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">         │                     │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">         ▼                     ▼</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ┌─────────┐          ┌─────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │ Ingester│          │ Ingester│  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">Buffer </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">+</span><span class=\"token plain\"> Écriture</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    └────┬────┘          └────┬────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">         │                    │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">         └──────────┬─────────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                    │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                    ▼</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            ┌──────────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            │   Storage    │  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">S3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> GCS</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> Filesystem</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            └──────┬───────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                   │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        ┌──────────┴──────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        │                     │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        ▼                     ▼</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">   ┌─────────┐          ┌─────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">   │ Querier │          │ Querier │  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">Lecture</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">   └────┬────┘          └────┬────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        │                    │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        └──────────┬─────────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                   │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                   ▼</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            ┌────────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            │  Grafana   │  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">Visualisation</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            └────────────┘</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"composants-principaux\">Composants principaux<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#composants-principaux\" class=\"hash-link\" aria-label=\"Direct link to Composants principaux\" title=\"Direct link to Composants principaux\" translate=\"no\">​</a></h3>\n<ol>\n<li class=\"\"><strong>Promtail</strong> : Agent qui collecte les logs et les envoie à Loki</li>\n<li class=\"\"><strong>Distributor</strong> : Reçoit les logs et les distribue aux ingesters</li>\n<li class=\"\"><strong>Ingester</strong> : Tampon en mémoire qui écrit les logs par batch dans le stockage</li>\n<li class=\"\"><strong>Querier</strong> : Traite les requêtes LogQL</li>\n<li class=\"\"><strong>Storage</strong> : Stockage backend (filesystem, S3, GCS, etc.)</li>\n</ol>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-de-loki-\">Installation de Loki 🚀<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#installation-de-loki-\" class=\"hash-link\" aria-label=\"Direct link to Installation de Loki 🚀\" title=\"Direct link to Installation de Loki 🚀\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-avec-docker-compose\">Installation avec Docker Compose<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#installation-avec-docker-compose\" class=\"hash-link\" aria-label=\"Direct link to Installation avec Docker Compose\" title=\"Direct link to Installation avec Docker Compose\" translate=\"no\">​</a></h3>\n<p>La méthode la plus simple pour tester localement :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># docker-compose.yml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">version</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"3\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">services</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">loki</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">image</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> grafana/loki</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">2.9.0</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">ports</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"3100:3100\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">command</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">config.file=/etc/loki/local</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">config.yaml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">volumes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> ./loki</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">/loki</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">promtail</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">image</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> grafana/promtail</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">2.9.0</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">volumes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> /var/log</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">/var/log</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> ./promtail</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">config.yml</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">/etc/promtail/config.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">command</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">config.file=/etc/promtail/config.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">grafana</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">image</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> grafana/grafana</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">latest</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">ports</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"3000:3000\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">environment</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> GF_SECURITY_ADMIN_PASSWORD=admin</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">volumes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> grafana</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">storage</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">/var/lib/grafana</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">volumes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  grafana</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">storage</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Démarrer la stack</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker-compose</span><span class=\"token plain\"> up </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-d</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-sur-kubernetes-avec-helm\">Installation sur Kubernetes avec Helm<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#installation-sur-kubernetes-avec-helm\" class=\"hash-link\" aria-label=\"Direct link to Installation sur Kubernetes avec Helm\" title=\"Direct link to Installation sur Kubernetes avec Helm\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Ajouter le repo Helm de Grafana</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">helm repo </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">add</span><span class=\"token plain\"> grafana https://grafana.github.io/helm-charts</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">helm repo update</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installer Loki (mode simple)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">helm </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> loki grafana/loki-stack </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--namespace</span><span class=\"token plain\"> monitoring </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  --create-namespace </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--set</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">grafana.enabled</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">true </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--set</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">prometheus.enabled</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">true </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--set</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">promtail.enabled</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">true</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier le déploiement</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-n</span><span class=\"token plain\"> monitoring</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-distribuée-sur-kubernetes\">Installation distribuée sur Kubernetes<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#installation-distribu%C3%A9e-sur-kubernetes\" class=\"hash-link\" aria-label=\"Direct link to Installation distribuée sur Kubernetes\" title=\"Direct link to Installation distribuée sur Kubernetes\" translate=\"no\">​</a></h3>\n<p>Pour la production, utilisez le mode distribué :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installer Loki en mode distribué</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">helm </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> loki grafana/loki-distributed </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--namespace</span><span class=\"token plain\"> monitoring </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  --create-namespace </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--set</span><span class=\"token plain\"> loki.schemaConfig.configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\">.from</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"2024-01-01\"</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--set</span><span class=\"token plain\"> loki.schemaConfig.configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\">.store</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">boltdb-shipper </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--set</span><span class=\"token plain\"> loki.schemaConfig.configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\">.object_store</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">s3 </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--set</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">loki.storageConfig.boltdb_shipper.shared_store</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">s3 </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--set</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:hsl(207, 82%, 66%)\">loki.storageConfig.aws.s3</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">s3://region/bucket</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-de-promtail-\">Configuration de Promtail 📋<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#configuration-de-promtail-\" class=\"hash-link\" aria-label=\"Direct link to Configuration de Promtail 📋\" title=\"Direct link to Configuration de Promtail 📋\" translate=\"no\">​</a></h2>\n<p>Promtail est l'agent qui collecte les logs et les envoie à Loki.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-de-base\">Configuration de base<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#configuration-de-base\" class=\"hash-link\" aria-label=\"Direct link to Configuration de base\" title=\"Direct link to Configuration de base\" translate=\"no\">​</a></h3>\n<p>Créez un fichier <code>promtail-config.yml</code> :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">server</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">http_listen_port</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">9080</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">grpc_listen_port</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">positions</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">filename</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /tmp/positions.yaml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">clients</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">url</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> http</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">//loki</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">3100/loki/api/v1/push</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">scrape_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Collecter les logs système</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> system</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">static_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">targets</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> localhost</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> varlogs</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">host</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> my</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">server</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">__path__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /var/log/</span><span class=\"token important\" style=\"color:hsl(220, 14%, 71%);font-weight:bold\">*.log</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Collecter les logs d'une application</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> myapp</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">static_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">targets</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> localhost</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> myapp</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">environment</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> production</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">__path__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /app/logs/</span><span class=\"token important\" style=\"color:hsl(220, 14%, 71%);font-weight:bold\">*.log</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-avancée-avec-pipeline\">Configuration avancée avec pipeline<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#configuration-avanc%C3%A9e-avec-pipeline\" class=\"hash-link\" aria-label=\"Direct link to Configuration avancée avec pipeline\" title=\"Direct link to Configuration avancée avec pipeline\" translate=\"no\">​</a></h3>\n<p>Promtail peut parser et enrichir les logs avant de les envoyer :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">scrape_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">static_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">targets</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> localhost</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">__path__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /var/log/nginx/access.log</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">pipeline_stages</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Parser le format de log nginx</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">regex</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">expression</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'^(?P&lt;ip&gt;\\S+) \\S+ \\S+ \\[(?P&lt;time&gt;[^\\]]+)\\] \"(?P&lt;method&gt;\\S+) (?P&lt;path&gt;\\S+) \\S+\" (?P&lt;status&gt;\\d+) (?P&lt;size&gt;\\d+)'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Extraire des labels depuis les champs parsés</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">method</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">status</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">path</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Ajouter un timestamp</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">timestamp</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">source</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> time</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">format</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'02/Jan/2006:15:04:05 -0700'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Filtrer certains logs (optionnel)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">match</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">selector</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'{status=\"200\"}'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">action</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> drop</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-pour-kubernetes\">Configuration pour Kubernetes<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#configuration-pour-kubernetes\" class=\"hash-link\" aria-label=\"Direct link to Configuration pour Kubernetes\" title=\"Direct link to Configuration pour Kubernetes\" translate=\"no\">​</a></h3>\n<p>Promtail peut automatiquement découvrir les pods Kubernetes :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">scrape_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> kubernetes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">pods</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">kubernetes_sd_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">role</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> pod</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">relabel_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Extraire les métadonnées Kubernetes</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">source_labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> __meta_kubernetes_pod_node_name</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">target_label</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> __host__</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">action</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> labelmap</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">regex</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> __meta_kubernetes_pod_label_(.+)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">source_labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> __meta_kubernetes_namespace</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">target_label</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> namespace</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">source_labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> __meta_kubernetes_pod_name</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">target_label</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> pod</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">source_labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> __meta_kubernetes_pod_container_name</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">target_label</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> container</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">replacement</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /var/log/pods/</span><span class=\"token important\" style=\"color:hsl(220, 14%, 71%);font-weight:bold\">*$1/*.log</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">separator</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">source_labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> __meta_kubernetes_pod_uid</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> __meta_kubernetes_pod_container_name</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">target_label</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> __path__</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"introduction-à-logql-\">Introduction à LogQL 🔍<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#introduction-%C3%A0-logql-\" class=\"hash-link\" aria-label=\"Direct link to Introduction à LogQL 🔍\" title=\"Direct link to Introduction à LogQL 🔍\" translate=\"no\">​</a></h2>\n<p>LogQL est le langage de requête de Loki, inspiré de PromQL.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"sélecteurs-de-flux-de-logs\">Sélecteurs de flux de logs<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#s%C3%A9lecteurs-de-flux-de-logs\" class=\"hash-link\" aria-label=\"Direct link to Sélecteurs de flux de logs\" title=\"Direct link to Sélecteurs de flux de logs\" translate=\"no\">​</a></h3>\n<div class=\"language-logql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-logql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Sélectionner par label exact</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\"}</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Combiner plusieurs labels</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\", environment=\"production\"}</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Opérateurs de correspondance</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=~\"nginx|apache\"}  # Regex: nginx OU apache</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{status!=\"200\"}        # status différent de 200</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{path=~\"/api/.*\"}      # path commence par /api/</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"filtres-de-lignes\">Filtres de lignes<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#filtres-de-lignes\" class=\"hash-link\" aria-label=\"Direct link to Filtres de lignes\" title=\"Direct link to Filtres de lignes\" translate=\"no\">​</a></h3>\n<div class=\"language-logql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-logql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Rechercher une chaîne de caractères</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\"} |= \"error\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Exclure une chaîne</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\"} != \"debug\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Utiliser des regex</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\"} |~ \"error|ERROR|Error\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Combiner plusieurs filtres</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\"} |= \"error\" != \"timeout\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"parsers\">Parsers<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#parsers\" class=\"hash-link\" aria-label=\"Direct link to Parsers\" title=\"Direct link to Parsers\" translate=\"no\">​</a></h3>\n<div class=\"language-logql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-logql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Parser JSON</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"myapp\"} | json</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Parser JSON et extraire des champs</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"myapp\"} | json | level=\"error\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Parser avec regex</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\"} | regexp \"(?P&lt;method&gt;\\\\w+) (?P&lt;path&gt;\\\\S+)\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Parser logfmt</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"myapp\"} | logfmt</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"filtres-de-labels-extraits\">Filtres de labels extraits<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#filtres-de-labels-extraits\" class=\"hash-link\" aria-label=\"Direct link to Filtres de labels extraits\" title=\"Direct link to Filtres de labels extraits\" translate=\"no\">​</a></h3>\n<div class=\"language-logql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-logql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Après parsing, filtrer sur les labels extraits</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"myapp\"} | json | level=\"error\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Utiliser les opérateurs de comparaison</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\"} | json | status &gt;= 400</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Combiner avec des filtres de lignes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"myapp\"} | json | level=\"error\" |= \"database\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"agrégations-et-fonctions\">Agrégations et fonctions<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#agr%C3%A9gations-et-fonctions\" class=\"hash-link\" aria-label=\"Direct link to Agrégations et fonctions\" title=\"Direct link to Agrégations et fonctions\" translate=\"no\">​</a></h3>\n<div class=\"language-logql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-logql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Compter le nombre de lignes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">count_over_time({job=\"nginx\"}[5m])</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Taux de logs par seconde</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">rate({job=\"nginx\"}[5m])</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Somme des octets</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">sum(rate({job=\"nginx\"} | json | unwrap bytes[5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Compter par label</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">sum by (status) (count_over_time({job=\"nginx\"} | json [5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Moyenne d'une valeur numérique</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">avg(rate({job=\"myapp\"} | json | unwrap response_time [5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Quantiles (p95, p99)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">quantile_over_time(0.95, {job=\"myapp\"} | json | unwrap duration [5m])</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemples-pratiques\">Exemples pratiques<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#exemples-pratiques\" class=\"hash-link\" aria-label=\"Direct link to Exemples pratiques\" title=\"Direct link to Exemples pratiques\" translate=\"no\">​</a></h3>\n<div class=\"language-logql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-logql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Tous les logs d'erreur des 5 dernières minutes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"myapp\"} |= \"error\" [5m]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Taux d'erreurs HTTP 5xx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">sum(rate({job=\"nginx\"} | json | status &gt;= 500 [5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Top 5 des chemins les plus appelés</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">topk(5, sum by (path) (rate({job=\"nginx\"} | json [5m])))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Logs d'erreur dans un namespace Kubernetes spécifique</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{namespace=\"production\"} |= \"error\" | json | level=\"error\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Durée moyenne des requêtes API</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">avg(rate({job=\"api\"} | json | unwrap duration [5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Logs avec un certain pattern dans les dernières heures</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"myapp\"} |~ \"database.*timeout\" [1h]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Grouper par niveau de log et compter</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">sum by (level) (count_over_time({job=\"myapp\"} | json [5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Détecter les pics de logs (anomalies)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">count_over_time({job=\"myapp\"}[5m]) &gt; 1000</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"visualisation-avec-grafana-\">Visualisation avec Grafana 📊<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#visualisation-avec-grafana-\" class=\"hash-link\" aria-label=\"Direct link to Visualisation avec Grafana 📊\" title=\"Direct link to Visualisation avec Grafana 📊\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ajouter-loki-comme-source-de-données\">Ajouter Loki comme source de données<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#ajouter-loki-comme-source-de-donn%C3%A9es\" class=\"hash-link\" aria-label=\"Direct link to Ajouter Loki comme source de données\" title=\"Direct link to Ajouter Loki comme source de données\" translate=\"no\">​</a></h3>\n<ol>\n<li class=\"\">Ouvrir Grafana : <code>http://localhost:3000</code></li>\n<li class=\"\">Aller dans <strong>Configuration &gt; Data Sources</strong></li>\n<li class=\"\">Cliquer sur <strong>Add data source</strong></li>\n<li class=\"\">Sélectionner <strong>Loki</strong></li>\n<li class=\"\">Configurer l'URL : <code>http://loki:3100</code></li>\n<li class=\"\">Cliquer sur <strong>Save &amp; Test</strong></li>\n</ol>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-un-dashboard\">Créer un dashboard<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#cr%C3%A9er-un-dashboard\" class=\"hash-link\" aria-label=\"Direct link to Créer un dashboard\" title=\"Direct link to Créer un dashboard\" translate=\"no\">​</a></h3>\n<div class=\"language-jsonnet codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-jsonnet codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">// Exemple de panel Grafana avec LogQL</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  \"datasource\": \"Loki\",</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  \"targets\": [</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    {</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      \"expr\": \"sum by (level) (count_over_time({job=\\\"myapp\\\"} | json [5m]))\",</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      \"refId\": \"A\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    }</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  ],</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  \"title\": \"Logs par niveau\",</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  \"type\": \"timeseries\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"explorer-les-logs\">Explorer les logs<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#explorer-les-logs\" class=\"hash-link\" aria-label=\"Direct link to Explorer les logs\" title=\"Direct link to Explorer les logs\" translate=\"no\">​</a></h3>\n<p>L'onglet <strong>Explore</strong> de Grafana permet d'explorer les logs interactivement :</p>\n<ol>\n<li class=\"\">Sélectionner <strong>Loki</strong> comme source de données</li>\n<li class=\"\">Utiliser le builder de requête ou écrire du LogQL</li>\n<li class=\"\">Visualiser les résultats en temps réel</li>\n<li class=\"\">Filtrer, parser et agréger les logs</li>\n</ol>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"intégration-avec-kubernetes-\">Intégration avec Kubernetes 🚢<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#int%C3%A9gration-avec-kubernetes-\" class=\"hash-link\" aria-label=\"Direct link to Intégration avec Kubernetes 🚢\" title=\"Direct link to Intégration avec Kubernetes 🚢\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"collecter-les-logs-de-pods\">Collecter les logs de pods<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#collecter-les-logs-de-pods\" class=\"hash-link\" aria-label=\"Direct link to Collecter les logs de pods\" title=\"Direct link to Collecter les logs de pods\" translate=\"no\">​</a></h3>\n<p>Avec Promtail déployé en DaemonSet, les logs de tous les pods sont automatiquement collectés.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"annoter-les-pods-pour-enrichir-les-logs\">Annoter les pods pour enrichir les logs<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#annoter-les-pods-pour-enrichir-les-logs\" class=\"hash-link\" aria-label=\"Direct link to Annoter les pods pour enrichir les logs\" title=\"Direct link to Annoter les pods pour enrichir les logs\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">apiVersion</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> v1</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">kind</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Pod</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">metadata</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> myapp</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">app</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> myapp</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">version</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> v1.2.3</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">annotations</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">loki.io/scrape</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"true\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">loki.io/parser</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"json\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">spec</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">containers</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> myapp</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">image</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> myapp</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">1.2.3</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"requêtes-logql-pour-kubernetes\">Requêtes LogQL pour Kubernetes<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#requ%C3%AAtes-logql-pour-kubernetes\" class=\"hash-link\" aria-label=\"Direct link to Requêtes LogQL pour Kubernetes\" title=\"Direct link to Requêtes LogQL pour Kubernetes\" translate=\"no\">​</a></h3>\n<div class=\"language-logql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-logql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Logs d'un pod spécifique</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{pod=\"myapp-5d8f7c8b9-abc12\"}</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Logs d'un namespace</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{namespace=\"production\"}</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Logs d'une application (via label)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{app=\"myapp\"}</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Logs d'erreur dans tous les pods d'une app</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{app=\"myapp\"} |= \"error\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Combiner plusieurs filtres Kubernetes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{namespace=\"production\", app=\"api\"} | json | level=\"error\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques-\">Bonnes pratiques 👍<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#bonnes-pratiques-\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques 👍\" title=\"Direct link to Bonnes pratiques 👍\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"1-utiliser-des-labels-efficacement\">1. Utiliser des labels efficacement<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#1-utiliser-des-labels-efficacement\" class=\"hash-link\" aria-label=\"Direct link to 1. Utiliser des labels efficacement\" title=\"Direct link to 1. Utiliser des labels efficacement\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ✅ BON : Labels avec cardinalité faible</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">environment</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> production</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">app</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> myapp</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">level</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> error</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ❌ MAUVAIS : Labels avec cardinalité élevée</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">user_id</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"123456\"</span><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Éviter</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">request_id</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"abc-def\"</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Éviter</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">timestamp</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"...\"</span><span class=\"token plain\">       </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Éviter</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"2-structurer-les-logs-en-json\">2. Structurer les logs en JSON<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#2-structurer-les-logs-en-json\" class=\"hash-link\" aria-label=\"Direct link to 2. Structurer les logs en JSON\" title=\"Direct link to 2. Structurer les logs en JSON\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Python avec structlog</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> structlog</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">log </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> structlog</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">get_logger</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">log</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">info</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"user_login\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    user_id</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"12345\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ip</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"192.168.1.1\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    status</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"success\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Sortie :</p>\n<div class=\"language-json codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"event\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"user_login\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"user_id\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"12345\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"ip\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"192.168.1.1\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"status\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"success\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"timestamp\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"2025-11-15T10:00:00Z\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"3-optimiser-les-requêtes-logql\">3. Optimiser les requêtes LogQL<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#3-optimiser-les-requ%C3%AAtes-logql\" class=\"hash-link\" aria-label=\"Direct link to 3. Optimiser les requêtes LogQL\" title=\"Direct link to 3. Optimiser les requêtes LogQL\" translate=\"no\">​</a></h3>\n<div class=\"language-logql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-logql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># ✅ BON : Filtrer d'abord avec des labels</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\", status=\"500\"}</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># ❌ MOINS BON : Filtrer seulement avec le contenu</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\"} |= \"500\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># ✅ BON : Utiliser des plages temporelles courtes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\"}[5m]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># ❌ MAUVAIS : Plages temporelles très longues</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"nginx\"}[24h]</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"4-configurer-la-rétention-des-logs\">4. Configurer la rétention des logs<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#4-configurer-la-r%C3%A9tention-des-logs\" class=\"hash-link\" aria-label=\"Direct link to 4. Configurer la rétention des logs\" title=\"Direct link to 4. Configurer la rétention des logs\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># loki-config.yaml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">limits_config</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">retention_period</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> 744h  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># 31 jours</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">table_manager</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">retention_deletes_enabled</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:hsl(220, 14%, 71%);font-weight:bold\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">retention_period</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> 744h</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"5-utiliser-le-multi-tenancy\">5. Utiliser le multi-tenancy<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#5-utiliser-le-multi-tenancy\" class=\"hash-link\" aria-label=\"Direct link to 5. Utiliser le multi-tenancy\" title=\"Direct link to 5. Utiliser le multi-tenancy\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Configuration Loki pour multi-tenancy</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">auth_enabled</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:hsl(220, 14%, 71%);font-weight:bold\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Promtail avec tenant_id</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">clients</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">url</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> http</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">//loki</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">3100/loki/api/v1/push</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tenant_id</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> team</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">a</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"cas-dusage-avancés-\">Cas d'usage avancés 🚀<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#cas-dusage-avanc%C3%A9s-\" class=\"hash-link\" aria-label=\"Direct link to Cas d'usage avancés 🚀\" title=\"Direct link to Cas d'usage avancés 🚀\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"alerting-avec-loki-et-prometheus\">Alerting avec Loki et Prometheus<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#alerting-avec-loki-et-prometheus\" class=\"hash-link\" aria-label=\"Direct link to Alerting avec Loki et Prometheus\" title=\"Direct link to Alerting avec Loki et Prometheus\" translate=\"no\">​</a></h3>\n<p>La création d'alertes basées sur les logs est possible via le ruler Loki ou en exposant des métriques à Prometheus :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Recording rules dans Loki</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">groups</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> logs</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">interval</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> 1m</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">rules</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">record</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> log_error_rate</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">expr</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">|</span><span class=\"token scalar string\" style=\"color:hsl(95, 38%, 62%)\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token scalar string\" style=\"color:hsl(95, 38%, 62%)\">          sum by (app) (rate({job=\"myapp\"} |= \"error\" [5m]))</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"tracer-les-requêtes-entre-services\">Tracer les requêtes entre services<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#tracer-les-requ%C3%AAtes-entre-services\" class=\"hash-link\" aria-label=\"Direct link to Tracer les requêtes entre services\" title=\"Direct link to Tracer les requêtes entre services\" translate=\"no\">​</a></h3>\n<p>Utiliser le trace ID dans les logs pour corréler les logs entre microservices :</p>\n<div class=\"language-logql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-logql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Rechercher tous les logs d'une trace</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">{job=\"myapp\"} | json | trace_id=\"abc123\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"détecter-les-anomalies\">Détecter les anomalies<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#d%C3%A9tecter-les-anomalies\" class=\"hash-link\" aria-label=\"Direct link to Détecter les anomalies\" title=\"Direct link to Détecter les anomalies\" translate=\"no\">​</a></h3>\n<div class=\"language-logql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-logql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Comparer le taux actuel au taux habituel</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">(</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  sum(rate({job=\"myapp\"}[5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  /</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  avg_over_time(sum(rate({job=\"myapp\"}[5m]))[1h:5m])</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">) &gt; 2</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion-\">Conclusion 🎯<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#conclusion-\" class=\"hash-link\" aria-label=\"Direct link to Conclusion 🎯\" title=\"Direct link to Conclusion 🎯\" translate=\"no\">​</a></h2>\n<p>Loki révolutionne la gestion des logs en adoptant une approche minimaliste et efficace. Son intégration native avec Grafana et sa compatibilité avec l'écosystème Prometheus en font un choix excellent pour les infrastructures cloud-native.</p>\n<p>Les points clés à retenir :</p>\n<ul>\n<li class=\"\"><strong>Économique</strong> : pas d'indexation du contenu, stockage objet</li>\n<li class=\"\"><strong>Performant</strong> : indexation des labels seulement</li>\n<li class=\"\"><strong>Simple</strong> : architecture inspirée de Prometheus</li>\n<li class=\"\"><strong>Puissant</strong> : LogQL pour requêter et agréger les logs</li>\n<li class=\"\"><strong>Cloud-native</strong> : parfait pour Kubernetes</li>\n</ul>\n<p>Les prochains articles aborderont la combinaison de Loki avec Prometheus et Grafana pour une stack d'observabilité complète.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ressources-utiles-\">Ressources utiles 📚<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management#ressources-utiles-\" class=\"hash-link\" aria-label=\"Direct link to Ressources utiles 📚\" title=\"Direct link to Ressources utiles 📚\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://grafana.com/docs/loki/\" target=\"_blank\" rel=\"noopener noreferrer\">Documentation officielle Loki</a></li>\n<li class=\"\"><a href=\"https://grafana.com/docs/loki/latest/logql/\" target=\"_blank\" rel=\"noopener noreferrer\">LogQL Cheat Sheet</a></li>\n<li class=\"\"><a href=\"https://grafana.com/docs/loki/latest/best-practices/\" target=\"_blank\" rel=\"noopener noreferrer\">Best practices Loki</a></li>\n<li class=\"\"><a href=\"https://grafana.com/docs/loki/latest/clients/promtail/\" target=\"_blank\" rel=\"noopener noreferrer\">Promtail configuration</a></li>\n</ul>",
            "url": "https://delpeuch.net/blog/2025/11/21/07-monitoring/loki-logs-management",
            "title": "Loki",
            "summary": "Loki, le système de gestion de logs inspiré de Prometheus, conçu pour être simple, efficace et économique.",
            "date_modified": "2025-11-21T00:00:00.000Z",
            "tags": [
                "Observabilité",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction",
            "content_html": "<p>Prometheus est un système de monitoring et d'alerting open-source qui s'est imposé comme la référence dans l'écosystème Cloud Native. Conçu initialement chez SoundCloud en 2012, Prometheus est aujourd'hui un projet gradué de la Cloud Native Computing Foundation (CNCF). Cet article explore l'installation, le fonctionnement et les bases du langage de requête PromQL. 📊</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-que-prometheus--\">Qu'est-ce que Prometheus ? 🤔<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#quest-ce-que-prometheus--\" class=\"hash-link\" aria-label=\"Direct link to Qu'est-ce que Prometheus ? 🤔\" title=\"Direct link to Qu'est-ce que Prometheus ? 🤔\" translate=\"no\">​</a></h2>\n<p>Prometheus est un système de monitoring qui collecte et stocke des métriques sous forme de séries temporelles (time-series). Il se distingue par :</p>\n<ul>\n<li class=\"\"><strong>Architecture pull</strong> : Prometheus récupère activement les métriques depuis les cibles</li>\n<li class=\"\"><strong>Modèle de données multi-dimensionnel</strong> : métriques identifiées par un nom et des labels (clé-valeur)</li>\n<li class=\"\"><strong>Langage de requête puissant</strong> : PromQL pour interroger et agréger les données</li>\n<li class=\"\"><strong>Système d'alerting intégré</strong> : définition de règles d'alerte directement dans Prometheus</li>\n<li class=\"\"><strong>Découverte de services</strong> : intégration native avec Kubernetes, Consul, etc.</li>\n<li class=\"\"><strong>Stockage local</strong> : pas de dépendance à un système de stockage distribué</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"architecture-de-prometheus-️\">Architecture de Prometheus 🏗️<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#architecture-de-prometheus-%EF%B8%8F\" class=\"hash-link\" aria-label=\"Direct link to Architecture de Prometheus 🏗️\" title=\"Direct link to Architecture de Prometheus 🏗️\" translate=\"no\">​</a></h2>\n<p>L'architecture de Prometheus se compose de plusieurs éléments :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">┌─────────────────────────────────────────────────────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│                    Prometheus Server                     │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│                                                           │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│  ┌───────────────┐  ┌──────────────┐  ┌──────────────┐ │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│  │   Retrieval   │  │   Storage    │  │  HTTP Server │ │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│  │   </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">Scraping</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  │─▶│  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">TSDB</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">      │◀─│  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">PromQL</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">    │ │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│  └───────────────┘  └──────────────┘  └──────────────┘ │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│         │                                      ▲         │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└─────────┼──────────────────────────────────────┼─────────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          │                                      │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          ▼                                      │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  ┌───────────────┐                    ┌─────────────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  │   Exporters   │                    │   Grafana </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">     │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  │   </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">Metrics</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">   │                    │   API Clients   │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  └───────────────┘                    └─────────────────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  ┌───────┴────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  │  Pushgateway   │  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">pour jobs courts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  └────────────────┘</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          │</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  ┌───────┴─────────┐</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  │  Alertmanager   │  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">gestion des alertes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  └─────────────────┘</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Composants principaux :</strong></p>\n<ul>\n<li class=\"\"><strong>Prometheus Server</strong> : collecte, stocke et permet d'interroger les métriques</li>\n<li class=\"\"><strong>Exporters</strong> : exposent les métriques des systèmes tiers au format Prometheus</li>\n<li class=\"\"><strong>Pushgateway</strong> : permet aux jobs courts de pousser leurs métriques</li>\n<li class=\"\"><strong>Alertmanager</strong> : gère les alertes (déduplication, groupage, routage, notifications)</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-de-prometheus-\">Installation de Prometheus 🚀<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#installation-de-prometheus-\" class=\"hash-link\" aria-label=\"Direct link to Installation de Prometheus 🚀\" title=\"Direct link to Installation de Prometheus 🚀\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-avec-docker\">Installation avec Docker<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#installation-avec-docker\" class=\"hash-link\" aria-label=\"Direct link to Installation avec Docker\" title=\"Direct link to Installation avec Docker\" translate=\"no\">​</a></h3>\n<p>La méthode la plus simple pour tester Prometheus :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Télécharger et lancer Prometheus</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> run </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-d</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--name</span><span class=\"token plain\"> prometheus </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-p</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">9090</span><span class=\"token plain\">:9090 </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-v</span><span class=\"token plain\"> </span><span class=\"token variable\" style=\"color:hsl(207, 82%, 66%)\">$(</span><span class=\"token variable builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">pwd</span><span class=\"token variable\" style=\"color:hsl(207, 82%, 66%)\">)</span><span class=\"token plain\">/prometheus.yml:/etc/prometheus/prometheus.yml </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  prom/prometheus</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-binaire\">Installation binaire<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#installation-binaire\" class=\"hash-link\" aria-label=\"Direct link to Installation binaire\" title=\"Direct link to Installation binaire\" translate=\"no\">​</a></h3>\n<p>Pour une installation plus traditionnelle :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Télécharger la dernière version</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">wget</span><span class=\"token plain\"> https://github.com/prometheus/prometheus/releases/download/v2.45.0/prometheus-2.45.0.linux-amd64.tar.gz</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Extraire</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">tar</span><span class=\"token plain\"> xvfz prometheus-2.45.0.linux-amd64.tar.gz</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">cd</span><span class=\"token plain\"> prometheus-2.45.0.linux-amd64</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Lancer Prometheus</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">./prometheus </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--config.file</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">prometheus.yml</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-sur-kubernetes-avec-helm\">Installation sur Kubernetes avec Helm<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#installation-sur-kubernetes-avec-helm\" class=\"hash-link\" aria-label=\"Direct link to Installation sur Kubernetes avec Helm\" title=\"Direct link to Installation sur Kubernetes avec Helm\" translate=\"no\">​</a></h3>\n<p>Pour déployer Prometheus dans un cluster Kubernetes :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Ajouter le repo Helm de Prometheus</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">helm repo </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">add</span><span class=\"token plain\"> prometheus-community https://prometheus-community.github.io/helm-charts</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">helm repo update</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installer Prometheus</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">helm </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> prometheus prometheus-community/prometheus </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--namespace</span><span class=\"token plain\"> monitoring </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  --create-namespace</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifier le déploiement</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">kubectl get pods </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-n</span><span class=\"token plain\"> monitoring</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuration-de-base\">Configuration de base<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#configuration-de-base\" class=\"hash-link\" aria-label=\"Direct link to Configuration de base\" title=\"Direct link to Configuration de base\" translate=\"no\">​</a></h3>\n<p>Créez un fichier <code>prometheus.yml</code> avec la configuration minimale :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">global</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">scrape_interval</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> 15s      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Intervalle de collecte par défaut</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">evaluation_interval</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> 15s  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Intervalle d'évaluation des règles</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">external_labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">cluster</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'dev'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">environment</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'development'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Règles d'alerting (optionnel)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">rule_files</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"rules/*.yml\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Configuration des cibles à scraper</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">scrape_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Prometheus se monitore lui-même</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'prometheus'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">static_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">targets</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'localhost:9090'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">instance</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'prometheus-server'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exemple : monitorer Node Exporter</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'node-exporter'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">static_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">targets</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'localhost:9100'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">instance</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'server-01'</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"concepts-de-base--métriques-et-scraping-\">Concepts de base : Métriques et Scraping 📈<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#concepts-de-base--m%C3%A9triques-et-scraping-\" class=\"hash-link\" aria-label=\"Direct link to Concepts de base : Métriques et Scraping 📈\" title=\"Direct link to Concepts de base : Métriques et Scraping 📈\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"les-types-de-métriques\">Les types de métriques<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#les-types-de-m%C3%A9triques\" class=\"hash-link\" aria-label=\"Direct link to Les types de métriques\" title=\"Direct link to Les types de métriques\" translate=\"no\">​</a></h3>\n<p>Prometheus supporte quatre types de métriques :</p>\n<ol>\n<li class=\"\">\n<p><strong>Counter</strong> : compteur qui ne peut qu'augmenter (ou se réinitialiser à 0)</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">method</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"GET\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> status</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"200\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1234</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Exemples : nombre de requêtes, erreurs, tâches complétées</p>\n</li>\n<li class=\"\">\n<p><strong>Gauge</strong> : valeur qui peut augmenter ou diminuer</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">memory_usage_bytes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">instance</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"server-01\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">8589934592</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Exemples : température, mémoire utilisée, nombre de connexions actives</p>\n</li>\n<li class=\"\">\n<p><strong>Histogram</strong> : échantillonne des observations et les compte dans des buckets</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds_bucket</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">le</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"0.1\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">100</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds_bucket</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">le</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"0.5\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">250</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds_bucket</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">le</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"1.0\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">300</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Exemples : durée de requêtes, taille de réponses</p>\n</li>\n<li class=\"\">\n<p><strong>Summary</strong> : similaire à histogram, mais calcule des quantiles côté client</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">quantile</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"0.5\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0.23</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">quantile</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"0.9\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">0.87</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">quantile</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"0.99\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1.2</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n</li>\n</ol>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"le-modèle-de-données\">Le modèle de données<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#le-mod%C3%A8le-de-donn%C3%A9es\" class=\"hash-link\" aria-label=\"Direct link to Le modèle de données\" title=\"Direct link to Le modèle de données\" translate=\"no\">​</a></h3>\n<p>Chaque métrique dans Prometheus est identifiée par :</p>\n<ul>\n<li class=\"\"><strong>Nom de la métrique</strong> : décrit ce qui est mesuré</li>\n<li class=\"\"><strong>Labels</strong> : paires clé-valeur pour distinguer les dimensions</li>\n</ul>\n<p>Exemple :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">api_http_requests_total</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">method</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"POST\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> handler</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"/users\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> status</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"200\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1234</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<ul>\n<li class=\"\">Nom : <code>api_http_requests_total</code></li>\n<li class=\"\">Labels : <code>method=\"POST\"</code>, <code>handler=\"/users\"</code>, <code>status=\"200\"</code></li>\n<li class=\"\">Valeur : <code>1234</code></li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"le-processus-de-scraping\">Le processus de scraping<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#le-processus-de-scraping\" class=\"hash-link\" aria-label=\"Direct link to Le processus de scraping\" title=\"Direct link to Le processus de scraping\" translate=\"no\">​</a></h3>\n<p>Le scraping est le processus par lequel Prometheus collecte les métriques :</p>\n<ol>\n<li class=\"\"><strong>Prometheus initie la connexion</strong> vers la cible (pull model)</li>\n<li class=\"\"><strong>Requête HTTP GET</strong> sur l'endpoint <code>/metrics</code></li>\n<li class=\"\"><strong>Réception des métriques</strong> au format texte Prometheus</li>\n<li class=\"\"><strong>Stockage</strong> dans la base de données time-series</li>\n</ol>\n<p>Exemple de réponse d'un endpoint <code>/metrics</code> :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># HELP http_requests_total Total number of HTTP requests</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># TYPE http_requests_total counter</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">method</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"GET\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">status</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"200\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1234</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">method</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"GET\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">status</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"404\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">42</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">method</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"POST\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">status</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"200\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">567</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># HELP memory_usage_bytes Current memory usage in bytes</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># TYPE memory_usage_bytes gauge</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">memory_usage_bytes </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">8589934592</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># HELP http_request_duration_seconds HTTP request duration</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># TYPE http_request_duration_seconds histogram</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds_bucket</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">le</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"0.1\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">100</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds_bucket</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">le</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"0.5\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">250</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds_bucket</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\">le</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"1.0\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">300</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds_sum </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">187.5</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_request_duration_seconds_count </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">300</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exporters--collecter-des-métriques-\">Exporters : collecter des métriques 📡<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#exporters--collecter-des-m%C3%A9triques-\" class=\"hash-link\" aria-label=\"Direct link to Exporters : collecter des métriques 📡\" title=\"Direct link to Exporters : collecter des métriques 📡\" translate=\"no\">​</a></h2>\n<p>Les exporters sont des programmes qui exposent des métriques de systèmes tiers au format Prometheus.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"node-exporter-métriques-système\">Node Exporter (métriques système)<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#node-exporter-m%C3%A9triques-syst%C3%A8me\" class=\"hash-link\" aria-label=\"Direct link to Node Exporter (métriques système)\" title=\"Direct link to Node Exporter (métriques système)\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installation avec Docker</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> run </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-d</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--name</span><span class=\"token plain\"> node-exporter </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--net</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"host\"</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--pid</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"host\"</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-v</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"/:/host:ro,rslave\"</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  prom/node-exporter </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--path.rootfs</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">/host</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Configuration dans prometheus.yml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">scrape_configs:</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  - job_name: </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'node'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    static_configs:</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      - targets: </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'localhost:9100'</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exporters-populaires\">Exporters populaires<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#exporters-populaires\" class=\"hash-link\" aria-label=\"Direct link to Exporters populaires\" title=\"Direct link to Exporters populaires\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\"><strong>node_exporter</strong> : métriques système (CPU, mémoire, disque, réseau)</li>\n<li class=\"\"><strong>blackbox_exporter</strong> : probes HTTP, TCP, ICMP, DNS</li>\n<li class=\"\"><strong>mysqld_exporter</strong> : métriques MySQL/MariaDB</li>\n<li class=\"\"><strong>postgres_exporter</strong> : métriques PostgreSQL</li>\n<li class=\"\"><strong>redis_exporter</strong> : métriques Redis</li>\n<li class=\"\"><strong>nginx_exporter</strong> : métriques Nginx</li>\n<li class=\"\"><strong>kube-state-metrics</strong> : métriques d'état Kubernetes</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"introduction-à-promql-\">Introduction à PromQL 📊<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#introduction-%C3%A0-promql-\" class=\"hash-link\" aria-label=\"Direct link to Introduction à PromQL 📊\" title=\"Direct link to Introduction à PromQL 📊\" translate=\"no\">​</a></h2>\n<p>PromQL (Prometheus Query Language) est le langage de requête pour interroger les métriques.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"requêtes-de-base\">Requêtes de base<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#requ%C3%AAtes-de-base\" class=\"hash-link\" aria-label=\"Direct link to Requêtes de base\" title=\"Direct link to Requêtes de base\" translate=\"no\">​</a></h3>\n<div class=\"language-promql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-promql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Sélectionner toutes les séries d'une métrique</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Filtrer par label</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total{method=\"GET\"}</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Filtrer avec plusieurs labels</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total{method=\"GET\", status=\"200\"}</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Opérateurs de correspondance</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total{status=~\"2..\"} # Regex: status commence par 2</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total{status!=\"200\"} # status différent de 200</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total{method=~\"GET|POST\"} # method est GET ou POST</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"sélecteurs-temporels\">Sélecteurs temporels<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#s%C3%A9lecteurs-temporels\" class=\"hash-link\" aria-label=\"Direct link to Sélecteurs temporels\" title=\"Direct link to Sélecteurs temporels\" translate=\"no\">​</a></h3>\n<div class=\"language-promql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-promql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Valeur actuelle</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Plage de temps (range vector)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total[5m] # Les 5 dernières minutes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Décalage temporel (offset)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total offset 5m # Valeur d'il y a 5 minutes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total[1h] offset 1d # Les valeurs d'hier sur 1h</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fonctions-courantes\">Fonctions courantes<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#fonctions-courantes\" class=\"hash-link\" aria-label=\"Direct link to Fonctions courantes\" title=\"Direct link to Fonctions courantes\" translate=\"no\">​</a></h3>\n<div class=\"language-promql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-promql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Rate : taux de changement par seconde (pour les counters)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">rate(http_requests_total[5m])</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Increase : augmentation totale sur une période</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">increase(http_requests_total[1h])</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Sum : somme des valeurs</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">sum(http_requests_total)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Sum by : grouper par label</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">sum by (method) (http_requests_total)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Avg : moyenne</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">avg(cpu_usage_percent)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Max / Min</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">max(memory_usage_bytes)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">min(disk_free_bytes)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Count : nombre de séries</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">count(up == 1) # Nombre de cibles up</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"opérations-mathématiques\">Opérations mathématiques<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#op%C3%A9rations-math%C3%A9matiques\" class=\"hash-link\" aria-label=\"Direct link to Opérations mathématiques\" title=\"Direct link to Opérations mathématiques\" translate=\"no\">​</a></h3>\n<div class=\"language-promql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-promql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Opérations arithmétiques</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">node_memory_MemTotal_bytes - node_memory_MemFree_bytes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Pourcentage</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">(node_memory_MemTotal_bytes - node_memory_MemFree_bytes) / node_memory_MemTotal_bytes * 100</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Comparaisons</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">up == 1 # Toutes les cibles actives</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">http_requests_total &gt; 1000 # Requêtes supérieures à 1000</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"agrégations-avancées\">Agrégations avancées<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#agr%C3%A9gations-avanc%C3%A9es\" class=\"hash-link\" aria-label=\"Direct link to Agrégations avancées\" title=\"Direct link to Agrégations avancées\" translate=\"no\">​</a></h3>\n<div class=\"language-promql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-promql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Grouper par plusieurs labels</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">sum by (method, status) (rate(http_requests_total[5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Exclure des labels du groupage</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">sum without (instance) (rate(http_requests_total[5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Top K</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">topk(5, http_requests_total) # Top 5 des séries</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Bottom K</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">bottomk(3, rate(cpu_usage[5m])) # Bottom 3 des taux CPU</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemples-pratiques\">Exemples pratiques<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#exemples-pratiques\" class=\"hash-link\" aria-label=\"Direct link to Exemples pratiques\" title=\"Direct link to Exemples pratiques\" translate=\"no\">​</a></h3>\n<div class=\"language-promql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-promql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Taux de requêtes HTTP par seconde</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">rate(http_requests_total[5m])</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Taux d'erreur HTTP (5xx)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">sum(rate(http_requests_total{status=~\"5..\"}[5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">/</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">sum(rate(http_requests_total[5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Utilisation mémoire en pourcentage</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">100 * (1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Utilisation disque en pourcentage</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">100 * (node_filesystem_size_bytes - node_filesystem_free_bytes) / node_filesystem_size_bytes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Latence p95 (histogram)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"># Prédiction : disque plein dans combien de temps ?</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">predict_linear(node_filesystem_free_bytes[1h], 4*3600) &lt; 0</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"interface-web-de-prometheus-️\">Interface Web de Prometheus 🖥️<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#interface-web-de-prometheus-%EF%B8%8F\" class=\"hash-link\" aria-label=\"Direct link to Interface Web de Prometheus 🖥️\" title=\"Direct link to Interface Web de Prometheus 🖥️\" translate=\"no\">​</a></h2>\n<p>Prometheus embarque une interface web accessible sur <code>http://localhost:9090</code> :</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"onglet-graph\">Onglet Graph<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#onglet-graph\" class=\"hash-link\" aria-label=\"Direct link to Onglet Graph\" title=\"Direct link to Onglet Graph\" translate=\"no\">​</a></h3>\n<p>Permet d'exécuter des requêtes PromQL et de visualiser les résultats sous forme de graphique ou de tableau.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"onglet-alerts\">Onglet Alerts<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#onglet-alerts\" class=\"hash-link\" aria-label=\"Direct link to Onglet Alerts\" title=\"Direct link to Onglet Alerts\" translate=\"no\">​</a></h3>\n<p>Affiche l'état des règles d'alerting et les alertes actives.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"onglet-status\">Onglet Status<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#onglet-status\" class=\"hash-link\" aria-label=\"Direct link to Onglet Status\" title=\"Direct link to Onglet Status\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\"><strong>Targets</strong> : état des cibles scrapées (up/down)</li>\n<li class=\"\"><strong>Configuration</strong> : configuration actuelle de Prometheus</li>\n<li class=\"\"><strong>Rules</strong> : règles d'alerting et d'enregistrement chargées</li>\n<li class=\"\"><strong>Service Discovery</strong> : cibles découvertes dynamiquement</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"découverte-de-services-\">Découverte de services 🔍<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#d%C3%A9couverte-de-services-\" class=\"hash-link\" aria-label=\"Direct link to Découverte de services 🔍\" title=\"Direct link to Découverte de services 🔍\" translate=\"no\">​</a></h2>\n<p>Prometheus peut découvrir automatiquement les cibles à monitorer.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"découverte-kubernetes\">Découverte Kubernetes<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#d%C3%A9couverte-kubernetes\" class=\"hash-link\" aria-label=\"Direct link to Découverte Kubernetes\" title=\"Direct link to Découverte Kubernetes\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">scrape_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'kubernetes-pods'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">kubernetes_sd_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">role</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> pod</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">relabel_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Ne scraper que les pods avec l'annotation prometheus.io/scrape</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">source_labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">__meta_kubernetes_pod_annotation_prometheus_io_scrape</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">action</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> keep</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">regex</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:hsl(220, 14%, 71%);font-weight:bold\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Utiliser le port défini dans l'annotation</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">source_labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">__meta_kubernetes_pod_annotation_prometheus_io_port</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">action</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> replace</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">target_label</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> __address__</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">regex</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> (</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">^</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\">+)(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">?</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">\\d+)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">?</span><span class=\"token plain\">;(\\d+)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">replacement</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> $1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">$2</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Ajouter des labels depuis les annotations</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">action</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> labelmap</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">regex</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> __meta_kubernetes_pod_label_(.+)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"découverte-avec-fichiers\">Découverte avec fichiers<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#d%C3%A9couverte-avec-fichiers\" class=\"hash-link\" aria-label=\"Direct link to Découverte avec fichiers\" title=\"Direct link to Découverte avec fichiers\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">scrape_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">job_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'file_sd'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">file_sd_configs</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">files</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'targets/*.json'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'targets/*.yml'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">refresh_interval</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> 5m</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Fichier <code>targets/web-servers.json</code> :</p>\n<div class=\"language-json codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"targets\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"web-01:9100\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"web-02:9100\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"labels\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"job\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"web-servers\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"environment\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"production\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques-\">Bonnes pratiques 👍<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#bonnes-pratiques-\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques 👍\" title=\"Direct link to Bonnes pratiques 👍\" translate=\"no\">​</a></h2>\n<ol>\n<li class=\"\">\n<p><strong>Nommer les métriques correctement</strong> :</p>\n<ul>\n<li class=\"\">Format : <code>namespace_subsystem_unit_suffix</code></li>\n<li class=\"\">Exemple : <code>http_requests_total</code>, <code>node_cpu_seconds_total</code></li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Utiliser des labels judicieusement</strong> :</p>\n<ul>\n<li class=\"\">Labels pour les dimensions importantes (method, status, instance)</li>\n<li class=\"\">Éviter les labels avec une cardinalité élevée (user_id, request_id)</li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Choisir le bon intervalle de scraping</strong> :</p>\n<ul>\n<li class=\"\">15-60s pour la plupart des cas</li>\n<li class=\"\">Plus court pour des systèmes critiques</li>\n<li class=\"\">Plus long pour des métriques qui changent lentement</li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Utiliser rate() pour les counters</strong> :</p>\n<ul>\n<li class=\"\">Ne jamais afficher un counter brut (il ne fait qu'augmenter)</li>\n<li class=\"\">Toujours utiliser <code>rate()</code> ou <code>increase()</code></li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Définir des alertes pertinentes</strong> :</p>\n<ul>\n<li class=\"\">Alerter sur les symptômes, pas sur les causes</li>\n<li class=\"\">Éviter les alertes redondantes</li>\n<li class=\"\">Prévoir des périodes de silence (for: 5m)</li>\n</ul>\n</li>\n</ol>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion-\">Conclusion 🎯<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#conclusion-\" class=\"hash-link\" aria-label=\"Direct link to Conclusion 🎯\" title=\"Direct link to Conclusion 🎯\" translate=\"no\">​</a></h2>\n<p>Prometheus est devenu l'outil de monitoring de référence dans l'écosystème Cloud Native. Sa simplicité d'installation, son modèle de données flexible et son langage de requête puissant en font un choix excellent pour monitorer les infrastructures modernes.</p>\n<p>Les prochains articles aborderont :</p>\n<ul>\n<li class=\"\">La création de dashboards avec Grafana</li>\n<li class=\"\">La configuration d'alertes avec Alertmanager</li>\n<li class=\"\">Le monitoring d'applications Kubernetes</li>\n<li class=\"\">L'optimisation des performances et du stockage</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ressources-utiles-\">Ressources utiles 📚<a href=\"https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction#ressources-utiles-\" class=\"hash-link\" aria-label=\"Direct link to Ressources utiles 📚\" title=\"Direct link to Ressources utiles 📚\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://prometheus.io/docs/\" target=\"_blank\" rel=\"noopener noreferrer\">Documentation officielle Prometheus</a></li>\n<li class=\"\"><a href=\"https://promlabs.com/promql-cheat-sheet/\" target=\"_blank\" rel=\"noopener noreferrer\">PromQL Cheat Sheet</a></li>\n<li class=\"\"><span style=\"display:inline-flex;gap:0.25rem\"><span></span><a href=\"https://github.com/roaldnefs/awesome-prometheus\" target=\"_blank\" rel=\"noopener noreferrer\">Awesome Prometheus</a></span></li>\n<li class=\"\"><a href=\"https://prometheus.io/docs/instrumenting/exporters/\" target=\"_blank\" rel=\"noopener noreferrer\">Prometheus Exporters</a></li>\n</ul>",
            "url": "https://delpeuch.net/blog/2025/11/21/07-monitoring/prometheus-introduction",
            "title": "Prometheus",
            "summary": "Prometheus, l'outil de monitoring et d'alerting open-source devenu incontournable dans l'écosystème Cloud Native.",
            "date_modified": "2025-11-21T00:00:00.000Z",
            "tags": [
                "Observabilité",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances",
            "content_html": "<p>L'<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction\">article précédent sur Ansible</a> couvrait les bases de cet outil d'automatisation puissant. Cet article explore des concepts avancés qui permettent de créer des infrastructures complexes de manière modulaire, sécurisée et automatisée. 🚀</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"les-rôles-ansible--modularité-et-réutilisabilité-\">Les rôles Ansible : modularité et réutilisabilité 📦<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#les-r%C3%B4les-ansible--modularit%C3%A9-et-r%C3%A9utilisabilit%C3%A9-\" class=\"hash-link\" aria-label=\"Direct link to Les rôles Ansible : modularité et réutilisabilité 📦\" title=\"Direct link to Les rôles Ansible : modularité et réutilisabilité 📦\" translate=\"no\">​</a></h2>\n<p>Les rôles sont la pierre angulaire de la modularité dans Ansible. Ils permettent d'organiser les playbooks en composants réutilisables et maintenables.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"structure-dun-rôle\">Structure d'un rôle<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#structure-dun-r%C3%B4le\" class=\"hash-link\" aria-label=\"Direct link to Structure d'un rôle\" title=\"Direct link to Structure d'un rôle\" translate=\"no\">​</a></h3>\n<p>Un rôle suit une structure de répertoires standardisée :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">roles</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└── webserver</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── defaults</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">           </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Variables par défaut (priorité la plus basse)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │   └── main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">vars</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">              </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Variables du rôle (priorité haute)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │   └── main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── tasks</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">             </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Tâches principales du rôle</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │   └── main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── handlers</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">          </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Gestionnaires d'événements</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │   └── main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── templates</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">         </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Templates Jinja2</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │   └── nginx</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">conf</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">j2</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── files</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">             </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Fichiers statiques</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │   └── index</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">html</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── meta</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\">              </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Métadonnées et dépendances</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │   └── main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    └── README</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">md          </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Documentation du rôle</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-un-rôle-avec-ansible-galaxy\">Créer un rôle avec ansible-galaxy<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#cr%C3%A9er-un-r%C3%B4le-avec-ansible-galaxy\" class=\"hash-link\" aria-label=\"Direct link to Créer un rôle avec ansible-galaxy\" title=\"Direct link to Créer un rôle avec ansible-galaxy\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer la structure d'un nouveau rôle</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-galaxy init webserver</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer un rôle dans un répertoire spécifique</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-galaxy init roles/webserver</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Voir la structure créée</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">tree roles/webserver</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-de-rôle-complet--webserver\">Exemple de rôle complet : webserver<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#exemple-de-r%C3%B4le-complet--webserver\" class=\"hash-link\" aria-label=\"Direct link to Exemple de rôle complet : webserver\" title=\"Direct link to Exemple de rôle complet : webserver\" translate=\"no\">​</a></h3>\n<p><strong>tasks/main.yml</strong></p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installation et configuration de Nginx</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Installer les paquets requis</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">apt</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> python3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">pip</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> present</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">update_cache</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Configurer Nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">template</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">src</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx.conf.j2</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">dest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /etc/nginx/sites</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">available/</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"> site_name </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">owner</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> root</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">group</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> root</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">mode</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'0644'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">notify</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> reload nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Activer le site</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">file</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">src</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /etc/nginx/sites</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">available/</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"> site_name </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">dest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /etc/nginx/sites</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">enabled/</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"> site_name </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> link</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">notify</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> reload nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Déployer le contenu du site</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">template</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">src</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> index.html.j2</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">dest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /var/www/</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"> site_name </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\">/index.html</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">owner</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> www</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">data</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">group</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> www</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">data</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">mode</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'0644'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> S'assurer que Nginx est démarré</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> started</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">enabled</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>defaults/main.yml</strong></p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Variables par défaut du rôle webserver</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">site_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> example.com</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">document_root</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /var/www/</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"> site_name </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">server_port</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">80</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">server_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"{{ site_name }}\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>vars/main.yml</strong></p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Variables spécifiques au rôle (priorité plus haute)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">nginx_worker_processes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> auto</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">nginx_worker_connections</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1024</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>handlers/main.yml</strong></p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Gestionnaires pour Nginx</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> reload nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> reloaded</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> restart nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> restarted</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>templates/nginx.conf.j2</strong></p>\n<div class=\"language-jinja2 codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-jinja2 codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">server {</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    listen {{ server_port }};</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    server_name {{ server_name }};</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    root {{ document_root }};</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    index index.html;</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    location / {</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        try_files $uri $uri/ =404;</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    }</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    access_log /var/log/nginx/{{ site_name }}_access.log;</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    error_log /var/log/nginx/{{ site_name }}_error.log;</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>meta/main.yml</strong></p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Métadonnées et dépendances du rôle</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">galaxy_info</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">author</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Votre Nom</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">description</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Installation et configuration de Nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">company</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Votre Entreprise</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">license</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> MIT</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">min_ansible_version</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2.9</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">platforms</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Ubuntu</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">versions</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> focal</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> jammy</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Debian</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">versions</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> bullseye</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> bookworm</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">galaxy_tags</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> webserver</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> web</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">dependencies</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"utiliser-un-rôle-dans-un-playbook\">Utiliser un rôle dans un playbook<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#utiliser-un-r%C3%B4le-dans-un-playbook\" class=\"hash-link\" aria-label=\"Direct link to Utiliser un rôle dans un playbook\" title=\"Direct link to Utiliser un rôle dans un playbook\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Configurer les serveurs web</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> webservers</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">become</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">roles</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">role</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> webserver</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">vars</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">site_name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> monsite.com</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">server_port</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">8080</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Ou avec une syntaxe plus détaillée</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Configurer avec des conditions</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> webservers</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">become</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">roles</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">role</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> webserver</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">when</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> ansible_os_family == \"Debian\"</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tags</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> web</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"collections-ansible-\">Collections Ansible 📚<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#collections-ansible-\" class=\"hash-link\" aria-label=\"Direct link to Collections Ansible 📚\" title=\"Direct link to Collections Ansible 📚\" translate=\"no\">​</a></h2>\n<p>Les collections sont des packages qui regroupent modules, rôles, plugins et playbooks. Elles remplacent progressivement les rôles Galaxy.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installer-une-collection\">Installer une collection<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#installer-une-collection\" class=\"hash-link\" aria-label=\"Direct link to Installer une collection\" title=\"Direct link to Installer une collection\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installer depuis Ansible Galaxy</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-galaxy collection </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> community.general</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installer depuis un fichier requirements.yml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-galaxy collection </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-r</span><span class=\"token plain\"> requirements.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installer une version spécifique</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-galaxy collection </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> community.general:5.8.0</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fichier-requirementsyml\">Fichier requirements.yml<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#fichier-requirementsyml\" class=\"hash-link\" aria-label=\"Direct link to Fichier requirements.yml\" title=\"Direct link to Fichier requirements.yml\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">collections</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Depuis Ansible Galaxy</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> community.general</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">version</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"&gt;=5.0.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> ansible.posix</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">version</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"1.5.1\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> community.docker</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Depuis un dépôt Git</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> https</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">//github.com/organisation/ma</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">collection.git</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">type</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> git</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">version</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> main</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"utiliser-une-collection\">Utiliser une collection<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#utiliser-une-collection\" class=\"hash-link\" aria-label=\"Direct link to Utiliser une collection\" title=\"Direct link to Utiliser une collection\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Utiliser des modules de collections</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> all</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Méthode 1 : FQCN (Fully Qualified Collection Name)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Installer un paquet avec community.general</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">community.general.npm</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> express</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">global</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Méthode 2 : Importer la collection</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Docker tasks</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">block</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">community.docker.docker_container</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">image</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">latest</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> started</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">collections</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> community.docker</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-sa-propre-collection\">Créer sa propre collection<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#cr%C3%A9er-sa-propre-collection\" class=\"hash-link\" aria-label=\"Direct link to Créer sa propre collection\" title=\"Direct link to Créer sa propre collection\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer la structure d'une collection</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-galaxy collection init mon_namespace.ma_collection</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Structure créée</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">mon_namespace/</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└── ma_collection/</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── docs/</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── galaxy.yml          </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Métadonnées de la collection</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── plugins/</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │   ├── modules/        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Modules personnalisés</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │   ├── inventory/      </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Plugins d'inventaire</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    │   └── lookup/         </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Plugins lookup</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── roles/              </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Rôles inclus dans la collection</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    ├── playbooks/          </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Playbooks d'exemple</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    └── README.md</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ansible-vault--gérer-les-secrets-en-toute-sécurité-\">Ansible Vault : gérer les secrets en toute sécurité 🔒<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#ansible-vault--g%C3%A9rer-les-secrets-en-toute-s%C3%A9curit%C3%A9-\" class=\"hash-link\" aria-label=\"Direct link to Ansible Vault : gérer les secrets en toute sécurité 🔒\" title=\"Direct link to Ansible Vault : gérer les secrets en toute sécurité 🔒\" translate=\"no\">​</a></h2>\n<p>Ansible Vault permet de chiffrer les fichiers contenant des données sensibles.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"créer-un-fichier-chiffré\">Créer un fichier chiffré<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#cr%C3%A9er-un-fichier-chiffr%C3%A9\" class=\"hash-link\" aria-label=\"Direct link to Créer un fichier chiffré\" title=\"Direct link to Créer un fichier chiffré\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer un nouveau fichier chiffré</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault create secrets.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vous serez invité à entrer un mot de passe</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Puis un éditeur s'ouvrira pour saisir le contenu</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Contenu de secrets.yml (déchiffré) :</strong></p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">db_password</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"SuperSecretPassword123!\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">api_key</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"abc123def456ghi789\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">ssl_certificate_key</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">|</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"chiffrer-un-fichier-existant\">Chiffrer un fichier existant<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#chiffrer-un-fichier-existant\" class=\"hash-link\" aria-label=\"Direct link to Chiffrer un fichier existant\" title=\"Direct link to Chiffrer un fichier existant\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Chiffrer un fichier existant</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault encrypt vars/production.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Chiffrer plusieurs fichiers</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault encrypt vars/*.yml</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"modifier-un-fichier-chiffré\">Modifier un fichier chiffré<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#modifier-un-fichier-chiffr%C3%A9\" class=\"hash-link\" aria-label=\"Direct link to Modifier un fichier chiffré\" title=\"Direct link to Modifier un fichier chiffré\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Éditer un fichier chiffré (déchiffrement temporaire)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault edit secrets.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Voir le contenu sans éditer</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault view secrets.yml</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"déchiffrer-un-fichier\">Déchiffrer un fichier<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#d%C3%A9chiffrer-un-fichier\" class=\"hash-link\" aria-label=\"Direct link to Déchiffrer un fichier\" title=\"Direct link to Déchiffrer un fichier\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Déchiffrer un fichier (attention, perte de la protection !)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault decrypt secrets.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Rechiffrer avec un nouveau mot de passe</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault rekey secrets.yml</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"utiliser-vault-dans-un-playbook\">Utiliser Vault dans un playbook<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#utiliser-vault-dans-un-playbook\" class=\"hash-link\" aria-label=\"Direct link to Utiliser Vault dans un playbook\" title=\"Direct link to Utiliser Vault dans un playbook\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Déploiement avec secrets</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> production</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">vars_files</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> vars/common.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> secrets.yml  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Fichier chiffré avec Vault</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Configurer la base de données</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">mysql_user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> app_user</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">password</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"{{ db_password }}\"</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Depuis secrets.yml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">priv</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"appdb.*:ALL\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> present</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Configurer l'API</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">template</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">src</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> api_config.j2</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">dest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /etc/app/config.json</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">vars</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">api_secret</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"{{ api_key }}\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exécuter-avec-vault\">Exécuter avec Vault<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#ex%C3%A9cuter-avec-vault\" class=\"hash-link\" aria-label=\"Direct link to Exécuter avec Vault\" title=\"Direct link to Exécuter avec Vault\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Demander le mot de passe interactivement</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook deploy.yml --ask-vault-pass</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Utiliser un fichier de mot de passe</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook deploy.yml --vault-password-file ~/.vault_pass.txt</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Utiliser un script pour obtenir le mot de passe</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook deploy.yml --vault-password-file get_vault_pass.sh</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fichier-de-mot-de-passe\">Fichier de mot de passe<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#fichier-de-mot-de-passe\" class=\"hash-link\" aria-label=\"Direct link to Fichier de mot de passe\" title=\"Direct link to Fichier de mot de passe\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer un fichier de mot de passe</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">echo</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"MonMotDePasseVault\"</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> ~/.vault_pass.txt</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">chmod</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">600</span><span class=\"token plain\"> ~/.vault_pass.txt</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Configurer dans ansible.cfg</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">cat</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;&gt;</span><span class=\"token plain\"> ansible.cfg </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&lt;&lt;</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">EOF</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">[defaults]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">vault_password_file = ~/.vault_pass.txt</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">EOF</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"script-pour-récupérer-le-mot-de-passe\">Script pour récupérer le mot de passe<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#script-pour-r%C3%A9cup%C3%A9rer-le-mot-de-passe\" class=\"hash-link\" aria-label=\"Direct link to Script pour récupérer le mot de passe\" title=\"Direct link to Script pour récupérer le mot de passe\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token shebang important\" style=\"color:hsl(220, 14%, 71%);font-weight:bold\">#!/bin/bash</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># get_vault_pass.sh - Récupère le mot de passe depuis un gestionnaire de secrets</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exemple avec pass (passwordstore.org)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pass show ansible/vault</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exemple avec AWS Secrets Manager</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">aws secretsmanager get-secret-value </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  --secret-id ansible-vault </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--query</span><span class=\"token plain\"> SecretString </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--output</span><span class=\"token plain\"> text</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exemple avec 1Password CLI</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">op</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">read</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"op://DevOps/Ansible Vault/password\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"vault-ids--gérer-plusieurs-clés\">Vault IDs : gérer plusieurs clés<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#vault-ids--g%C3%A9rer-plusieurs-cl%C3%A9s\" class=\"hash-link\" aria-label=\"Direct link to Vault IDs : gérer plusieurs clés\" title=\"Direct link to Vault IDs : gérer plusieurs clés\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer des fichiers avec différents Vault IDs</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault create --vault-id dev@prompt secrets_dev.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault create --vault-id prod@prompt secrets_prod.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Utiliser avec des fichiers de mots de passe</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-vault create --vault-id dev@.vault_dev secrets_dev.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exécuter avec plusieurs Vault IDs</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook deploy.yml </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  --vault-id dev@.vault_dev </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  --vault-id prod@.vault_prod</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"chiffrer-des-variables-individuelles\">Chiffrer des variables individuelles<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#chiffrer-des-variables-individuelles\" class=\"hash-link\" aria-label=\"Direct link to Chiffrer des variables individuelles\" title=\"Direct link to Chiffrer des variables individuelles\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Au lieu de chiffrer tout le fichier</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">db_host</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> localhost</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">db_user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> app_user</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">db_password</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token tag\" style=\"color:hsl(355, 65%, 65%)\">!vault</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">|</span><span class=\"token scalar string\" style=\"color:hsl(95, 38%, 62%)\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token scalar string\" style=\"color:hsl(95, 38%, 62%)\">  $ANSIBLE_VAULT;1.1;AES256</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token scalar string\" style=\"color:hsl(95, 38%, 62%)\">  66386439653936393039346235323131386335333132333239336631643366326362333733363264</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token scalar string\" style=\"color:hsl(95, 38%, 62%)\">  3939666233316362313938396331626664626134623239360a356430646364633338336564383661</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token scalar string\" style=\"color:hsl(95, 38%, 62%)\">  ...</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Créer une variable chiffrée</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">vault encrypt_string 'SuperSecretPassword' </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">name 'db_password'</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques-avancées-\">Bonnes pratiques avancées 🏆<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#bonnes-pratiques-avanc%C3%A9es-\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques avancées 🏆\" title=\"Direct link to Bonnes pratiques avancées 🏆\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"1-structure-de-projet-recommandée\">1. Structure de projet recommandée<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#1-structure-de-projet-recommand%C3%A9e\" class=\"hash-link\" aria-label=\"Direct link to 1. Structure de projet recommandée\" title=\"Direct link to 1. Structure de projet recommandée\" translate=\"no\">​</a></h3>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token plain\">project</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── ansible</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">cfg</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── inventories</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── production</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   │   ├── hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   │   └── group_vars</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   │       ├── </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">all</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   │       └── webservers</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   └── staging</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│       ├── hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│       └── group_vars</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── roles</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── common</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── webserver</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   └── database</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── playbooks</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── deploy</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   ├── rollback</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   └── maintenance</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── collections</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   └── requirements</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── group_vars</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│   └── </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">all</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│       ├── </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">vars</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">│       └── vault</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└── README</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">md</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"2-utiliser-des-tags-stratégiquement\">2. Utiliser des tags stratégiquement<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#2-utiliser-des-tags-strat%C3%A9giquement\" class=\"hash-link\" aria-label=\"Direct link to 2. Utiliser des tags stratégiquement\" title=\"Direct link to 2. Utiliser des tags stratégiquement\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Configuration complète</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> webservers</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Installer les paquets</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">apt</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"{{ item }}\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> present</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">loop</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> python3</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tags</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> install</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> packages</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Configurer Nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">template</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">src</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx.conf.j2</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">dest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /etc/nginx/nginx.conf</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tags</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> config</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Déployer l'application</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">copy</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">src</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> app/</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">dest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /var/www/app/</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tags</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> deploy</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> app</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exécuter uniquement certaines tâches</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ansible-playbook deploy.yml --tags \"config\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ansible-playbook deploy.yml --skip-tags \"deploy\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"3-gestion-des-erreurs-robuste\">3. Gestion des erreurs robuste<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#3-gestion-des-erreurs-robuste\" class=\"hash-link\" aria-label=\"Direct link to 3. Gestion des erreurs robuste\" title=\"Direct link to 3. Gestion des erreurs robuste\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Gestion d'erreurs avancée</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> all</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Tâche qui peut échouer</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">command</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /opt/script.sh</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">register</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> script_result</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">ignore_errors</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Traiter le résultat</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">block</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">debug</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">msg</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Script réussi : {{ script_result.stdout }}\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">rescue</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">debug</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">msg</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Script échoué : {{ script_result.stderr }}\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">include_tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> rollback.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">always</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Nettoyage</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">file</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">path</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /tmp/script</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">lock</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> absent</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion-\">Conclusion 🎯<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#conclusion-\" class=\"hash-link\" aria-label=\"Direct link to Conclusion 🎯\" title=\"Direct link to Conclusion 🎯\" translate=\"no\">​</a></h2>\n<p>Ansible offre des fonctionnalités avancées puissantes pour gérer des infrastructures complexes de manière sécurisée et automatisée. Les rôles et collections permettent de créer des composants réutilisables, Vault protège les secrets, et l'intégration CI/CD automatise les déploiements.</p>\n<p>Points clés à retenir :</p>\n<ul>\n<li class=\"\"><strong>Rôles</strong> : modulariser et réutiliser le code</li>\n<li class=\"\"><strong>Collections</strong> : packages complets de fonctionnalités</li>\n<li class=\"\"><strong>Vault</strong> : chiffrer les données sensibles</li>\n<li class=\"\"><strong>CI/CD</strong> : automatiser les déploiements</li>\n<li class=\"\"><strong>Stratégies</strong> : blue-green, canary, rollback automatique</li>\n</ul>\n<p>La maîtrise de ces concepts permet de créer des infrastructures as code robustes, maintenables et sécurisées.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ressources-utiles-\">Ressources utiles 📚<a href=\"https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances#ressources-utiles-\" class=\"hash-link\" aria-label=\"Direct link to Ressources utiles 📚\" title=\"Direct link to Ressources utiles 📚\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://docs.ansible.com/ansible/latest/user_guide/playbooks_best_practices.html\" target=\"_blank\" rel=\"noopener noreferrer\">Ansible Best Practices</a></li>\n<li class=\"\"><a href=\"https://galaxy.ansible.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Ansible Galaxy</a></li>\n<li class=\"\"><a href=\"https://docs.ansible.com/ansible/latest/user_guide/vault.html\" target=\"_blank\" rel=\"noopener noreferrer\">Ansible Vault Documentation</a></li>\n<li class=\"\"><a href=\"https://docs.ansible.com/ansible/latest/user_guide/collections_using.html\" target=\"_blank\" rel=\"noopener noreferrer\">Ansible Collections</a></li>\n</ul>",
            "url": "https://delpeuch.net/blog/2025/11/21/08-iac/ansible-playbooks-avances",
            "title": "Ansible : avancé",
            "summary": "Fonctionnalités avancées d'Ansible pour créer des playbooks modulaires, sécuriser les secrets et automatiser les déploiements.",
            "date_modified": "2025-11-21T00:00:00.000Z",
            "tags": [
                "Infrastructure as Code",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await",
            "content_html": "<p>La programmation asynchrone est devenue essentielle pour créer des applications Python performantes, notamment pour les APIs, les web scrapers, ou les applications traitant de nombreuses opérations I/O. Dans cet article, nous explorerons en profondeur <code>async</code>/<code>await</code> et <code>asyncio</code>, avec des cas d'usage pratiques notamment avec FastAPI. 🚀</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"comprendre-la-programmation-asynchrone-\">Comprendre la programmation asynchrone 🤔<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#comprendre-la-programmation-asynchrone-\" class=\"hash-link\" aria-label=\"Direct link to Comprendre la programmation asynchrone 🤔\" title=\"Direct link to Comprendre la programmation asynchrone 🤔\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"le-problème--lattente-inutile\">Le problème : l'attente inutile<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#le-probl%C3%A8me--lattente-inutile\" class=\"hash-link\" aria-label=\"Direct link to Le problème : l'attente inutile\" title=\"Direct link to Le problème : l'attente inutile\" translate=\"no\">​</a></h3>\n<p>Dans un programme synchrone classique, chaque opération attend la fin de la précédente, même si elle ne fait rien d'utile pendant ce temps. C'est comme faire la queue au supermarché : si la caissière attend que le client précédent range ses courses dans son sac, tout le monde attend inutilement.</p>\n<p><strong>Exemple concret :</strong> Imaginez une application qui doit récupérer des données depuis 3 APIs différentes. En mode synchrone, le programme attend la réponse de l'API 1 (2 secondes), puis attend l'API 2 (2 secondes), puis l'API 3 (2 secondes) = <strong>6 secondes au total</strong>.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"la-solution--lasynchrone\">La solution : l'asynchrone<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#la-solution--lasynchrone\" class=\"hash-link\" aria-label=\"Direct link to La solution : l'asynchrone\" title=\"Direct link to La solution : l'asynchrone\" translate=\"no\">​</a></h3>\n<p>La programmation asynchrone permet de ne pas rester bloqué pendant les opérations d'attente (I/O). Pendant qu'une requête HTTP est en cours, le programme peut lancer d'autres requêtes ou effectuer d'autres tâches.</p>\n<p><strong>Avec l'asynchrone :</strong> Les 3 requêtes sont lancées simultanément, et le programme attend seulement le temps de la plus longue = <strong>2 secondes au total</strong>.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> asyncio</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">faire_requete</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">url</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">sleep</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Simule une requête HTTP</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">f\"Données de </span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string-interpolation interpolation\">url</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Les 3 requêtes s'exécutent en parallèle</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    resultats </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">gather</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        faire_requete</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"api.example.com/1\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        faire_requete</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"api.example.com/2\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        faire_requete</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"api.example.com/3\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> resultats</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">run</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quand-utiliser-lasynchrone-\">Quand utiliser l'asynchrone ?<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#quand-utiliser-lasynchrone-\" class=\"hash-link\" aria-label=\"Direct link to Quand utiliser l'asynchrone ?\" title=\"Direct link to Quand utiliser l'asynchrone ?\" translate=\"no\">​</a></h3>\n<p>L'asynchrone est efficace uniquement pour les opérations <strong>I/O-bound</strong> (limitées par les entrées/sorties), pas pour les calculs <strong>CPU-bound</strong>.</p>\n<p>✅ <strong>Bon pour (I/O-bound) :</strong></p>\n<ul>\n<li class=\"\">Requêtes HTTP/API : attente réseau</li>\n<li class=\"\">Opérations de base de données : attente disque/réseau</li>\n<li class=\"\">Lecture/écriture de fichiers : attente disque</li>\n<li class=\"\">WebSockets : attente de messages</li>\n</ul>\n<p>❌ <strong>Pas adapté pour (CPU-bound) :</strong></p>\n<ul>\n<li class=\"\">Calculs mathématiques complexes</li>\n<li class=\"\">Traitement d'images/vidéos</li>\n<li class=\"\">Compression de données</li>\n<li class=\"\">Pour ces cas, utiliser <code>multiprocessing</code> ou <code>threading</code></li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"les-bases-dasyncawait-\">Les bases d'async/await 📚<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#les-bases-dasyncawait-\" class=\"hash-link\" aria-label=\"Direct link to Les bases d'async/await 📚\" title=\"Direct link to Les bases d'async/await 📚\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"les-coroutines--des-fonctions-pausables\">Les coroutines : des fonctions \"pausables\"<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#les-coroutines--des-fonctions-pausables\" class=\"hash-link\" aria-label=\"Direct link to Les coroutines : des fonctions &quot;pausables&quot;\" title=\"Direct link to Les coroutines : des fonctions &quot;pausables&quot;\" translate=\"no\">​</a></h3>\n<p>Une <strong>coroutine</strong> est une fonction spéciale qui peut être suspendue et reprise. Elle se déclare avec <code>async def</code> au lieu de <code>def</code>.</p>\n<p><strong>Concept clé :</strong> Une coroutine ne s'exécute pas immédiatement quand on l'appelle. Elle retourne un objet \"coroutine\" qui doit être <code>await</code>é pour s'exécuter réellement.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">fonction_async</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Hello\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ❌ Ceci ne fait RIEN, retourne juste un objet coroutine</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">resultat </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> fonction_async</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ✅ Pour exécuter, il faut await dans un contexte async</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    resultat </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> fonction_async</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Maintenant ça s'exécute</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">print</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">resultat</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">run</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Point d'entrée pour démarrer l'async</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"le-mot-clé-await--point-de-suspension\">Le mot-clé <code>await</code> : point de suspension<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#le-mot-cl%C3%A9-await--point-de-suspension\" class=\"hash-link\" aria-label=\"Direct link to le-mot-clé-await--point-de-suspension\" title=\"Direct link to le-mot-clé-await--point-de-suspension\" translate=\"no\">​</a></h3>\n<p><code>await</code> signifie \"attends que cette opération se termine, mais pendant ce temps, laisse d'autres tâches s'exécuter\".</p>\n<p><strong>Analogie :</strong> C'est comme dire \"je mets cette tâche en pause, fais autre chose en attendant, et reviens me voir quand c'est prêt\".</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">operation_longue</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">print</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Début\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">sleep</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># \"Pause ici pendant 2s, fais autre chose\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">print</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Fin\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Terminé\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exécuter-plusieurs-coroutines-en-parallèle\">Exécuter plusieurs coroutines en parallèle<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#ex%C3%A9cuter-plusieurs-coroutines-en-parall%C3%A8le\" class=\"hash-link\" aria-label=\"Direct link to Exécuter plusieurs coroutines en parallèle\" title=\"Direct link to Exécuter plusieurs coroutines en parallèle\" translate=\"no\">​</a></h3>\n<p><strong>Le problème :</strong> Comment lancer plusieurs tâches asynchrones en même temps ?</p>\n<p><strong>Solution 1 : <code>asyncio.gather()</code></strong> - Lance tout en parallèle et attend tous les résultats</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">tache</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">nom</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> duree</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">sleep</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">duree</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">f\"</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string-interpolation interpolation\">nom</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\"> terminée\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Les 3 tâches démarrent en même temps</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    resultats </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">gather</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        tache</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Tâche 1\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        tache</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Tâche 2\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        tache</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Tâche 3\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Attend que TOUTES soient finies</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">print</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">resultats</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ['Tâche 1 terminée', 'Tâche 2 terminée', 'Tâche 3 terminée']</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Solution 2 : <code>asyncio.create_task()</code></strong> - Plus de contrôle individuel</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Démarre la tâche immédiatement en arrière-plan</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    task </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">create_task</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">tache</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"A\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Fait autre chose...</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">print</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"La tâche tourne en arrière-plan\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Attend le résultat quand nécessaire</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    resultat </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> task</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"asyncio--fonctionnalités-essentielles-️\">asyncio : fonctionnalités essentielles 🛠️<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#asyncio--fonctionnalit%C3%A9s-essentielles-%EF%B8%8F\" class=\"hash-link\" aria-label=\"Direct link to asyncio : fonctionnalités essentielles 🛠️\" title=\"Direct link to asyncio : fonctionnalités essentielles 🛠️\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"levent-loop--le-chef-dorchestre\">L'Event Loop : le chef d'orchestre<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#levent-loop--le-chef-dorchestre\" class=\"hash-link\" aria-label=\"Direct link to L'Event Loop : le chef d'orchestre\" title=\"Direct link to L'Event Loop : le chef d'orchestre\" translate=\"no\">​</a></h3>\n<p>L'<strong>event loop</strong> (boucle d'événements) est le moteur qui gère l'exécution de toutes les coroutines. C'est lui qui décide quelle tâche exécuter et quand.</p>\n<p><strong>Analogie :</strong> C'est comme un chef d'orchestre qui coordonne tous les musiciens (coroutines). Quand un musicien doit faire une pause (await), le chef donne la parole à un autre.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">hello</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">sleep</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">print</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"World\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># asyncio.run() crée l'event loop, exécute la coroutine, puis nettoie</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">run</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">hello</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Point important :</strong> <code>asyncio.run()</code> est le point d'entrée principal. C'est lui qui démarre l'event loop et permet à tout le système asynchrone de fonctionner.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"gestion-des-erreurs--ne-pas-tout-casser\">Gestion des erreurs : ne pas tout casser<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#gestion-des-erreurs--ne-pas-tout-casser\" class=\"hash-link\" aria-label=\"Direct link to Gestion des erreurs : ne pas tout casser\" title=\"Direct link to Gestion des erreurs : ne pas tout casser\" translate=\"no\">​</a></h3>\n<p><strong>Le problème :</strong> Si une tâche échoue avec <code>gather()</code>, par défaut toutes les autres sont annulées.</p>\n<p><strong>La solution :</strong> <code>return_exceptions=True</code> capture les erreurs comme des résultats normaux.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Sans return_exceptions : si operation_risquee(2) échoue, tout s'arrête</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">resultats </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">gather</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    operation_risquee</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Réussit</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    operation_risquee</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Échoue</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    operation_risquee</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Ne s'exécute jamais</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Avec return_exceptions : toutes s'exécutent, les erreurs sont dans les résultats</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">resultats </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">gather</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    operation_risquee</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    operation_risquee</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    operation_risquee</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    return_exceptions</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token boolean\" style=\"color:hsl(29, 54%, 61%)\">True</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Les exceptions sont retournées comme résultats</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># resultats = [\"Succès 1\", Exception(...), \"Succès 3\"]</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"timeouts--limiter-le-temps-dattente\">Timeouts : limiter le temps d'attente<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#timeouts--limiter-le-temps-dattente\" class=\"hash-link\" aria-label=\"Direct link to Timeouts : limiter le temps d'attente\" title=\"Direct link to Timeouts : limiter le temps d'attente\" translate=\"no\">​</a></h3>\n<p><strong>Utilité :</strong> Éviter d'attendre indéfiniment une opération qui ne répond plus.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">try</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Attend maximum 3 secondes</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    resultat </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">wait_for</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">operation_longue</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> timeout</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3.0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">except</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">TimeoutError</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">print</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"L'opération a pris trop de temps !\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"requêtes-http-asynchrones-\">Requêtes HTTP asynchrones 🌐<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#requ%C3%AAtes-http-asynchrones-\" class=\"hash-link\" aria-label=\"Direct link to Requêtes HTTP asynchrones 🌐\" title=\"Direct link to Requêtes HTTP asynchrones 🌐\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"le-cas-dusage-parfait-pour-lasynchrone\">Le cas d'usage parfait pour l'asynchrone<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#le-cas-dusage-parfait-pour-lasynchrone\" class=\"hash-link\" aria-label=\"Direct link to Le cas d'usage parfait pour l'asynchrone\" title=\"Direct link to Le cas d'usage parfait pour l'asynchrone\" translate=\"no\">​</a></h3>\n<p>Les requêtes HTTP sont le meilleur exemple d'opération I/O-bound : le programme passe la majorité du temps à attendre la réponse du serveur, sans rien faire.</p>\n<p><strong>Avantage de l'async :</strong> Pendant qu'une requête attend la réponse, on peut en lancer d'autres. Résultat : 10 requêtes prennent le temps d'une seule !</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"avec-httpx--le-client-http-asynchrone\">Avec httpx : le client HTTP asynchrone<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#avec-httpx--le-client-http-asynchrone\" class=\"hash-link\" aria-label=\"Direct link to Avec httpx : le client HTTP asynchrone\" title=\"Direct link to Avec httpx : le client HTTP asynchrone\" translate=\"no\">​</a></h3>\n<p><code>httpx</code> est l'équivalent moderne et asynchrone de <code>requests</code>.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> httpx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> asyncio</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">fetch_users</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">usernames</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">list</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">list</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">dict</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># AsyncClient gère les connexions de manière asynchrone</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">with</span><span class=\"token plain\"> httpx</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">AsyncClient</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">as</span><span class=\"token plain\"> client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Crée une liste de coroutines (pas encore exécutées)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        tasks </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">f\"https://api.github.com/users/</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string-interpolation interpolation\">username</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">for</span><span class=\"token plain\"> username </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">in</span><span class=\"token plain\"> usernames</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Lance toutes les requêtes en parallèle</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        responses </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">gather</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">*</span><span class=\"token plain\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">response</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">for</span><span class=\"token plain\"> response </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">in</span><span class=\"token plain\"> responses</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># 10 utilisateurs récupérés en parallèle = temps d'une seule requête</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">users </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> fetch_users</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"python\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"microsoft\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"google\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"facebook\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"apple\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Gain de performance :</strong> Sans async, 10 requêtes de 200ms = 2 secondes. Avec async = 200ms !</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"intégration-avec-fastapi-\">Intégration avec FastAPI 🚀<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#int%C3%A9gration-avec-fastapi-\" class=\"hash-link\" aria-label=\"Direct link to Intégration avec FastAPI 🚀\" title=\"Direct link to Intégration avec FastAPI 🚀\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pourquoi-fastapi-et-async-sont-faits-lun-pour-lautre\">Pourquoi FastAPI et async sont faits l'un pour l'autre<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#pourquoi-fastapi-et-async-sont-faits-lun-pour-lautre\" class=\"hash-link\" aria-label=\"Direct link to Pourquoi FastAPI et async sont faits l'un pour l'autre\" title=\"Direct link to Pourquoi FastAPI et async sont faits l'un pour l'autre\" translate=\"no\">​</a></h3>\n<p>FastAPI est conçu dès le départ pour l'asynchrone. Une API web est l'exemple parfait d'application I/O-bound : la plupart du temps est passé à attendre des bases de données, des APIs externes, ou des fichiers.</p>\n<p><strong>Avantage :</strong> Avec async, un serveur FastAPI peut gérer des milliers de requêtes simultanées sans créer de threads, simplement en utilisant l'event loop.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"routes-asynchrones\">Routes asynchrones<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#routes-asynchrones\" class=\"hash-link\" aria-label=\"Direct link to Routes asynchrones\" title=\"Direct link to Routes asynchrones\" translate=\"no\">​</a></h3>\n<p>Déclarer une route avec <code>async def</code> permet à FastAPI de gérer plusieurs requêtes en parallèle sans blocage.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> fastapi </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> FastAPI</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> httpx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">app </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> FastAPI</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@app</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"/users/{username}\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">get_user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">username</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Pendant que cette requête attend la réponse de GitHub,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># FastAPI peut traiter d'autres requêtes entrantes</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">with</span><span class=\"token plain\"> httpx</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">AsyncClient</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">as</span><span class=\"token plain\"> client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        response </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">f\"https://api.github.com/users/</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string-interpolation interpolation\">username</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Sans async :</strong> Chaque requête bloque le serveur pendant l'appel à GitHub (100-200ms). Avec async : des centaines de requêtes peuvent attendre en parallèle.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"base-de-données-asynchrone-avec-sqlalchemy\">Base de données asynchrone avec SQLAlchemy<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#base-de-donn%C3%A9es-asynchrone-avec-sqlalchemy\" class=\"hash-link\" aria-label=\"Direct link to Base de données asynchrone avec SQLAlchemy\" title=\"Direct link to Base de données asynchrone avec SQLAlchemy\" translate=\"no\">​</a></h3>\n<p>Les requêtes SQL sont des opérations I/O qui bénéficient énormément de l'async.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> sqlalchemy</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">ext</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">asyncio </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> AsyncSession</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> create_async_engine</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> sqlalchemy </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> select</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># asyncpg est le driver PostgreSQL asynchrone</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">engine </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> create_async_engine</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"postgresql+asyncpg://user:pass@localhost/db\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@app</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"/users\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">get_users</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> AsyncSession </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> Depends</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">get_db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Requête SQL non-bloquante</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">execute</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">select</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">User</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> result</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">scalars</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">all</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Gain :</strong> Pendant qu'une requête SQL s'exécute sur la DB, FastAPI peut traiter d'autres endpoints.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"cache-redis-asynchrone\">Cache Redis asynchrone<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#cache-redis-asynchrone\" class=\"hash-link\" aria-label=\"Direct link to Cache Redis asynchrone\" title=\"Direct link to Cache Redis asynchrone\" translate=\"no\">​</a></h3>\n<p>Redis est souvent utilisé comme cache pour accélérer les réponses. L'async permet de ne pas bloquer pendant les accès Redis.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> aioredis</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@app</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"/users/{user_id}\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">get_user_cached</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">user_id</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">int</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Vérifie le cache (opération réseau)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    cached </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> redis</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">f\"user:</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string-interpolation interpolation\">user_id</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">if</span><span class=\"token plain\"> cached</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">loads</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">cached</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Récupère depuis la DB si pas en cache</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    user </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> fetch_user_from_db</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">user_id</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Met en cache pour 1h</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> redis</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">setex</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">f\"user:</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token string-interpolation interpolation\">user_id</span><span class=\"token string-interpolation interpolation punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token string-interpolation string\" style=\"color:hsl(95, 38%, 62%)\">\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3600</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> json</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">dumps</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> user</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Architecture typique :</strong> API FastAPI → Cache Redis → Base de données PostgreSQL, le tout en asynchrone bout en bout.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"patterns-avancés-\">Patterns avancés 🎯<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#patterns-avanc%C3%A9s-\" class=\"hash-link\" aria-label=\"Direct link to Patterns avancés 🎯\" title=\"Direct link to Patterns avancés 🎯\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"limiter-la-concurrence-avec-semaphore\">Limiter la concurrence avec Semaphore<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#limiter-la-concurrence-avec-semaphore\" class=\"hash-link\" aria-label=\"Direct link to Limiter la concurrence avec Semaphore\" title=\"Direct link to Limiter la concurrence avec Semaphore\" translate=\"no\">​</a></h3>\n<p><strong>Le problème :</strong> Lancer 1000 requêtes HTTP en même temps peut surcharger le serveur ou épuiser les ressources (connexions, mémoire).</p>\n<p><strong>La solution :</strong> Un <strong>Semaphore</strong> limite le nombre d'opérations simultanées. C'est comme un parking avec un nombre limité de places : si toutes les places sont prises, les nouvelles voitures doivent attendre qu'une place se libère.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> asyncio </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> Semaphore</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">operation</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">numero</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">int</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> semaphore</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Semaphore</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Attend qu'une \"place\" soit disponible</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">with</span><span class=\"token plain\"> semaphore</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Maximum 3 opérations ici en même temps</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">sleep</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> numero</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    semaphore </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> Semaphore</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Maximum 3 opérations simultanées</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Lance 10 opérations, mais seulement 3 à la fois</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    tasks </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">operation</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">i</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> semaphore</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">for</span><span class=\"token plain\"> i </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">in</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">range</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">10</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    resultats </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">gather</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">*</span><span class=\"token plain\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Résultat :</strong> 10 opérations s'exécutent par vagues de 3, au lieu de toutes en même temps.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"retry-avec-backoff-exponentiel\">Retry avec backoff exponentiel<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#retry-avec-backoff-exponentiel\" class=\"hash-link\" aria-label=\"Direct link to Retry avec backoff exponentiel\" title=\"Direct link to Retry avec backoff exponentiel\" translate=\"no\">​</a></h3>\n<p><strong>Le problème :</strong> Une API temporairement indisponible ou un timeout réseau ne doit pas faire échouer toute l'opération.</p>\n<p><strong>La solution :</strong> Réessayer automatiquement avec des délais croissants (1s, 2s, 4s, 8s...).</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">retry_with_backoff</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">coro</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> max_retries</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">3</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> initial_delay</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1.0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> backoff_factor</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">2.0</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    delay </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> initial_delay</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">for</span><span class=\"token plain\"> attempt </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">in</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">range</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">max_retries</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">try</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> coro</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">except</span><span class=\"token plain\"> Exception </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">as</span><span class=\"token plain\"> e</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">if</span><span class=\"token plain\"> attempt </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">==</span><span class=\"token plain\"> max_retries </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">1</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">raise</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Dernier essai, on abandonne</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">sleep</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">delay</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Attente avant réessai</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            delay </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">*=</span><span class=\"token plain\"> backoff_factor  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Double le délai : 1s, 2s, 4s...</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Utilisation</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">resultat </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> retry_with_backoff</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">lambda</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> fetch_data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"api.com\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Avantage :</strong> Résilience face aux erreurs temporaires sans surcharger le serveur avec des réessais trop fréquents.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"context-manager-asynchrone\">Context Manager asynchrone<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#context-manager-asynchrone\" class=\"hash-link\" aria-label=\"Direct link to Context Manager asynchrone\" title=\"Direct link to Context Manager asynchrone\" translate=\"no\">​</a></h3>\n<p><strong>Utilité :</strong> Gérer automatiquement l'ouverture et la fermeture de ressources asynchrones (connexions DB, clients HTTP, fichiers...).</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">AsyncResource</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">__aenter__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Initialisation (ex: ouvrir connexion DB)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">connect</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> self</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">__aexit__</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> exc_type</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> exc_val</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> exc_tb</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Nettoyage automatique (ex: fermer connexion)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">disconnect</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Le nettoyage est garanti, même en cas d'erreur</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">with</span><span class=\"token plain\"> AsyncResource</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">as</span><span class=\"token plain\"> resource</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> resource</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">operation</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques-\">Bonnes pratiques 🐛<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#bonnes-pratiques-\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques 🐛\" title=\"Direct link to Bonnes pratiques 🐛\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"erreurs-courantes-à-éviter\">Erreurs courantes à éviter<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#erreurs-courantes-%C3%A0-%C3%A9viter\" class=\"hash-link\" aria-label=\"Direct link to Erreurs courantes à éviter\" title=\"Direct link to Erreurs courantes à éviter\" translate=\"no\">​</a></h3>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"1-oublier-le-await\">1. Oublier le <code>await</code><a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#1-oublier-le-await\" class=\"hash-link\" aria-label=\"Direct link to 1-oublier-le-await\" title=\"Direct link to 1-oublier-le-await\" translate=\"no\">​</a></h4>\n<p><strong>Erreur fréquente :</strong> Appeler une coroutine sans <code>await</code> ne fait rien, elle ne s'exécute pas !</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ❌ Mauvais : la fonction ne s'exécute jamais</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> async_function</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Retourne un objet coroutine non exécuté</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">print</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">result</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># &lt;coroutine object async_function at 0x...&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ✅ Bon : la fonction s'exécute vraiment</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">result </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> async_function</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">print</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">result</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Résultat attendu</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"2-bloquer-levent-loop\">2. Bloquer l'event loop<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#2-bloquer-levent-loop\" class=\"hash-link\" aria-label=\"Direct link to 2. Bloquer l'event loop\" title=\"Direct link to 2. Bloquer l'event loop\" translate=\"no\">​</a></h4>\n<p><strong>Le problème le plus grave :</strong> Utiliser des fonctions bloquantes (<code>time.sleep</code>, <code>requests.get</code>, opérations CPU lourdes) dans une coroutine paralyse tout le système asynchrone.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ❌ CATASTROPHIQUE : bloque TOUT pendant 10 secondes</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">bad</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    time</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">sleep</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">10</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Aucune autre coroutine ne peut s'exécuter !</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Done\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ✅ Bon : suspend seulement cette coroutine</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">good</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">sleep</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">10</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Les autres coroutines continuent</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Done\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Règle d'or :</strong> Dans une fonction <code>async</code>, toutes les opérations I/O doivent être async (avec <code>await</code>).</p>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"3-négliger-la-gestion-des-ressources\">3. Négliger la gestion des ressources<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#3-n%C3%A9gliger-la-gestion-des-ressources\" class=\"hash-link\" aria-label=\"Direct link to 3. Négliger la gestion des ressources\" title=\"Direct link to 3. Négliger la gestion des ressources\" translate=\"no\">​</a></h4>\n<p><strong>Problème :</strong> Les connexions DB, HTTP clients, fichiers doivent être fermés proprement.</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ❌ Risque de fuite de connexions</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">bad</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    client </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> httpx</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">AsyncClient</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    response </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">url</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Oubli de fermer le client !</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># ✅ Bon : fermeture automatique</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">good</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">with</span><span class=\"token plain\"> httpx</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">AsyncClient</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">as</span><span class=\"token plain\"> client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        response </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> client</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">url</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Client fermé automatiquement, même en cas d'erreur</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"mode-debug--détecter-les-problèmes\">Mode debug : détecter les problèmes<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#mode-debug--d%C3%A9tecter-les-probl%C3%A8mes\" class=\"hash-link\" aria-label=\"Direct link to Mode debug : détecter les problèmes\" title=\"Direct link to Mode debug : détecter les problèmes\" translate=\"no\">​</a></h3>\n<p>Le mode debug d'asyncio détecte automatiquement les erreurs courantes (coroutines non awaités, event loop bloqué trop longtemps...).</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Active les warnings détaillés</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">run</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> debug</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token boolean\" style=\"color:hsl(29, 54%, 61%)\">True</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Affiche un warning si une coroutine met plus de 100ms sans yield</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p><strong>Utile pendant le développement</strong> pour repérer les opérations bloquantes accidentelles.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion-\">Conclusion 🎯<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#conclusion-\" class=\"hash-link\" aria-label=\"Direct link to Conclusion 🎯\" title=\"Direct link to Conclusion 🎯\" translate=\"no\">​</a></h2>\n<p>La programmation asynchrone en Python avec <code>async</code>/<code>await</code> et <code>asyncio</code> est essentielle pour créer des applications performantes et réactives. Elle brille particulièrement avec FastAPI pour les APIs modernes.</p>\n<p>Points clés à retenir :</p>\n<ul>\n<li class=\"\"><strong>async/await</strong> : syntaxe simple pour la concurrence</li>\n<li class=\"\"><strong>asyncio</strong> : bibliothèque standard puissante</li>\n<li class=\"\"><strong>I/O-bound</strong> : parfait pour les opérations réseau/disque</li>\n<li class=\"\"><strong>FastAPI</strong> : framework idéal pour l'async</li>\n<li class=\"\"><strong>Patterns</strong> : queue, semaphore, retry, etc.</li>\n</ul>\n<p>Ces connaissances permettent de créer des applications Python hautement performantes.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ressources-utiles-\">Ressources utiles 📚<a href=\"https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await#ressources-utiles-\" class=\"hash-link\" aria-label=\"Direct link to Ressources utiles 📚\" title=\"Direct link to Ressources utiles 📚\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://docs.python.org/3/library/asyncio.html\" target=\"_blank\" rel=\"noopener noreferrer\">Documentation asyncio</a></li>\n<li class=\"\"><a href=\"https://realpython.com/async-io-python/\" target=\"_blank\" rel=\"noopener noreferrer\">Real Python - Async IO</a></li>\n<li class=\"\"><a href=\"https://fastapi.tiangolo.com/async/\" target=\"_blank\" rel=\"noopener noreferrer\">FastAPI Async</a></li>\n<li class=\"\"><a href=\"https://docs.aiohttp.org/\" target=\"_blank\" rel=\"noopener noreferrer\">aiohttp Documentation</a></li>\n</ul>",
            "url": "https://delpeuch.net/blog/2025/11/21/09-scripting/python-async-await",
            "title": "Python : async/await",
            "summary": "Maîtrisez la programmation asynchrone en Python pour créer des applications performantes et réactives.",
            "date_modified": "2025-11-21T00:00:00.000Z",
            "tags": [
                "Scripting"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/08/04/09-scripting/graphql",
            "content_html": "<p>GraphQL et REST sont deux paradigmes majeurs pour la conception d’API, chacun reposant sur des fondements théoriques et des choix architecturaux distincts. Comprendre leurs différences est essentiel pour concevoir des systèmes distribués robustes, évolutifs et maintenables.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-quune-api-rest--\">Qu’est-ce qu’une API REST ? 🌐<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#quest-ce-quune-api-rest--\" class=\"hash-link\" aria-label=\"Direct link to Qu’est-ce qu’une API REST ? 🌐\" title=\"Direct link to Qu’est-ce qu’une API REST ? 🌐\" translate=\"no\">​</a></h2>\n<p>REST (Representational State Transfer), formalisé par Roy Fielding en 2000, est un style architectural pour les systèmes distribués. Il repose sur l’identification des ressources via des URI, la manipulation de ces ressources à l’aide de méthodes HTTP standardisées (GET, POST, PUT, DELETE), et l’absence d’état côté serveur (statelessness).</p>\n<p>REST favorise une séparation stricte entre client et serveur, permettant une évolutivité horizontale et une interopérabilité accrue. Les ressources sont représentées sous forme de documents (souvent JSON), et l’API expose un ensemble d’endpoints correspondant à des entités métier.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"principes-clés-rest\">Principes clés REST<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#principes-cl%C3%A9s-rest\" class=\"hash-link\" aria-label=\"Direct link to Principes clés REST\" title=\"Direct link to Principes clés REST\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\"><strong>Ressources identifiées par des URLs</strong> : chaque entité métier possède une URI unique</li>\n<li class=\"\"><strong>Stateless</strong> : chaque requête HTTP est indépendante, facilitant la scalabilité</li>\n<li class=\"\"><strong>Utilisation sémantique des méthodes HTTP</strong> : GET (lecture), POST (création), PUT/PATCH (modification), DELETE (suppression)</li>\n<li class=\"\"><strong>Format de réponse standardisé</strong> : JSON, XML, ou autres, selon le header <code>Accept</code></li>\n<li class=\"\"><strong>Cacheabilité</strong> : possibilité d’utiliser le cache HTTP pour optimiser les performances</li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-dappel-rest\">Exemple d’appel REST<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#exemple-dappel-rest\" class=\"hash-link\" aria-label=\"Direct link to Exemple d’appel REST\" title=\"Direct link to Exemple d’appel REST\" translate=\"no\">​</a></h3>\n<div class=\"language-http codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-http codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">GET /users/123</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">Accept: application/json</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Réponse typique :</p>\n<div class=\"language-json codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"id\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">123</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"name\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Alice\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"email\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"alice@example.com\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-que-graphql--\">Qu’est-ce que GraphQL ? 🧩<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#quest-ce-que-graphql--\" class=\"hash-link\" aria-label=\"Direct link to Qu’est-ce que GraphQL ? 🧩\" title=\"Direct link to Qu’est-ce que GraphQL ? 🧩\" translate=\"no\">​</a></h2>\n<p>GraphQL, introduit par Facebook en 2015, est un langage de requête et un runtime pour les API. Il propose une approche déclarative : le client décrit précisément la forme et la structure des données attendues, et le serveur répond en conséquence, via un unique endpoint.</p>\n<p>GraphQL s’appuie sur un schéma fortement typé, défini côté serveur, qui décrit l’ensemble des types, des relations et des opérations (queries, mutations, subscriptions) disponibles. Cette introspection permet une documentation automatique et une validation statique des requêtes.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"principes-clés-graphql\">Principes clés GraphQL<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#principes-cl%C3%A9s-graphql\" class=\"hash-link\" aria-label=\"Direct link to Principes clés GraphQL\" title=\"Direct link to Principes clés GraphQL\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\"><strong>Un seul endpoint</strong> (généralement <code>/graphql</code>) : simplifie la gestion réseau et la sécurité</li>\n<li class=\"\"><strong>Requêtes déclaratives et flexibles</strong> : le client spécifie exactement les champs et relations désirés, limitant l’overfetching et l’underfetching</li>\n<li class=\"\"><strong>Schéma fortement typé</strong> : chaque type, champ et opération est explicitement défini, permettant la validation et l’autocomplétion</li>\n<li class=\"\"><strong>Agrégation de ressources</strong> : possibilité de récupérer des graphes de données complexes en une seule requête</li>\n<li class=\"\"><strong>Introspection</strong> : le schéma est auto-documenté et interrogeable dynamiquement</li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-de-requête-graphql\">Exemple de requête GraphQL<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#exemple-de-requ%C3%AAte-graphql\" class=\"hash-link\" aria-label=\"Direct link to Exemple de requête GraphQL\" title=\"Direct link to Exemple de requête GraphQL\" translate=\"no\">​</a></h3>\n<div class=\"language-graphql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-graphql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">query</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property-query\">user</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token attr-name\" style=\"color:hsl(29, 54%, 61%)\">id</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"123\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">name</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">email</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token object\">posts</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">title</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Réponse typique :</p>\n<div class=\"language-json codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"data\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"user\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"name\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Alice\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"email\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"alice@example.com\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"posts\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"> </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"title\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Premier post\"</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"> </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"title\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Second post\"</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"modélisation-et-sémantique-des-données\">Modélisation et sémantique des données<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#mod%C3%A9lisation-et-s%C3%A9mantique-des-donn%C3%A9es\" class=\"hash-link\" aria-label=\"Direct link to Modélisation et sémantique des données\" title=\"Direct link to Modélisation et sémantique des données\" translate=\"no\">​</a></h2>\n<p>REST modélise les entités métier comme des ressources indépendantes, accessibles via des URI. Les relations entre ressources sont généralement exprimées par des liens ou des sous-routes (ex : <code>/users/123/posts</code>).</p>\n<p>GraphQL modélise les données comme un graphe typé : chaque type peut référencer d’autres types, et les requêtes peuvent naviguer dans ce graphe de manière récursive. Cela permet d’exprimer des relations complexes et d’optimiser la récupération des données.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"comparaison-des-concepts-\">Comparaison des concepts 🔍<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#comparaison-des-concepts-\" class=\"hash-link\" aria-label=\"Direct link to Comparaison des concepts 🔍\" title=\"Direct link to Comparaison des concepts 🔍\" translate=\"no\">​</a></h2>\n<table><thead><tr><th>Critère</th><th>REST</th><th>GraphQL</th></tr></thead><tbody><tr><td>Endpoint</td><td>Plusieurs (par ressource)</td><td>Un seul</td></tr><tr><td>Format de réponse</td><td>Fixe (souvent tout l’objet)</td><td>Flexible (le client choisit)</td></tr><tr><td>Overfetching</td><td>Oui (données inutiles)</td><td>Non</td></tr><tr><td>Underfetching</td><td>Oui (requêtes multiples nécessaires)</td><td>Non</td></tr><tr><td>Documentation</td><td>Swagger, OpenAPI</td><td>Schéma introspectif, autogénéré</td></tr><tr><td>Versioning</td><td>Par URL ou header</td><td>Évolution incrémentale du schéma</td></tr><tr><td>Erreurs</td><td>Codes HTTP</td><td>Objet d’erreur structuré dans la réponse</td></tr><tr><td>Typage</td><td>Faible (contrats implicites)</td><td>Fort (contrats explicites)</td></tr><tr><td>Découverte</td><td>Manuelle, via documentation externe</td><td>Automatique, via introspection</td></tr></tbody></table>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"gestion-des-erreurs-et-robustesse\">Gestion des erreurs et robustesse<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#gestion-des-erreurs-et-robustesse\" class=\"hash-link\" aria-label=\"Direct link to Gestion des erreurs et robustesse\" title=\"Direct link to Gestion des erreurs et robustesse\" translate=\"no\">​</a></h2>\n<p>REST s’appuie sur les codes de statut HTTP pour signaler les erreurs (404, 500, etc.), ce qui permet une gestion standardisée mais parfois peu granulaire.</p>\n<p>GraphQL encapsule les erreurs dans la réponse JSON, permettant de signaler des erreurs partielles (ex : certains champs en erreur, d’autres valides), ce qui améliore la résilience côté client.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"avantages-et-limites-️\">Avantages et limites ⚖️<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#avantages-et-limites-%EF%B8%8F\" class=\"hash-link\" aria-label=\"Direct link to Avantages et limites ⚖️\" title=\"Direct link to Avantages et limites ⚖️\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"rest\">REST<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#rest\" class=\"hash-link\" aria-label=\"Direct link to REST\" title=\"Direct link to REST\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\">✅ Simplicité, standardisation HTTP</li>\n<li class=\"\">✅ Large écosystème</li>\n<li class=\"\">❌ Overfetching/Underfetching</li>\n<li class=\"\">❌ Multiplication des endpoints</li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"graphql\">GraphQL<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#graphql\" class=\"hash-link\" aria-label=\"Direct link to GraphQL\" title=\"Direct link to GraphQL\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\">✅ Flexibilité des requêtes</li>\n<li class=\"\">✅ Moins de requêtes réseau</li>\n<li class=\"\">✅ Typage fort et introspection</li>\n<li class=\"\">❌ Courbe d’apprentissage</li>\n<li class=\"\">❌ Complexité côté serveur</li>\n<li class=\"\">❌ Pas de cache HTTP natif</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quand-choisir-lun-ou-lautre--\">Quand choisir l’un ou l’autre ? 🤔<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#quand-choisir-lun-ou-lautre--\" class=\"hash-link\" aria-label=\"Direct link to Quand choisir l’un ou l’autre ? 🤔\" title=\"Direct link to Quand choisir l’un ou l’autre ? 🤔\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><strong>REST</strong> : API simples, forte compatibilité, besoin de cache HTTP</li>\n<li class=\"\"><strong>GraphQL</strong> : Applications complexes, besoins mobiles, agrégation de données, évolutivité du schéma</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion-\">Conclusion 🎯<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/graphql#conclusion-\" class=\"hash-link\" aria-label=\"Direct link to Conclusion 🎯\" title=\"Direct link to Conclusion 🎯\" translate=\"no\">​</a></h2>\n<p>REST reste pertinent pour de nombreux cas, mais GraphQL s’impose pour des besoins de flexibilité et d’optimisation des échanges. Le choix dépend du contexte technique et des besoins métier.</p>",
            "url": "https://delpeuch.net/blog/2025/08/04/09-scripting/graphql",
            "title": "API : REST vs GraphQL",
            "summary": "Comparaison détaillée entre les API GraphQL et REST : principes, avantages, limites et cas d’usage.",
            "date_modified": "2025-08-04T00:00:00.000Z",
            "tags": [
                "Scripting"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry",
            "content_html": "<p>Ce guide présente, étape par étape, la création d’une API GraphQL en Python avec FastAPI et Strawberry, en expliquant les choix d’outils et les bonnes pratiques à chaque étape.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"outils-utilisés\">Outils utilisés<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#outils-utilis%C3%A9s\" class=\"hash-link\" aria-label=\"Direct link to Outils utilisés\" title=\"Direct link to Outils utilisés\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fastapi\">FastAPI<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#fastapi\" class=\"hash-link\" aria-label=\"Direct link to FastAPI\" title=\"Direct link to FastAPI\" translate=\"no\">​</a></h3>\n<p>FastAPI est un framework web moderne pour Python, conçu pour créer des APIs performantes, robustes et faciles à maintenir. Il offre :</p>\n<ul>\n<li class=\"\">Un support natif d’async/await pour la performance</li>\n<li class=\"\">Une documentation automatique (Swagger/OpenAPI)</li>\n<li class=\"\">Une intégration simple avec les standards Python (type hints, Pydantic)</li>\n<li class=\"\">Idéal pour des APIs REST ou GraphQL modernes</li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"strawberry\">Strawberry<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#strawberry\" class=\"hash-link\" aria-label=\"Direct link to Strawberry\" title=\"Direct link to Strawberry\" translate=\"no\">​</a></h3>\n<p>Strawberry est une bibliothèque Python pour créer des APIs GraphQL. Elle se distingue par :</p>\n<ul>\n<li class=\"\">Une syntaxe moderne basée sur les dataclasses et les annotations de type Python</li>\n<li class=\"\">Un support natif de FastAPI et Starlette</li>\n<li class=\"\">La génération automatique du schéma GraphQL et de la documentation interactive (GraphiQL)</li>\n<li class=\"\">La gestion des queries, mutations et subscriptions (WebSocket)</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pourquoi-utiliser-fastapi-et-strawberry-ensemble-\">Pourquoi utiliser FastAPI et Strawberry ensemble ?<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#pourquoi-utiliser-fastapi-et-strawberry-ensemble-\" class=\"hash-link\" aria-label=\"Direct link to Pourquoi utiliser FastAPI et Strawberry ensemble ?\" title=\"Direct link to Pourquoi utiliser FastAPI et Strawberry ensemble ?\" translate=\"no\">​</a></h2>\n<p>FastAPI et Strawberry sont complémentaires dans l’architecture d’une API GraphQL moderne :</p>\n<ul>\n<li class=\"\"><strong>FastAPI</strong> joue le rôle de serveur web : il reçoit les requêtes HTTP/WS, gère le routage, la sécurité, la documentation, et l’intégration avec l’écosystème Python (middlewares, dépendances, etc.).</li>\n<li class=\"\"><strong>Strawberry</strong> gère toute la logique GraphQL : il définit le schéma (types, queries, mutations, subscriptions), résout les requêtes GraphQL, et expose l’interface interactive GraphiQL.</li>\n</ul>\n<p><strong>Comment ça s’interconnecte ?</strong></p>\n<ul>\n<li class=\"\">Strawberry fournit un schéma GraphQL Python.</li>\n<li class=\"\">FastAPI expose ce schéma sur une route (ex : <code>/graphql</code>) grâce à <code>GraphQLRouter</code>.</li>\n<li class=\"\">Toute requête GraphQL (query, mutation, subscription) passe par FastAPI, qui la transmet à Strawberry pour exécution.</li>\n</ul>\n<p><strong>Responsabilités dans l’architecture :</strong></p>\n<ul>\n<li class=\"\">FastAPI : transport, sécurité, configuration serveur, intégration avec d’autres services (auth, logs, etc.)</li>\n<li class=\"\">Strawberry : logique métier GraphQL, validation des requêtes, génération du schéma, documentation GraphQL</li>\n</ul>\n<p>Cette séparation permet de bénéficier du meilleur des deux mondes : la puissance de FastAPI pour l’API et l’écosystème Python, et la flexibilité de Strawberry pour GraphQL.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"initialisation-du-projet-python\">Initialisation du projet Python<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#initialisation-du-projet-python\" class=\"hash-link\" aria-label=\"Direct link to Initialisation du projet Python\" title=\"Direct link to Initialisation du projet Python\" translate=\"no\">​</a></h2>\n<p>Pour démarrer un projet Python proprement, on utilise <a href=\"https://python-poetry.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Poetry</a> qui gère les dépendances et l’environnement virtuel.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"1-création-du-projet-et-du-fichier-pyprojecttoml\">1. Création du projet et du fichier pyproject.toml<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#1-cr%C3%A9ation-du-projet-et-du-fichier-pyprojecttoml\" class=\"hash-link\" aria-label=\"Direct link to 1. Création du projet et du fichier pyproject.toml\" title=\"Direct link to 1. Création du projet et du fichier pyproject.toml\" translate=\"no\">​</a></h3>\n<p>Dans le terminal :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">poetry new exemple-graphql-fastapi</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">cd</span><span class=\"token plain\"> exemple-graphql-fastapi</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Cela crée la structure de base du projet et un fichier <code>pyproject.toml</code> qui centralise la configuration :</p>\n<div class=\"language-toml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">tool.poetry</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">name</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"exemple-graphql-fastapi\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">version</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"0.1.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">description</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Exemple d'API GraphQL avec FastAPI et Strawberry\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">authors</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Votre Nom &lt;email@example.com&gt;\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">tool.poetry.dependencies</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">python</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"&gt;=3.9,&lt;4.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">fastapi</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"^0.110.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">uvicorn</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"^0.29.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">strawberry-graphql</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"^0.220.0\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">requests</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"^2.32.4\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">websockets</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"^15.0.1\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token table class-name\" style=\"color:hsl(29, 54%, 61%)\">build-system</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">requires</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"poetry-core&gt;=1.0.0\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key property\" style=\"color:hsl(355, 65%, 65%)\">build-backend</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"poetry.core.masonry.api\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"2-installation-des-dépendances\">2. Installation des dépendances<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#2-installation-des-d%C3%A9pendances\" class=\"hash-link\" aria-label=\"Direct link to 2. Installation des dépendances\" title=\"Direct link to 2. Installation des dépendances\" translate=\"no\">​</a></h3>\n<p>Toujours dans le dossier du projet :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">poetry </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Cela crée un environnement virtuel isolé et installe toutes les dépendances nécessaires.</p>\n<blockquote>\n<p><strong>Astuce</strong> : Pour activer l’environnement virtuel Poetry dans votre shell, utilisez <code>poetry env activate</code>.</p>\n</blockquote>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"mise-en-place-du-serveur-fastapi-mainpy\">Mise en place du serveur FastAPI (main.py)<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#mise-en-place-du-serveur-fastapi-mainpy\" class=\"hash-link\" aria-label=\"Direct link to Mise en place du serveur FastAPI (main.py)\" title=\"Direct link to Mise en place du serveur FastAPI (main.py)\" translate=\"no\">​</a></h2>\n<p>Le fichier <code>main.py</code> est le point d’entrée de l’application. Il configure FastAPI et expose le schéma GraphQL fourni par Strawberry sur une route dédiée.</p>\n<p>Créez un fichier <code>main.py</code> à la racine du projet avec le contenu suivant :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> fastapi </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> FastAPI</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> strawberry</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">fastapi </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> GraphQLRouter</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> schema </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> schema</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">app </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> FastAPI</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">graphql_app </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> GraphQLRouter</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">schema</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">app</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">include_router</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">graphql_app</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> prefix</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"/graphql\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<ul>\n<li class=\"\"><code>FastAPI()</code> instancie le serveur web.</li>\n<li class=\"\"><code>GraphQLRouter(schema)</code> crée une route GraphQL à partir du schéma Strawberry.</li>\n<li class=\"\"><code>app.include_router(...)</code> expose l’API GraphQL sur <code>/graphql</code>.</li>\n</ul>\n<blockquote>\n<p><strong>Remarque</strong> : Ce fichier ne contient aucune logique métier, il sert uniquement à brancher le schéma GraphQL sur le serveur HTTP. Toute la logique (types, queries, mutations, subscriptions) sera définie dans <code>schema.py</code>.</p>\n</blockquote>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"définition-du-schéma-graphql--les-queries-schemapy\">Définition du schéma GraphQL : les queries (schema.py)<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#d%C3%A9finition-du-sch%C3%A9ma-graphql--les-queries-schemapy\" class=\"hash-link\" aria-label=\"Direct link to Définition du schéma GraphQL : les queries (schema.py)\" title=\"Direct link to Définition du schéma GraphQL : les queries (schema.py)\" translate=\"no\">​</a></h2>\n<p>Pour organiser la logique métier, on crée un fichier <code>schema.py</code> qui contiendra tout le schéma GraphQL : types, queries, mutations, subscriptions.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"cas-dusage-fictif--gestion-de-piscines\">Cas d’usage fictif : gestion de piscines<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#cas-dusage-fictif--gestion-de-piscines\" class=\"hash-link\" aria-label=\"Direct link to Cas d’usage fictif : gestion de piscines\" title=\"Direct link to Cas d’usage fictif : gestion de piscines\" translate=\"no\">​</a></h3>\n<p>Imaginons une API pour gérer un parc de piscines publiques. On souhaite exposer en lecture la liste des piscines, avec leurs caractéristiques principales (nom, localisation, capacité, horaires, etc.).</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-quune-query-graphql\">Qu’est-ce qu’une query GraphQL ?<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#quest-ce-quune-query-graphql\" class=\"hash-link\" aria-label=\"Direct link to Qu’est-ce qu’une query GraphQL ?\" title=\"Direct link to Qu’est-ce qu’une query GraphQL ?\" translate=\"no\">​</a></h3>\n<p>En GraphQL, une <strong>query</strong> est une opération de lecture : elle permet au client de demander exactement les données dont il a besoin, sous la forme d’un arbre, en une seule requête HTTP. Contrairement à REST où chaque endpoint correspond à une ressource ou une action, GraphQL expose un unique endpoint <code>/graphql</code> et c’est la query qui décrit la forme et la profondeur des données attendues.</p>\n<ul>\n<li class=\"\">Une query interroge le schéma GraphQL pour obtenir des objets, des listes ou des champs précis.</li>\n<li class=\"\">Le serveur exécute la query et retourne uniquement les champs demandés, dans la structure voulue.</li>\n</ul>\n<p>Exemple de query côté client :</p>\n<div class=\"language-graphql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-graphql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">query</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token object\">pools</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">name</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">city</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Réponse typique du serveur :</p>\n<div class=\"language-json codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"data\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"pools\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"name\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Aquaparc\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"city\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Paris\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"name\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Blue Lagoon\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"city\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Lyon\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-minimal-de-queries-dans-schemapy\">Exemple minimal de queries dans <code>schema.py</code><a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#exemple-minimal-de-queries-dans-schemapy\" class=\"hash-link\" aria-label=\"Direct link to exemple-minimal-de-queries-dans-schemapy\" title=\"Direct link to exemple-minimal-de-queries-dans-schemapy\" translate=\"no\">​</a></h3>\n<p>Créez un fichier <code>schema.py</code> à la racine du projet :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> strawberry</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> typing </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> List</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    city</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    capacity</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">int</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Données fictives pour l'exemple</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">data </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">name</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Aquaparc\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> city</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Paris\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> capacity</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">200</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">name</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Blue Lagoon\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> city</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Lyon\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> capacity</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">150</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">Query</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">field</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">pools</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> List</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> data</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">schema </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> strawberry</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">Schema</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">query</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">Query</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<ul>\n<li class=\"\">On définit un type <code>Pool</code> (nom, ville, capacité).</li>\n<li class=\"\">On crée une liste de piscines fictives.</li>\n<li class=\"\">On expose une query <code>pools</code> qui retourne la liste des piscines.</li>\n</ul>\n<blockquote>\n<p><strong>Remarque</strong> : Ce schéma est minimal pour illustrer la structure. On pourra l’enrichir ensuite (filtres, mutations, etc.).</p>\n</blockquote>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ajouter-des-données--les-mutations-graphql\">Ajouter des données : les mutations GraphQL<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#ajouter-des-donn%C3%A9es--les-mutations-graphql\" class=\"hash-link\" aria-label=\"Direct link to Ajouter des données : les mutations GraphQL\" title=\"Direct link to Ajouter des données : les mutations GraphQL\" translate=\"no\">​</a></h2>\n<p>Après les queries (lecture), GraphQL permet aussi de modifier les données via des <strong>mutations</strong>. Une mutation est l’équivalent d’une opération d’écriture (création, modification, suppression) dans le schéma.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-quune-mutation\">Qu’est-ce qu’une mutation ?<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#quest-ce-quune-mutation\" class=\"hash-link\" aria-label=\"Direct link to Qu’est-ce qu’une mutation ?\" title=\"Direct link to Qu’est-ce qu’une mutation ?\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\">Une mutation GraphQL permet au client de demander une modification de l’état du serveur (ajout, mise à jour, suppression d’un objet).</li>\n<li class=\"\">Comme pour les queries, le client choisit les champs à retourner dans la réponse.</li>\n<li class=\"\">Les mutations sont regroupées dans une classe <code>Mutation</code> dans le schéma Strawberry.</li>\n</ul>\n<p>Exemple de mutation côté client :</p>\n<div class=\"language-graphql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-graphql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">mutation</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property-query property-mutation property-mutation\">addPool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token attr-name\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Piscine Soleil\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token attr-name\" style=\"color:hsl(29, 54%, 61%)\">city</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Marseille\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token attr-name\" style=\"color:hsl(29, 54%, 61%)\">capacity</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">120</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">name</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">city</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">capacity</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Réponse typique du serveur :</p>\n<div class=\"language-json codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"data\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"addPool\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"name\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Piscine Soleil\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"city\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Marseille\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">\"capacity\"</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">120</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-minimal-de-mutation-dans-schemapy\">Exemple minimal de mutation dans <code>schema.py</code><a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#exemple-minimal-de-mutation-dans-schemapy\" class=\"hash-link\" aria-label=\"Direct link to exemple-minimal-de-mutation-dans-schemapy\" title=\"Direct link to exemple-minimal-de-mutation-dans-schemapy\" translate=\"no\">​</a></h3>\n<p>On enrichit le schéma pour permettre d’ajouter une piscine :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> strawberry</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> typing </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> List</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    city</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    capacity</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">int</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Données fictives pour l'exemple</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">data </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">name</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Aquaparc\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> city</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Paris\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> capacity</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">200</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">name</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Blue Lagoon\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> city</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Lyon\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> capacity</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">150</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">Query</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">field</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">pools</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> List</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> data</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">Mutation</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mutation</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">add_pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> city</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> capacity</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">int</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        pool </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">name</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> city</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">city</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> capacity</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">capacity</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">append</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> pool</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">schema </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> strawberry</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">Schema</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">query</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">Query</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> mutation</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">Mutation</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<ul>\n<li class=\"\">On définit une classe <code>Mutation</code> avec une méthode <code>add_pool</code>.</li>\n<li class=\"\">Cette mutation prend des arguments (name, city, capacity), crée une nouvelle piscine, l’ajoute à la liste, et la retourne.</li>\n<li class=\"\">On passe la mutation au schéma Strawberry.</li>\n</ul>\n<blockquote>\n<p><strong>Remarque</strong> : En production, on utiliserait une base de données au lieu d’une liste Python, mais ce modèle illustre la mécanique GraphQL.</p>\n</blockquote>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"temps-réel-avec-graphql--les-subscriptions-websocket\">Temps réel avec GraphQL : les subscriptions (WebSocket)<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#temps-r%C3%A9el-avec-graphql--les-subscriptions-websocket\" class=\"hash-link\" aria-label=\"Direct link to Temps réel avec GraphQL : les subscriptions (WebSocket)\" title=\"Direct link to Temps réel avec GraphQL : les subscriptions (WebSocket)\" translate=\"no\">​</a></h2>\n<p>En plus des queries (lecture) et des mutations (écriture), GraphQL propose un troisième concept : les <strong>subscriptions</strong>. Les subscriptions permettent au client de s’abonner à des événements côté serveur et de recevoir des notifications en temps réel, généralement via WebSocket.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-quune-subscription\">Qu’est-ce qu’une subscription ?<a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#quest-ce-quune-subscription\" class=\"hash-link\" aria-label=\"Direct link to Qu’est-ce qu’une subscription ?\" title=\"Direct link to Qu’est-ce qu’une subscription ?\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\">Une subscription GraphQL permet au client de recevoir automatiquement des mises à jour dès qu’un événement se produit (ex : ajout d’une piscine).</li>\n<li class=\"\">La connexion se fait via WebSocket, ce qui permet au serveur de pousser les données vers le client sans que celui-ci ait à interroger en boucle.</li>\n<li class=\"\">Les subscriptions sont utiles pour le temps réel : notifications, chat, monitoring, etc.</li>\n</ul>\n<p>Exemple de subscription côté client :</p>\n<div class=\"language-graphql codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-graphql codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">subscription</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token object\">poolAdded</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">name</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:hsl(355, 65%, 65%)\">city</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">}</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>À chaque fois qu’une piscine est ajoutée, le serveur envoie automatiquement les infos de la nouvelle piscine à tous les clients abonnés.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-minimal-de-subscription-dans-schemapy\">Exemple minimal de subscription dans <code>schema.py</code><a href=\"https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry#exemple-minimal-de-subscription-dans-schemapy\" class=\"hash-link\" aria-label=\"Direct link to exemple-minimal-de-subscription-dans-schemapy\" title=\"Direct link to exemple-minimal-de-subscription-dans-schemapy\" translate=\"no\">​</a></h3>\n<p>On enrichit le schéma pour notifier en temps réel l’ajout d’une piscine :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> asyncio</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> strawberry</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">from</span><span class=\"token plain\"> typing </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">import</span><span class=\"token plain\"> List</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> AsyncGenerator</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    city</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    capacity</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">int</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Données fictives pour l'exemple</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">data </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">name</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Aquaparc\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> city</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Paris\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> capacity</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">200</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">name</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Blue Lagoon\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> city</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"Lyon\"</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> capacity</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">150</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">subscribers</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> List</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">Queue</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">Subscription</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">subscription</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">async</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">pool_added</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> AsyncGenerator</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:hsl(29, 54%, 61%)\">None</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        queue </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> asyncio</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">Queue</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        subscribers</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">append</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">queue</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">try</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">while</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:hsl(29, 54%, 61%)\">True</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                pool </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">await</span><span class=\"token plain\"> queue</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">get</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">                </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">yield</span><span class=\"token plain\"> pool</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">finally</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            subscribers</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">remove</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">queue</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">Query</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">field</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">pools</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> List</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">[</span><span class=\"token plain\">Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">]</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> data</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:hsl(29, 54%, 61%)\">Mutation</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">@strawberry</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token decorator annotation punctuation\" style=\"color:hsl(220, 14%, 71%)\">mutation</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">def</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">add_pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">self</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> city</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">str</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> capacity</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">int</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">-</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        pool </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> Pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">name</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> city</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">city</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> capacity</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">capacity</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        data</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">append</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Notifier les abonnés</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">for</span><span class=\"token plain\"> queue </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">in</span><span class=\"token plain\"> subscribers</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">            queue</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">put_nowait</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">pool</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token keyword\" style=\"color:hsl(286, 60%, 67%)\">return</span><span class=\"token plain\"> pool</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">schema </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\"> strawberry</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">Schema</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">(</span><span class=\"token plain\">query</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">Query</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> mutation</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">Mutation</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">,</span><span class=\"token plain\"> subscription</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">=</span><span class=\"token plain\">Subscription</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">)</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<ul>\n<li class=\"\">On définit une classe <code>Subscription</code> avec une méthode <code>pool_added</code> qui écoute les nouveaux ajouts.</li>\n<li class=\"\">Lorsqu’une piscine est ajoutée via la mutation, tous les abonnés sont notifiés en temps réel.</li>\n<li class=\"\">Le schéma Strawberry inclut maintenant la subscription.</li>\n</ul>\n<blockquote>\n<p><strong>Remarque</strong> : Pour tester les subscriptions, il faut utiliser un client compatible WebSocket (ex : GraphiQL, Apollo, ou un script Python avec <code>websockets</code>).</p>\n</blockquote>",
            "url": "https://delpeuch.net/blog/2025/08/04/09-scripting/strawberry",
            "title": "GraphQL : FastAPI & Strawberry",
            "summary": "Étapes pratiques pour concevoir, coder et tester une API GraphQL en Python.",
            "date_modified": "2025-08-04T00:00:00.000Z",
            "tags": [
                "Scripting"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/06/09/02-network/traefik",
            "content_html": "<p>Traefik est un reverse proxy et load balancer open-source de nouvelle génération, pensé pour les architectures cloud-native et microservices. Il s’intègre parfaitement avec Docker, Kubernetes, et bien d’autres orchestrateurs, et automatise la découverte, la configuration et la gestion du trafic réseau. 🚦</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-quun-reverse-proxy-\">Qu'est-ce qu'un reverse proxy ?<a href=\"https://delpeuch.net/blog/2025/06/09/02-network/traefik#quest-ce-quun-reverse-proxy-\" class=\"hash-link\" aria-label=\"Direct link to Qu'est-ce qu'un reverse proxy ?\" title=\"Direct link to Qu'est-ce qu'un reverse proxy ?\" translate=\"no\">​</a></h2>\n<p>Un reverse proxy est un serveur intermédiaire qui reçoit les requêtes des clients et les achemine vers les serveurs applicatifs appropriés. Il permet de :</p>\n<ul>\n<li class=\"\">Centraliser l'accès à plusieurs applications ou services</li>\n<li class=\"\">Sécuriser et masquer l'infrastructure backend</li>\n<li class=\"\">Gérer le chiffrement HTTPS</li>\n<li class=\"\">Répartir la charge (load balancing)</li>\n<li class=\"\">Ajouter des fonctionnalités comme l'authentification, le caching ou la réécriture d'URL</li>\n</ul>\n<p>Les reverse proxies sont essentiels dans les architectures modernes pour améliorer la sécurité, la scalabilité et la flexibilité des déploiements.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pourquoi-choisir-traefik-\">Pourquoi choisir Traefik ?<a href=\"https://delpeuch.net/blog/2025/06/09/02-network/traefik#pourquoi-choisir-traefik-\" class=\"hash-link\" aria-label=\"Direct link to Pourquoi choisir Traefik ?\" title=\"Direct link to Pourquoi choisir Traefik ?\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><strong>Découverte automatique des services</strong> : plus besoin de modifier manuellement vos fichiers de configuration à chaque déploiement.</li>\n<li class=\"\"><strong>Support natif de Docker, Kubernetes, Consul, etc.</strong></li>\n<li class=\"\"><strong>Gestion automatique du HTTPS (Let's Encrypt)</strong></li>\n<li class=\"\"><strong>Dashboard web intégré</strong> pour visualiser le routage et l’état du proxy</li>\n<li class=\"\"><strong>Configuration dynamique</strong> : changements pris en compte à chaud, sans redémarrage</li>\n<li class=\"\"><strong>Fonctionnalités avancées</strong> : load balancing, redirections, middleware, authentification, rate limiting, etc.</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"concepts-clés-de-traefik\">Concepts clés de Traefik<a href=\"https://delpeuch.net/blog/2025/06/09/02-network/traefik#concepts-cl%C3%A9s-de-traefik\" class=\"hash-link\" aria-label=\"Direct link to Concepts clés de Traefik\" title=\"Direct link to Concepts clés de Traefik\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><strong>Entrypoint</strong> : point d’entrée réseau (port, protocole) sur lequel Traefik écoute (ex : HTTP sur 80, HTTPS sur 443)</li>\n<li class=\"\"><strong>Router</strong> : règle qui fait le lien entre une requête entrante et un service backend (ex : Host(<code>api.monsite.com</code>))</li>\n<li class=\"\"><strong>Service</strong> : destination finale du trafic (container, pod, etc.)</li>\n<li class=\"\"><strong>Provider</strong> : source de configuration dynamique (Docker, Kubernetes, fichiers, etc.)</li>\n<li class=\"\"><strong>Middleware</strong> : traitement intermédiaire (auth, redirection, header, etc.)</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-dutilisation-avec-docker-\">Exemple d’utilisation avec Docker 🐳<a href=\"https://delpeuch.net/blog/2025/06/09/02-network/traefik#exemple-dutilisation-avec-docker-\" class=\"hash-link\" aria-label=\"Direct link to Exemple d’utilisation avec Docker 🐳\" title=\"Direct link to Exemple d’utilisation avec Docker 🐳\" translate=\"no\">​</a></h2>\n<p>Lancez Traefik avec Docker Compose :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">version</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'3.8'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">services</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">traefik</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">image</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> traefik</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">v3.0</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">command</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">api.dashboard=true</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">providers.docker=true</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">entrypoints.web.address=</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">80</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">ports</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"80:80\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"8080:8080\"</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Dashboard</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">volumes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> /var/run/docker.sock</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">/var/run/docker.sock</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">whoami</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">image</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> traefik/whoami </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Petit service de test</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">labels</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"traefik.enable=true\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"traefik.http.routers.whoami.rule=Host(`whoami.localhost`)\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"traefik.http.routers.whoami.entrypoints=web\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Accédez à <a href=\"http://whoami.localhost/\" target=\"_blank\" rel=\"noopener noreferrer\">http://whoami.localhost</a> et au dashboard sur <a href=\"http://localhost:8080/dashboard/\" target=\"_blank\" rel=\"noopener noreferrer\">http://localhost:8080/dashboard/</a>.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"exemple-dutilisation-avec-kubernetes-️\">Exemple d’utilisation avec Kubernetes ☸️<a href=\"https://delpeuch.net/blog/2025/06/09/02-network/traefik#exemple-dutilisation-avec-kubernetes-%EF%B8%8F\" class=\"hash-link\" aria-label=\"Direct link to Exemple d’utilisation avec Kubernetes ☸️\" title=\"Direct link to Exemple d’utilisation avec Kubernetes ☸️\" translate=\"no\">​</a></h2>\n<p>Déploiement d’un IngressRoute pour exposer un service :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">apiVersion</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> traefik.containo.us/v1alpha1</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">kind</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> IngressRoute</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">metadata</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> my</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">ingressroute</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">spec</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">entryPoints</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> web</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">routes</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">match</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Host(`example.com`)</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">kind</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Rule</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">services</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> my</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">service</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">port</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">80</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"https-automatique-avec-lets-encrypt-\">HTTPS automatique avec Let's Encrypt 🔒<a href=\"https://delpeuch.net/blog/2025/06/09/02-network/traefik#https-automatique-avec-lets-encrypt-\" class=\"hash-link\" aria-label=\"Direct link to HTTPS automatique avec Let's Encrypt 🔒\" title=\"Direct link to HTTPS automatique avec Let's Encrypt 🔒\" translate=\"no\">​</a></h2>\n<p>Traefik peut générer et renouveler automatiquement des certificats SSL :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Extrait de configuration statique</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">entryPoints</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">web</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">address</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\":80\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">websecure</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">address</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\":443\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">certificatesResolvers</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">letsencrypt</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">acme</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">email</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"admin@monsite.com\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">storage</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"/etc/traefik/acme.json\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">httpChallenge</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">entryPoint</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> web</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Ajoutez simplement <code>entrypoints=websecure</code> et <code>tls.certresolver=letsencrypt</code> à vos routers pour bénéficier du HTTPS automatique.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"dashboard-et-monitoring-\">Dashboard et monitoring 📊<a href=\"https://delpeuch.net/blog/2025/06/09/02-network/traefik#dashboard-et-monitoring-\" class=\"hash-link\" aria-label=\"Direct link to Dashboard et monitoring 📊\" title=\"Direct link to Dashboard et monitoring 📊\" translate=\"no\">​</a></h2>\n<p>Traefik propose un dashboard web très pratique pour visualiser :</p>\n<ul>\n<li class=\"\">Les routes actives</li>\n<li class=\"\">Les middlewares appliqués</li>\n<li class=\"\">L’état des services</li>\n<li class=\"\">Les certificats SSL</li>\n</ul>\n<p>Accessible par défaut sur le port 8080.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques-et-conseils-\">Bonnes pratiques et conseils ⚡<a href=\"https://delpeuch.net/blog/2025/06/09/02-network/traefik#bonnes-pratiques-et-conseils-\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques et conseils ⚡\" title=\"Direct link to Bonnes pratiques et conseils ⚡\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><strong>Sécurisez l’accès au dashboard</strong> (authentification, firewall)</li>\n<li class=\"\"><strong>Utilisez des labels clairs</strong> pour vos services Docker/K8s</li>\n<li class=\"\"><strong>Centralisez vos logs</strong> pour le troubleshooting</li>\n<li class=\"\"><strong>Testez vos règles de routage</strong> avant la mise en production</li>\n<li class=\"\"><strong>Surveillez l’expiration des certificats</strong> si vous utilisez Let's Encrypt</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pour-aller-plus-loin\">Pour aller plus loin<a href=\"https://delpeuch.net/blog/2025/06/09/02-network/traefik#pour-aller-plus-loin\" class=\"hash-link\" aria-label=\"Direct link to Pour aller plus loin\" title=\"Direct link to Pour aller plus loin\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://doc.traefik.io/traefik/\" target=\"_blank\" rel=\"noopener noreferrer\">Documentation officielle Traefik</a></li>\n<li class=\"\"><a href=\"https://doc.traefik.io/traefik/getting-started/quick-start/\" target=\"_blank\" rel=\"noopener noreferrer\">Exemples de configurations</a></li>\n<li class=\"\"><span style=\"display:inline-flex;gap:0.25rem\"><span></span><a href=\"https://github.com/traefik/traefik\" target=\"_blank\" rel=\"noopener noreferrer\">Traefik sur GitHub</a></span></li>\n</ul>\n<p>Traefik s’impose comme un choix moderne, simple et puissant pour gérer le trafic de vos applications cloud-native. Essayez-le sur un projet personnel ou en entreprise pour découvrir tout son potentiel !</p>",
            "url": "https://delpeuch.net/blog/2025/06/09/02-network/traefik",
            "title": "Proxy : Traefik",
            "summary": "Découverte de Traefik, reverse proxy moderne, dynamique et simple pour vos infrastructures cloud-native.",
            "date_modified": "2025-06-09T00:00:00.000Z",
            "tags": [
                "Réseau",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction",
            "content_html": "<p>Ansible est devenu un outil incontournable dans le monde DevOps pour l'automatisation des infrastructures. Sa simplicité d'utilisation et sa puissance en font une solution privilégiée pour déployer des configurations, orchestrer des systèmes et gérer l'infrastructure as code. 🚀</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"quest-ce-quansible--\">Qu'est-ce qu'Ansible ? 🤔<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#quest-ce-quansible--\" class=\"hash-link\" aria-label=\"Direct link to Qu'est-ce qu'Ansible ? 🤔\" title=\"Direct link to Qu'est-ce qu'Ansible ? 🤔\" translate=\"no\">​</a></h2>\n<p>Ansible est un outil open-source d'automatisation qui simplifie la configuration des systèmes, le déploiement d'applications et l'orchestration des tâches. Contrairement à d'autres outils similaires, Ansible ne nécessite pas l'installation d'un agent sur les machines cibles, ce qui facilite grandement son adoption.</p>\n<p>Les principaux avantages d'Ansible sont :</p>\n<ul>\n<li class=\"\"><strong>Simplicité</strong> : utilise YAML comme langage de description, facile à lire et à écrire</li>\n<li class=\"\"><strong>Sans agent</strong> : fonctionne via SSH, ne nécessitant rien sur les machines cibles</li>\n<li class=\"\"><strong>Idempotence</strong> : peut être exécuté plusieurs fois sans effet secondaire</li>\n<li class=\"\"><strong>Extensibilité</strong> : plus de 3000 modules disponibles pour interagir avec différents systèmes</li>\n<li class=\"\"><strong>Multi-plateforme</strong> : compatible avec Linux, macOS, Windows et de nombreux fournisseurs cloud</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"architecture-dansible-️\">Architecture d'Ansible 🏗️<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#architecture-dansible-%EF%B8%8F\" class=\"hash-link\" aria-label=\"Direct link to Architecture d'Ansible 🏗️\" title=\"Direct link to Architecture d'Ansible 🏗️\" translate=\"no\">​</a></h2>\n<p>L'architecture d'Ansible est simple mais efficace :</p>\n<ol>\n<li class=\"\"><strong>Machine de contrôle</strong> : où Ansible est installé et depuis laquelle les playbooks sont exécutés</li>\n<li class=\"\"><strong>Inventaire</strong> : liste des hôtes à gérer, groupés logiquement</li>\n<li class=\"\"><strong>Modules</strong> : unités de code exécutées sur les hôtes cibles</li>\n<li class=\"\"><strong>Playbooks</strong> : fichiers YAML décrivant les tâches à effectuer</li>\n<li class=\"\"><strong>Rôles</strong> : regroupements réutilisables de playbooks, variables et fichiers</li>\n</ol>\n<p>La communication entre la machine de contrôle et les hôtes se fait généralement via SSH, ce qui élimine le besoin d'agents dédiés et simplifie la gestion.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"les-concepts-fondamentaux-\">Les concepts fondamentaux 📚<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#les-concepts-fondamentaux-\" class=\"hash-link\" aria-label=\"Direct link to Les concepts fondamentaux 📚\" title=\"Direct link to Les concepts fondamentaux 📚\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"inventaire\">Inventaire<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#inventaire\" class=\"hash-link\" aria-label=\"Direct link to Inventaire\" title=\"Direct link to Inventaire\" translate=\"no\">​</a></h3>\n<p>L'inventaire définit les machines cibles et permet de les organiser en groupes :</p>\n<div class=\"language-ini codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-ini codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">[webservers]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">web1.example.com</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">web2.example.com</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">[databases]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">db1.example.com</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">db2.example.com</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">[production:children]</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">webservers</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">databases</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"playbooks\">Playbooks<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#playbooks\" class=\"hash-link\" aria-label=\"Direct link to Playbooks\" title=\"Direct link to Playbooks\" translate=\"no\">​</a></h3>\n<p>Les playbooks sont des fichiers YAML qui décrivent les tâches à exécuter sur les hôtes :</p>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Installer et configurer un serveur web</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> webservers</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">become</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:hsl(220, 14%, 71%);font-weight:bold\">true</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Équivalent de sudo</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">vars</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">http_port</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:hsl(29, 54%, 61%)\">80</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Installer nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">apt</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> present</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">update_cache</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Démarrer et activer le service nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">service</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> nginx</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> started</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">enabled</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"modules\">Modules<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#modules\" class=\"hash-link\" aria-label=\"Direct link to Modules\" title=\"Direct link to Modules\" translate=\"no\">​</a></h3>\n<p>Les modules sont les unités de travail d'Ansible. Voici quelques modules courants :</p>\n<ul>\n<li class=\"\"><strong>apt/yum/dnf</strong> : gestion des paquets</li>\n<li class=\"\"><strong>copy/template</strong> : transfert et génération de fichiers</li>\n<li class=\"\"><strong>service</strong> : gestion des services</li>\n<li class=\"\"><strong>user/group</strong> : gestion des utilisateurs et groupes</li>\n<li class=\"\"><strong>git</strong> : interaction avec les dépôts Git</li>\n<li class=\"\"><strong>file</strong> : manipulation de fichiers et répertoires</li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"rôles\">Rôles<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#r%C3%B4les\" class=\"hash-link\" aria-label=\"Direct link to Rôles\" title=\"Direct link to Rôles\" translate=\"no\">​</a></h3>\n<p>Les rôles permettent d'organiser le code Ansible de manière modulaire et réutilisable :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">roles</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  common</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    tasks</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    handlers</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    files</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    templates</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token builtin\" style=\"color:hsl(95, 38%, 62%)\">vars</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    defaults</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    meta</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"cas-dutilisation-courants-️\">Cas d'utilisation courants 🛠️<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#cas-dutilisation-courants-%EF%B8%8F\" class=\"hash-link\" aria-label=\"Direct link to Cas d'utilisation courants 🛠️\" title=\"Direct link to Cas d'utilisation courants 🛠️\" translate=\"no\">​</a></h2>\n<p>Ansible excelle dans de nombreux scénarios :</p>\n<ol>\n<li class=\"\"><strong>Configuration de serveurs</strong> : installation et configuration cohérente de services</li>\n<li class=\"\"><strong>Déploiement d'applications</strong> : processus de déploiement automatisés et reproductibles</li>\n<li class=\"\"><strong>Gestion de la configuration</strong> : maintien de l'état souhaité des systèmes</li>\n<li class=\"\"><strong>Orchestration</strong> : coordination d'actions complexes sur plusieurs systèmes</li>\n<li class=\"\"><strong>Provisionnement cloud</strong> : création et configuration de ressources cloud</li>\n</ol>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-et-premiers-pas-️\">Installation et premiers pas 🚶‍♂️<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#installation-et-premiers-pas-%EF%B8%8F\" class=\"hash-link\" aria-label=\"Direct link to Installation et premiers pas 🚶‍♂️\" title=\"Direct link to Installation et premiers pas 🚶‍♂️\" translate=\"no\">​</a></h2>\n<p>L'installation d'Ansible est simple :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Sur Debian/Ubuntu</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">apt</span><span class=\"token plain\"> update</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">apt</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> ansible</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Sur RHEL/CentOS</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">sudo</span><span class=\"token plain\"> dnf </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> ansible</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Via pip (recommandé pour les dernières versions)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">pip </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">install</span><span class=\"token plain\"> ansible</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Une fois installé, vous pouvez vérifier votre installation :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--version</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Pour un test rapide, créez un fichier d'inventaire et testez la connectivité :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">echo</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"localhost ansible_connection=local\"</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">&gt;</span><span class=\"token plain\"> inventory</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-i</span><span class=\"token plain\"> inventory localhost </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-m</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">ping</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ansible-vs-autres-outils-iac-\">Ansible vs autres outils IaC 🥊<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#ansible-vs-autres-outils-iac-\" class=\"hash-link\" aria-label=\"Direct link to Ansible vs autres outils IaC 🥊\" title=\"Direct link to Ansible vs autres outils IaC 🥊\" translate=\"no\">​</a></h2>\n<table><thead><tr><th>Caractéristique</th><th>Ansible</th><th>Puppet</th><th>Chef</th><th>Terraform</th></tr></thead><tbody><tr><td><strong>Agent requis</strong></td><td>Non</td><td>Oui</td><td>Oui</td><td>Non</td></tr><tr><td><strong>Langage</strong></td><td>YAML</td><td>DSL</td><td>Ruby</td><td>HCL</td></tr><tr><td><strong>Courbe d'apprentissage</strong></td><td>Facile</td><td>Moyenne</td><td>Difficile</td><td>Moyenne</td></tr><tr><td><strong>Idempotence</strong></td><td>Oui</td><td>Oui</td><td>Oui</td><td>Oui</td></tr><tr><td><strong>Focus</strong></td><td>Config. management</td><td>Config. management</td><td>Config. management</td><td>Provisionnement</td></tr><tr><td><strong>Modèle</strong></td><td>Procédural</td><td>Déclaratif</td><td>Procédural</td><td>Déclaratif</td></tr></tbody></table>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques-\">Bonnes pratiques 👍<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#bonnes-pratiques-\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques 👍\" title=\"Direct link to Bonnes pratiques 👍\" translate=\"no\">​</a></h2>\n<ol>\n<li class=\"\"><strong>Utiliser des rôles</strong> pour organiser et réutiliser le code</li>\n<li class=\"\"><strong>Versionner</strong> les playbooks et l'inventaire avec Git</li>\n<li class=\"\"><strong>Éviter les commandes shell</strong> brutes, préférer les modules natifs</li>\n<li class=\"\"><strong>Utiliser les variables</strong> pour rendre les playbooks flexibles</li>\n<li class=\"\"><strong>Tester avec <code>--check</code></strong> avant d'exécuter réellement les changements</li>\n<li class=\"\"><strong>Structurer logiquement l'inventaire</strong> en groupes et sous-groupes</li>\n</ol>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion-\">Conclusion 🎯<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#conclusion-\" class=\"hash-link\" aria-label=\"Direct link to Conclusion 🎯\" title=\"Direct link to Conclusion 🎯\" translate=\"no\">​</a></h2>\n<p>Ansible est un outil puissant mais accessible qui peut considérablement améliorer l'efficacité des équipes DevOps et des administrateurs système. Sa simplicité, son absence d'agents et sa grande communauté en font un choix de prédilection pour l'automatisation d'infrastructure.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"ressources-utiles-\">Ressources utiles 📖<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction#ressources-utiles-\" class=\"hash-link\" aria-label=\"Direct link to Ressources utiles 📖\" title=\"Direct link to Ressources utiles 📖\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://docs.ansible.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Documentation officielle Ansible</a></li>\n<li class=\"\"><a href=\"https://galaxy.ansible.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Ansible Galaxy</a> - Dépôt de rôles communautaires</li>\n<li class=\"\"><a href=\"https://www.redhat.com/fr/technologies/management/ansible\" target=\"_blank\" rel=\"noopener noreferrer\">Red Hat Ansible Automation Platform</a> - Version entreprise</li>\n</ul>",
            "url": "https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction",
            "title": "Ansible",
            "summary": "Découvrez Ansible, l'outil d'automatisation simple mais puissant qui révolutionne la gestion de l'infrastructure as code.",
            "date_modified": "2025-06-09T00:00:00.000Z",
            "tags": [
                "Infrastructure as Code",
                "DevOps"
            ]
        },
        {
            "id": "https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation",
            "content_html": "<p>Dans l'<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-introduction\">article précédent</a>, nous avons découvert les bases d'Ansible et ses avantages pour l'automatisation d'infrastructure. Aujourd'hui, nous allons explorer un cas pratique concret : l'automatisation de la configuration de votre shell zsh avec le projet <span style=\"display:inline-flex;gap:0.25rem\"><span></span><a href=\"https://github.com/sedelpeuch/zsh_ansible\" target=\"_blank\" rel=\"noopener noreferrer\">zsh_ansible</a></span>. 🐚</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"la-problématique-de-la-configuration-du-shell-\">La problématique de la configuration du shell 🤔<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#la-probl%C3%A9matique-de-la-configuration-du-shell-\" class=\"hash-link\" aria-label=\"Direct link to La problématique de la configuration du shell 🤔\" title=\"Direct link to La problématique de la configuration du shell 🤔\" translate=\"no\">​</a></h2>\n<p>Qui n'a jamais passé des heures à configurer son environnement de travail, installer des plugins, personnaliser son prompt, et définir des alias utiles ? Et qui n'a jamais ressenti de la frustration en changeant de machine et en devant tout recommencer ?</p>\n<p>La configuration du shell est un élément essentiel de la productivité des développeurs et administrateurs système. Cependant, cette configuration est souvent :</p>\n<ul>\n<li class=\"\"><strong>Complexe</strong> : installation de zsh, oh-my-zsh, plugins, thèmes...</li>\n<li class=\"\"><strong>Fastidieuse</strong> : édition manuelle de fichiers de configuration</li>\n<li class=\"\"><strong>Non versionnée</strong> : risque de perte lors d'un changement de machine</li>\n<li class=\"\"><strong>Non reproductible</strong> : configuration différente entre machines</li>\n</ul>\n<p>C'est là qu'Ansible entre en jeu, permettant d'automatiser ce processus et de le rendre reproductible.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"présentation-du-projet-zsh_ansible-\">Présentation du projet zsh_ansible 📦<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#pr%C3%A9sentation-du-projet-zsh_ansible-\" class=\"hash-link\" aria-label=\"Direct link to Présentation du projet zsh_ansible 📦\" title=\"Direct link to Présentation du projet zsh_ansible 📦\" translate=\"no\">​</a></h2>\n<p><span style=\"display:inline-flex;gap:0.25rem\"><span></span><a href=\"https://github.com/sedelpeuch/zsh_ansible\" target=\"_blank\" rel=\"noopener noreferrer\">zsh_ansible</a></span> est un playbook Ansible qui permet d'installer et de configurer automatiquement :</p>\n<ul>\n<li class=\"\"><strong>zsh</strong> comme shell par défaut</li>\n<li class=\"\"><strong>oh-my-zsh</strong> pour améliorer l'expérience utilisateur</li>\n<li class=\"\">Des <strong>plugins</strong> populaires comme zsh-autosuggestions et zsh-syntax-highlighting</li>\n<li class=\"\">Une <strong>configuration personnalisée</strong> via un fichier .zshrc paramétrable</li>\n</ul>\n<p>Ce projet suit les bonnes pratiques Ansible et permet de déployer rapidement un environnement zsh cohérent sur n'importe quelle machine Linux.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"structure-du-projet-️\">Structure du projet 🏗️<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#structure-du-projet-%EF%B8%8F\" class=\"hash-link\" aria-label=\"Direct link to Structure du projet 🏗️\" title=\"Direct link to Structure du projet 🏗️\" translate=\"no\">​</a></h2>\n<p>Le projet est organisé de manière modulaire avec plusieurs playbooks spécifiques :</p>\n<div class=\"language-python codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-python codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">zsh_ansible</span><span class=\"token operator\" style=\"color:hsl(207, 82%, 66%)\">/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── README</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">md                </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Documentation du projet</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── main</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml                 </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Playbook principal qui importe les autres playbooks</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── install_zsh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml          </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Playbook pour l'installation de zsh</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">├── install_oh_my_zsh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Playbook pour l'installation d'oh-my-zsh et ses plugins</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">└── install_starship</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">.</span><span class=\"token plain\">yml     </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Playbook pour l'installation de Starship prompt</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Cette approche modulaire permet d'exécuter individuellement chaque composant ou l'ensemble du processus via le playbook principal.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"fonctionnalités-principales-\">Fonctionnalités principales ✨<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#fonctionnalit%C3%A9s-principales-\" class=\"hash-link\" aria-label=\"Direct link to Fonctionnalités principales ✨\" title=\"Direct link to Fonctionnalités principales ✨\" translate=\"no\">​</a></h2>\n<p>Le projet zsh_ansible offre plusieurs fonctionnalités réparties dans ses différents playbooks :</p>\n<ol>\n<li class=\"\">\n<p><strong>Installation de zsh</strong> avec <code>install_zsh.yml</code></p>\n<ul>\n<li class=\"\">Installation du package zsh</li>\n<li class=\"\">Récupération d'une configuration .zshrc personnalisée depuis un gist GitHub</li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Installation d'oh-my-zsh</strong> avec <code>install_oh_my_zsh.yml</code></p>\n<ul>\n<li class=\"\">Installation des prérequis (git)</li>\n<li class=\"\">Installation d'oh-my-zsh</li>\n<li class=\"\">Installation de plugins populaires :<!-- -->\n<ul>\n<li class=\"\">zsh-autosuggestions</li>\n<li class=\"\">zsh-syntax-highlighting</li>\n<li class=\"\">zsh-completions</li>\n<li class=\"\">zsh-history-substring-search</li>\n<li class=\"\">fast-syntax-highlighting</li>\n<li class=\"\">zsh-bat</li>\n<li class=\"\">autoupdate</li>\n<li class=\"\">autojump</li>\n</ul>\n</li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Installation de Starship prompt</strong> avec <code>install_starship.yml</code></p>\n<ul>\n<li class=\"\">Installation des prérequis (curl)</li>\n<li class=\"\">Installation de Starship (prompteur cross-shell moderne)</li>\n<li class=\"\">Récupération d'une configuration Starship personnalisée depuis un gist GitHub</li>\n</ul>\n</li>\n</ol>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"utilisation-pas-à-pas-\">Utilisation pas à pas 👣<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#utilisation-pas-%C3%A0-pas-\" class=\"hash-link\" aria-label=\"Direct link to Utilisation pas à pas 👣\" title=\"Direct link to Utilisation pas à pas 👣\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"1-cloner-le-dépôt\">1. Cloner le dépôt<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#1-cloner-le-d%C3%A9p%C3%B4t\" class=\"hash-link\" aria-label=\"Direct link to 1. Cloner le dépôt\" title=\"Direct link to 1. Cloner le dépôt\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">git</span><span class=\"token plain\"> clone https://github.com/sedelpeuch/zsh_ansible.git</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">cd</span><span class=\"token plain\"> zsh_ansible</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"2-exécution-locale\">2. Exécution locale<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#2-ex%C3%A9cution-locale\" class=\"hash-link\" aria-label=\"Direct link to 2. Exécution locale\" title=\"Direct link to 2. Exécution locale\" translate=\"no\">​</a></h3>\n<p>Pour exécuter le playbook en local, la façon la plus simple est d'exécuter :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook main.yml </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-c</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">local</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Cela lancera l'installation de tous les composants sur votre machine locale sans avoir besoin de configurer un inventaire.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"3-test-dans-un-environnement-docker-optionnel\">3. Test dans un environnement Docker (optionnel)<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#3-test-dans-un-environnement-docker-optionnel\" class=\"hash-link\" aria-label=\"Direct link to 3. Test dans un environnement Docker (optionnel)\" title=\"Direct link to 3. Test dans un environnement Docker (optionnel)\" translate=\"no\">​</a></h3>\n<p>Une des forces du projet est la possibilité de le tester facilement dans un conteneur Docker :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Télécharger une image Docker avec Ansible préinstallé</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> pull williamyeh/ansible:ubuntu18.04</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Exécuter le playbook dans un conteneur Docker</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> run </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--rm</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-it</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-v</span><span class=\"token plain\"> </span><span class=\"token variable\" style=\"color:hsl(207, 82%, 66%)\">$(</span><span class=\"token variable builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">pwd</span><span class=\"token variable\" style=\"color:hsl(207, 82%, 66%)\">)</span><span class=\"token plain\">:/ansible/playbooks williamyeh/ansible:ubuntu18.04 </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  ansible-playbook /ansible/playbooks/main.yml </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-c</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">local</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Pour examiner le résultat (garde le conteneur en vie)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">docker</span><span class=\"token plain\"> run </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">--rm</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-it</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-v</span><span class=\"token plain\"> </span><span class=\"token variable\" style=\"color:hsl(207, 82%, 66%)\">$(</span><span class=\"token variable builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">pwd</span><span class=\"token variable\" style=\"color:hsl(207, 82%, 66%)\">)</span><span class=\"token plain\">:/ansible/playbooks williamyeh/ansible:ubuntu18.04 </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  /bin/bash </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-c</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"ansible-playbook /ansible/playbooks/main.yml -c local &amp;&amp; exec /bin/bash\"</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Cette approche vous permet de tester la configuration sans affecter votre environnement actuel.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"4-exécution-des-playbooks-spécifiques\">4. Exécution des playbooks spécifiques<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#4-ex%C3%A9cution-des-playbooks-sp%C3%A9cifiques\" class=\"hash-link\" aria-label=\"Direct link to 4. Exécution des playbooks spécifiques\" title=\"Direct link to 4. Exécution des playbooks spécifiques\" translate=\"no\">​</a></h3>\n<p>Si vous souhaitez n'installer que certains composants, vous pouvez exécuter les playbooks individuellement :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installation de zsh uniquement</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook install_zsh.yml </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-c</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">local</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installation d'oh-my-zsh et ses plugins</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook install_oh_my_zsh.yml </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-c</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">local</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installation de Starship prompt</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook install_starship.yml </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-c</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">local</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Si vous avez besoin de privilèges d'administration :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">ansible-playbook main.yml </span><span class=\"token parameter variable\" style=\"color:hsl(207, 82%, 66%)\">-c</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\" style=\"color:hsl(29, 54%, 61%)\">local</span><span class=\"token plain\"> --ask-become-pass</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"5-profiter-de-votre-nouveau-shell\">5. Profiter de votre nouveau shell<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#5-profiter-de-votre-nouveau-shell\" class=\"hash-link\" aria-label=\"Direct link to 5. Profiter de votre nouveau shell\" title=\"Direct link to 5. Profiter de votre nouveau shell\" translate=\"no\">​</a></h3>\n<p>Après l'exécution du playbook, redémarrez votre terminal ou exécutez :</p>\n<div class=\"language-bash codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token function\" style=\"color:hsl(207, 82%, 66%)\">zsh</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Vous devriez maintenant avoir un shell zsh entièrement configuré avec :</p>\n<ul>\n<li class=\"\">Une configuration .zshrc récupérée depuis un gist personnalisé</li>\n<li class=\"\">Oh-my-zsh avec de nombreux plugins utiles</li>\n<li class=\"\">Le prompteur Starship pour une expérience visuelle améliorée</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"code-source-détaillé-\">Code source détaillé 🔍<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#code-source-d%C3%A9taill%C3%A9-\" class=\"hash-link\" aria-label=\"Direct link to Code source détaillé 🔍\" title=\"Direct link to Code source détaillé 🔍\" translate=\"no\">​</a></h2>\n<p>Examinons quelques parties clés du code du projet.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"playbook-principal-mainyml\">Playbook principal (main.yml)<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#playbook-principal-mainyml\" class=\"hash-link\" aria-label=\"Direct link to Playbook principal (main.yml)\" title=\"Direct link to Playbook principal (main.yml)\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">import_playbook</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> install_zsh.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">import_playbook</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> install_oh_my_zsh.yml</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">import_playbook</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> install_starship.yml</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<p>Ce playbook principal importe simplement les trois autres playbooks spécifiques.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-de-zsh-install_zshyml\">Installation de zsh (install_zsh.yml)<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#installation-de-zsh-install_zshyml\" class=\"hash-link\" aria-label=\"Direct link to Installation de zsh (install_zsh.yml)\" title=\"Direct link to Installation de zsh (install_zsh.yml)\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Ensure zsh is installed</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> all</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">become</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Ensure zsh is installed</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">apt</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> zsh</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> present</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Configure zsh for user</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> all</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Fetch .zshrc from secret gist</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">uri</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">url</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"https://gist.githubusercontent.com/sedelpeuch/a595fc7352f803c089534b00cba9e2e7/raw\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">return_content</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">register</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> zshrc_content</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Place .zshrc in home directory</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">copy</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">content</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">\"{{ zshrc_content.content }}\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">dest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> ~/.zshrc</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation-des-plugins-oh-my-zsh-extrait-de-install_oh_my_zshyml\">Installation des plugins oh-my-zsh (extrait de install_oh_my_zsh.yml)<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#installation-des-plugins-oh-my-zsh-extrait-de-install_oh_my_zshyml\" class=\"hash-link\" aria-label=\"Direct link to Installation des plugins oh-my-zsh (extrait de install_oh_my_zsh.yml)\" title=\"Direct link to Installation des plugins oh-my-zsh (extrait de install_oh_my_zsh.yml)\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_APcc theme-code-block\" style=\"--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)\"><div class=\"codeBlockContent_m3Ux\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_qGQc thin-scrollbar\" style=\"background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><code class=\"codeBlockLines_p187\"><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Ensure oh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">my</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">zsh is installed</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">hosts</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> all</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">become</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> no</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">tasks</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Ensure git is installed</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">become</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> yes</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">apt</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> git</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">state</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> present</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Check if oh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">my</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">zsh is installed</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">stat</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">path</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> ~/.oh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">my</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">zsh</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">register</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> oh_my_zsh_installed</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Download oh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">my</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">zsh installer</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">get_url</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">url</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> https</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">//raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">dest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /tmp/install_oh_my_zsh.sh</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">mode</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:hsl(95, 38%, 62%)\">'0755'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">when</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> not oh_my_zsh_installed.stat.exists</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Install oh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">my</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">zsh</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">shell</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> /tmp/install_oh_my_zsh.sh </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">unattended</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">when</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> not oh_my_zsh_installed.stat.exists</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Installation de divers plugins</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">name</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> Clone zsh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">autosuggestions</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">git</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">repo</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> https</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\">//github.com/zsh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">users/zsh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">autosuggestions</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">dest</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> ~/.oh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">my</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">zsh/custom/plugins/zsh</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">-</span><span class=\"token plain\">autosuggestions</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:hsl(29, 54%, 61%)\">when</span><span class=\"token punctuation\" style=\"color:hsl(220, 14%, 71%)\">:</span><span class=\"token plain\"> not zsh_autosuggestions_installed.stat.exists</span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:hsl(220, 10%, 40%)\"># Autres plugins...</span><br></span></code></pre><div class=\"buttonGroup_6DOT\"><button type=\"button\" aria-label=\"Copy code to clipboard\" title=\"Copy\" class=\"clean-btn\"><span class=\"copyButtonIcons_FhaS\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_phi_\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_FfTR\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"extensibilité-du-projet-\">Extensibilité du projet 🔌<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#extensibilit%C3%A9-du-projet-\" class=\"hash-link\" aria-label=\"Direct link to Extensibilité du projet 🔌\" title=\"Direct link to Extensibilité du projet 🔌\" translate=\"no\">​</a></h2>\n<p>Vous pouvez facilement étendre ce projet pour répondre à vos besoins spécifiques :</p>\n<ol>\n<li class=\"\">\n<p><strong>Personnalisation des fichiers de configuration</strong></p>\n<ul>\n<li class=\"\">Créez vos propres gists GitHub avec vos configurations .zshrc et starship.toml</li>\n<li class=\"\">Modifiez les URLs dans les playbooks pour pointer vers vos gists</li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Ajout de plugins supplémentaires</strong></p>\n<ul>\n<li class=\"\">Ajoutez de nouveaux plugins oh-my-zsh en suivant le modèle des plugins existants</li>\n<li class=\"\">Installez d'autres utilitaires en ajoutant des tâches aux playbooks</li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Support d'autres distributions</strong></p>\n<ul>\n<li class=\"\">Adaptez les commandes d'installation des packages pour d'autres distributions Linux</li>\n<li class=\"\">Ajoutez la détection du gestionnaire de paquets pour plus de flexibilité</li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Intégration avec d'autres outils de développement</strong></p>\n<ul>\n<li class=\"\">Ajoutez l'installation et la configuration d'outils complémentaires (tmux, neovim, etc.)</li>\n</ul>\n</li>\n</ol>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"bonnes-pratiques-et-conseils-\">Bonnes pratiques et conseils 💡<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#bonnes-pratiques-et-conseils-\" class=\"hash-link\" aria-label=\"Direct link to Bonnes pratiques et conseils 💡\" title=\"Direct link to Bonnes pratiques et conseils 💡\" translate=\"no\">​</a></h2>\n<ol>\n<li class=\"\"><strong>Testez vos changements dans Docker</strong> avant de les appliquer sur votre environnement principal</li>\n<li class=\"\"><strong>Stockez vos configurations sensibles</strong> dans des gists privés ou un gestionnaire de secrets</li>\n<li class=\"\"><strong>Créez un fork</strong> du projet pour l'adapter à vos besoins spécifiques</li>\n<li class=\"\"><strong>Maintenez votre propre dépôt</strong> pour suivre l'évolution de vos configurations shell</li>\n<li class=\"\"><strong>Documentez vos personnalisations</strong> pour faciliter la collaboration et le partage</li>\n</ol>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"avantages-de-cette-approche-\">Avantages de cette approche 🚀<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#avantages-de-cette-approche-\" class=\"hash-link\" aria-label=\"Direct link to Avantages de cette approche 🚀\" title=\"Direct link to Avantages de cette approche 🚀\" translate=\"no\">​</a></h2>\n<p>L'utilisation d'Ansible pour configurer votre environnement zsh offre plusieurs avantages :</p>\n<ul>\n<li class=\"\"><strong>Reproductibilité</strong> : même environnement sur toutes vos machines</li>\n<li class=\"\"><strong>Versionnement</strong> : suivre l'évolution de votre configuration</li>\n<li class=\"\"><strong>Partage</strong> : faciliter l'onboarding de nouveaux membres d'équipe</li>\n<li class=\"\"><strong>Maintien</strong> : mise à jour facile de la configuration</li>\n<li class=\"\"><strong>Documentation</strong> : le code Ansible documente votre setup</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion-\">Conclusion 🎯<a href=\"https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation#conclusion-\" class=\"hash-link\" aria-label=\"Direct link to Conclusion 🎯\" title=\"Direct link to Conclusion 🎯\" translate=\"no\">​</a></h2>\n<p>Le projet zsh_ansible démontre parfaitement comment Ansible peut être utilisé au-delà de la configuration de serveurs, pour automatiser même vos environnements de développement. Cette approche \"infrastructure as code\" appliquée à votre environnement de travail personnel vous fait gagner un temps précieux et assure une cohérence entre vos différentes machines.</p>\n<p>N'hésitez pas à explorer le <span style=\"display:inline-flex;gap:0.25rem\"><span></span><a href=\"https://github.com/sedelpeuch/zsh_ansible\" target=\"_blank\" rel=\"noopener noreferrer\">dépôt GitHub du projet</a></span>, à le forker et à l'adapter à vos besoins spécifiques. Et surtout, partagez vos améliorations avec la communauté !</p>\n<p>Vous utilisez déjà Ansible pour d'autres automatisations personnelles ? Partagez vos expériences dans les commentaires !</p>",
            "url": "https://delpeuch.net/blog/2025/06/09/08-iac/ansible-zsh-automation",
            "title": "Ansible : cas pratique zsh",
            "summary": "Découvrez comment automatiser et versionner votre environnement shell avec Ansible grâce au projet zsh_ansible.",
            "date_modified": "2025-06-09T00:00:00.000Z",
            "tags": [
                "Infrastructure as Code",
                "DevOps"
            ]
        }
    ]
}
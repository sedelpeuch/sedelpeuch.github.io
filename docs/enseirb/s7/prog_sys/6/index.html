<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-enseirb/s7/prog_sys/6" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Les processus | Sébastien Delpeuch</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://delpeuch.net/docs/enseirb/s7/prog_sys/6"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Les processus | Sébastien Delpeuch"><meta data-rh="true" name="description" content="Introduction aux processus"><meta data-rh="true" property="og:description" content="Introduction aux processus"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://delpeuch.net/docs/enseirb/s7/prog_sys/6"><link data-rh="true" rel="alternate" href="https://delpeuch.net/docs/enseirb/s7/prog_sys/6" hreflang="en"><link data-rh="true" rel="alternate" href="https://delpeuch.net/docs/enseirb/s7/prog_sys/6" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Sébastien Delpeuch&#39;s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Sébastien Delpeuch&#39;s Blog Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Sébastien Delpeuch&#39;s Blog JSON Feed">





<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?c9a3849aa75f9c4a4e65f846cd1a5155",e.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
<meta name="baidu-site-verification" content="code-rqLUw5reVS">
<script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",t.defer=!0;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script>

<link rel="icon" href="/img/logo.png">
<meta name="theme-color" content="#12affa">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/misans@4.0.0/lib/Normal/MiSans-Normal.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/misans@4.0.0/lib/Normal/MiSans-Semibold.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="https://plausible.io/js/script.js" defer="defer" data-domain="delpeuch.net"></script><link rel="stylesheet" href="/assets/css/styles.e1a8ff51.css">
<script src="/assets/js/runtime~main.9ed44a15.js" defer="defer"></script>
<script src="/assets/js/main.6717c7af.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="navbar" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.webp" alt="navbar" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/about">Résumé</a><a class="navbar__item navbar__link" href="/project">Projets</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/associatif">Associatif</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ENSEIRB-MATMECA</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/enseirb/s9">Semestre 9</a></li><li><a class="dropdown__link" href="/docs/enseirb/s8">Semestre 8</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/enseirb/s7">Semestre 7</a></li><li><a class="dropdown__link" href="/docs/enseirb/s6">Semestre 6</a></li><li><a class="dropdown__link" href="/docs/enseirb/s5">Semestre 5</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">CPBx</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/cpbx/s4">Semestre 4</a></li><li><a class="dropdown__link" href="/docs/cpbx/s3">Semestre 3</a></li><li><a class="dropdown__link" href="/docs/cpbx/s2">Semestre 2</a></li><li><a class="dropdown__link" href="/docs/cpbx/s1">Semestre 1</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/cpbx/">CPBx</a><button aria-label="Expand sidebar category &#x27;CPBx&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/enseirb/">ENSEIRB-MATMECA</a><button aria-label="Collapse sidebar category &#x27;ENSEIRB-MATMECA&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s5/">Semestre 5</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/enseirb/s6/">Semestre 6</a><button aria-label="Expand sidebar category &#x27;Semestre 6&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/enseirb/s7/">Semestre 7</a><button aria-label="Collapse sidebar category &#x27;Semestre 7&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/GL">Génie Logiciel </a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/enseirb/s7/TCP/">Architecture des réseaux TCP/IP</a><button aria-label="Expand sidebar category &#x27;Architecture des réseaux TCP/IP&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/enseirb/s7/bdd/">SGBD</a><button aria-label="Expand sidebar category &#x27;SGBD&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/enseirb/s7/compilation/">Compilation</a><button aria-label="Expand sidebar category &#x27;Compilation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/enseirb/s7/cpp/">Programmation C++</a><button aria-label="Expand sidebar category &#x27;Programmation C++&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/enseirb/s7/poo/">Programmation Orientée Objets</a><button aria-label="Expand sidebar category &#x27;Programmation Orientée Objets&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/enseirb/s7/prog_sys/">Programmation Système</a><button aria-label="Collapse sidebar category &#x27;Programmation Système&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/1">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/10">Les signaux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/11">Les verous de fichiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/12">Algorithmes Distribués &amp; Interblocages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/13">Multiplexer des entrées-sorties</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/14">Les threads POSIX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/2">Système de Gestion de Fichiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/3">Le Buffer Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/4">La bibliothèque standard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/5">Appels système du Système de Gestion de Fichier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/enseirb/s7/prog_sys/6">Les processus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/7">La mémoire</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/8">La mémoire virtuelle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/enseirb/s7/prog_sys/9">Tubes et tubes nommés</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/enseirb/s7/quantique/">Introduction à l&#x27;informatique quantique</a><button aria-label="Expand sidebar category &#x27;Introduction à l&#x27;informatique quantique&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/enseirb/s8/">Semestre 8</a><button aria-label="Expand sidebar category &#x27;Semestre 8&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/enseirb/s9/">Semestre 9</a><button aria-label="Expand sidebar category &#x27;Semestre 9&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/enseirb/"><span itemprop="name">ENSEIRB-MATMECA</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/enseirb/s7/"><span itemprop="name">Semestre 7</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/enseirb/s7/prog_sys/"><span itemprop="name">Programmation Système</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Les processus</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Les processus</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-aux-processus">Introduction aux processus<a href="#introduction-aux-processus" class="hash-link" aria-label="Direct link to Introduction aux processus" title="Direct link to Introduction aux processus">​</a></h2>
<p>Un processus est un ensemble d&#x27;octets (en langage machine) en cours d&#x27;exécution,
en d&#x27;autres termes, c&#x27;est l&#x27;exécution d&#x27;un programme. Un processus UNIX se
décompose en :</p>
<ol>
<li>un espace d&#x27;adressage (visible par l&#x27;utilisateur / programmeur)</li>
<li>Le bloc de contrôle du processus (BCP) lui-même décomposé en :<!-- -->
<ul>
<li>une entrée dans la table des processus du noyau <code>struc proc</code> définie dans
<code>&lt;sys/proc.h&gt;</code></li>
<li>une structure <code>struct user</code> appelée <code>zone u</code> définie dans <code>&lt;sys/user.h&gt;</code></li>
</ul>
</li>
</ol>
<p>Le processus sous UNIX apportent :</p>
<ul>
<li>La multiplicité des exécutions, plusieurs processus peuvent être l&#x27;exécution
d&#x27;un même programme</li>
<li>La protection des exécutions, un processus ne peut exécuter que ses
instructions propres et ce de façon séquentielle; il ne peut pas exécuter des
instructions appartenant à un autre processus. Les processus sous UNIX
communiquent entre eux et avec le reste du monde grâce aux appels système.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="création-dun-processus---fork">Création d&#x27;un processus - <code>fork()</code><a href="#création-dun-processus---fork" class="hash-link" aria-label="Direct link to création-dun-processus---fork" title="Direct link to création-dun-processus---fork">​</a></h3>
<p>Sous UNIX la création de processus est réalisée par l&#x27;appel système <code>int fork(void);</code>. tous les processus sauf le processus d&#x27;identification 0, sont
créés par un appel à fork. Le processus qui appelle le <code>fork</code> est appelé
processus père. Le nouveau processus est appelé processus fils. Tout processus a
un seul processus père. Tout processus peut avoir zéro ou plusieurs processus
fils. Chaque processus est identifié par un numéro unique, son <strong>PID</strong>.</p>
<center><p><img decoding="async" loading="lazy" src="/assets/images/SYS6-8b9981a4611ad2e200486426eacbffc0.png" width="458" height="326" class="img_ev3q"></p></center>
<p>Le processus de PID 0 est créé &quot;manuellement&quot; au démarrage de la machine, ce
processus a toujours un rôle spécial pour le système, de plus pour le bon
fonctionnement des programmes utilisant <code>fork()</code> il faut que le PID zéro reste
toujours utilisé. Le processus zéro crée, grâce à un appel de <code>fork</code>, le
processus init de PID 1.</p>
<p>Le processus de PID 1 de nom <code>init</code> est l&#x27;ancêtre de tous les autres processus
(le processus 0 ne réalisant plus de <code>fork()</code>), c&#x27;est lui qui accueille tous les
processus orphelins de père (ceci a fin de collecter les informations à la mort
de chaque processus).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="format-dun-fichier-exécutable">Format d&#x27;un fichier exécutable<a href="#format-dun-fichier-exécutable" class="hash-link" aria-label="Direct link to Format d&#x27;un fichier exécutable" title="Direct link to Format d&#x27;un fichier exécutable">​</a></h2>
<p>Les compilateurs nous permettent de créer des fichiers exécutables. Ces fichiers
ont le format suivant qui permet au noyau de les transformer en processus :</p>
<ul>
<li>Une en-tête qui décrit l&#x27;ensemble du fichier, ses attributs et sa carte des
sections</li>
<li>La taille à allouer pour les variables non initialisées</li>
<li>Une section TEXT qui contient le code (en langage machine)</li>
<li>Une section données (DATA) codée en langage machine qui contient les données
initialisées</li>
<li>Eventuellement d&#x27;autres sections : Table des symboles pour le débugger,
Images, ICONS, Table des chaînes, etc</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="chargement--changement-dun-exécutable">Chargement / changement d&#x27;un exécutable<a href="#chargement--changement-dun-exécutable" class="hash-link" aria-label="Direct link to Chargement / changement d&#x27;un exécutable" title="Direct link to Chargement / changement d&#x27;un exécutable">​</a></h2>
<p>L&#x27;appel système <code>execve</code> change l&#x27;exécutable du processus courant en chargeant
un nouvel exécutable. Les régions associée au processus sont préalablement
libérées : <code>int execve(...);</code></p>
<p>Pour chaque section de l&#x27;exécutable une région en mémoire est allouée. Soit au
moins les régions :</p>
<ul>
<li>le code</li>
<li>les données initialisées</li>
<li>des piles</li>
<li>du tas</li>
</ul>
<p>La région de la pile : C&#x27;est une pile de structure de pile qui sont empilées et
dépilées lors de l&#x27;appel ou le retour de fonction. Le pointeur de pile, un des
registres de l&#x27;unité centrale, indique la profondeur courante de la pile. Un
processus UNIX pouvant s&#x27;exécuter en deux modes (noyau, utilisateur), une pile
privée sera utilisée dans chaque mode. La pile noyau sera vide quand le
processus est en mode utilisateur. Le tas est une zone où est réalisée
l&#x27;allocation dynamique avec les fonctions <code>Xalloc()</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="zone-u-et-table-des-processus"><code>zone u</code> et table des processus<a href="#zone-u-et-table-des-processus" class="hash-link" aria-label="Direct link to zone-u-et-table-des-processus" title="Direct link to zone-u-et-table-des-processus">​</a></h2>
<p>Tous les processus sont associés à une entrée dans la table des processus qui
est interne au noyau. De plus, le noyau alloue pour chaque processus une
structure appelée <code>zone u</code>, qui contient des données privées du processus,
uniquement manipulables par le noyau. La table des processus nous permet
d&#x27;accéder à la table des régions par processus qui permet d&#x27;accéder à la table
des régions. Ce double niveau d&#x27;indirection permet de faire partager des
régions. Dans l&#x27;organisation avec une mémoire virtuelle, la table des régions
est matérialisée logiquement dans la table de pages. Les structures de régions
de la table des régions contiennent des informations sur le type, les droits
d&#x27;accès et la localisation (adresses en mémoire ou adresses sur disque) de la
région. Seule la <code>zone u</code> du processus courant est manipulable par le noyau, les
autres sont <code>inaccessibles</code>. L&#x27;adresse de la zone <code>u</code> est placée dans le mot
d&#x27;état du processus.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fork-et-exec"><code>fork</code> et <code>exec</code><a href="#fork-et-exec" class="hash-link" aria-label="Direct link to fork-et-exec" title="Direct link to fork-et-exec">​</a></h2>
<p>Quand un processus réalise un <code>fork</code>, le contenu de l&#x27;entrée de la table des
régions est dupliqué, chaque région est ensuite, en fonction de son type,
partagée ou copiée. Quand un processus réalise un <code>exec</code>, il y a libération des
régions et réallocation de nouvelles régions en fonction des valeurs définies
dans le nouvel exécutable</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="le-contexte-dun-processus">Le contexte d&#x27;un processus<a href="#le-contexte-dun-processus" class="hash-link" aria-label="Direct link to Le contexte d&#x27;un processus" title="Direct link to Le contexte d&#x27;un processus">​</a></h2>
<p>Le contexte d&#x27;un processus est l&#x27;ensemble des données qui permettent de
reprendre l&#x27;exécution d&#x27;un processus qui a été interrompu. Le contexte d&#x27;un
processus est l&#x27;ensemble de :</p>
<ol>
<li>son état</li>
<li>son mot d&#x27;état</li>
<li>les valeurs des variables globales statiques ou dynamiques</li>
<li>son entrée dans la table des processus</li>
<li>sa zone u</li>
<li>les piles user et system</li>
<li>les zones de code et de données</li>
</ol>
<p>Le noyau et ses variables ne font partie du contexte d&#x27;aucun processus !
L&#x27;exécution d&#x27;un processus se fait dans son contexte. Quand il y a un changement
de processus courant, il y a réalisation d&#x27;une commutation de mode d&#x27;état et
d&#x27;un changement de contexte. Le noyau s&#x27;exécute alors dans le nouveau contexte.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="commutation-de-mot-détat-et-interruptions">Commutation de mot d&#x27;état et interruptions<a href="#commutation-de-mot-détat-et-interruptions" class="hash-link" aria-label="Direct link to Commutation de mot d&#x27;état et interruptions" title="Direct link to Commutation de mot d&#x27;état et interruptions">​</a></h2>
<p>Ces fonctions de très bas niveau sont fondamentales pour pouvoir programmer un
système d&#x27;exploitation. Pour être exécuté et donner naissance à un processus, un
programme et ses données doivent être chargés en mémoire centrale. Les
instructions du programme sont transférées une à une de la mémoire centrale sur
l&#x27;unité centrale où elles sont exécutées. L&#x27;unité centrale comprend des circuits
logiques et arithmétiques qui effectuent les instructions mais aussi des mémoire
appelées registres. Certains de ces registres sont spécialisés directement par
les constructeurs de l&#x27;unité centrale, d&#x27;autre le sont par les programmeur du
noyau. Quelques registres spécialisés :</p>
<ul>
<li><strong>L&#x27;accumulateur</strong> qui reçoit le résultat d&#x27;une instruction, sur les machines
à registres multiples, le jeu d&#x27;instructions permet souvent d&#x27;utiliser
n&#x27;importe lequel des registres comme accumulateur</li>
<li><strong>le registre d&#x27;instruction</strong></li>
<li><strong>le compteur ordinal</strong>, ce compteur change au cours de la réalisation d&#x27;une
instruction pour pointer sur la prochaine instruction à exécuter, la majorité
des instructions ne font qu&#x27;incrémenter ce compteur, les instructions de
branchement réalisent des opérations plus complexes sur ce compteur :
affectation, incrémentation ou décrémentation plus importantes</li>
<li><strong>le registre d&#x27;adresse</strong></li>
<li><strong>les registres de données</strong> qui sont utilisés pour lire ou écrire une donnée
à une adresse spécifiée en mémoire</li>
<li><strong>les registres d&#x27;état</strong> du processeur</li>
<li><strong>les registres d&#x27;état du processus</strong> droits, adresses, priorités etc</li>
</ul>
<p>Ce registres forment le contexte d&#x27;unité centrale d&#x27;un processus. A tout moment,
un processus est caractérisé par ces deux contextes : le contexte d&#x27;unité
centrale qui est composé des mêmes données pour tous les processus et le
contexte qui dépend du code du programme exécuté. Pour pouvoir exécuter un
nouveau processus, il faut pouvoir sauvegarder le contexte d&#x27;unité centrale du
processus courant (mot d&#x27;état), puis charger le nouveau mot d&#x27;état du processus
à exécuter. Cette opération délicate réalisée de façon matérielle est appelée
commutation de mot d&#x27;état. Elle doit se faire de façon non interruptible ! Cette
&quot;Super instruction&quot; utilise 2 adresses qui sont respectivement : l&#x27;adresse de
sauvegarde du mot d&#x27;état et l&#x27;adresse de lecture du nouveau mot d&#x27;état. Le
compteur ordinal faisant partie du mot d&#x27;état, ce changement provoque
l&#x27;exécution dans le nouveau processus. C&#x27;est le nouveau processus qui devra
réaliser la sauvegarde du contexte global. En général c&#x27;est le noyau qui réalise
cette sauvegarde, le noyau n&#x27;ayant pas un contexte du même type. Le processus
interrompu pourra ainsi reprendre exactement où il avait abandonnés.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="les-interruptions">Les interruptions<a href="#les-interruptions" class="hash-link" aria-label="Direct link to Les interruptions" title="Direct link to Les interruptions">​</a></h2>
<p>Une interruption est une commutation de mot d&#x27;état provoquée par un signal
produit par le matériel. Ce signal étant la conséquence d&#x27;un événement extérieur
ou intérieur, il modifie l&#x27;état d&#x27;un indicateur qui est régulièrement testé par
l&#x27;unité centrale. Une fois que le signal est détecté, il faut déterminer la
cause de l&#x27;interruption. Pour cela on utilise un indicateur, pour les
différentes causes, on parle alors du vecteur d&#x27;interruptions. Trois grands
types d&#x27;interruptions :</p>
<ul>
<li><strong>externes</strong> (indépendantes du processus) interventions de l&#x27;opérateur,
pannes, etc</li>
<li><strong>déroutements</strong> erreur interne du processeur, débordement, division par zéro,
page fault etc</li>
<li><strong>appels systèmes</strong> demande d&#x27;entrée-sortie par exemple.</li>
</ul>
<p>Suivant les machines et les systèmes un nombre de variable de niveaux
d&#x27;interruption est utilisé. Ces différentes interruptions ne réalisent pas
nécessairement un changement de contexte complet du processus courant. Il est
possible que plusieurs niveaux d&#x27;interruption soient positionnées quand le
système les consulte. C&#x27;est le niveau des différentes interruptions qui va
permettre au système de sélectionner l&#x27;interruption à traiter en priorité.
L&#x27;horloge est l&#x27;interruption la plus prioritaire sur un système Unix.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="le-problème-des-cascades-dinterruptions">Le problème des cascades d&#x27;interruptions<a href="#le-problème-des-cascades-dinterruptions" class="hash-link" aria-label="Direct link to Le problème des cascades d&#x27;interruptions" title="Direct link to Le problème des cascades d&#x27;interruptions">​</a></h2>
<p>Si pendant le traitement d&#x27;une interruption, une autre interruption se produit,
et qeu ceci se répète pendant le traitement de la nouvelle interruption, le
système ne fait plus progresser les processus ni les interruption en cours de
traitement. Il est donc nécessaire de pouvoir retarder ou annuler la prise en
compte d&#x27;un ou plusieurs signaux d&#x27;interruption. C&#x27;est le rôle des deux
mécanismes de <strong>masquage</strong> et de <strong>désarmement</strong> d&#x27;un niveau d&#x27;interruption.
Masquer, c&#x27;est ignorer temporairement un niveau d&#x27;interruption. Si ce masquage
est fait dans le mot d&#x27;état d&#x27;un traitement d&#x27;interruption, à la nouvelle
commutation d&#x27;état, le masquage disparaît; les interruptions peuvent de nouveau
être prises en compte. Désarmer, c&#x27;est rendre le positionnement de
l&#x27;interruption caduque.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="accès-aux-structures-proc-et-user-du-processus-courant">Accès aux structures <code>proc</code> et <code>user</code> du processus courant<a href="#accès-aux-structures-proc-et-user-du-processus-courant" class="hash-link" aria-label="Direct link to accès-aux-structures-proc-et-user-du-processus-courant" title="Direct link to accès-aux-structures-proc-et-user-du-processus-courant">​</a></h2>
<p>Les informations de la table des processus peuvent être lues grâce à la commande
shell <code>ps</code>. Ou par des appels système. Par contre, les informations contenues
dans la zone <code>u</code> ne sont pas accessibles que par une réponse du processus
lui-même (en programmation objet, on dit que ce sont des variables d&#x27;instances
privées), d&#x27;où les appels systèmes suivants : <code>times, chroot, chdir, fchdir, getuid, getgid ...</code></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/enseirb/s7/prog_sys/5"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Appels système du Système de Gestion de Fichier</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/enseirb/s7/prog_sys/7"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">La mémoire</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop" style="opacity:0;transform:translateX(100px) translateZ(0)"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction-aux-processus" class="table-of-contents__link toc-highlight">Introduction aux processus</a><ul><li><a href="#création-dun-processus---fork" class="table-of-contents__link toc-highlight">Création d&#39;un processus - <code>fork()</code></a></li></ul></li><li><a href="#format-dun-fichier-exécutable" class="table-of-contents__link toc-highlight">Format d&#39;un fichier exécutable</a></li><li><a href="#chargement--changement-dun-exécutable" class="table-of-contents__link toc-highlight">Chargement / changement d&#39;un exécutable</a></li><li><a href="#zone-u-et-table-des-processus" class="table-of-contents__link toc-highlight"><code>zone u</code> et table des processus</a></li><li><a href="#fork-et-exec" class="table-of-contents__link toc-highlight"><code>fork</code> et <code>exec</code></a></li><li><a href="#le-contexte-dun-processus" class="table-of-contents__link toc-highlight">Le contexte d&#39;un processus</a></li><li><a href="#commutation-de-mot-détat-et-interruptions" class="table-of-contents__link toc-highlight">Commutation de mot d&#39;état et interruptions</a></li><li><a href="#les-interruptions" class="table-of-contents__link toc-highlight">Les interruptions</a></li><li><a href="#le-problème-des-cascades-dinterruptions" class="table-of-contents__link toc-highlight">Le problème des cascades d&#39;interruptions</a></li><li><a href="#accès-aux-structures-proc-et-user-du-processus-courant" class="table-of-contents__link toc-highlight">Accès aux structures <code>proc</code> et <code>user</code> du processus courant</a></li></ul><hr class="hr_UhE0"><span class="percent_H6RK">0%<!-- --> </span></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/sedelpeuch" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>
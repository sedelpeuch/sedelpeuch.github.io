"use strict";(self.webpackChunksedelpeuch_net=self.webpackChunksedelpeuch_net||[]).push([[816],{88048:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>t,metadata:()=>o,toc:()=>a});var r=n(74848),i=n(28453);const t={title:"Algorithmes Distribu\xe9s & Interblocages"},l=void 0,o={id:"enseirb/s7/prog_sys/12",title:"Algorithmes Distribu\xe9s & Interblocages",description:"Ce chapitre introduit les probl\xe8mes li\xe9s \xe0 la gestion de processus concurrents.",source:"@site/docs/enseirb/s7/prog_sys/12.md",sourceDirName:"enseirb/s7/prog_sys",slug:"/enseirb/s7/prog_sys/12",permalink:"/pr-preview/pr-13/docs/enseirb/s7/prog_sys/12",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Algorithmes Distribu\xe9s & Interblocages"},sidebar:"tutorialSidebar",previous:{title:"Les verous de fichiers",permalink:"/pr-preview/pr-13/docs/enseirb/s7/prog_sys/11"},next:{title:"Multiplexer des entr\xe9es-sorties",permalink:"/pr-preview/pr-13/docs/enseirb/s7/prog_sys/13"}},c={},a=[{value:"Exemple",id:"exemple",level:2},{value:"LEs m\xe9faits des acc\xe8s concurrents",id:"les-m\xe9faits-des-acc\xe8s-concurrents",level:3},{value:"Exclusion mutuelle",id:"exclusion-mutuelle",level:3},{value:"Mode d&#39;utilisation des ressources par un processus",id:"mode-dutilisation-des-ressources-par-un-processus",level:2},{value:"D\xe9finition de l&#39;interblocage (deadlock)",id:"d\xe9finition-de-linterblocage-deadlock",level:2},{value:"Quatre conditions n\xe9cessaires \xe0 l&#39;interblocage",id:"quatre-conditions-n\xe9cessaires-\xe0-linterblocage",level:2},{value:"Les graphes d&#39;allocation de ressources",id:"les-graphes-dallocation-de-ressources",level:2}];function u(e){const s={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"Ce chapitre introduit les probl\xe8mes li\xe9s \xe0 la gestion de processus concurrents.\nLe probl\xe8me \xe0 r\xe9soudre est le partage de ressources entre diff\xe9rents processus\nasycrones. Les IPC et et les verrous sont deux types d'outils permettant le\npartage asynchrone de ressources entre processus."}),"\n",(0,r.jsx)(s.h2,{id:"exemple",children:"Exemple"}),"\n",(0,r.jsx)(s.h3,{id:"les-m\xe9faits-des-acc\xe8s-concurrents",children:"LEs m\xe9faits des acc\xe8s concurrents"}),"\n",(0,r.jsx)(s.p,{children:"L'exemple le plus simple est une variable enti\xe8re partag\xe9e par deux processus ou\nthreads, ou bien manipul\xe9 par une fonction asyncrones comme un handler de\nsignal. Supposons que l'on d\xe9finisse deux fonctions de manipulation de la\nvariable :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-c",children:"int getValue();\nvoid setValue(int);\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Pour incr\xe9menter la variable, il suffit d'ex\xe9cuter ",(0,r.jsx)(s.code,{children:"setValue(getValue()+1);"}),"\nmais d\xe9composont en ",(0,r.jsx)(s.code,{children:"int tmp = getValue(); setValue(tmp+1);"})," ce qui ne change\npas grand chose ",(0,r.jsx)(s.code,{children:"tmp"})," \xe9tant simplement allou\xe9e sur la pile dans le premier cas.\nRegardons l'ex\xe9cution suivant du code par deux thread."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-c",children:"int tmp1=getValue();\n                    | int tmp2 = getValue();\nsetValue(tmp1+1);\n                    | setValue(tmp2+1);\n"})}),"\n",(0,r.jsx)(s.p,{children:"Que c'est il pass\xe9 ? La variable n'a \xe9t\xe9 incr\xe9ment\xe9e qu'une fois !"}),"\n",(0,r.jsx)(s.h3,{id:"exclusion-mutuelle",children:"Exclusion mutuelle"}),"\n",(0,r.jsx)(s.p,{children:"Probl\xe8me : il y a une rivi\xe8re que l'on peut traverser par un gu\xe9 fait de pierre\nalign\xe9es, o\xf9 il n'est pas possible de se croiser, et il n'est pas possible de\nfaire demi-tour. Comment doit on organiser le passage ?"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"regarder avant de traverser"}),"\n",(0,r.jsxs)(s.li,{children:["si deux personnes arrivent en m\xeame temps sur chaque rive,","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"si elles avancent en m\xeame temps -> interblocage"}),"\n",(0,r.jsx)(s.li,{children:"si elles attendent en m\xeame temps -> interblocage"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.li,{children:"Un rem\xe8de : un cont\xe9 prioritaire -> famine"}),"\n",(0,r.jsx)(s.li,{children:"Une solution : alterner les priorit\xe9s"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Pour des ressources syst\xe8me comme les fichiers, le partage n'est pas g\xe9r\xe9 par le\nSGF. Il faut donc un m\xe9canisme de partage : les verrous, qui permettent un\npartage dynamique et partiel (portions de fichiers). Pour un partage entre\nutilisateurs, on utilise plut\xf4t des outils comme SCCS, RCS."}),"\n",(0,r.jsx)(s.h2,{id:"mode-dutilisation-des-ressources-par-un-processus",children:"Mode d'utilisation des ressources par un processus"}),"\n",(0,r.jsx)(s.p,{children:"Formalisons les op\xe9rations r\xe9alisables sur une ressource."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"requete"})," : demande bloquante des ressources"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"utilisation"})," : lecture/\xe9criture sur la zone verrouill\xe9e"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"lib\xe9ration"})," : verrou L-type"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"d\xe9finition-de-linterblocage-deadlock",children:"D\xe9finition de l'interblocage (deadlock)"}),"\n",(0,r.jsxs)(s.p,{children:["Un ensemble de processus est en ",(0,r.jsx)(s.strong,{children:"interblocage"})," si et seulement si tout\nprocessus de l'ensemble est en attente d'un \xe9v\xe8nement qui ne peut \xeatre r\xe9alis\xe9\nque par un autre processus de l'ensemble."]}),"\n",(0,r.jsx)(s.h2,{id:"quatre-conditions-n\xe9cessaires-\xe0-linterblocage",children:"Quatre conditions n\xe9cessaires \xe0 l'interblocage"}),"\n",(0,r.jsx)(s.p,{children:"Les conditions suivantes sont n\xe9cessaires pour avoir possibilit\xe9 d'interblocage"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Exclusion mutuelle"})," les ressources ne sont pas partageables, un seul\nprocessus \xe0 la fois peut utiliser la ressource"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Possession & attente"})," il doit exister un processus qui utilise une\nressource et qui est en attente sur une requ\xeate"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Sans pr\xe9emption"})," les ressources ne sont pas pr\xe9emptibles c'est \xe0 dire que\nles lib\xe9rations sont faites volontairement par les processus. On ne peut pas\nforcer un processus \xe0 rendre une ressource"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Attente circulaire"})," il doit exister un ensemble de processus Pi tel que Pi\nattend une ressource poss\xe9d\xe9e par Pi+1."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"les-graphes-dallocation-de-ressources",children:"Les graphes d'allocation de ressources"}),"\n",(0,r.jsx)(s.p,{children:"Les graphes d'allocation de ressources permettent de d\xe9crire simplement les\nprobl\xe8mes d'interblocage."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"G = (N,T) N = P U R\nP : ensemble des processus\nR : ensemble des ressources\n"})}),"\n",(0,r.jsx)(s.p,{children:"Soit le coupe (x,y) appartenant \xe0 T, si (x,y) appartient \xe0 RXP, cela signifie\nque la ressource x est utilis\xe9e par le processus y, si (x,y) appartient \xe0 PXR,\ncela signifie que le processus x demande la ressource y."})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>o});var r=n(96540);const i={},t=r.createContext(i);function l(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);
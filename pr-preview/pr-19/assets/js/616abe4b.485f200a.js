"use strict";(self.webpackChunksedelpeuch_net=self.webpackChunksedelpeuch_net||[]).push([[5426],{34509(e,n,s){s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>a});var t=s(85399),o=s(74848),l=s(28453);const r={title:"Kubernetes : kubectl",description:"Les commandes kubectl indispensables pour g\xe9rer efficacement des clusters Kubernetes au quotidien.",tags:["Kubernetes","Orchestration","Devops","kubectl"]},c=void 0,i={authorsImageUrls:[]},a=[{value:"Configuration et contextes \ud83d\udd27",id:"configuration-et-contextes-",level:2},{value:"Gestion des contextes",id:"gestion-des-contextes",level:3},{value:"Commandes de base \ud83d\udcdd",id:"commandes-de-base-",level:2},{value:"Gestion des ressources",id:"gestion-des-ressources",level:3},{value:"Consultation des ressources",id:"consultation-des-ressources",level:3},{value:"Informations d\xe9taill\xe9es",id:"informations-d\xe9taill\xe9es",level:3},{value:"Commandes avanc\xe9es \ud83c\udfaf",id:"commandes-avanc\xe9es-",level:2},{value:"Ex\xe9cution de commandes dans les pods",id:"ex\xe9cution-de-commandes-dans-les-pods",level:3},{value:"Port-forwarding et proxy",id:"port-forwarding-et-proxy",level:3},{value:"D\xe9bogage et d\xe9pannage",id:"d\xe9bogage-et-d\xe9pannage",level:3},{value:"\xc9dition en place",id:"\xe9dition-en-place",level:3},{value:"Techniques de filtrage avanc\xe9es \ud83d\udd0d",id:"techniques-de-filtrage-avanc\xe9es-",level:2},{value:"JSONPath",id:"jsonpath",level:3},{value:"Custom Columns",id:"custom-columns",level:3},{value:"Ressources utiles \ud83d\udcda",id:"ressources-utiles-",level:2},{value:"Conclusion \ud83c\udfaf",id:"conclusion-",level:2}];function u(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Kubectl est l'outil en ligne de commande officiel pour interagir avec les clusters Kubernetes. La ma\xeetrise de kubectl est essentielle pour tout DevOps ou d\xe9veloppeur travaillant avec Kubernetes. Cet article explore les commandes de base et avanc\xe9es, ainsi que des astuces pour am\xe9liorer la productivit\xe9. \ud83d\ude80"}),"\n",(0,o.jsx)(n.h2,{id:"configuration-et-contextes-",children:"Configuration et contextes \ud83d\udd27"}),"\n",(0,o.jsx)(n.h3,{id:"gestion-des-contextes",children:"Gestion des contextes"}),"\n",(0,o.jsx)(n.p,{children:"Kubectl utilise des contextes pour basculer entre diff\xe9rents clusters :"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Afficher la configuration actuelle\nkubectl config view\n\n# Lister tous les contextes disponibles\nkubectl config get-contexts\n\n# Afficher le contexte actuel\nkubectl config current-context\n\n# Changer de contexte\nkubectl config use-context mon-cluster-prod\n\n# Cr\xe9er un nouveau contexte\nkubectl config set-context mon-contexte \\\n  --cluster=mon-cluster \\\n  --user=mon-utilisateur \\\n  --namespace=mon-namespace\n\n# D\xe9finir le namespace par d\xe9faut pour le contexte actuel\nkubectl config set-context --current --namespace=production\n"})}),"\n",(0,o.jsx)(n.h2,{id:"commandes-de-base-",children:"Commandes de base \ud83d\udcdd"}),"\n",(0,o.jsx)(n.h3,{id:"gestion-des-ressources",children:"Gestion des ressources"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Cr\xe9er une ressource depuis un fichier YAML\nkubectl apply -f deployment.yaml\n\n# Cr\xe9er plusieurs ressources depuis un r\xe9pertoire\nkubectl apply -f ./manifests/\n\n# Cr\xe9er une ressource depuis une URL\nkubectl apply -f https://example.com/deployment.yaml\n\n# Supprimer une ressource\nkubectl delete -f deployment.yaml\nkubectl delete deployment mon-deployment\n\n# Supprimer toutes les ressources d'un type\nkubectl delete deployments --all\n"})}),"\n",(0,o.jsx)(n.h3,{id:"consultation-des-ressources",children:"Consultation des ressources"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Lister toutes les ressources d'un type\nkubectl get pods\nkubectl get deployments\nkubectl get services\n\n# Afficher plus de d\xe9tails\nkubectl get pods -o wide\n\n# Afficher au format YAML ou JSON\nkubectl get pod mon-pod -o yaml\nkubectl get pod mon-pod -o json\n\n# Lister toutes les ressources dans tous les namespaces\nkubectl get pods --all-namespaces\nkubectl get pods -A  # Raccourci\n\n# Filtrer par labels\nkubectl get pods -l app=nginx\nkubectl get pods -l environment=production,tier=frontend\n\n# Trier les r\xe9sultats\nkubectl get pods --sort-by=.metadata.creationTimestamp\nkubectl get pods --sort-by=.status.startTime\n"})}),"\n",(0,o.jsx)(n.h3,{id:"informations-d\xe9taill\xe9es",children:"Informations d\xe9taill\xe9es"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# D\xe9crire une ressource (informations d\xe9taill\xe9es + \xe9v\xe9nements)\nkubectl describe pod mon-pod\nkubectl describe deployment mon-deployment\nkubectl describe node mon-node\n\n# Afficher les logs d'un pod\nkubectl logs mon-pod\n\n# Afficher les logs en temps r\xe9el\nkubectl logs -f mon-pod\n\n# Afficher les logs d'un conteneur sp\xe9cifique dans un pod\nkubectl logs mon-pod -c mon-conteneur\n\n# Afficher les logs des 100 derni\xe8res lignes\nkubectl logs mon-pod --tail=100\n\n# Afficher les logs depuis les 5 derni\xe8res minutes\nkubectl logs mon-pod --since=5m\n\n# Afficher les logs du conteneur pr\xe9c\xe9dent (en cas de crash)\nkubectl logs mon-pod --previous\n"})}),"\n",(0,o.jsx)(n.h2,{id:"commandes-avanc\xe9es-",children:"Commandes avanc\xe9es \ud83c\udfaf"}),"\n",(0,o.jsx)(n.h3,{id:"ex\xe9cution-de-commandes-dans-les-pods",children:"Ex\xe9cution de commandes dans les pods"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Ex\xe9cuter une commande dans un pod\nkubectl exec mon-pod -- ls /app\n\n# Ouvrir un shell interactif\nkubectl exec -it mon-pod -- /bin/bash\nkubectl exec -it mon-pod -- /bin/sh\n\n# Ex\xe9cuter dans un conteneur sp\xe9cifique\nkubectl exec -it mon-pod -c mon-conteneur -- /bin/bash\n\n# Copier des fichiers depuis/vers un pod\nkubectl cp mon-pod:/app/config.json ./config.json\nkubectl cp ./config.json mon-pod:/app/config.json\n"})}),"\n",(0,o.jsx)(n.h3,{id:"port-forwarding-et-proxy",children:"Port-forwarding et proxy"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Rediriger un port local vers un pod\nkubectl port-forward pod/mon-pod 8080:80\n\n# Rediriger vers un service\nkubectl port-forward service/mon-service 8080:80\n\n# Rediriger vers un deployment\nkubectl port-forward deployment/mon-deployment 8080:80\n\n# Permettre l'acc\xe8s depuis toutes les interfaces\nkubectl port-forward --address 0.0.0.0 pod/mon-pod 8080:80\n\n# Cr\xe9er un proxy vers l'API Kubernetes\nkubectl proxy --port=8001\n"})}),"\n",(0,o.jsx)(n.h3,{id:"d\xe9bogage-et-d\xe9pannage",children:"D\xe9bogage et d\xe9pannage"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Obtenir les \xe9v\xe9nements du cluster\nkubectl get events\nkubectl get events --sort-by=.metadata.creationTimestamp\nkubectl get events --field-selector type=Warning\n\n# V\xe9rifier l'\xe9tat des n\u0153uds\nkubectl top nodes\n\n# V\xe9rifier l'utilisation des ressources des pods\nkubectl top pods\nkubectl top pods --containers\n\n# Afficher les pods en erreur\nkubectl get pods --field-selector=status.phase=Failed\n\n# Afficher les pods non pr\xeats\nkubectl get pods --field-selector=status.phase!=Running\n\n# Obtenir le YAML complet d'une ressource en cours d'ex\xe9cution\nkubectl get pod mon-pod -o yaml > pod-backup.yaml\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\xe9dition-en-place",children:"\xc9dition en place"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# \xc9diter une ressource avec l'\xe9diteur par d\xe9faut\nkubectl edit deployment mon-deployment\n\n# D\xe9finir l'\xe9diteur (exemple avec vim)\nKUBE_EDITOR=\"vim\" kubectl edit deployment mon-deployment\n\n# Mettre \xe0 jour l'image d'un deployment\nkubectl set image deployment/mon-deployment nginx=nginx:1.21\n\n# Mettre \xe0 l'\xe9chelle un deployment\nkubectl scale deployment mon-deployment --replicas=5\n\n# Mettre en pause / reprendre un rollout\nkubectl rollout pause deployment/mon-deployment\nkubectl rollout resume deployment/mon-deployment\n\n# V\xe9rifier le statut d'un rollout\nkubectl rollout status deployment/mon-deployment\n\n# Voir l'historique des r\xe9visions\nkubectl rollout history deployment/mon-deployment\n\n# Revenir \xe0 la r\xe9vision pr\xe9c\xe9dente\nkubectl rollout undo deployment/mon-deployment\n\n# Revenir \xe0 une r\xe9vision sp\xe9cifique\nkubectl rollout undo deployment/mon-deployment --to-revision=2\n"})}),"\n",(0,o.jsx)(n.h2,{id:"techniques-de-filtrage-avanc\xe9es-",children:"Techniques de filtrage avanc\xe9es \ud83d\udd0d"}),"\n",(0,o.jsx)(n.h3,{id:"jsonpath",children:"JSONPath"}),"\n",(0,o.jsx)(n.p,{children:"JSONPath permet d'extraire des informations sp\xe9cifiques des objets Kubernetes :"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Obtenir uniquement les noms des pods\nkubectl get pods -o jsonpath='{.items[*].metadata.name}'\n\n# Obtenir les IPs des pods\nkubectl get pods -o jsonpath='{.items[*].status.podIP}'\n\n# Obtenir les noms et IPs (avec formatage)\nkubectl get pods -o jsonpath='{range .items[*]}{.metadata.name}{\"\\t\"}{.status.podIP}{\"\\n\"}{end}'\n\n# Obtenir les images des conteneurs\nkubectl get pods -o jsonpath='{.items[*].spec.containers[*].image}'\n\n# Obtenir les nodes et leur capacit\xe9 CPU\nkubectl get nodes -o jsonpath='{range .items[*]}{.metadata.name}{\"\\t\"}{.status.capacity.cpu}{\"\\n\"}{end}'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"custom-columns",children:"Custom Columns"}),"\n",(0,o.jsx)(n.p,{children:"Cr\xe9er un affichage personnalis\xe9 des ressources :"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Affichage personnalis\xe9 avec custom-columns\nkubectl get pods -o custom-columns=NAME:.metadata.name,STATUS:.status.phase,IP:.status.podIP\n\n# Afficher les nodes avec leur version\nkubectl get nodes -o custom-columns=NAME:.metadata.name,VERSION:.status.nodeInfo.kubeletVersion\n\n# Afficher les deployments avec leurs replicas\nkubectl get deployments -o custom-columns=NAME:.metadata.name,DESIRED:.spec.replicas,CURRENT:.status.replicas\n"})}),"\n",(0,o.jsx)(n.h2,{id:"ressources-utiles-",children:"Ressources utiles \ud83d\udcda"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/",children:"Documentation officielle kubectl"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/cheatsheet/",children:"Kubectl Cheat Sheet"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/jsonpath/",children:"JSONPath dans Kubernetes"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"conclusion-",children:"Conclusion \ud83c\udfaf"}),"\n",(0,o.jsx)(n.p,{children:"Kubectl est un outil puissant et flexible pour g\xe9rer des clusters Kubernetes. La ma\xeetrise de ces commandes et astuces permet de gagner en productivit\xe9 et en efficacit\xe9 au quotidien. La pratique r\xe9guli\xe8re est la cl\xe9 pour devenir expert avec kubectl."}),"\n",(0,o.jsx)(n.p,{children:"L'exploration des fonctionnalit\xe9s avanc\xe9es et la cr\xe9ation d'alias et scripts personnalis\xe9s peuvent automatiser les t\xe2ches r\xe9currentes. \ud83d\ude80"})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},28453(e,n,s){s.d(n,{R:()=>r,x:()=>c});var t=s(96540);const o={},l=t.createContext(o);function r(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(l.Provider,{value:n},e.children)}},85399(e){e.exports=JSON.parse('{"permalink":"/pr-preview/pr-19/blog/2025/11/21/06-orchestration/kubectl-commandes-essentielles","source":"@site/blog/06-orchestration/2025-11-21-kubectl-commandes-essentielles.md","title":"Kubernetes : kubectl","description":"Les commandes kubectl indispensables pour g\xe9rer efficacement des clusters Kubernetes au quotidien.","date":"2025-11-21T00:00:00.000Z","tags":[{"inline":true,"label":"Kubernetes","permalink":"/pr-preview/pr-19/blog/tags/kubernetes"},{"inline":true,"label":"Orchestration","permalink":"/pr-preview/pr-19/blog/tags/orchestration"},{"inline":true,"label":"Devops","permalink":"/pr-preview/pr-19/blog/tags/devops"},{"inline":true,"label":"kubectl","permalink":"/pr-preview/pr-19/blog/tags/kubectl"}],"readingTime":4.9,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"Kubernetes : kubectl","description":"Les commandes kubectl indispensables pour g\xe9rer efficacement des clusters Kubernetes au quotidien.","tags":["Kubernetes","Orchestration","Devops","kubectl"]},"unlisted":false,"prevItem":{"title":"Ansible : Vault","permalink":"/pr-preview/pr-19/blog/2025/11/28/08-iac/ansible-vault"},"nextItem":{"title":"Loki","permalink":"/pr-preview/pr-19/blog/2025/11/21/07-monitoring/loki-logs-management"}}')}}]);